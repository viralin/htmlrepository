$(function(){function a(){if(!z)if(null==history.state){var b=window.location.pathname.split("/").splice(2).join("/");changeState(b,"logo-design-online/"+b),a()}else{var f=history.state.name.split("/"),h=function(a){0==$("#company-name").val().trim().length&&$("#company-name").val("Your company"),f[0]?f[1]||($(".panel-three").hide(),$(".panel-four").hide()):($(".panel-two").hide(),$(".panel-three").hide(),$(".panel-four").hide(),$("#nextBtnStep1").show()),0==$(".keyword-lists").children().length?g(function(){c(a,f)}):c(a,f)};"go-back"==f[1]?history.back():""==f[0]||("choose-your-industry"==f[0]?h():"edit"==f[0]?(d(f[1],f[2]),"purchase"==f[2]&&($(".template-back").remove(),$("#nextBtnStep1").remove())):h(function(){var a=$("[data-url='"+f[0]+"']")||$("[data-id='"+f[0]+"']");a.attr("data-id")&&("edit"!=f[3]&&(a.attr("data-seo-keyword")&&$("meta[name=keywords]").attr("content",a.attr("data-seo-keyword")),a.attr("data-seo-description")&&$("meta[name=description]").attr("content",a.attr("data-seo-description")),a.attr("data-seo-title")&&$("title").text(a.attr("data-seo-title")),$("#e1").select2("val",a.attr("data-url")),k(a.attr("data-id"),function(){if("edit"==f[2])q(function(){0==t.indexOf("logo_")?(addWaitingOverlay(),m(f,t,function(){removeWaitingOverlay()})):(addWaitingOverlay(),m(f,"/getUserLogoImage?id="+u+"&rand="+Math.random(),function(){removeWaitingOverlay()}))});else if(f[1]){var a=$("[data-seo-url='"+f[1]+"']")||$("[data-id='"+f[1]+"']");addWaitingOverlay(),doPost("/getLogoDetails",{id:a.attr("data-id")},function(b){removeWaitingOverlay(),a.attr("data-seo-keyword")&&$("meta[name=keywords]").attr("content",a.attr("data-seo-keyword")),a.attr("data-seo-description")&&$("meta[name=description]").attr("content",a.attr("data-seo-description")),a.attr("data-seo-title")&&$("title").text(a.attr("data-seo-title")),200==b.status?q(function(){s=b.logo.id,m(f,"/getLogoImage?id="+b.logo.s3_logo_url)}):bootbox.alert(b.msg)},function(a){removeWaitingOverlay(),console.log(a),bootbox.alert("string"==typeof a?a:"Server Error.")})}else $("#actualLogoEditorPanelBody").hide(),$("#logoListerPanelBody").show(),q(function(){})})),"save"==f[2]&&e("#accordionThree",function(){window.editorFrame&&o(function(a){$(".logo-card").find(".flip-card-template").hide();window.location.hash.split("/");$(".wiz-three").html("  <a class='text-center' href='"+window.location+"' aria-expanded='true'><span class='badge hidden-xs'>3</span>Choose/Edit Template</a>"),$(".wizard-steps .wiz-three a").css("cursor","pointer"),$(".wiz-four").html("    <a class='text-center' href='"+window.location+"' aria-expanded='true'><span class='badge hidden-xs'>4</span>Save & Download</a>"),$(".wizard-steps .wiz-four a").css("cursor","pointer"),$("#signinModal").modal("hide"),showToast("Your logo is saved in â€œMy Designs.","success"),window.editorFrame.ignoreSaveWarning(),window.editorFrame.saveAction(!1,function(a){"purchase"==r?window.location="/my-designs":i(a)})},void 0,function(){})},function(){}))}))}}function b(){$("head").append($("#allFonts").html()),$(".tooltip1").tooltip(),$("#footer").addClass("create-logo-footer");$(window).height();$(window).scroll(function(){$(".create-logo-footer").show()}),$("#company-name").focus(),$("#hidePurchasedLogoCheckBox").change(function(){$("#hidePurchasedLogoCheckBox").is(":checked")?$('[data-status="Purchased"]').hide():$('[data-status="Purchased"]').show()}),$(document).on("keyup","#company-name",function(){""==$("#company-name").val().trim()?($(".identity-next").slideUp(),$(".identity-save").fadeIn()):$("#accordionOne").prev().find(".panel-title-active").is(":visible")?($(".identity-next").slideUp(),$(".identity-save").slideDown()):($("#nextBtnStep1").show(),$(".identity-next").slideDown(),$(".identity-save").slideUp())}),$("#backToChooseCategory").click(function(){p("choose-your-industry")}),$("#nextBtnStep1").on("click",function(a){a.preventDefault(),x=0,$(".wizard-steps .wiz-one a").css("cursor","pointer"),w=[],p("choose-your-industry")}),$(".wiz-one").click(function(a){0!=x?bootbox.confirm("The progress of the Logo will be discarded.<br/> Do you want to continue?",function(a){a&&(window.location="#",$(".panel-three").hide(),$(".panel-two").hide(),$("#company-name").val(""),$("#company-tagline").val(""),$("#nextBtnStep1").hide())}):window.location="/logo-design-online"}),$("#templateBack").click(function(a){a.preventDefault(),bootbox.confirm("The current modifications will be <b>erased</b>.<br/>Do you want to continue?",function(a){1==a&&($("html,body").animate({scrollTop:$("#accordionThree").prev(".panel-heading").offset().top},1e3),$("#accordionTwo").addClass("in"),$(".panel-four").hide(),$("#actualLogoEditorPanelBody").hide(),$("#logoListerPanelBody").show(),p(y))})}),$("#loadMoreLogosBtn,#loadMoreLogosBtn2").click(function(a){a.preventDefault(),addWaitingOverlay(),doPost("/getMoreLogos",{excluded:w},function(a){removeWaitingOverlay(),200==a.status?(-1==w.indexOf(a.category.category_id)&&w.push(a.category.category_id),j(a)):bootbox.alert(a.msg)},function(a){removeWaitingOverlay(),console.log(a),bootbox.alert("string"==typeof a?a:"Server Error.")})}),$("#templateSave").click(function(a){var b;$(".editLogoItem");history.state?b=history.state.name:History?b=History.getState().data:(console.log("Error: Please update your browser!!"),b="");var c=b.split("/");"edit"==c[2]&&(c[3]="edit"),c[2]="save",p(c.join("/")),$(".unlimited-use-download").hide(),$(".unlimited-use").show(),a.preventDefault()}),$(".identity-save").on("click",function(a){a.preventDefault(),$("#accordionOne").slideUp(),$("#nextBtnStep1").click(),void 0!=window.editorFrame.fillCompanyAndSloganNames&&window.editorFrame.fillCompanyAndSloganNames($("#company-name").val(),$("#company-tagline").val())}),$("#downloadNow").click(function(){var a=function(){e("#accordionFour",function(){var a=getUser();addWaitingOverlay(),doPost("/downloadLogo",{id:t,data:$("#logoPreviewImg").attr("src"),company:$("#company-name").val(),name:void 0==a||void 0==a.first_name||null==a.first_name?"":a.first_name},function(a){removeWaitingOverlay(),200==a.status?bootbox.alert("We will sent the logo to your email account."):bootbox.alert("Error: "+a.msg)},function(a){removeWaitingOverlay(),console.log(a),bootbox.alert("string"==typeof a?a:"Server Error.")})})};isLoggedIn()?a():bootbox.alert("Sign in and the logo will be sent to your email address instantly.",function(b){a()})}),$("#checkoutNow").click(function(){window.location="/logo-design-online/checkout"}),$("#buyLogo").click(function(a){a.preventDefault(),"purchase"==r?bootbox.alert("Your modification to this purchased item is finished.",function(a){h(!1)}):addLogoToShoppingCart(t,function(){h(!1)})}),$("#createBusinessCardOnBottom").click(function(a){window.location="/design-business-card-online/use/"+u,a.preventDefault()}),addPopState(a),a()}function c(a,b){$(".panel-two").is(":visible")&&"choose-your-industry"!=b[0]?a?a():$.noop():($(".panel-two").show(),$(".wizard-steps li").removeClass("active"),$(".wiz-two").addClass("active"),$("html,body").animate({scrollTop:$("#accordionTwo").prev(".panel-heading").offset().top-150},1e3).promise().done(function(){a?a():$.noop()}),$("#accordionTwo").addClass("in"),$("#industry-key-search").focus()),f()}function d(a,b,c){v=!0,r=b,t=a;var d=function(a,b){$("#company-name").val(a.logo.company_name),$("#company-tagline").val(a.logo.slogan),s=a.logo.base_logo_id,u=a.logo.s3_logo_url||a.logo.url,changeState("/go-back","/go-back"),p(formatUrl(a.category.url,a.category.id)+"/"+formatUrl(a.logo.base_logo_url,s)+"/edit")};if(1==isLoggedIn(!0)){addWaitingOverlay();var e,f="purchase"==b;e=1==f?"/getPurchasedItemDetails":"/getUserLogoDetails",doPost(e,{id:a},function(a){removeWaitingOverlay(),200==a.status?d(a,f):bootbox.alert(a.msg)},function(a){removeWaitingOverlay(),console.log(a),bootbox.alert("string"==typeof a?a:"Server Error.")})}else{var g={logo:retrieveJson(a)};doPost("/getCategory",{id:g.logo.base_item_id},function(a){200==a.status?(g.category=a.category,doPost("/getLogoDetails",{id:g.logo.base_item_id},function(a){200==a.status?(g.logo.base_logo_url=a.logo.url,d(g)):(console.log(a),bootbox.alert("Can't get base logo: "+a.msg))},function(a){removeWaitingOverlay(),console.log(a),bootbox.alert("string"==typeof a?a:"Server Error.")})):(console.log(a),bootbox.alert("Can't get category: "+a.msg))},function(a){removeWaitingOverlay(),console.log(a),bootbox.alert("string"==typeof a?a:"Server Error.")})}}function e(a,b,c){if(1==isLoggedIn(!0))return void b();var d=!1,e=$("<div/>").appendTo($(a).css("position","relative")),f=$("#newLoginModal").text(),g=Mustache.render(f,{});return e.append(g),e.find(".close").click(function(){$("#signinModal").modal("hide")}),$("#signinModal").modal({backdrop:"static",keyboard:!1}),$("#signinModal").on("hidden.bs.modal",function(a){e.remove(),d||(c?c():$.noop())}),e.find("#signupForm1").validate(),e.find("#loginBtn").click(function(a){a.preventDefault(),addWaitingOverlay(),signin($("#popupSignInUsername").val(),$("#popupSignPassword").val(),function(a){removeWaitingOverlay(),showLogoutOptions(),updateMyDesignsCount(!0),updateCartCount(!0),d=!0,void 0!=b&&b()},function(a){removeWaitingOverlay(),console.log(a),bootbox.alert("string"==typeof a?a:"Server Error: "+a.error)})}),e.find("#headerRecover2").click(function(a){a.preventDefault(),$(".modal-content-signup").hide(),$(".modal-content-signin").hide(),$(".modal-content-forgot").show(),$(".signin-form").hide(),$(".recover-form").show()}),e.find("#popupSendRecoveryBtn").click(function(a){a.preventDefault(),addWaitingOverlay(),doPost("/forgotPassword",{email:$("#popupForgotUsername").val()},function(a){removeWaitingOverlay(),200==a.status?(bootbox.alert("A link has been sent to the email to reset your password"),$(".modal-content-signin").show(),$(".modal-content-signup").hide(),$(".modal-content-forgot").hide()):(console.log(a),bootbox.alert(a.msg))},function(a){removeWaitingOverlay(),console.log(a),bootbox.alert("string"==typeof a?a:"Server Error: "+a.error)})}),e.find(".createAccountBtn").click(function(a){a.preventDefault(),$("#signupForm1").valid()&&(addWaitingOverlay(),signup({email:$("#popupSignUpUsername").val(),password:$("#popupSignPasswordConfirm").val()},function(){removeWaitingOverlay(),$(".modal-content-signin").show(),$(".modal-content-signup").hide(),$("#popupSignInUsername").val($("#popupSignUpUsername").val()),$("#popupSignPassword").val($("#popupSignPasswordConfirm").val()),$("#signinModal #loginBtn").click()},function(a){removeWaitingOverlay(),bootbox.alert(a)},!1))}),e.find("#headerSignIn1").click(function(a){a.preventDefault(),$(".modal-content-signin").show(),$(".modal-content-signup").hide(),$(".modal-content-forgot").hide()}),e.find("#headerSignUp2").click(function(a){a.preventDefault(),$(".modal-content-signin").hide(),$(".modal-content-signup").show(),$(".modal-content-forgot").hide()}),e.find("#headerSignIn3").click(function(a){a.preventDefault(),$(".modal-content-signin").show(),$(".modal-content-signup").hide(),$(".modal-content-forgot").hide()}),e}function f(){void 0!=window.editorFrame&&void 0!=window.editorFrame.fillCompanyAndSloganNames&&(window.editorFrame.fillCompanyAndSloganNames($("#company-name").val(),$("#company-tagline").val()),$(".panel-four").is(":visible"))}function g(a,b){doPost("/listCategories",{type:"LOGO"},function(b){200==b.status?($(".keyword-lists").children().remove(),b.categories.forEach(function(a,b){$(".keyword-lists").append('<li data-seo-title="'+a.seo_title+'" data-seo-description="'+a.seo_description+'" data-seo-keyword="'+a.seo_keyword+'" class="key-list col-md-4 col-sm-4 col-xs-6 categoryItem" data-id="'+a.id+'" data-name="'+a.category_name+'" data-url="'+formatUrl(a.url,a.id)+'"><a href="#"><h1>'+a.category_name+"</h1></a></li>"),$("#e1").append('<option value="'+formatUrl(a.url,a.id)+'">'+a.category_name+"</option>")}),$(".categoryItem").click(function(a){if(a.preventDefault(),"purchase"==r)showToast("You can't change the category for purchased items.");else{var b=this,c=function(){$(".wiz-two").html(" <a class='text-center' href='"+window.location+"' target='_self' aria-expanded='false'><span class='badge hidden-xs'>2</span>Choose your Industry</a>"),$(".wizard-steps .wiz-two a").css("cursor","pointer"),y=$(b).attr("data-url"),p($(b).attr("data-url"))};window.editorFrame?bootbox.confirm("The current modifications will be <b>erased</b>.<br/>Do you want to continue?",function(a){1==a&&c()}):c()}}),$("#e1").select2(),$("#e1").on("change",function(a){p(a.val)}),void 0==a?$.noop():a(b)):200==b.status||bootbox.alert(b.msg)},function(a){b(a),console.log(a),bootbox.alert("string"==typeof a?a:"Server Error.")})}function h(a){addWaitingOverlay(),doPost("/listCards",{count:6},function(b){200==b.status?($("#bcardListModel").modal("show"),$("#bcardListModel").on("shown.bs.modal",function(){var c=$("#cards-list");c.empty();for(var d=0;d<b.cards.length;d++){var e=$('<a href="/design-business-card-online/use/'+u+"/"+formatUrl(b.cards[d].url,b.cards[d].id)+'" style="text-decoration: none"><div class="col-md-4 download-hover-card" id="cardPrev'+b.cards[d].id+'"><span class="flip-template-buy">           <span class="flip-edit-buy flip-edit-buy-download">               <button class="click-custom">Click to Customize</button>           </span>        </span></div></a>');$(c).append(e),$(".download-hover-card").hover(function(){$(this).find(".flip-template-buy").fadeIn(300);var a=$(this).width()+4;$(this).find(".flip-template-buy").css("width",a)},function(){$(this).find(".flip-template-buy").fadeOut(100)}),updateCardImage("#cardPrev"+b.cards[d].id,"/getCardImage?id="+b.cards[d].s3_front_card_url,u)}window.editorFrame.ignoreSaveWarning(),a?($("#downloadNow").show(),$("#checkoutNow").hide()):($("#checkoutNow").show(),$("#downloadNow").hide()),"purchase"==r&&$("#checkoutNow").hide()})):201==b.status?bootbox.alert("No cards available"):bootbox.alert("Error: "+b.msg),removeWaitingOverlay()},function(a){removeWaitingOverlay(),console.log(a),bootbox.alert("Server Error.")})}function i(a){$("#logoPreviewImg").attr("src",a),$("#logoPreviewImg2").attr("src",a),$(".card-company-name").text($("#company-name").val()),$(".wizard-steps li").removeClass("active"),$(".wiz-four").addClass("active"),$("#accordionFour").addClass("in"),$(".panel-four").show(),updateCardImage(".buss-card-image","/img/cardPreview.svg",u),$(".business-card-logo").slideDown(),$(".create-logo").css("min-height","600px"),$("html,body").animate({scrollTop:$(".panel-four").offset().top-65},1e3),addWaitingOverlay(),doPost("/getPriceForItem",{type:"LOGO",itemId:t,country:$(".top-countries-list").val()},function(a){if(removeWaitingOverlay(),200==a.status){var b=Number(parseFloat(a.price)).toFixed(2)+" "+a.currency;$(".purchase-limit").text(b),$(".purchase-discount-limit").text(a.currency+" "+Number(discountAmt(flatDiscountPercentageLogo,a.price)).toFixed(2))}else if(201==a.status){var c=Number(a.price).toFixed(2),b=c+" "+a.currency;$(".purchase-limit").text(b),$(".purchase-discount-limit").text(a.currency+" "+Number(discountAmt(flatDiscountPercentageLogo,a.price)).toFixed(2))}else console.log(a),bootbox.alert("Error: This country is not supported at the moment.")},function(a){$(".purchase-limit").text("0"),$(".logoAmt").text("0"),removeWaitingOverlay(),console.log(a)})}function j(a){for(var b,c=$("#company-name").val(),d=$("#company-tagline").val(),e=0;e<a.logos.length;e++)b="purchase"!=r?"Active"==a.logos[e].status?$('<div class="col-md-3 layoutList link" data-status="'+a.logos[e].status+'" data-id="'+a.logos[e].id+'" data-category-id="'+a.logos[e].category_id+'" data-url="'+a.logos[e].s3_logo_url+'" data-seo-url="'+formatUrl(a.logos[e].url,a.logos[e].id)+'" data-category-url="'+formatUrl(a.logos[e].category_url,a.logos[e].category_id)+'"><ul class="template-list">       <li class="">             <div class="col-md-3 template_logos"><div class="layoutLogos"><div class="logoPrevInList'+a.logos[e].id+'"></div></div></div>                <span class="flip-template" style="display: none;">                          <span class="flip-edit editLogoItem edit_logo_item_'+a.logos[e].id+'" data-id="'+a.logos[e].id+'" data-category-id="'+a.logos[e].category_id+'" data-category-url="'+formatUrl(a.logos[e].category_url,a.logos[e].category_id)+'" data-url="'+a.logos[e].s3_logo_url+'" data-seo-url="'+formatUrl(a.logos[e].url,a.logos[e].id)+'"                           data-seo-title="'+a.logos[e].seo_title+'" data-seo-description="'+a.logos[e].seo_description+'" data-seo-keyword="'+a.logos[e].seo_keyword+'">                           <i class="fa fa-pencil-square-o"></i>                              <span>Edit</span>                          </span>                            <span class="flip-buy buyLogoItem" data-url="'+a.logos[e].s3_logo_url+'" data-category-id="'+a.logos[e].category_id+'" data-id="'+a.logos[e].id+'">                               <i class="fa fa-shopping-cart"></i>                                <span>Buy</span>                           </span>                   </span>        </li>   </ul></div></div>'):$('<div class="col-md-3 layoutList link" data-status="'+a.logos[e].status+'" data-id="'+a.logos[e].id+'" data-category-id="'+a.logos[e].category_id+'" data-url="'+a.logos[e].s3_logo_url+'"><ul class="template-list">       <li>         <span class="purchasedLabel">Purchased</span>           <div class="col-md-3 template_logos"><div class="layoutLogos"><div class="logoPrevInList'+a.logos[e].id+'"></div></div></div>           <span class="flip-template" style="display: none;">                     <label>This logo is already purchased.</label>           </span>        </li>   </ul></div></div>'):$('<div class="col-md-3 layoutList link" data-status="Purchased" data-id="'+a.logos[e].id+'" data-category-id="'+a.logos[e].category_id+'" data-url="'+a.logos[e].s3_logo_url+'"><ul class="template-list">       <li class="">             <div class="col-md-3 template_logos"><div class="layoutLogos"><div class="logoPrevInList'+a.logos[e].id+'"></div></div></div>           <span class="flip-template" style="display: none;">                     <label>You can\'t change design after purchase.</label>           </span>        </li>   </ul></div></div>'),$(".logos").append(b),l(a.logos[e].id,"/getLogoImage?id="+a.logos[e].s3_logo_url,c,d);$(".leftPanecontents [data-status=Active] .flip-template").remove();var f=function(){x++;var a=this,b=window.location.pathname.replace("/logo-design-online/","").split("/"),c=function(){b[1]!=$(a).attr("data-seo-url")?(b[1]=$(a).attr("data-seo-url"),b[0]=$(a).attr("data-category-url"),b.splice(2),p(b.join("/"))):showToast("You can reset the logo by clicking reset button in editor","info")};$("#svgedit").is(":visible")&&b[1]!=$(a).attr("data-seo-url")?bootbox.confirm("The current modifications will be <b>erased</b>.<br/>Do you want to continue?",function(a){1==a&&($("html,body").animate({scrollTop:$("#accordionThree").prev(".panel-heading").offset().top},1e3),$("#accordionTwo").addClass("in"),c())}):c()};$(".layoutList[data-status=Active]").click(function(a){f.call(this),a.preventDefault(),a.stopPropagation()}),$("#actualLogoEditorPanelBody .editorLayout .layoutList").removeClass("col-md-3").addClass("col-md-6"),$(".editLogoItem").click(function(a){f.call(this),a.preventDefault(),a.stopPropagation()}),$(".buyLogoItem").click(function(a){a.preventDefault(),n($(this).attr("data-id"))}),$(".template-list li").hover(function(){$(this).addClass("active"),$(this).find(".flip-template").fadeIn(300)},function(){$(this).find(".flip-template").fadeOut(100),$(this).removeClass("active")}),$(".template-filter-li").on("click",function(){$(".template-filter-li").removeClass("active"),$(this).addClass("active")}),$("#step1NextBtn").click(function(){$("#logoMakerStep2").click()}),$("#hidePurchasedLogoCheckBox").change()}function k(a,b){w.indexOf(a)<0?(addWaitingOverlay(),doPost("/listLogos",{category_id:a},function(c){$(".logos").empty(),w=[a],200==c.status?j(c):201==c.status||console.log(c.msg),removeWaitingOverlay(),b?b():$.noop()},function(a){removeWaitingOverlay(),console.log(a),bootbox.alert("string"==typeof a?a:"Server Error.")})):b?b():$.noop()}function l(a,b,c,d){var e={onLoad:function(a,b){b?console.log(b):($(a.root()).attr("height","100%"),$(a.root()).attr("width","100%"),$("#Company_Name",a.root()).text(c),$("#Tagline",a.root()).text(d),$("font",a.root()).remove(),$("style",a.root()).after($("#allFonts").html()))},changeSize:!0};$(".logoPrevInList"+a).svg(),$(".logoPrevInList"+a+":first").svg("get").load(b,e),$(".logoPrevInList"+a+":last").svg("get").load(b,e)}function m(a,b,c){$("#actualLogoEditorPanelBody").show(),$("#logoListerPanelBody").hide();var d="save"!=a[2];addWaitingOverlay(),window.editorFrame||($("#iframeHolder").prepend('<iframe src="/svgedit/logo_editor_frame.html?v='+version+'" name="editorFrame" style="margin: 0px; width: 100%; border: none; min-height: 475px" id="svgedit"></iframe>'),d=!0);var e=function(){removeWaitingOverlay();var a=function(){removeWaitingOverlay(),d?(addWaitingOverlay(),window.editorFrame.setParent(window),window.editorFrame.initCommon("LOGO"),window.editorFrame.loadImage(b,function(){window.editorFrame.fillCompanyAndSloganNames($("#company-name").val(),$("#company-tagline").val()),c?c(b):$.noop()},function(){removeWaitingOverlay()})):c?c(b):$.noop()};addWaitingOverlay(),window.editorFrame.svgedit.browser.isGecko()||window.editorFrame.svgedit.browser.isIE()?setTimeout(a,2048):a()};window.editorFrame.loadImage?e():$("#svgedit").load(e)}function n(a){s=a;var b=$(".logoPrevInList"+a).children();$(b).attr("xmlns:sodipodi","http://www.w3.org/1999/xlink"),$(b).attr("xmlns:inkscape","http://www.inkscape.org/namespaces/inkscape"),o(function(){addLogoToShoppingCart(t,function(){window.location="/checkout"})},$(".logoPrevInList"+a).svg("get").toSVG())}function o(a,b,c){var d=function(){v=!0,a(u)},e={url:void 0==b?window.editorFrame.getSvgString():b,base_item_id:s,company_name:$("#company-name").val(),slogan:$("#company-tagline").val()};if(1==isLoggedIn(!0)){addWaitingOverlay(!0);var f,g="purchase"==r;1==v?(e.id=t,f=0==g?"/updateUserLogo":"/updatePurchasedItem"):f="/addUserLogo",doPost(f,e,function(a){removeWaitingOverlay(),200==a.status?(0==v&&(t=a.insertId),u=a.url,updateCartCount(!0),updateMyDesignsCount(!0),d()):bootbox.alert(a.msg)},function(a){removeWaitingOverlay(),console.log(a),c?c():$.noop(),bootbox.alert("string"==typeof a?a:"Server Error.")})}else{var h,i;1==v?i=u:(h=(new Date).getTime(),t=h,i="logo_"+h,u=i),saveItemLocally("logos",i,e),updateCartCount(!1),updateMydesignsCount(!1),d()}}function p(b){pushState(b,"/logo-design-online/"+b),a()}function q(a){$(".panel-three").is(":visible")?($("html,body").scrollTop($("#accordionThree").prev(".panel-heading").offset().top-10),a?a():$.noop()):($(".wizard-steps li").removeClass("active"),$(".wiz-three").addClass("active"),$("#accordionThree").addClass("in"),$(".panel-three").show(),$("#s2id_e1").focus(),$("html,body").animate({scrollTop:$("#accordionThree").prev(".panel-heading").offset().top-65},1e3).promise().done(function(){a?a():$.noop()}))}var r,s,t,u,v=!1,w=[],x=0,y="",z=!1;$(window).on("hashAdding",function(a){z=!0}),$(window).on("hashRemoving",function(a){z=!1}),$(document).on("logoSavedFromLogin",function(a){t==a.localId&&(t=a.id)}),$("#industry-key-search").on("keyup",function(){null!=$(this).val()&&""!=$(this).val()?doPost("/searchCategories",{name:"%"+$(this).val()+"%"},function(a){if(200==a.status){$(".keyword-lists li").hide();for(var b=0;b<a.categories.length;b++)$(".keyword-lists li").each(function(){var c=$(this).find("a").text();-1!==c.indexOf(a.categories[b].category_name)&&$(this).show()})}else console.log(a),$(".keyword-lists li").hide()},function(a){removeWaitingOverlay(),console.log(a)}):$(".keyword-lists li").show()}),$("#createAnotherLogo").click(function(a){var b=(window.location.hash.split("/"),window.location.pathname.replace("/logo-design-online/","").split("/"));s="",t="",v=!1,u="",w=[],p(b[0])}),$(".logo-card").hover(function(){$(this).find(".flip-card-template").show()},function(){$(this).find(".flip-card-template").hide()}),b()});