function touchHandler(a){"use strict";var b,c=a.changedTouches,d=c[0],e="";switch(a.type){case"touchstart":e="mousedown";break;case"touchmove":e="mousemove";break;case"touchend":e="mouseup";break;default:return}b=document.createEvent("MouseEvent"),b.initMouseEvent(e,!0,!0,window,1,d.screenX,d.screenY,d.clientX,d.clientY,!1,!1,!1,!1,0,null),c.length<2&&(d.target.dispatchEvent(b),a.preventDefault())}function addBorderElement(){var a=$("#canvasBackground"),b=$("#canvasBackground2");if(0==b.length){var c='<svg id="canvasBackground2" width="640px" height="480px" x="640px" y="480px" overflow="none" style="pointer-events:none"><rect id="addedBorderDesign" x="10px" y="10px" stroke-dasharray="5,5,5" stroke-opacity="0.5" stroke="#FF0000" stroke-width="2px" fill="#FFFFFF" fill-opacity="0" style="pointer-events:none"></rect></svg>';b=$(c)}b.attr("width",a.attr("width")),b.attr("height",a.attr("height")),b.attr("x",a.attr("x")),b.attr("y",a.attr("y")),a.parent().append(b),a.attr("width",a.attr("width")),a.attr("height",a.attr("height")),a.attr("x",a.attr("x")),a.attr("y",a.attr("y")),$("#addedBorderDesign").attr("width",$("#canvasBackground2").attr("width")-20),$("#addedBorderDesign").attr("height",$("#canvasBackground2").attr("height")-20),$("#svgcontent").attr("overflow","invisible")}function populateLayers(){svgCanvas.clearSelection();for(var a=$("#layerlist tbody").empty(),b=$("#selLayerNames").empty(),c=svgCanvas.getCurrentDrawing(),d=c.getCurrentLayerName(),e=svgCanvas.getCurrentDrawing().getNumLayers(),f=$.getSvgIcon("eye");e--;){var g=c.getLayerName(e),h=$('<tr class="layer">').toggleClass("layersel",g===d),i=$('<td class="layervis">').toggleClass("layerinvis",!c.getLayerVisibility(g)),j=$('<td class="layername">'+g+"</td>");a.append(h.append(i,j)),b.append('<option value="'+g+'">'+g+"</option>")}if(void 0!==f){var k=f.clone();$("td.layervis",a).append(k),$.resizeSvgIcons({"td.layervis .svg_icon":14})}$("#layerlist td.layername").mouseup(function(a){$("#layerlist tr.layer").removeClass("layersel"),$(this.parentNode).addClass("layersel"),svgCanvas.setCurrentLayer(this.textContent),a.preventDefault()}).mouseover(function(){toggleHighlightLayer(this.textContent)}).mouseout(function(){toggleHighlightLayer()}),$("#layerlist td.layervis").click(function(){var a=$(this.parentNode).prevAll().length,b=$("#layerlist tr.layer:eq("+a+") td.layername").text(),c=$(this).hasClass("layerinvis");svgCanvas.setLayerVisibility(b,c),$(this).toggleClass("layerinvis")});for(var l=5-$("#layerlist tr.layer").size();l-- >0;)a.append('<tr><td style="color:white">_</td><td/></tr>')}function changeZoom(a){var b=a.value/100;if(.001>b)return void(a.value=.1);var c=svgCanvas.getZoom(),d=$("#workarea");svgCanvas.zoomChanged(window,{width:0,height:0,x:(d[0].scrollLeft+d.width()/2)/c,y:(d[0].scrollTop+d.height()/2)/c,zoom:b},!0)}function initCommon(a){function b(){ignoreSaveWarning(),$("body").on("svgChanged",function(){parentObj.handleSvgChange&&parentObj.handleSvgChange()}),$(document).on("keydown",function(a){8!==a.which||$(a.target).is("input, textarea")||a.preventDefault()}),$("#btnAddText").off().click(function(a){svgCanvas.setDefaultFontSize(13),addTextHard("Sample Text"),a.stopPropagation()}),$("#btnUndo").off().click(function(a){1==svgCanvas.undoMgr.undo()?populateLayers():(showToast("No Undo available"),a.stopPropagation()),a.preventDefault()}),$("#btnRepaint").off().click(function(){parentObj.repaint()}),$("#btnRedo").off().click(function(a){1==svgCanvas.undoMgr.redo()?populateLayers():(showToast("No Redo available"),a.stopPropagation()),a.preventDefault()}),$("#comboFontSize").off().change(function(a){$(svgCanvas.getSelectedElems()).attr("class",""),svgCanvas.setFontSize(parseInt(this.value)),a.stopPropagation()});for(var b=5;180>=b;b++)$("#comboFontSize").append("<option>"+b+"</option>");var f=parentObj.getSupportedFonts();$("#preview").children().remove();for(var b=0;b<f.length;b++){var h,i;"string"==typeof f[b]?(h=f[b],i=f[b]):(h=f[b].name,i=f[b].value),$("#preview").append('<tr><td style="font-family:'+i+'" data-value="'+i+'" data-alias="'+f[b].aliases+'">'+h+"</td></tr>")}if($("#preview td").off().mousedown(function(a){$("#fontPreviewList").html($(this).text()+"<span class='fontArrow'></span>"),$(svgCanvas.getSelectedElems()).attr("class",""),svgCanvas.setFontFamily($(this).attr("data-value"))}),$("#previewHolder").hide(),$("#fontPreviewList").off().click(function(a){$("#previewHolder").show()}),$("body").mousedown(function(a){a.target!==$("#previewHolder")[0]&&$("#previewHolder").hide()}),$("#previewHolder").mousemove(function(a){a.stopPropagation()}),$("#btnSelect").off().click(function(a){svgCanvas.setMode("select"),a.stopPropagation()}),$("#unGroupBtn").off().click(function(a){a.preventDefault(),svgCanvas.ungroupSelectedElement(),a.stopPropagation()}),$("#groupBtn").off().click(function(a){a.preventDefault(),svgCanvas.groupSelectedElements(),a.stopPropagation()}),$("#btnDelete").off().click(function(a){svgCanvas.deleteSelectedElements(),a.stopPropagation()}),$("#insertImageToolBar").off().change(function(a){var b=this.files,c=(document.getElementById("result"),b[0]);if(c.type.match("image")){var d=new FileReader;d.addEventListener("load",function(a){var b=a.target,d=svgCanvas.selectorManager.selectors[0].selectedElement,e=svgCanvas.getSelectedElems(),f=b.result,g=function(){var a=$(d).attr("height"),b=$(d).attr("width");svgEditor.setImageURL(f),"image"!=d.tagName&&(d.outerHTML=d.outerHTML.replace(/use/g,"image")),addWaitingOverlay(),setTimeout(function(){$(d).attr("height",a),$(d).attr("width",b),svgCanvas.clearSelection(),svgEditor.updateCanvas(),removeWaitingOverlay()},10)};if("image/png"==c.type||"image/gif"==c.type){var h=new Image;h.src=f,h.onload=function(){$("body").append("<canvas id='canvasTmpForTrasparancyFix'></canvas>");var a=$("#canvasTmpForTrasparancyFix"),b=a[0].getContext("2d");if(a[0].width=h.width,a[0].height=h.height,b.fillStyle="#fff",b.fillRect(0,0,a[0].width,a[0].height),b.drawImage(h,0,0),f=$("#canvasTmpForTrasparancyFix")[0].toDataURL("image/jpeg",1),$("#canvasTmpForTrasparancyFix").remove(),"logo"==e[0].id||$(e).find("svg").length>0)if("undefined"!=typeof loadCard){"image/svg+xml"==c.type;loadCard(void 0,f,!1)}else g();else g();$("#insertImageToolBar").val("")}}else g()}),d.readAsDataURL(c)}else bootbox.alert("Please select an image");a.stopPropagation()}),$("#btnAddLogo").off().click(function(a){bootbox.dialog({title:"Insert Image",message:'Select Image: <input type="file" id="insertImage">',buttons:{success:{label:"OK",className:"btn-success",callback:function(){d()}}}}),a.stopPropagation()}),$("#view_grid_2").off().click(function(a){var b=function(a){setTimeout(function(){gridBtn?gridBtn():b(a+100)},a)};b(0),a.stopPropagation()}),$("#btnZoomIn").off().click(function(a){var b=svgCanvas.getZoom();changeZoom({value:b+5}),a.stopPropagation()}),$("#btnZoomOut").off().click(function(a){svgCanvas.getZoom();a.stopPropagation()}),$("#colorPicker").off().change(function(){e(this.jscolor)}),$("#btnBigPreview").off().click(function(a){getAsJPGDataUrl(1024,function(a){bootbox.dialog({title:"Preview",message:'<div align="center" ><img id="preview_img_div" src="'+a+'" style="border: 1px solid #ccc"/> <span class="flip-card-template-new" ></span></div>',buttons:{success:{label:"OK",className:"btn-success"}}})}),a.stopPropagation()}),setTimeout(function(){gridVisible||($("#view_grid_2").click(),gridVisible=!0),g()},1024),"PLAIN"==a){var j=decodeURIComponent(getURLParameterByName("docUrl")),k=decodeURIComponent(getURLParameterByName("type"));k&&"null"!=k||(k="Card"),$("#btnSave").removeClass("hide");var l=j;loadImage("/getUser"+k+"Image?id="+j+"&random="+(new Date).getTime(),function(){svgCanvas.zoomChanged(window,"canvas"),svgEditor.updateCanvas(),g(),gridVisible||($("#view_grid_2").click(),gridVisible=!0)}),$("#btnSave").off().click(function(){doPost("/updateUser"+k+"File",{url:l,content:getSvgString()},function(a){bootbox.alert("File successfully saved")},function(a){console.log(a),bootbox.alert("Error updating file.")})}),$("#btnReset").click(function(a){bootbox.confirm("<b style='color: red'>Warning!!</b><hr/>Reset will clear all modified actions. <br/>You <b>can't</b> restore these changes later with Undo button.<br/><br/>Are you sure to want to reset?",function(a){a&&resetImage()})})}else $(window).resize(function(a){svgCanvas.clearSelection(),svgCanvas.zoomChanged(window,"canvas"),"undefined"!=typeof fixZoom&&fixZoom()});if("LOGO"==a||"BC"==a?$("#btnPreview").off().click(function(a){getAsJPGDataUrl(300,function(a){bootbox.dialog({title:"Preview",message:'<div align="center" ><img id="preview_img_div" src="'+a+'" style="border: 1px solid #ccc"/> <span class="flip-card-template-new" ></span></div>',buttons:{success:{label:"OK",className:"btn-success"}}})}),a.stopPropagation()}):$("#btnPreview").off().click(function(a){getAsJPGDataUrl(300,function(a){var b=bootbox.dialog({title:"Preview",message:'<div align="center"><iframe style="border: none" id="zoomPreviewDiv" src="/product-preview/big-preview.html"></iframe><span class="flip-card-template-new" ></span></div>',buttons:{success:{label:"OK",className:"btn-success"}},show:!1});b.on("shown.bs.modal",function(){var b=$("#zoomPreviewDiv")[0].contentWindow,c=function(){b.initScalablePreview($,parentObj.frontImage,a,parentObj.frontParams,!1,void 0,window)};b.initScalablePreview?(window.addEventListener("message",function(a){$("#zoomPreviewDiv").height(a.data.height),$("#zoomPreviewDiv").width(a.data.width)},!1),c()):b.addEventListener("load",c,!1)}),b.modal("show")}),a.stopPropagation()}),"LOGO"==a)$("#text").keyup(function(a){a.preventDefault(),changeText(!0),a.stopPropagation()}),$("#applyCompanySlogan").off().click(function(a){a.preventDefault(),$("#company-name",parentObj.document).val($("#companyName").val()),$("#company-tagline",parentObj.document).val($("#sloganName").val()),fillCompanyAndSloganNames($("#companyName").val(),$("#sloganName").val()),a.stopPropagation()}),$("#btnReset").off().click(function(a){bootbox.confirm("<b style='color: red'>Warning!!</b><hr/>Reset will clear all modified actions. <br/>You <b>can't</b> restore these changes later with Undo button.<br/><br/>Are you sure to want to reset?",function(a){a&&(svgCanvas.clear(),loadImage(baseUrl,function(){fillCompanyAndSloganNames($("#company-name",parentObj.document).val(),$("#company-tagline",parentObj.document).val())}))}),a.stopPropagation()});else if("BC"==a)$("#btnReset").click(function(a){bootbox.confirm("<b style='color: red'>Warning!!</b><hr/>Reset will clear all modified actions. <br/>You <b>can't</b> restore these changes later with Undo button.<br/><br/>Are you sure to want to reset?",function(a){a&&resetImage()})}),$("#text").keyup(function(a){a.preventDefault(),changeText(!1)}),$("#btnUndo,#btnRedo").click(function(a){syncText(),a.stopPropagation(),a.preventDefault()});else{var m=10;$("#zoomIn").click(function(){changeZoom({value:100*svgCanvas.getZoom()+m})}),$("#zoomOut").click(function(){changeZoom({value:100*svgCanvas.getZoom()-m})}),$("#btnReset").click(function(a){bootbox.confirm("<b style='color: red'>Warning!!</b><hr/>Reset will clear all modified actions. <br/>You <b>can't</b> restore these changes later with Undo button.<br/><br/>Are you sure to want to reset?",function(a){a&&c()})})}}function c(){baseUrl?loadImage(baseUrl,void 0,void 0,!0):loadOtherProductImage(actualLogoUrl,actualBgUrl)}function d(a){if(window.File&&window.FileList&&window.FileReader){var b=document.getElementById("insertImage"),c=b.files[0];if(c){document.getElementById("result");if(c.type.match("image")){var d=new FileReader;d.addEventListener("load",function(a){var b=a.target;svgCanvas.embedImage(b.result,function(a){var b=svgCanvas.addSvgElementFromJson({element:"image",attr:{x:10,y:10,height:"100px",width:"100px","xlink:href":a}});svgCanvas.addCommandToHistory(new svgedit.history.InsertElementCommand(b))})}),d.readAsDataURL(c)}else bootbox.alert("Please select an image")}else showToast("No files selected")}else bootbox.alert("Your browser does not support File API")}function e(a){$(svgCanvas.getSelectedElems()).attr("class",""),svgCanvas.getSelectedElems().forEach(function(a,b){null!=a&&f(a)}),svgCanvas.setColor("fill","#"+a)}function f(a){if(a.removeAttribute("class"),a.childNodes.length>0)for(var b in a.childNodes)1==a.childNodes[b].nodeType&&f(a.childNodes[b])}function g(){svgCanvas.undoMgr.resetUndoStack()}b()}function saveAction(a,b){ignoreSaveWarning(),getAsJPGDataUrl(300,function(a){b(a)})}function loadSVGData(a,b,c){if(c||($(":eq(0)",a).attr("height",100),$(":eq(0)",a).attr("width",100)),"string"!=typeof a){var d=new XMLSerializer;a=ieSVGFix(d.serializeToString(a))}setSVGString(a),void 0!=b&&b(),svgCanvas.undoMgr.undoStack=[],svgCanvas.undoMgr.undoStackPointer=-1}function ignoreSaveWarning(){svgEditor.showSaveWarning=!1}function setSVGString(a){$("#svg_editor").show(),svgCanvas.clear(),svgCanvas.setSvgString(a),svgCanvas.zoomChanged(window,"canvas"),insertFonts()}function getSvgString(){var a=$(svgCanvas.getSvgString());a.attr("viewBox","0 0 "+svgCanvas.getResolution().w+" "+svgCanvas.getResolution().h);var b=new XMLSerializer,c=ieSVGFix(b.serializeToString(a.get()[0]));return oldSafariFix(c)}function setParent(a){parentObj=a}function setBaseImageUrl(a){baseUrl=a}function addTextHard(a,b){var c=svgCanvas.getNextId(),d=0,e=1;$("text").each(function(a,b){var c=parseFloat($(b).attr("font-size"));$.isNumeric(c)&&(d+=c,e++)});var f=d/e;9>=f&&(f=9);var g=svgCanvas.addSvgElementFromJson({element:"text",attr:{x:20,y:20,id:c,"font-family":"Times","class":"customText","font-size":f+"px",style:"pointer-events:inherit"}});svgCanvas.addCommandToHistory(new svgedit.history.InsertElementCommand(g)),$("#"+c).text(a),void 0!=b&&b(c)}function insertFonts(){$("font","#svgcontent").remove(),$("#fonts","#svgcontent").remove(),$("style[type='text/css']","#svgcontent").remove();var a=document.createElementNS("http://www.w3.org/2000/svg","style");a.innerHTML=$("#allFonts",parentObj.document).html();for(var b,c=a.childNodes,d=0;d<c.length;d++)if("style"==c[d].tagName){b=c[d];break}if($("defs","#svgcontent").length>0)$("defs","#svgcontent").append(b);else{var e=document.createElementNS("http://www.w3.org/2000/svg","defs");e.appendChild(b),$("#svgcontent").append(e)}}function getAsJPGDataUrl(a,b){var c=$(svgCanvas.getSvgString()),d=svgCanvas.getResolution(),e=d.w/d.h;1>e?c.attr("height",a*e):c.attr("height",a/e),c.attr("width",a),c.attr("viewBox","0 0 "+d.w+" "+d.h),c.attr("style","stroke-width: 0px; background-color: blue;");var f=new XMLSerializer,g=oldSafariFix(ieSVGFix(f.serializeToString(c[0])));$("#export_canvas").length&&$("#export_canvas").remove(),$("<canvas>",{id:"export_canvas"}).hide().appendTo("body");var h=$("#export_canvas")[0];try{canvg(h,g,{renderCallback:function(){var a=h.toDataURL("image/png");b(a)}})}catch(i){console.log(i),addWaitingOverlay(),doPost("/generateImage",{type:"card",width:200,height:100,quality:50,format:"jpeg",data:g},function(a){removeWaitingOverlay(),b(a)},function(a){removeWaitingOverlay(),console.log(a),showToast("Image preview is not supported in this browser."),b()})}}function oldSafariFix(a){for(;a.indexOf(" href=")>-1;)a=a.replace(" href=",' xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href=');return a}function updateLogoColors(a){var b=$("#Color1",a),c=$("#Color2",a),d=$("#Color3",a);b?(setFillColor("#color1",b),base_color1=b):base_color1=void 0,c?(setFillColor("#color2",c),base_color2=c):base_color2=void 0,d?(setFillColor("#color3",d),base_color3=d):base_color3=void 0}function loadCard(a,b,c,d){a&&setBaseImageUrl(a),isSvg=c,baseLogoImage=b;var e=function(b){var e=function(a){var e=function(){if(b){var a=$("#svgcontent #logo"),e={x:a.attr("x"),y:a.attr("y"),height:a.attr("height"),width:a.attr("width")};if(e.x||(e=a[0].getBBox()),a.length>0){a.remove(),svgCanvas.removeUnusedDefElems();var f=a.attr("transform");if(c)svgCanvas.importSvgString(b,{id:"logo",pos:e,transform:f},e),updateLogoColors(b);else{var g={x:e.x,y:e.y,width:e.width,height:e.height,id:"logo","xlink:href":b};f&&(g.transform=f);var h=svgCanvas.addSvgElementFromJson({element:"image",attr:g});svgCanvas.addCommandToHistory(new svgedit.history.InsertElementCommand(h))}svgedit.transformlist.resetListMap()}}d?d():$.noop()};a?loadSVGData(a,function(){fixZoom(),e()}):e()};a?0==a.indexOf("<svg")?e($(a)[0]):doGet(a,{},function(a){e(a)},function(a){console.log(a),showToast("Connection Error: Can't load card")},"text/plain"):e(void 0)};b&&c?b.indexOf("logo_")>=0?e(retrieveJson(b)):b.indexOf("<svg")>=0?e(b):doGet("/getUserLogoImage?id="+b+"&type="+encodeURIComponent("text/plain"),void 0,function(a){e(a)},function(a){e(void 0),console.log(a),showToast("Connection Error: Can't load logo for card")}):e(b)}function resetImage(){loadCard(baseUrl,baseLogoImage,isSvg,function(){parentObj.executeKeyUps()})}function syncText(){parentObj.changeTextOfThis&&(parentObj.changeTextOfThis("#cardAL2",$("#address2").text()),parentObj.changeTextOfThis("#cardAL1",$("#address1").text()),parentObj.changeTextOfThis("#cardPhone",$("#mobile").text()),parentObj.changeTextOfThis("#cardEmail",$("#email").text()),parentObj.changeTextOfThis("#cardWebSite",$("#website").text()),parentObj.changeTextOfThis("#cardTitle",$("#designation").text()),parentObj.changeTextOfThis("#cardName",$("#name").text()))}function fixZoom(){changeZoom({value:220})}function changeText(a){if(a){var b=$(svgCanvas.getSelectedElems()[0]);switch(b.attr("id")){case"Company_Name":$("#company-name",parentObj.document).val($("#text").val());break;case"Tagline":$("#company-tagline",parentObj.document).val($("#text").val())}}else if(parentObj.changeTextOfThis){var c,b=$(svgCanvas.getSelectedElems()[0]);switch(b.attr("id")){case"name":c="#cardName";break;case"designation":c="#cardTitle";break;case"website":c="#cardWebSite";break;case"email":c="#cardEmail";break;case"mobile":c="#cardPhone";break;case"address1":c="#cardAL1";break;case"address2":c="#cardAL2";break;default:c="#"+b.attr("id")}parentObj.changeTextOfThis(c,$("#text").val())}}function setFillColor(a,b){if(b.length>0&&$(a).length>0){var c=getColor(b[0]);null!=c&&("g"==$(a)[0].nodeName?$(a).each(function(b,d){"g"==d.nodeName?applyColorToGroupElement($(d).children(),c):($(a).attr("fill",c),$(a).removeAttr("class"),$(a).css("fill",$(a).attr("fill")))}):($(a).attr("fill",c),$(a).removeAttr("class"),$(a).css("fill",$(a).attr("fill"))))}}function getLogoImage(){return{image:baseLogoImage,isSvg:isSvg}}function updateText(a,b,c){if(b.length<=0&&(b=c),$("#"+a).text()!=b){if(null!=svgCanvas.getElem(a)){var d=new svgedit.history.ChangeElementCommand(svgCanvas.getElem(a),{"#text":$("#"+a).text()},{"#text":b});svgCanvas.undoMgr.addCommandToHistory(d)}$("#"+a).text(b),svgCanvas.clearSelection(),svgCanvas.setMode("select")}}function setCardName(a){updateText("name",a,"Name")}function setCardTitle(a){updateText("designation",a,"Designation")}function setCardWebSite(a){updateText("website",a,"Website")}function setCardEmail(a){updateText("email",a,"Email")}function setCardPhone(a){updateText("mobile",a,"Phone Number")}function setCardAL1(a){updateText("address1",a,"Address Line 1")}function setCardAL2(a){updateText("address2",a,"Address Line 2")}function addText(a){$("#btnAddText").click()}function replaceText(a,b){$("#"+a).text(b)}function getCustomTexts(){var a=$(".customText");return a}function fillCompanyAndSloganNames(a,b){$("#companyName").val(a),$("#sloganName").val(b),$("#Company_Name").text(a),$("#Tagline").text(b)}function loadImage(a,b,c,d){setBaseImageUrl(a),0==a.indexOf("logo_")?(loadSVGData($(retrieveJson(a).url)[0],b,d),void 0!=c&&c()):$.get(a,function(a,c){loadSVGData(a,b,d)}).always(function(){void 0!=c&&c()})}function loadOtherProductImage(a,b){actualLogoUrl=a,actualBgUrl=b;var c=function(a){$.get("/img/blank-other-product.svg",function(c){svgCanvas.setSvgString(c),setTimeout(function(){var c=function(b){var c,d,e=svgCanvas.getResolution(),f=e.w>e.h?e.h:e.w;b?(c={x:-470,y:165},d="matrix(0.4689016632777691,0,0,0.4689016632777691,281.0022308026677,207.2893102990534) "):c={x:e.w/2-f/2,y:e.h/2-f/2,width:f,height:f},svgCanvas.removeUnusedDefElems(),0==a.indexOf("data:")?svgCanvas.addSvgElementFromJson({element:"image",attr:{id:"logo",x:c.x,y:c.y,height:c.height,width:c.width,transform:d,"xlink:href":a}}):svgCanvas.importSvgString(a,{id:"logo",transform:d,pos:c})};b?svgCanvas.embedImage(b,function(a,b){svgCanvas.setResolution(b.width,b.height),c(!0);var d=svgCanvas.addSvgElementFromJson({element:"image",attr:{id:"product-design",x:0,y:0,height:b.height,width:b.width,"xlink:href":a}});$(d).insertBefore("#logo"),setTimeout(function(){$("body").trigger("svgChanged"),svgCanvas.zoomChanged(window,"canvas"),svgEditor.updateCanvas(),insertFonts()},100)}):setTimeout(function(){$("body").trigger("svgChanged"),parentObj.getDesignSize(function(a,b){if(a)svgCanvas.setResolution(b,a);else{var d=svgCanvas.getResolution(),e=d.w>d.h?d.h:d.w;svgCanvas.setResolution(e,e)}svgCanvas.zoomChanged(window,"canvas"),svgEditor.updateCanvas(),c(!1),insertFonts()})},100)},1e3)},"text")};a?a.indexOf("logo_")>=0?c(retrieveJson(a)):0==a.indexOf("data:")?c(a):a.indexOf("<svg")>=0?c(a):doGet(a+"&type="+encodeURIComponent("text/plain"),void 0,function(a){c(a)},function(a){c(void 0),showToast("Connection Error: Can't load logo for this product"),console.log(a)}):showToast("No logos selected. Please go back and choose a logo.")}if(function(){"use strict";"SVGPathSeg"in window||(window.SVGPathSeg=function(a,b,c){this.pathSegType=a,this.pathSegTypeAsLetter=b,this._owningPathSegList=c},SVGPathSeg.PATHSEG_UNKNOWN=0,SVGPathSeg.PATHSEG_CLOSEPATH=1,SVGPathSeg.PATHSEG_MOVETO_ABS=2,SVGPathSeg.PATHSEG_MOVETO_REL=3,SVGPathSeg.PATHSEG_LINETO_ABS=4,SVGPathSeg.PATHSEG_LINETO_REL=5,SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS=6,SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL=7,SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS=8,SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL=9,SVGPathSeg.PATHSEG_ARC_ABS=10,SVGPathSeg.PATHSEG_ARC_REL=11,SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS=12,SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL=13,SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS=14,SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL=15,SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS=16,SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL=17,SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS=18,SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL=19,SVGPathSeg.prototype._segmentChanged=function(){this._owningPathSegList&&this._owningPathSegList.segmentChanged(this)},window.SVGPathSegClosePath=function(a){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CLOSEPATH,"z",a)},SVGPathSegClosePath.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegClosePath.prototype.toString=function(){return"[object SVGPathSegClosePath]"},SVGPathSegClosePath.prototype._asPathString=function(){return this.pathSegTypeAsLetter},SVGPathSegClosePath.prototype.clone=function(){return new SVGPathSegClosePath(void 0)},window.SVGPathSegMovetoAbs=function(a,b,c){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_MOVETO_ABS,"M",a),this._x=b,this._y=c},SVGPathSegMovetoAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegMovetoAbs.prototype.toString=function(){return"[object SVGPathSegMovetoAbs]"},SVGPathSegMovetoAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},SVGPathSegMovetoAbs.prototype.clone=function(){return new SVGPathSegMovetoAbs(void 0,this._x,this._y)},Object.defineProperty(SVGPathSegMovetoAbs.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegMovetoAbs.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this._segmentChanged()},enumerable:!0}),window.SVGPathSegMovetoRel=function(a,b,c){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_MOVETO_REL,"m",a),this._x=b,this._y=c},SVGPathSegMovetoRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegMovetoRel.prototype.toString=function(){return"[object SVGPathSegMovetoRel]"},SVGPathSegMovetoRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},SVGPathSegMovetoRel.prototype.clone=function(){return new SVGPathSegMovetoRel(void 0,this._x,this._y)},Object.defineProperty(SVGPathSegMovetoRel.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegMovetoRel.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoAbs=function(a,b,c){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_LINETO_ABS,"L",a),this._x=b,this._y=c},SVGPathSegLinetoAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegLinetoAbs.prototype.toString=function(){return"[object SVGPathSegLinetoAbs]"},SVGPathSegLinetoAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},SVGPathSegLinetoAbs.prototype.clone=function(){return new SVGPathSegLinetoAbs(void 0,this._x,this._y)},Object.defineProperty(SVGPathSegLinetoAbs.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegLinetoAbs.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoRel=function(a,b,c){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_LINETO_REL,"l",a),this._x=b,this._y=c},SVGPathSegLinetoRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegLinetoRel.prototype.toString=function(){return"[object SVGPathSegLinetoRel]"},SVGPathSegLinetoRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},SVGPathSegLinetoRel.prototype.clone=function(){return new SVGPathSegLinetoRel(void 0,this._x,this._y)},Object.defineProperty(SVGPathSegLinetoRel.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegLinetoRel.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicAbs=function(a,b,c,d,e,f,g){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS,"C",a),this._x=b,this._y=c,this._x1=d,this._y1=e,this._x2=f,this._y2=g},SVGPathSegCurvetoCubicAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegCurvetoCubicAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicAbs]"},SVGPathSegCurvetoCubicAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},SVGPathSegCurvetoCubicAbs.prototype.clone=function(){return new SVGPathSegCurvetoCubicAbs(void 0,this._x,this._y,this._x1,this._y1,this._x2,this._y2)},Object.defineProperty(SVGPathSegCurvetoCubicAbs.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicAbs.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicAbs.prototype,"x1",{get:function(){return this._x1},set:function(a){this._x1=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicAbs.prototype,"y1",{get:function(){return this._y1},set:function(a){this._y1=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicAbs.prototype,"x2",{get:function(){return this._x2},set:function(a){this._x2=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicAbs.prototype,"y2",{get:function(){return this._y2},set:function(a){this._y2=a,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicRel=function(a,b,c,d,e,f,g){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL,"c",a),this._x=b,this._y=c,this._x1=d,this._y1=e,this._x2=f,this._y2=g},SVGPathSegCurvetoCubicRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegCurvetoCubicRel.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicRel]"},SVGPathSegCurvetoCubicRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},SVGPathSegCurvetoCubicRel.prototype.clone=function(){return new SVGPathSegCurvetoCubicRel(void 0,this._x,this._y,this._x1,this._y1,this._x2,this._y2)},Object.defineProperty(SVGPathSegCurvetoCubicRel.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicRel.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicRel.prototype,"x1",{get:function(){return this._x1},set:function(a){this._x1=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicRel.prototype,"y1",{get:function(){return this._y1},set:function(a){this._y1=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicRel.prototype,"x2",{get:function(){return this._x2},set:function(a){this._x2=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicRel.prototype,"y2",{get:function(){return this._y2},set:function(a){this._y2=a,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticAbs=function(a,b,c,d,e){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS,"Q",a),this._x=b,this._y=c,this._x1=d,this._y1=e},SVGPathSegCurvetoQuadraticAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegCurvetoQuadraticAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticAbs]"},SVGPathSegCurvetoQuadraticAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x+" "+this._y},SVGPathSegCurvetoQuadraticAbs.prototype.clone=function(){return new SVGPathSegCurvetoQuadraticAbs(void 0,this._x,this._y,this._x1,this._y1)},Object.defineProperty(SVGPathSegCurvetoQuadraticAbs.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoQuadraticAbs.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoQuadraticAbs.prototype,"x1",{get:function(){return this._x1},set:function(a){this._x1=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoQuadraticAbs.prototype,"y1",{get:function(){return this._y1},set:function(a){this._y1=a,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticRel=function(a,b,c,d,e){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL,"q",a),this._x=b,this._y=c,this._x1=d,this._y1=e},SVGPathSegCurvetoQuadraticRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegCurvetoQuadraticRel.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticRel]"},SVGPathSegCurvetoQuadraticRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x+" "+this._y},SVGPathSegCurvetoQuadraticRel.prototype.clone=function(){return new SVGPathSegCurvetoQuadraticRel(void 0,this._x,this._y,this._x1,this._y1)},Object.defineProperty(SVGPathSegCurvetoQuadraticRel.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoQuadraticRel.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoQuadraticRel.prototype,"x1",{get:function(){return this._x1},set:function(a){this._x1=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoQuadraticRel.prototype,"y1",{get:function(){return this._y1;
},set:function(a){this._y1=a,this._segmentChanged()},enumerable:!0}),window.SVGPathSegArcAbs=function(a,b,c,d,e,f,g,h){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_ARC_ABS,"A",a),this._x=b,this._y=c,this._r1=d,this._r2=e,this._angle=f,this._largeArcFlag=g,this._sweepFlag=h},SVGPathSegArcAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegArcAbs.prototype.toString=function(){return"[object SVGPathSegArcAbs]"},SVGPathSegArcAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._r1+" "+this._r2+" "+this._angle+" "+(this._largeArcFlag?"1":"0")+" "+(this._sweepFlag?"1":"0")+" "+this._x+" "+this._y},SVGPathSegArcAbs.prototype.clone=function(){return new SVGPathSegArcAbs(void 0,this._x,this._y,this._r1,this._r2,this._angle,this._largeArcFlag,this._sweepFlag)},Object.defineProperty(SVGPathSegArcAbs.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcAbs.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcAbs.prototype,"r1",{get:function(){return this._r1},set:function(a){this._r1=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcAbs.prototype,"r2",{get:function(){return this._r2},set:function(a){this._r2=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcAbs.prototype,"angle",{get:function(){return this._angle},set:function(a){this._angle=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcAbs.prototype,"largeArcFlag",{get:function(){return this._largeArcFlag},set:function(a){this._largeArcFlag=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcAbs.prototype,"sweepFlag",{get:function(){return this._sweepFlag},set:function(a){this._sweepFlag=a,this._segmentChanged()},enumerable:!0}),window.SVGPathSegArcRel=function(a,b,c,d,e,f,g,h){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_ARC_REL,"a",a),this._x=b,this._y=c,this._r1=d,this._r2=e,this._angle=f,this._largeArcFlag=g,this._sweepFlag=h},SVGPathSegArcRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegArcRel.prototype.toString=function(){return"[object SVGPathSegArcRel]"},SVGPathSegArcRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._r1+" "+this._r2+" "+this._angle+" "+(this._largeArcFlag?"1":"0")+" "+(this._sweepFlag?"1":"0")+" "+this._x+" "+this._y},SVGPathSegArcRel.prototype.clone=function(){return new SVGPathSegArcRel(void 0,this._x,this._y,this._r1,this._r2,this._angle,this._largeArcFlag,this._sweepFlag)},Object.defineProperty(SVGPathSegArcRel.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcRel.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcRel.prototype,"r1",{get:function(){return this._r1},set:function(a){this._r1=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcRel.prototype,"r2",{get:function(){return this._r2},set:function(a){this._r2=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcRel.prototype,"angle",{get:function(){return this._angle},set:function(a){this._angle=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcRel.prototype,"largeArcFlag",{get:function(){return this._largeArcFlag},set:function(a){this._largeArcFlag=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcRel.prototype,"sweepFlag",{get:function(){return this._sweepFlag},set:function(a){this._sweepFlag=a,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoHorizontalAbs=function(a,b){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS,"H",a),this._x=b},SVGPathSegLinetoHorizontalAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegLinetoHorizontalAbs.prototype.toString=function(){return"[object SVGPathSegLinetoHorizontalAbs]"},SVGPathSegLinetoHorizontalAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x},SVGPathSegLinetoHorizontalAbs.prototype.clone=function(){return new SVGPathSegLinetoHorizontalAbs(void 0,this._x)},Object.defineProperty(SVGPathSegLinetoHorizontalAbs.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoHorizontalRel=function(a,b){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL,"h",a),this._x=b},SVGPathSegLinetoHorizontalRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegLinetoHorizontalRel.prototype.toString=function(){return"[object SVGPathSegLinetoHorizontalRel]"},SVGPathSegLinetoHorizontalRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x},SVGPathSegLinetoHorizontalRel.prototype.clone=function(){return new SVGPathSegLinetoHorizontalRel(void 0,this._x)},Object.defineProperty(SVGPathSegLinetoHorizontalRel.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoVerticalAbs=function(a,b){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS,"V",a),this._y=b},SVGPathSegLinetoVerticalAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegLinetoVerticalAbs.prototype.toString=function(){return"[object SVGPathSegLinetoVerticalAbs]"},SVGPathSegLinetoVerticalAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._y},SVGPathSegLinetoVerticalAbs.prototype.clone=function(){return new SVGPathSegLinetoVerticalAbs(void 0,this._y)},Object.defineProperty(SVGPathSegLinetoVerticalAbs.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoVerticalRel=function(a,b){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL,"v",a),this._y=b},SVGPathSegLinetoVerticalRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegLinetoVerticalRel.prototype.toString=function(){return"[object SVGPathSegLinetoVerticalRel]"},SVGPathSegLinetoVerticalRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._y},SVGPathSegLinetoVerticalRel.prototype.clone=function(){return new SVGPathSegLinetoVerticalRel(void 0,this._y)},Object.defineProperty(SVGPathSegLinetoVerticalRel.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicSmoothAbs=function(a,b,c,d,e){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS,"S",a),this._x=b,this._y=c,this._x2=d,this._y2=e},SVGPathSegCurvetoCubicSmoothAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegCurvetoCubicSmoothAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicSmoothAbs]"},SVGPathSegCurvetoCubicSmoothAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},SVGPathSegCurvetoCubicSmoothAbs.prototype.clone=function(){return new SVGPathSegCurvetoCubicSmoothAbs(void 0,this._x,this._y,this._x2,this._y2)},Object.defineProperty(SVGPathSegCurvetoCubicSmoothAbs.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicSmoothAbs.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicSmoothAbs.prototype,"x2",{get:function(){return this._x2},set:function(a){this._x2=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicSmoothAbs.prototype,"y2",{get:function(){return this._y2},set:function(a){this._y2=a,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicSmoothRel=function(a,b,c,d,e){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL,"s",a),this._x=b,this._y=c,this._x2=d,this._y2=e},SVGPathSegCurvetoCubicSmoothRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegCurvetoCubicSmoothRel.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicSmoothRel]"},SVGPathSegCurvetoCubicSmoothRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},SVGPathSegCurvetoCubicSmoothRel.prototype.clone=function(){return new SVGPathSegCurvetoCubicSmoothRel(void 0,this._x,this._y,this._x2,this._y2)},Object.defineProperty(SVGPathSegCurvetoCubicSmoothRel.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicSmoothRel.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicSmoothRel.prototype,"x2",{get:function(){return this._x2},set:function(a){this._x2=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicSmoothRel.prototype,"y2",{get:function(){return this._y2},set:function(a){this._y2=a,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticSmoothAbs=function(a,b,c){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS,"T",a),this._x=b,this._y=c},SVGPathSegCurvetoQuadraticSmoothAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegCurvetoQuadraticSmoothAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticSmoothAbs]"},SVGPathSegCurvetoQuadraticSmoothAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},SVGPathSegCurvetoQuadraticSmoothAbs.prototype.clone=function(){return new SVGPathSegCurvetoQuadraticSmoothAbs(void 0,this._x,this._y)},Object.defineProperty(SVGPathSegCurvetoQuadraticSmoothAbs.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoQuadraticSmoothAbs.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticSmoothRel=function(a,b,c){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL,"t",a),this._x=b,this._y=c},SVGPathSegCurvetoQuadraticSmoothRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegCurvetoQuadraticSmoothRel.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticSmoothRel]"},SVGPathSegCurvetoQuadraticSmoothRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},SVGPathSegCurvetoQuadraticSmoothRel.prototype.clone=function(){return new SVGPathSegCurvetoQuadraticSmoothRel(void 0,this._x,this._y)},Object.defineProperty(SVGPathSegCurvetoQuadraticSmoothRel.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoQuadraticSmoothRel.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this._segmentChanged()},enumerable:!0}),SVGPathElement.prototype.createSVGPathSegClosePath=function(){return new SVGPathSegClosePath(void 0)},SVGPathElement.prototype.createSVGPathSegMovetoAbs=function(a,b){return new SVGPathSegMovetoAbs(void 0,a,b)},SVGPathElement.prototype.createSVGPathSegMovetoRel=function(a,b){return new SVGPathSegMovetoRel(void 0,a,b)},SVGPathElement.prototype.createSVGPathSegLinetoAbs=function(a,b){return new SVGPathSegLinetoAbs(void 0,a,b)},SVGPathElement.prototype.createSVGPathSegLinetoRel=function(a,b){return new SVGPathSegLinetoRel(void 0,a,b)},SVGPathElement.prototype.createSVGPathSegCurvetoCubicAbs=function(a,b,c,d,e,f){return new SVGPathSegCurvetoCubicAbs(void 0,a,b,c,d,e,f)},SVGPathElement.prototype.createSVGPathSegCurvetoCubicRel=function(a,b,c,d,e,f){return new SVGPathSegCurvetoCubicRel(void 0,a,b,c,d,e,f)},SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticAbs=function(a,b,c,d){return new SVGPathSegCurvetoQuadraticAbs(void 0,a,b,c,d)},SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticRel=function(a,b,c,d){return new SVGPathSegCurvetoQuadraticRel(void 0,a,b,c,d)},SVGPathElement.prototype.createSVGPathSegArcAbs=function(a,b,c,d,e,f,g){return new SVGPathSegArcAbs(void 0,a,b,c,d,e,f,g)},SVGPathElement.prototype.createSVGPathSegArcRel=function(a,b,c,d,e,f,g){return new SVGPathSegArcRel(void 0,a,b,c,d,e,f,g)},SVGPathElement.prototype.createSVGPathSegLinetoHorizontalAbs=function(a){return new SVGPathSegLinetoHorizontalAbs(void 0,a)},SVGPathElement.prototype.createSVGPathSegLinetoHorizontalRel=function(a){return new SVGPathSegLinetoHorizontalRel(void 0,a)},SVGPathElement.prototype.createSVGPathSegLinetoVerticalAbs=function(a){return new SVGPathSegLinetoVerticalAbs(void 0,a)},SVGPathElement.prototype.createSVGPathSegLinetoVerticalRel=function(a){return new SVGPathSegLinetoVerticalRel(void 0,a)},SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothAbs=function(a,b,c,d){return new SVGPathSegCurvetoCubicSmoothAbs(void 0,a,b,c,d)},SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothRel=function(a,b,c,d){return new SVGPathSegCurvetoCubicSmoothRel(void 0,a,b,c,d)},SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothAbs=function(a,b){return new SVGPathSegCurvetoQuadraticSmoothAbs(void 0,a,b)},SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothRel=function(a,b){return new SVGPathSegCurvetoQuadraticSmoothRel(void 0,a,b)}),"SVGPathSegList"in window||(window.SVGPathSegList=function(a){this._pathElement=a,this._list=this._parsePath(this._pathElement.getAttribute("d")),this._mutationObserverConfig={attributes:!0,attributeFilter:["d"]},this._pathElementMutationObserver=new MutationObserver(this._updateListFromPathMutations.bind(this)),this._pathElementMutationObserver.observe(this._pathElement,this._mutationObserverConfig)},Object.defineProperty(SVGPathSegList.prototype,"numberOfItems",{get:function(){return this._checkPathSynchronizedToList(),this._list.length},enumerable:!0}),Object.defineProperty(SVGPathElement.prototype,"pathSegList",{get:function(){return this._pathSegList||(this._pathSegList=new SVGPathSegList(this)),this._pathSegList},enumerable:!0}),Object.defineProperty(SVGPathElement.prototype,"normalizedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),Object.defineProperty(SVGPathElement.prototype,"animatedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),Object.defineProperty(SVGPathElement.prototype,"animatedNormalizedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),SVGPathSegList.prototype._checkPathSynchronizedToList=function(){this._updateListFromPathMutations(this._pathElementMutationObserver.takeRecords())},SVGPathSegList.prototype._updateListFromPathMutations=function(a){if(this._pathElement){var b=!1;a.forEach(function(a){"d"==a.attributeName&&(b=!0)}),b&&(this._list=this._parsePath(this._pathElement.getAttribute("d")))}},SVGPathSegList.prototype._writeListToPath=function(){this._pathElementMutationObserver.disconnect(),this._pathElement.setAttribute("d",SVGPathSegList._pathSegArrayAsString(this._list)),this._pathElementMutationObserver.observe(this._pathElement,this._mutationObserverConfig)},SVGPathSegList.prototype.segmentChanged=function(a){this._writeListToPath()},SVGPathSegList.prototype.clear=function(){this._checkPathSynchronizedToList(),this._list.forEach(function(a){a._owningPathSegList=null}),this._list=[],this._writeListToPath()},SVGPathSegList.prototype.initialize=function(a){return this._checkPathSynchronizedToList(),this._list=[a],a._owningPathSegList=this,this._writeListToPath(),a},SVGPathSegList.prototype._checkValidIndex=function(a){if(isNaN(a)||0>a||a>=this.numberOfItems)throw"INDEX_SIZE_ERR"},SVGPathSegList.prototype.getItem=function(a){return this._checkPathSynchronizedToList(),this._checkValidIndex(a),this._list[a]},SVGPathSegList.prototype.insertItemBefore=function(a,b){return this._checkPathSynchronizedToList(),b>this.numberOfItems&&(b=this.numberOfItems),a._owningPathSegList&&(a=a.clone()),this._list.splice(b,0,a),a._owningPathSegList=this,this._writeListToPath(),a},SVGPathSegList.prototype.replaceItem=function(a,b){return this._checkPathSynchronizedToList(),a._owningPathSegList&&(a=a.clone()),this._checkValidIndex(b),this._list[b]=a,a._owningPathSegList=this,this._writeListToPath(),a},SVGPathSegList.prototype.removeItem=function(a){this._checkPathSynchronizedToList(),this._checkValidIndex(a);var b=this._list[a];return this._list.splice(a,1),this._writeListToPath(),b},SVGPathSegList.prototype.appendItem=function(a){return this._checkPathSynchronizedToList(),a._owningPathSegList&&(a=a.clone()),this._list.push(a),a._owningPathSegList=this,this._writeListToPath(),a},SVGPathSegList._pathSegArrayAsString=function(a){var b="",c=!0;return a.forEach(function(a){c?(c=!1,b+=a._asPathString()):b+=" "+a._asPathString()}),b},SVGPathSegList.prototype._parsePath=function(a){if(!a||0==a.length)return[];var b=this,c=function(){this.pathSegList=[]};c.prototype.appendSegment=function(a){this.pathSegList.push(a)};var d=function(a){this._string=a,this._currentIndex=0,this._endIndex=this._string.length,this._previousCommand=SVGPathSeg.PATHSEG_UNKNOWN,this._skipOptionalSpaces()};d.prototype._isCurrentSpace=function(){var a=this._string[this._currentIndex];return" ">=a&&(" "==a||"\n"==a||"	"==a||"\r"==a||"\f"==a)},d.prototype._skipOptionalSpaces=function(){for(;this._currentIndex<this._endIndex&&this._isCurrentSpace();)this._currentIndex++;return this._currentIndex<this._endIndex},d.prototype._skipOptionalSpacesOrDelimiter=function(){return this._currentIndex<this._endIndex&&!this._isCurrentSpace()&&","!=this._string.charAt(this._currentIndex)?!1:(this._skipOptionalSpaces()&&this._currentIndex<this._endIndex&&","==this._string.charAt(this._currentIndex)&&(this._currentIndex++,this._skipOptionalSpaces()),this._currentIndex<this._endIndex)},d.prototype.hasMoreData=function(){return this._currentIndex<this._endIndex},d.prototype.peekSegmentType=function(){var a=this._string[this._currentIndex];return this._pathSegTypeFromChar(a)},d.prototype._pathSegTypeFromChar=function(a){switch(a){case"Z":case"z":return SVGPathSeg.PATHSEG_CLOSEPATH;case"M":return SVGPathSeg.PATHSEG_MOVETO_ABS;case"m":return SVGPathSeg.PATHSEG_MOVETO_REL;case"L":return SVGPathSeg.PATHSEG_LINETO_ABS;case"l":return SVGPathSeg.PATHSEG_LINETO_REL;case"C":return SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS;case"c":return SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL;case"Q":return SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS;case"q":return SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL;case"A":return SVGPathSeg.PATHSEG_ARC_ABS;case"a":return SVGPathSeg.PATHSEG_ARC_REL;case"H":return SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS;case"h":return SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL;case"V":return SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS;case"v":return SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL;case"S":return SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS;case"s":return SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL;case"T":return SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS;case"t":return SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL;default:return SVGPathSeg.PATHSEG_UNKNOWN}},d.prototype._nextCommandHelper=function(a,b){return("+"==a||"-"==a||"."==a||a>="0"&&"9">=a)&&b!=SVGPathSeg.PATHSEG_CLOSEPATH?b==SVGPathSeg.PATHSEG_MOVETO_ABS?SVGPathSeg.PATHSEG_LINETO_ABS:b==SVGPathSeg.PATHSEG_MOVETO_REL?SVGPathSeg.PATHSEG_LINETO_REL:b:SVGPathSeg.PATHSEG_UNKNOWN},d.prototype.initialCommandIsMoveTo=function(){if(!this.hasMoreData())return!0;var a=this.peekSegmentType();return a==SVGPathSeg.PATHSEG_MOVETO_ABS||a==SVGPathSeg.PATHSEG_MOVETO_REL},d.prototype._parseNumber=function(){var a=0,b=0,c=1,d=0,e=1,f=1,g=this._currentIndex;if(this._skipOptionalSpaces(),this._currentIndex<this._endIndex&&"+"==this._string.charAt(this._currentIndex)?this._currentIndex++:this._currentIndex<this._endIndex&&"-"==this._string.charAt(this._currentIndex)&&(this._currentIndex++,e=-1),!(this._currentIndex==this._endIndex||(this._string.charAt(this._currentIndex)<"0"||this._string.charAt(this._currentIndex)>"9")&&"."!=this._string.charAt(this._currentIndex))){for(var h=this._currentIndex;this._currentIndex<this._endIndex&&this._string.charAt(this._currentIndex)>="0"&&this._string.charAt(this._currentIndex)<="9";)this._currentIndex++;if(this._currentIndex!=h)for(var i=this._currentIndex-1,j=1;i>=h;)b+=j*(this._string.charAt(i--)-"0"),j*=10;if(this._currentIndex<this._endIndex&&"."==this._string.charAt(this._currentIndex)){if(this._currentIndex++,this._currentIndex>=this._endIndex||this._string.charAt(this._currentIndex)<"0"||this._string.charAt(this._currentIndex)>"9")return;for(;this._currentIndex<this._endIndex&&this._string.charAt(this._currentIndex)>="0"&&this._string.charAt(this._currentIndex)<="9";)d+=(this._string.charAt(this._currentIndex++)-"0")*(c*=.1)}if(this._currentIndex!=g&&this._currentIndex+1<this._endIndex&&("e"==this._string.charAt(this._currentIndex)||"E"==this._string.charAt(this._currentIndex))&&"x"!=this._string.charAt(this._currentIndex+1)&&"m"!=this._string.charAt(this._currentIndex+1)){if(this._currentIndex++,"+"==this._string.charAt(this._currentIndex)?this._currentIndex++:"-"==this._string.charAt(this._currentIndex)&&(this._currentIndex++,f=-1),this._currentIndex>=this._endIndex||this._string.charAt(this._currentIndex)<"0"||this._string.charAt(this._currentIndex)>"9")return;for(;this._currentIndex<this._endIndex&&this._string.charAt(this._currentIndex)>="0"&&this._string.charAt(this._currentIndex)<="9";)a*=10,a+=this._string.charAt(this._currentIndex)-"0",this._currentIndex++}var k=b+d;if(k*=e,a&&(k*=Math.pow(10,f*a)),g!=this._currentIndex)return this._skipOptionalSpacesOrDelimiter(),k}},d.prototype._parseArcFlag=function(){if(!(this._currentIndex>=this._endIndex)){var a=!1,b=this._string.charAt(this._currentIndex++);if("0"==b)a=!1;else{if("1"!=b)return;a=!0}return this._skipOptionalSpacesOrDelimiter(),a}},d.prototype.parseSegment=function(){var a=this._string[this._currentIndex],c=this._pathSegTypeFromChar(a);if(c==SVGPathSeg.PATHSEG_UNKNOWN){if(this._previousCommand==SVGPathSeg.PATHSEG_UNKNOWN)return null;if(c=this._nextCommandHelper(a,this._previousCommand),c==SVGPathSeg.PATHSEG_UNKNOWN)return null}else this._currentIndex++;switch(this._previousCommand=c,c){case SVGPathSeg.PATHSEG_MOVETO_REL:return new SVGPathSegMovetoRel(b,this._parseNumber(),this._parseNumber());case SVGPathSeg.PATHSEG_MOVETO_ABS:return new SVGPathSegMovetoAbs(b,this._parseNumber(),this._parseNumber());case SVGPathSeg.PATHSEG_LINETO_REL:return new SVGPathSegLinetoRel(b,this._parseNumber(),this._parseNumber());case SVGPathSeg.PATHSEG_LINETO_ABS:return new SVGPathSegLinetoAbs(b,this._parseNumber(),this._parseNumber());case SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL:return new SVGPathSegLinetoHorizontalRel(b,this._parseNumber());case SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS:return new SVGPathSegLinetoHorizontalAbs(b,this._parseNumber());case SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL:return new SVGPathSegLinetoVerticalRel(b,this._parseNumber());case SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS:return new SVGPathSegLinetoVerticalAbs(b,this._parseNumber());case SVGPathSeg.PATHSEG_CLOSEPATH:return this._skipOptionalSpaces(),new SVGPathSegClosePath(b);case SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL:var d={x1:this._parseNumber(),y1:this._parseNumber(),x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new SVGPathSegCurvetoCubicRel(b,d.x,d.y,d.x1,d.y1,d.x2,d.y2);case SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS:var d={x1:this._parseNumber(),y1:this._parseNumber(),x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new SVGPathSegCurvetoCubicAbs(b,d.x,d.y,d.x1,d.y1,d.x2,d.y2);case SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL:var d={x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new SVGPathSegCurvetoCubicSmoothRel(b,d.x,d.y,d.x2,d.y2);case SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS:var d={x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new SVGPathSegCurvetoCubicSmoothAbs(b,d.x,d.y,d.x2,d.y2);case SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL:var d={x1:this._parseNumber(),y1:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new SVGPathSegCurvetoQuadraticRel(b,d.x,d.y,d.x1,d.y1);case SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS:var d={x1:this._parseNumber(),y1:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new SVGPathSegCurvetoQuadraticAbs(b,d.x,d.y,d.x1,d.y1);case SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL:return new SVGPathSegCurvetoQuadraticSmoothRel(b,this._parseNumber(),this._parseNumber());case SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS:return new SVGPathSegCurvetoQuadraticSmoothAbs(b,this._parseNumber(),this._parseNumber());case SVGPathSeg.PATHSEG_ARC_REL:var d={x1:this._parseNumber(),y1:this._parseNumber(),arcAngle:this._parseNumber(),arcLarge:this._parseArcFlag(),arcSweep:this._parseArcFlag(),x:this._parseNumber(),y:this._parseNumber()};return new SVGPathSegArcRel(b,d.x,d.y,d.x1,d.y1,d.arcAngle,d.arcLarge,d.arcSweep);case SVGPathSeg.PATHSEG_ARC_ABS:var d={x1:this._parseNumber(),y1:this._parseNumber(),arcAngle:this._parseNumber(),arcLarge:this._parseArcFlag(),arcSweep:this._parseArcFlag(),x:this._parseNumber(),y:this._parseNumber()};return new SVGPathSegArcAbs(b,d.x,d.y,d.x1,d.y1,d.arcAngle,d.arcLarge,d.arcSweep);default:throw"Unknown path seg type."}};var e=new c,f=new d(a);if(!f.initialCommandIsMoveTo())return[];for(;f.hasMoreData();){var g=f.parseSegment();if(!g)return[];e.appendSegment(g)}return e.pathSegList})}(),function(a){var b=null,c=null,d=function(e,f){f=a.extend({duration:5e3,sticky:!1,type:""},f),"number"==typeof f.duration||(f.duration=5e3),"boolean"==typeof f.sticky||(f.sticky=!1),"string"==typeof f.type||(f.type=""),b||(c=d.config,b=a("<ul></ul>").addClass("toast").appendTo(document.body).hide(),"number"==typeof c.width||(c.width=500),"string"==typeof c.align||(c.align="center"),"boolean"==typeof c.closeForStickyOnly||(c.closeForStickyOnly=!1),b.width(c.width),("left"===c.align||"right"===c.align)&&b.css("margin","5px").css(c.align,"0")||b.css({left:"50%",margin:"5px 0 0 -"+c.width/2+"px"}));var g=a("<li></li>").hide().html(e).appendTo(b),h=a("<button>&times;</button>").addClass("close").prependTo(g),i=null;h.click(function(){clearTimeout(i),g.animate({height:0,opacity:0},"fast",function(){g.remove(),b.children().length||b.removeClass("active").hide()})}),c.closeForStickyOnly&&!f.sticky&&h.hide(),""!==f.type&&g.addClass(f.type),!b.hasClass("active")&&b.addClass("active").show(),!f.sticky&&f.duration>0&&(i=setTimeout(function(){h.click()},f.duration)),g.fadeIn("normal")};d.config={width:500,align:"center",closeForStickyOnly:!0},a.extend({toast:d})}(jQuery),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(a){"use strict";function b(){var a=document.createElement("bootstrap"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var c in b)if(void 0!==a.style[c])return{end:b[c]};return!1}a.fn.emulateTransitionEnd=function(b){var c=!1,d=this;a(this).one(a.support.transition.end,function(){c=!0});var e=function(){c||a(d).trigger(a.support.transition.end)};return setTimeout(e,b),this},a(function(){a.support.transition=b()})}(jQuery),+function(a){"use strict";var b='[data-dismiss="alert"]',c=function(c){a(c).on("click",b,this.close)};c.prototype.close=function(b){function c(){f.trigger("closed.bs.alert").remove()}var d=a(this),e=d.attr("data-target");e||(e=d.attr("href"),e=e&&e.replace(/.*(?=#[^\s]*$)/,""));var f=a(e);b&&b.preventDefault(),f.length||(f=d.hasClass("alert")?d:d.parent()),f.trigger(b=a.Event("close.bs.alert")),b.isDefaultPrevented()||(f.removeClass("in"),a.support.transition&&f.hasClass("fade")?f.one(a.support.transition.end,c).emulateTransitionEnd(150):c())};var d=a.fn.alert;a.fn.alert=function(b){return this.each(function(){var d=a(this),e=d.data("bs.alert");e||d.data("bs.alert",e=new c(this)),"string"==typeof b&&e[b].call(d)})},a.fn.alert.Constructor=c,a.fn.alert.noConflict=function(){return a.fn.alert=d,this},a(document).on("click.bs.alert.data-api",b,c.prototype.close)}(jQuery),+function(a){"use strict";var b=function(c,d){this.$element=a(c),this.options=a.extend({},b.DEFAULTS,d),this.isLoading=!1};b.DEFAULTS={loadingText:"loading..."},b.prototype.setState=function(b){var c="disabled",d=this.$element,e=d.is("input")?"val":"html",f=d.data();b+="Text",f.resetText||d.data("resetText",d[e]()),d[e](f[b]||this.options[b]),setTimeout(a.proxy(function(){"loadingText"==b?(this.isLoading=!0,d.addClass(c).attr(c,c)):this.isLoading&&(this.isLoading=!1,d.removeClass(c).removeAttr(c))},this),0)},b.prototype.toggle=function(){var a=!0,b=this.$element.closest('[data-toggle="buttons"]');if(b.length){var c=this.$element.find("input");"radio"==c.prop("type")&&(c.prop("checked")&&this.$element.hasClass("active")?a=!1:b.find(".active").removeClass("active")),a&&c.prop("checked",!this.$element.hasClass("active")).trigger("change")}a&&this.$element.toggleClass("active")};var c=a.fn.button;a.fn.button=function(c){return this.each(function(){var d=a(this),e=d.data("bs.button"),f="object"==typeof c&&c;e||d.data("bs.button",e=new b(this,f)),"toggle"==c?e.toggle():c&&e.setState(c)})},a.fn.button.Constructor=b,a.fn.button.noConflict=function(){return a.fn.button=c,this},a(document).on("click.bs.button.data-api","[data-toggle^=button]",function(b){var c=a(b.target);c.hasClass("btn")||(c=c.closest(".btn")),c.button("toggle"),b.preventDefault()})}(jQuery),+function(a){"use strict";var b=function(b,c){this.$element=a(b),this.$indicators=this.$element.find(".carousel-indicators"),this.options=c,this.paused=this.sliding=this.interval=this.$active=this.$items=null,"hover"==this.options.pause&&this.$element.on("mouseenter",a.proxy(this.pause,this)).on("mouseleave",a.proxy(this.cycle,this))};b.DEFAULTS={interval:5e3,pause:"hover",wrap:!0},b.prototype.cycle=function(b){return b||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval)),this},b.prototype.getActiveIndex=function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},b.prototype.to=function(b){var c=this,d=this.getActiveIndex();return b>this.$items.length-1||0>b?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){c.to(b)}):d==b?this.pause().cycle():this.slide(b>d?"next":"prev",a(this.$items[b]))},b.prototype.pause=function(b){return b||(this.paused=!0),this.$element.find(".next, .prev").length&&a.support.transition&&(this.$element.trigger(a.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},b.prototype.next=function(){return this.sliding?void 0:this.slide("next")},b.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},b.prototype.slide=function(b,c){var d=this.$element.find(".item.active"),e=c||d[b](),f=this.interval,g="next"==b?"left":"right",h="next"==b?"first":"last",i=this;if(!e.length){if(!this.options.wrap)return;e=this.$element.find(".item")[h]()}if(e.hasClass("active"))return this.sliding=!1;var j=a.Event("slide.bs.carousel",{relatedTarget:e[0],direction:g});return this.$element.trigger(j),j.isDefaultPrevented()?void 0:(this.sliding=!0,f&&this.pause(),this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid.bs.carousel",function(){var b=a(i.$indicators.children()[i.getActiveIndex()]);b&&b.addClass("active")})),a.support.transition&&this.$element.hasClass("slide")?(e.addClass(b),
e[0].offsetWidth,d.addClass(g),e.addClass(g),d.one(a.support.transition.end,function(){e.removeClass([b,g].join(" ")).addClass("active"),d.removeClass(["active",g].join(" ")),i.sliding=!1,setTimeout(function(){i.$element.trigger("slid.bs.carousel")},0)}).emulateTransitionEnd(1e3*d.css("transition-duration").slice(0,-1))):(d.removeClass("active"),e.addClass("active"),this.sliding=!1,this.$element.trigger("slid.bs.carousel")),f&&this.cycle(),this)};var c=a.fn.carousel;a.fn.carousel=function(c){return this.each(function(){var d=a(this),e=d.data("bs.carousel"),f=a.extend({},b.DEFAULTS,d.data(),"object"==typeof c&&c),g="string"==typeof c?c:f.slide;e||d.data("bs.carousel",e=new b(this,f)),"number"==typeof c?e.to(c):g?e[g]():f.interval&&e.pause().cycle()})},a.fn.carousel.Constructor=b,a.fn.carousel.noConflict=function(){return a.fn.carousel=c,this},a(document).on("click.bs.carousel.data-api","[data-slide], [data-slide-to]",function(b){var c,d=a(this),e=a(d.attr("data-target")||(c=d.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,"")),f=a.extend({},e.data(),d.data()),g=d.attr("data-slide-to");g&&(f.interval=!1),e.carousel(f),(g=d.attr("data-slide-to"))&&e.data("bs.carousel").to(g),b.preventDefault()}),a(window).on("load",function(){a('[data-ride="carousel"]').each(function(){var b=a(this);b.carousel(b.data())})})}(jQuery),+function(a){"use strict";var b=function(c,d){this.$element=a(c),this.options=a.extend({},b.DEFAULTS,d),this.transitioning=null,this.options.parent&&(this.$parent=a(this.options.parent)),this.options.toggle&&this.toggle()};b.DEFAULTS={toggle:!0},b.prototype.dimension=function(){var a=this.$element.hasClass("width");return a?"width":"height"},b.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var b=a.Event("show.bs.collapse");if(this.$element.trigger(b),!b.isDefaultPrevented()){var c=this.$parent&&this.$parent.find("> .panel > .in");if(c&&c.length){var d=c.data("bs.collapse");if(d&&d.transitioning)return;c.collapse("hide"),d||c.data("bs.collapse",null)}var e=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[e](0),this.transitioning=1;var f=function(){this.$element.removeClass("collapsing").addClass("collapse in")[e]("auto"),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!a.support.transition)return f.call(this);var g=a.camelCase(["scroll",e].join("-"));this.$element.one(a.support.transition.end,a.proxy(f,this)).emulateTransitionEnd(350)[e](this.$element[0][g])}}},b.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var b=a.Event("hide.bs.collapse");if(this.$element.trigger(b),!b.isDefaultPrevented()){var c=this.dimension();this.$element[c](this.$element[c]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1;var d=function(){this.transitioning=0,this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};return a.support.transition?void this.$element[c](0).one(a.support.transition.end,a.proxy(d,this)).emulateTransitionEnd(350):d.call(this)}}},b.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var c=a.fn.collapse;a.fn.collapse=function(c){return this.each(function(){var d=a(this),e=d.data("bs.collapse"),f=a.extend({},b.DEFAULTS,d.data(),"object"==typeof c&&c);!e&&f.toggle&&"show"==c&&(c=!c),e||d.data("bs.collapse",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.collapse.Constructor=b,a.fn.collapse.noConflict=function(){return a.fn.collapse=c,this},a(document).on("click.bs.collapse.data-api","[data-toggle=collapse]",function(b){var c,d=a(this),e=d.attr("data-target")||b.preventDefault()||(c=d.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,""),f=a(e),g=f.data("bs.collapse"),h=g?"toggle":d.data(),i=d.attr("data-parent"),j=i&&a(i);g&&g.transitioning||(j&&j.find('[data-toggle=collapse][data-parent="'+i+'"]').not(d).addClass("collapsed"),d[f.hasClass("in")?"addClass":"removeClass"]("collapsed")),f.collapse(h)})}(jQuery),+function(a){"use strict";function b(b){a(d).remove(),a(e).each(function(){var d=c(a(this)),e={relatedTarget:this};d.hasClass("open")&&(d.trigger(b=a.Event("hide.bs.dropdown",e)),b.isDefaultPrevented()||d.removeClass("open").trigger("hidden.bs.dropdown",e))})}function c(b){var c=b.attr("data-target");c||(c=b.attr("href"),c=c&&/#[A-Za-z]/.test(c)&&c.replace(/.*(?=#[^\s]*$)/,""));var d=c&&a(c);return d&&d.length?d:b.parent()}var d=".dropdown-backdrop",e="[data-toggle=dropdown]",f=function(b){a(b).on("click.bs.dropdown",this.toggle)};f.prototype.toggle=function(d){var e=a(this);if(!e.is(".disabled, :disabled")){var f=c(e),g=f.hasClass("open");if(b(),!g){"ontouchstart"in document.documentElement&&!f.closest(".navbar-nav").length&&a('<div class="dropdown-backdrop"/>').insertAfter(a(this)).on("click",b);var h={relatedTarget:this};if(f.trigger(d=a.Event("show.bs.dropdown",h)),d.isDefaultPrevented())return;f.toggleClass("open").trigger("shown.bs.dropdown",h),e.focus()}return!1}},f.prototype.keydown=function(b){if(/(38|40|27)/.test(b.keyCode)){var d=a(this);if(b.preventDefault(),b.stopPropagation(),!d.is(".disabled, :disabled")){var f=c(d),g=f.hasClass("open");if(!g||g&&27==b.keyCode)return 27==b.which&&f.find(e).focus(),d.click();var h=" li:not(.divider):visible a",i=f.find("[role=menu]"+h+", [role=listbox]"+h);if(i.length){var j=i.index(i.filter(":focus"));38==b.keyCode&&j>0&&j--,40==b.keyCode&&j<i.length-1&&j++,~j||(j=0),i.eq(j).focus()}}}};var g=a.fn.dropdown;a.fn.dropdown=function(b){return this.each(function(){var c=a(this),d=c.data("bs.dropdown");d||c.data("bs.dropdown",d=new f(this)),"string"==typeof b&&d[b].call(c)})},a.fn.dropdown.Constructor=f,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=g,this},a(document).on("click.bs.dropdown.data-api",b).on("click.bs.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.bs.dropdown.data-api",e,f.prototype.toggle).on("keydown.bs.dropdown.data-api",e+", [role=menu], [role=listbox]",f.prototype.keydown)}(jQuery),+function(a){"use strict";var b=function(b,c){this.options=c,this.$element=a(b),this.$backdrop=this.isShown=null,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,a.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};b.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},b.prototype.toggle=function(a){return this[this.isShown?"hide":"show"](a)},b.prototype.show=function(b){var c=this,d=a.Event("show.bs.modal",{relatedTarget:b});this.$element.trigger(d),this.isShown||d.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',a.proxy(this.hide,this)),this.backdrop(function(){var d=a.support.transition&&c.$element.hasClass("fade");c.$element.parent().length||c.$element.appendTo(document.body),c.$element.show().scrollTop(0),d&&c.$element[0].offsetWidth,c.$element.addClass("in").attr("aria-hidden",!1),c.enforceFocus();var e=a.Event("shown.bs.modal",{relatedTarget:b});d?c.$element.find(".modal-dialog").one(a.support.transition.end,function(){c.$element.focus().trigger(e)}).emulateTransitionEnd(300):c.$element.focus().trigger(e)}))},b.prototype.hide=function(b){b&&b.preventDefault(),b=a.Event("hide.bs.modal"),this.$element.trigger(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.escape(),a(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),a.support.transition&&this.$element.hasClass("fade")?this.$element.one(a.support.transition.end,a.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())},b.prototype.enforceFocus=function(){a(document).off("focusin.bs.modal").on("focusin.bs.modal",a.proxy(function(a){this.$element[0]===a.target||this.$element.has(a.target).length||this.$element.focus()},this))},b.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",a.proxy(function(a){27==a.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},b.prototype.hideModal=function(){var a=this;this.$element.hide(),this.backdrop(function(){a.removeBackdrop(),a.$element.trigger("hidden.bs.modal")})},b.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},b.prototype.backdrop=function(b){var c=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var d=a.support.transition&&c;if(this.$backdrop=a('<div class="modal-backdrop '+c+'" />').appendTo(document.body),this.$element.on("click.dismiss.bs.modal",a.proxy(function(a){a.target===a.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),d&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!b)return;d?this.$backdrop.one(a.support.transition.end,b).emulateTransitionEnd(150):b()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(a.support.transition.end,b).emulateTransitionEnd(150):b()):b&&b()};var c=a.fn.modal;a.fn.modal=function(c,d){return this.each(function(){var e=a(this),f=e.data("bs.modal"),g=a.extend({},b.DEFAULTS,e.data(),"object"==typeof c&&c);f||e.data("bs.modal",f=new b(this,g)),"string"==typeof c?f[c](d):g.show&&f.show(d)})},a.fn.modal.Constructor=b,a.fn.modal.noConflict=function(){return a.fn.modal=c,this},a(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(b){var c=a(this),d=c.attr("href"),e=a(c.attr("data-target")||d&&d.replace(/.*(?=#[^\s]+$)/,"")),f=e.data("bs.modal")?"toggle":a.extend({remote:!/#/.test(d)&&d},e.data(),c.data());c.is("a")&&b.preventDefault(),e.modal(f,this).one("hide",function(){c.is(":visible")&&c.focus()})}),a(document).on("show.bs.modal",".modal",function(){a(document.body).addClass("modal-open")}).on("hidden.bs.modal",".modal",function(){a(document.body).removeClass("modal-open")})}(jQuery),+function(a){"use strict";var b=function(a,b){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",a,b)};b.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},b.prototype.init=function(b,c,d){this.enabled=!0,this.type=b,this.$element=a(c),this.options=this.getOptions(d);for(var e=this.options.trigger.split(" "),f=e.length;f--;){var g=e[f];if("click"==g)this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this));else if("manual"!=g){var h="hover"==g?"mouseenter":"focusin",i="hover"==g?"mouseleave":"focusout";this.$element.on(h+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(i+"."+this.type,this.options.selector,a.proxy(this.leave,this))}}this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},b.prototype.getDefaults=function(){return b.DEFAULTS},b.prototype.getOptions=function(b){return b=a.extend({},this.getDefaults(),this.$element.data(),b),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b},b.prototype.getDelegateOptions=function(){var b={},c=this.getDefaults();return this._options&&a.each(this._options,function(a,d){c[a]!=d&&(b[a]=d)}),b},b.prototype.enter=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(c.timeout),c.hoverState="in",c.options.delay&&c.options.delay.show?void(c.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show)):c.show()},b.prototype.leave=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(c.timeout),c.hoverState="out",c.options.delay&&c.options.delay.hide?void(c.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide)):c.hide()},b.prototype.show=function(){var b=a.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){if(this.$element.trigger(b),b.isDefaultPrevented())return;var c=this,d=this.tip();this.setContent(),this.options.animation&&d.addClass("fade");var e="function"==typeof this.options.placement?this.options.placement.call(this,d[0],this.$element[0]):this.options.placement,f=/\s?auto?\s?/i,g=f.test(e);g&&(e=e.replace(f,"")||"top"),d.detach().css({top:0,left:0,display:"block"}).addClass(e),this.options.container?d.appendTo(this.options.container):d.insertAfter(this.$element);var h=this.getPosition(),i=d[0].offsetWidth,j=d[0].offsetHeight;if(g){var k=this.$element.parent(),l=e,m=document.documentElement.scrollTop||document.body.scrollTop,n="body"==this.options.container?window.innerWidth:k.outerWidth(),o="body"==this.options.container?window.innerHeight:k.outerHeight(),p="body"==this.options.container?0:k.offset().left;e="bottom"==e&&h.top+h.height+j-m>o?"top":"top"==e&&h.top-m-j<0?"bottom":"right"==e&&h.right+i>n?"left":"left"==e&&h.left-i<p?"right":e,d.removeClass(l).addClass(e)}var q=this.getCalculatedOffset(e,h,i,j);this.applyPlacement(q,e),this.hoverState=null;var r=function(){c.$element.trigger("shown.bs."+c.type)};a.support.transition&&this.$tip.hasClass("fade")?d.one(a.support.transition.end,r).emulateTransitionEnd(150):r()}},b.prototype.applyPlacement=function(b,c){var d,e=this.tip(),f=e[0].offsetWidth,g=e[0].offsetHeight,h=parseInt(e.css("margin-top"),10),i=parseInt(e.css("margin-left"),10);isNaN(h)&&(h=0),isNaN(i)&&(i=0),b.top=b.top+h,b.left=b.left+i,a.offset.setOffset(e[0],a.extend({using:function(a){e.css({top:Math.round(a.top),left:Math.round(a.left)})}},b),0),e.addClass("in");var j=e[0].offsetWidth,k=e[0].offsetHeight;if("top"==c&&k!=g&&(d=!0,b.top=b.top+g-k),/bottom|top/.test(c)){var l=0;b.left<0&&(l=-2*b.left,b.left=0,e.offset(b),j=e[0].offsetWidth,k=e[0].offsetHeight),this.replaceArrow(l-f+j,j,"left")}else this.replaceArrow(k-g,k,"top");d&&e.offset(b)},b.prototype.replaceArrow=function(a,b,c){this.arrow().css(c,a?50*(1-a/b)+"%":"")},b.prototype.setContent=function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b),a.removeClass("fade in top bottom left right")},b.prototype.hide=function(){function b(){"in"!=c.hoverState&&d.detach(),c.$element.trigger("hidden.bs."+c.type)}var c=this,d=this.tip(),e=a.Event("hide.bs."+this.type);return this.$element.trigger(e),e.isDefaultPrevented()?void 0:(d.removeClass("in"),a.support.transition&&this.$tip.hasClass("fade")?d.one(a.support.transition.end,b).emulateTransitionEnd(150):b(),this.hoverState=null,this)},b.prototype.fixTitle=function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")},b.prototype.hasContent=function(){return this.getTitle()},b.prototype.getPosition=function(){var b=this.$element[0];return a.extend({},"function"==typeof b.getBoundingClientRect?b.getBoundingClientRect():{width:b.offsetWidth,height:b.offsetHeight},this.$element.offset())},b.prototype.getCalculatedOffset=function(a,b,c,d){return"bottom"==a?{top:b.top+b.height,left:b.left+b.width/2-c/2}:"top"==a?{top:b.top-d,left:b.left+b.width/2-c/2}:"left"==a?{top:b.top+b.height/2-d/2,left:b.left-c}:{top:b.top+b.height/2-d/2,left:b.left+b.width}},b.prototype.getTitle=function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||("function"==typeof c.title?c.title.call(b[0]):c.title)},b.prototype.tip=function(){return this.$tip=this.$tip||a(this.options.template)},b.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},b.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},b.prototype.enable=function(){this.enabled=!0},b.prototype.disable=function(){this.enabled=!1},b.prototype.toggleEnabled=function(){this.enabled=!this.enabled},b.prototype.toggle=function(b){var c=b?a(b.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type):this;c.tip().hasClass("in")?c.leave(c):c.enter(c)},b.prototype.destroy=function(){clearTimeout(this.timeout),this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var c=a.fn.tooltip;a.fn.tooltip=function(c){return this.each(function(){var d=a(this),e=d.data("bs.tooltip"),f="object"==typeof c&&c;(e||"destroy"!=c)&&(e||d.data("bs.tooltip",e=new b(this,f)),"string"==typeof c&&e[c]())})},a.fn.tooltip.Constructor=b,a.fn.tooltip.noConflict=function(){return a.fn.tooltip=c,this}}(jQuery),+function(a){"use strict";var b=function(a,b){this.init("popover",a,b)};if(!a.fn.tooltip)throw new Error("Popover requires tooltip.js");b.DEFAULTS=a.extend({},a.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),b.prototype=a.extend({},a.fn.tooltip.Constructor.prototype),b.prototype.constructor=b,b.prototype.getDefaults=function(){return b.DEFAULTS},b.prototype.setContent=function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](b),a.find(".popover-content")[this.options.html?"string"==typeof c?"html":"append":"text"](c),a.removeClass("fade top bottom left right in"),a.find(".popover-title").html()||a.find(".popover-title").hide()},b.prototype.hasContent=function(){return this.getTitle()||this.getContent()},b.prototype.getContent=function(){var a=this.$element,b=this.options;return a.attr("data-content")||("function"==typeof b.content?b.content.call(a[0]):b.content)},b.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},b.prototype.tip=function(){return this.$tip||(this.$tip=a(this.options.template)),this.$tip};var c=a.fn.popover;a.fn.popover=function(c){return this.each(function(){var d=a(this),e=d.data("bs.popover"),f="object"==typeof c&&c;(e||"destroy"!=c)&&(e||d.data("bs.popover",e=new b(this,f)),"string"==typeof c&&e[c]())})},a.fn.popover.Constructor=b,a.fn.popover.noConflict=function(){return a.fn.popover=c,this}}(jQuery),+function(a){"use strict";function b(c,d){var e,f=a.proxy(this.process,this);this.$element=a(a(c).is("body")?window:c),this.$body=a("body"),this.$scrollElement=this.$element.on("scroll.bs.scroll-spy.data-api",f),this.options=a.extend({},b.DEFAULTS,d),this.selector=(this.options.target||(e=a(c).attr("href"))&&e.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.offsets=a([]),this.targets=a([]),this.activeTarget=null,this.refresh(),this.process()}b.DEFAULTS={offset:10},b.prototype.refresh=function(){var b=this.$element[0]==window?"offset":"position";this.offsets=a([]),this.targets=a([]);var c=this;this.$body.find(this.selector).map(function(){var d=a(this),e=d.data("target")||d.attr("href"),f=/^#./.test(e)&&a(e);return f&&f.length&&f.is(":visible")&&[[f[b]().top+(!a.isWindow(c.$scrollElement.get(0))&&c.$scrollElement.scrollTop()),e]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){c.offsets.push(this[0]),c.targets.push(this[1])})},b.prototype.process=function(){var a,b=this.$scrollElement.scrollTop()+this.options.offset,c=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,d=c-this.$scrollElement.height(),e=this.offsets,f=this.targets,g=this.activeTarget;if(b>=d)return g!=(a=f.last()[0])&&this.activate(a);if(g&&b<=e[0])return g!=(a=f[0])&&this.activate(a);for(a=e.length;a--;)g!=f[a]&&b>=e[a]&&(!e[a+1]||b<=e[a+1])&&this.activate(f[a])},b.prototype.activate=function(b){this.activeTarget=b,a(this.selector).parentsUntil(this.options.target,".active").removeClass("active");var c=this.selector+'[data-target="'+b+'"],'+this.selector+'[href="'+b+'"]',d=a(c).parents("li").addClass("active");d.parent(".dropdown-menu").length&&(d=d.closest("li.dropdown").addClass("active")),d.trigger("activate.bs.scrollspy")};var c=a.fn.scrollspy;a.fn.scrollspy=function(c){return this.each(function(){var d=a(this),e=d.data("bs.scrollspy"),f="object"==typeof c&&c;e||d.data("bs.scrollspy",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.scrollspy.Constructor=b,a.fn.scrollspy.noConflict=function(){return a.fn.scrollspy=c,this},a(window).on("load",function(){a('[data-spy="scroll"]').each(function(){var b=a(this);b.scrollspy(b.data())})})}(jQuery),+function(a){"use strict";var b=function(b){this.element=a(b)};b.prototype.show=function(){var b=this.element,c=b.closest("ul:not(.dropdown-menu)"),d=b.data("target");if(d||(d=b.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,"")),!b.parent("li").hasClass("active")){var e=c.find(".active:last a")[0],f=a.Event("show.bs.tab",{relatedTarget:e});if(b.trigger(f),!f.isDefaultPrevented()){var g=a(d);this.activate(b.parent("li"),c),this.activate(g,g.parent(),function(){b.trigger({type:"shown.bs.tab",relatedTarget:e})})}}},b.prototype.activate=function(b,c,d){function e(){f.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),b.addClass("active"),g?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade"),b.parent(".dropdown-menu")&&b.closest("li.dropdown").addClass("active"),d&&d()}var f=c.find("> .active"),g=d&&a.support.transition&&f.hasClass("fade");g?f.one(a.support.transition.end,e).emulateTransitionEnd(150):e(),f.removeClass("in")};var c=a.fn.tab;a.fn.tab=function(c){return this.each(function(){var d=a(this),e=d.data("bs.tab");e||d.data("bs.tab",e=new b(this)),"string"==typeof c&&e[c]()})},a.fn.tab.Constructor=b,a.fn.tab.noConflict=function(){return a.fn.tab=c,this},a(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(b){b.preventDefault(),a(this).tab("show")})}(jQuery),+function(a){"use strict";var b=function(c,d){this.options=a.extend({},b.DEFAULTS,d),this.$window=a(window).on("scroll.bs.affix.data-api",a.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",a.proxy(this.checkPositionWithEventLoop,this)),this.$element=a(c),this.affixed=this.unpin=this.pinnedOffset=null,this.checkPosition()};b.RESET="affix affix-top affix-bottom",b.DEFAULTS={offset:0},b.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(b.RESET).addClass("affix");var a=this.$window.scrollTop(),c=this.$element.offset();return this.pinnedOffset=c.top-a},b.prototype.checkPositionWithEventLoop=function(){setTimeout(a.proxy(this.checkPosition,this),1)},b.prototype.checkPosition=function(){if(this.$element.is(":visible")){var c=a(document).height(),d=this.$window.scrollTop(),e=this.$element.offset(),f=this.options.offset,g=f.top,h=f.bottom;"top"==this.affixed&&(e.top+=d),"object"!=typeof f&&(h=g=f),"function"==typeof g&&(g=f.top(this.$element)),"function"==typeof h&&(h=f.bottom(this.$element));var i=null!=this.unpin&&d+this.unpin<=e.top?!1:null!=h&&e.top+this.$element.height()>=c-h?"bottom":null!=g&&g>=d?"top":!1;if(this.affixed!==i){this.unpin&&this.$element.css("top","");var j="affix"+(i?"-"+i:""),k=a.Event(j+".bs.affix");this.$element.trigger(k),k.isDefaultPrevented()||(this.affixed=i,this.unpin="bottom"==i?this.getPinnedOffset():null,this.$element.removeClass(b.RESET).addClass(j).trigger(a.Event(j.replace("affix","affixed"))),"bottom"==i&&this.$element.offset({top:c-h-this.$element.height()}))}}};var c=a.fn.affix;a.fn.affix=function(c){return this.each(function(){var d=a(this),e=d.data("bs.affix"),f="object"==typeof c&&c;e||d.data("bs.affix",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.affix.Constructor=b,a.fn.affix.noConflict=function(){return a.fn.affix=c,this},a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var b=a(this),c=b.data();c.offset=c.offset||{},c.offsetBottom&&(c.offset.bottom=c.offsetBottom),c.offsetTop&&(c.offset.top=c.offsetTop),b.affix(c)})})}(jQuery),void 0===jQuery.migrateMute&&(jQuery.migrateMute=!0),function(a,b,c){function d(c){var d=b.console;f[c]||(f[c]=!0,a.migrateWarnings.push(c),d&&d.warn&&!a.migrateMute&&(d.warn("JQMIGRATE: "+c),a.migrateTrace&&d.trace&&d.trace()))}function e(b,e,f,g){if(Object.defineProperty)try{return Object.defineProperty(b,e,{configurable:!0,enumerable:!0,get:function(){return d(g),f},set:function(a){d(g),f=a}}),c}catch(h){}a._definePropertyBroken=!0,b[e]=f}var f={};a.migrateWarnings=[],!a.migrateMute&&b.console&&b.console.log&&b.console.log("JQMIGRATE: Logging is active"),a.migrateTrace===c&&(a.migrateTrace=!0),a.migrateReset=function(){f={},a.migrateWarnings.length=0},"BackCompat"===document.compatMode&&d("jQuery is not compatible with Quirks Mode");var g=a("<input/>",{size:1}).attr("size")&&a.attrFn,h=a.attr,i=a.attrHooks.value&&a.attrHooks.value.get||function(){return null},j=a.attrHooks.value&&a.attrHooks.value.set||function(){return c},k=/^(?:input|button)$/i,l=/^[238]$/,m=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,n=/^(?:checked|selected)$/i;e(a,"attrFn",g||{},"jQuery.attrFn is deprecated"),a.attr=function(b,e,f,i){var j=e.toLowerCase(),o=b&&b.nodeType;return i&&(4>h.length&&d("jQuery.fn.attr( props, pass ) is deprecated"),b&&!l.test(o)&&(g?e in g:a.isFunction(a.fn[e])))?a(b)[e](f):("type"===e&&f!==c&&k.test(b.nodeName)&&b.parentNode&&d("Can't change the 'type' of an input or button in IE 6/7/8"),!a.attrHooks[j]&&m.test(j)&&(a.attrHooks[j]={get:function(b,d){var e,f=a.prop(b,d);return f===!0||"boolean"!=typeof f&&(e=b.getAttributeNode(d))&&e.nodeValue!==!1?d.toLowerCase():c},set:function(b,c,d){var e;return c===!1?a.removeAttr(b,d):(e=a.propFix[d]||d,e in b&&(b[e]=!0),b.setAttribute(d,d.toLowerCase())),d}},n.test(j)&&d("jQuery.fn.attr('"+j+"') may use property instead of attribute")),h.call(a,b,e,f))},a.attrHooks.value={get:function(a,b){var c=(a.nodeName||"").toLowerCase();return"button"===c?i.apply(this,arguments):("input"!==c&&"option"!==c&&d("jQuery.fn.attr('value') no longer gets properties"),b in a?a.value:null)},set:function(a,b){var e=(a.nodeName||"").toLowerCase();return"button"===e?j.apply(this,arguments):("input"!==e&&"option"!==e&&d("jQuery.fn.attr('value', val) no longer sets properties"),a.value=b,c)}};var o,p,q=a.fn.init,r=a.parseJSON,s=/^([^<]*)(<[\w\W]+>)([^>]*)$/;a.fn.init=function(b,c,e){var f;return b&&"string"==typeof b&&!a.isPlainObject(c)&&(f=s.exec(a.trim(b)))&&f[0]&&("<"!==b.charAt(0)&&d("$(html) HTML strings must start with '<' character"),f[3]&&d("$(html) HTML text after last tag is ignored"),"#"===f[0].charAt(0)&&(d("HTML string cannot start with a '#' character"),a.error("JQMIGRATE: Invalid selector string (XSS)")),c&&c.context&&(c=c.context),a.parseHTML)?q.call(this,a.parseHTML(f[2],c,!0),c,e):q.apply(this,arguments)},a.fn.init.prototype=a.fn,a.parseJSON=function(a){return a||null===a?r.apply(this,arguments):(d("jQuery.parseJSON requires a valid JSON string"),null)},a.uaMatch=function(a){a=a.toLowerCase();var b=/(chrome)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||0>a.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}},a.browser||(o=a.uaMatch(navigator.userAgent),p={},o.browser&&(p[o.browser]=!0,p.version=o.version),p.chrome?p.webkit=!0:p.webkit&&(p.safari=!0),a.browser=p),e(a,"browser",a.browser,"jQuery.browser is deprecated"),a.sub=function(){function b(a,c){return new b.fn.init(a,c)}a.extend(!0,b,this),b.superclass=this,b.fn=b.prototype=this(),b.fn.constructor=b,b.sub=this.sub,b.fn.init=function(d,e){return e&&e instanceof a&&!(e instanceof b)&&(e=b(e)),a.fn.init.call(this,d,e,c)},b.fn.init.prototype=b.fn;var c=b(document);return d("jQuery.sub() is deprecated"),b},a.ajaxSetup({converters:{"text json":a.parseJSON}});var t=a.fn.data;a.fn.data=function(b){var e,f,g=this[0];return!g||"events"!==b||1!==arguments.length||(e=a.data(g,b),f=a._data(g,b),e!==c&&e!==f||f===c)?t.apply(this,arguments):(d("Use of jQuery.fn.data('events') is deprecated"),f)};var u=/\/(java|ecma)script/i,v=a.fn.andSelf||a.fn.addBack;a.fn.andSelf=function(){return d("jQuery.fn.andSelf() replaced by jQuery.fn.addBack()"),v.apply(this,arguments)},a.clean||(a.clean=function(b,e,f,g){e=e||document,e=!e.nodeType&&e[0]||e,e=e.ownerDocument||e,d("jQuery.clean() is deprecated");var h,i,j,k,l=[];if(a.merge(l,a.buildFragment(b,e).childNodes),f)for(j=function(a){return!a.type||u.test(a.type)?g?g.push(a.parentNode?a.parentNode.removeChild(a):a):f.appendChild(a):c},h=0;null!=(i=l[h]);h++)a.nodeName(i,"script")&&j(i)||(f.appendChild(i),i.getElementsByTagName!==c&&(k=a.grep(a.merge([],i.getElementsByTagName("script")),j),l.splice.apply(l,[h+1,0].concat(k)),h+=k.length));return l});var w=a.event.add,x=a.event.remove,y=a.event.trigger,z=a.fn.toggle,A=a.fn.live,B=a.fn.die,C="ajaxStart|ajaxStop|ajaxSend|ajaxComplete|ajaxError|ajaxSuccess",D=RegExp("\\b(?:"+C+")\\b"),E=/(?:^|\s)hover(\.\S+|)\b/,F=function(b){return"string"!=typeof b||a.event.special.hover?b:(E.test(b)&&d("'hover' pseudo-event is deprecated, use 'mouseenter mouseleave'"),b&&b.replace(E,"mouseenter$1 mouseleave$1"))};a.event.props&&"attrChange"!==a.event.props[0]&&a.event.props.unshift("attrChange","attrName","relatedNode","srcElement"),a.event.dispatch&&e(a.event,"handle",a.event.dispatch,"jQuery.event.handle is undocumented and deprecated"),a.event.add=function(a,b,c,e,f){a!==document&&D.test(b)&&d("AJAX events should be attached to document: "+b),w.call(this,a,F(b||""),c,e,f)},a.event.remove=function(a,b,c,d,e){x.call(this,a,F(b)||"",c,d,e)},a.fn.error=function(){var a=Array.prototype.slice.call(arguments,0);return d("jQuery.fn.error() is deprecated"),a.splice(0,0,"error"),arguments.length?this.bind.apply(this,a):(this.triggerHandler.apply(this,a),this)},a.fn.toggle=function(b,c){if(!a.isFunction(b)||!a.isFunction(c))return z.apply(this,arguments);d("jQuery.fn.toggle(handler, handler...) is deprecated");var e=arguments,f=b.guid||a.guid++,g=0,h=function(c){var d=(a._data(this,"lastToggle"+b.guid)||0)%g;return a._data(this,"lastToggle"+b.guid,d+1),c.preventDefault(),e[d].apply(this,arguments)||!1};for(h.guid=f;e.length>g;)e[g++].guid=f;return this.click(h)},a.fn.live=function(b,c,e){return d("jQuery.fn.live() is deprecated"),A?A.apply(this,arguments):(a(this.context).on(b,this.selector,c,e),this)},a.fn.die=function(b,c){return d("jQuery.fn.die() is deprecated"),B?B.apply(this,arguments):(a(this.context).off(b,this.selector||"**",c),this)},a.event.trigger=function(a,b,c,e){return c||D.test(a)||d("Global events are undocumented and deprecated"),y.call(this,a,b,c||document,e)},a.each(C.split("|"),function(b,c){a.event.special[c]={setup:function(){var b=this;return b!==document&&(a.event.add(document,c+"."+a.guid,function(){a.event.trigger(c,null,b,!0)}),a._data(this,c,a.guid++)),!1},teardown:function(){return this!==document&&a.event.remove(document,c+"."+a._data(this,c)),!1}}})}(jQuery,window),function(a){function b(b){if("string"==typeof b.data){var c=b.handler,d=b.data.toLowerCase().split(" ");b.handler=function(b){if(this===b.target||!/textarea|select/i.test(b.target.nodeName)&&"text"!==b.target.type){var e="keypress"!==b.type&&a.hotkeys.specialKeys[b.which],f=String.fromCharCode(b.which).toLowerCase(),g="",h={};b.altKey&&"alt"!==e&&(g+="alt+"),b.ctrlKey&&"ctrl"!==e&&(g+="ctrl+"),b.metaKey&&!b.ctrlKey&&"meta"!==e&&(g+="meta+"),b.shiftKey&&"shift"!==e&&(g+="shift+"),e?h[g+e]=!0:(h[g+f]=!0,h[g+a.hotkeys.shiftNums[f]]=!0,"shift+"===g&&(h[a.hotkeys.shiftNums[f]]=!0));for(var i=0,j=d.length;j>i;i++)if(h[d[i]])return c.apply(this,arguments)}}}}a.hotkeys={version:"0.8",specialKeys:{8:"backspace",9:"tab",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",
107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",191:"/",224:"meta",219:"[",221:"]"},shiftNums:{"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"}},a.each(["keydown","keyup","keypress"],function(){a.event.special[this]={add:b}})}(jQuery),function(a,b){"$:nomunge";function c(a){return"string"==typeof a}function d(a){var b=r.call(arguments,1);return function(){return a.apply(this,b.concat(r.call(arguments)))}}function e(a){return a.replace(/^[^#]*#?(.*)$/,"$1")}function f(a){return a.replace(/(?:^[^?#]*\?([^#]*).*$)?.*/,"$1")}function g(d,e,f,g,h){var i,k,m,n,o;return g!==j?(m=f.match(d?/^([^#]*)\#?(.*)$/:/^([^#?]*)\??([^#]*)(#?.*)/),o=m[3]||"",2===h&&c(g)?k=g.replace(d?E:D,""):(n=l(m[2]),g=c(g)?l[d?y:x](g):g,k=2===h?g:1===h?a.extend({},g,n):a.extend({},n,g),k=t(k),d&&(k=k.replace(q,s))),i=m[1]+(d?"#":k||!m[1]?"?":"")+k+o):i=e(f!==j?f:b[A][B]),i}function h(a,b,d){return b===j||"boolean"==typeof b?(d=b,b=t[a?y:x]()):b=c(b)?b.replace(a?E:D,""):b,l(b,d)}function i(b,d,e,f){return c(e)||"object"==typeof e||(f=e,e=d,d=j),this.each(function(){var c=a(this),g=d||p()[(this.nodeName||"").toLowerCase()]||"",h=g&&c.attr(g)||"";c.attr(g,t[b](h,e,f))})}var j,k,l,m,n,o,p,q,r=Array.prototype.slice,s=decodeURIComponent,t=a.param,u=a.bbq=a.bbq||{},v=a.event.special,w="hashchange",x="querystring",y="fragment",z="elemUrlAttr",A="location",B="href",C="src",D=/^.*\?|#.*$/g,E=/^.*\#/,F={};t[x]=d(g,0,f),t[y]=k=d(g,1,e),k.noEscape=function(b){b=b||"";var c=a.map(b.split(""),encodeURIComponent);q=new RegExp(c.join("|"),"g")},k.noEscape(",/"),a.deparam=l=function(b,c){var d={},e={"true":!0,"false":!1,"null":null};return a.each(b.replace(/\+/g," ").split("&"),function(b,f){var g,h=f.split("="),i=s(h[0]),k=d,l=0,m=i.split("]["),n=m.length-1;if(/\[/.test(m[0])&&/\]$/.test(m[n])?(m[n]=m[n].replace(/\]$/,""),m=m.shift().split("[").concat(m),n=m.length-1):n=0,2===h.length)if(g=s(h[1]),c&&(g=g&&!isNaN(g)?+g:"undefined"===g?j:e[g]!==j?e[g]:g),n)for(;n>=l;l++)i=""===m[l]?k.length:m[l],k=k[i]=n>l?k[i]||(m[l+1]&&isNaN(m[l+1])?{}:[]):g;else a.isArray(d[i])?d[i].push(g):d[i]!==j?d[i]=[d[i],g]:d[i]=g;else i&&(d[i]=c?j:"")}),d},l[x]=d(h,0),l[y]=m=d(h,1),a[z]||(a[z]=function(b){return a.extend(F,b)})({a:B,base:B,iframe:C,img:C,input:C,form:"action",link:B,script:C}),p=a[z],a.fn[x]=d(i,x),a.fn[y]=d(i,y),u.pushState=n=function(a,d){c(a)&&/^#/.test(a)&&d===j&&(d=2);var e=a!==j,f=k(b[A][B],e?a:{},e?d:2);b[A][B]=f+(/#/.test(f)?"":"#")},u.getState=o=function(a,b){return a===j||"boolean"==typeof a?m(a):m(b)[a]},u.removeState=function(b){var c={};b!==j&&(c=o(),a.each(a.isArray(b)?b:arguments,function(a,b){delete c[b]})),n(c,2)},v[w]=a.extend(v[w],{add:function(b){function c(a){var b=a[y]=k();a.getState=function(a,c){return a===j||"boolean"==typeof a?l(b,a):l(b,c)[a]},d.apply(this,arguments)}var d;return a.isFunction(b)?(d=b,c):(d=b.handler,void(b.handler=c))}})}(jQuery,this),function(a,b,c){"$:nomunge";function d(a){return a=a||b[g][i],a.replace(/^[^#]*#?(.*)$/,"$1")}var e,f=a.event.special,g="location",h="hashchange",i="href",j=a.browser,k=document.documentMode,l=j.msie&&(k===c||8>k),m="on"+h in b&&!l;a[h+"Delay"]=100,f[h]=a.extend(f[h],{setup:function(){return m?!1:void a(e.start)},teardown:function(){return m?!1:void a(e.stop)}}),e=function(){function c(){j=k=function(a){return a},l&&(f=a('<iframe src="javascript:0"/>').hide().insertAfter("body")[0].contentWindow,k=function(){return d(f.document[g][i])},(j=function(a,b){if(a!==b){var c=f.document;c.open().close(),c[g].hash="#"+a}})(d()))}var e,f,j,k,m={};return m.start=function(){if(!e){var f=d();j||c(),function l(){var c=d(),m=k(f);c!==f?(j(f=c,m),a(b).trigger(h)):m!==f&&(b[g][i]=b[g][i].replace(/#.*/,"")+"#"+m),e=setTimeout(l,a[h+"Delay"])}()}},m.stop=function(){f||(e&&clearTimeout(e),e=0)},m}()}(jQuery,this),function(a){var b,c={};a.svgIcons=function(d,e){function f(b,c){if("ajax"!==b){if(r)return;k=w[0].contentDocument;var d=k&&k.getElementById("svg_eof");if(!(d||c&&d))return s++,void(50>s?setTimeout(f,20):(h(),r=!0));r=!0}if(j=a(k.firstChild).children(),e.no_img)setTimeout(function(){q||g()},500);else{var i=v+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNzUiIGhlaWdodD0iMjc1Ij48L3N2Zz4%3D";l=a(new Image).attr({src:i,width:0,height:0}).appendTo("body").load(function(){g(!0)}).error(function(){g()})}}function g(d,f){if(!q){e.no_img&&(d=!1);var g;if(d){var h=a(document.createElement("div"));h.hide().appendTo("body")}if(f){var k=e.fallback_path?e.fallback_path:"";a.each(f,function(b,c){g=a("#"+b);var d=a(new Image).attr({"class":"svg_icon",src:k+c,width:o,height:p,alt:"icon"});A(d,b)})}else for(var r=j.length,s=0;r>s;s++){var t=j[s],x=t.id;if("svg_eof"===x)break;g=a("#"+x);var y=t.getElementsByTagNameNS(m,"svg")[0],B=document.createElementNS(m,"svg");B.setAttributeNS(m,"viewBox",[0,0,o,p].join(" "));var C=y.getAttribute("width"),D=y.getAttribute("height");y.removeAttribute("width"),y.removeAttribute("height");var E=y.getAttribute("viewBox");if(E||y.setAttribute("viewBox",[0,0,C,D].join(" ")),B.setAttribute("xmlns",m),B.setAttribute("width",o),B.setAttribute("height",p),B.setAttribute("xmlns:xlink",n),B.setAttribute("class","svg_icon"),u||(y=y.cloneNode(!0)),B.appendChild(y),d){u?B:B.cloneNode(!0);h.empty().append(B);var F=v+i(h.html()),G=a(new Image).attr({"class":"svg_icon",src:F})}else var G=b(a(B),s);A(G,x)}e.placement&&a.each(e.placement,function(e,f){c[f]&&a(e).each(function(e){var g=c[f].clone();e>0&&!d&&(g=b(g,e,!0)),z(a(this),g,f)})}),f||(d&&h.remove(),w&&w.remove(),l&&l.remove()),e.resize&&a.resizeSvgIcons(e.resize),q=!0,e.callback&&e.callback(c)}}function h(){if(-1!=d.indexOf(".svgz")){var b=d.replace(".svgz",".svg");window.console&&console.log(".svgz failed, trying with .svg"),a.svgIcons(b,e)}else e.fallback&&g(!1,e.fallback)}function i(a){if(window.btoa)return window.btoa(a);var b,c,d,e,f,g,h,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",j=new Array(4*Math.floor((a.length+2)/3)),k=0,l=0;do b=a.charCodeAt(k++),c=a.charCodeAt(k++),d=a.charCodeAt(k++),e=b>>2,f=(3&b)<<4|c>>4,g=(15&c)<<2|d>>6,h=63&d,isNaN(c)?g=h=64:isNaN(d)&&(h=64),j[l++]=i.charAt(e),j[l++]=i.charAt(f),j[l++]=i.charAt(g),j[l++]=i.charAt(h);while(k<a.length);return j.join("")}var j,k,l,m="http://www.w3.org/2000/svg",n="http://www.w3.org/1999/xlink",o=e.w?e.w:24,p=e.h?e.h:24,q=!1,r=!1,s=0,t=navigator.userAgent,u=!!window.opera,v=(t.indexOf("Safari/")>-1&&-1==t.indexOf("Chrome/"),"data:image/svg+xml;charset=utf-8;base64,");if(e.svgz){var w=a('<object data="'+d+'" type=image/svg+xml>').appendTo("body").hide();try{k=w[0].contentDocument,w.load(f),f(0,!0)}catch(x){h()}}else{var y=new DOMParser;a.ajax({url:d,dataType:"string",success:function(b){return b?(k=y.parseFromString(b,"text/xml"),void a(function(){f("ajax")})):void a(h)},error:function(b){window.opera?a(function(){h()}):b.responseText?(k=y.parseFromString(b.responseText,"text/xml"),k.childNodes.length||a(h),a(function(){f("ajax")})):a(h)}})}var z=function(a,b,c,d){if(u&&b.css("visibility","hidden"),e.replace){d&&b.attr("id",c);var f=a.attr("class");f&&b.attr("class","svg_icon "+f),a.replaceWith(b)}else a.append(b);u&&setTimeout(function(){b.removeAttr("style")},1)},A=function(a,b){void 0!==e.id_match&&e.id_match===!1||z(holder,a,b,!0),c[b]=a};b=function(b,c,d){var e=b.find("defs");if(!e.length)return b;if(u)var f=e.find("*").filter(function(){return!!this.id});else var f=e.find("[id]");var g=b[0].getElementsByTagName("*"),h=g.length;return f.each(function(b){var d=this.id,e=a(k).find("#"+d).length<=1;u&&(e=!1);var f="x"+d+c+b;this.id=f;for(var i="url(#"+d+")",j="url(#"+f+")",b=0;h>b;b++){var l=g[b];l.getAttribute("fill")===i&&l.setAttribute("fill",j),l.getAttribute("stroke")===i&&l.setAttribute("stroke",j),l.getAttribute("filter")===i&&l.setAttribute("filter",j)}}),b}},a.getSvgIcon=function(a,d){var e=c[a];return d&&e&&(e=b(e,0,!0).clone(!0)),e},a.resizeSvgIcons=function(b){var c=!a(".svg_icon:first").length;a.each(b,function(b,d){var e=a.isArray(d),f=e?d[0]:d,g=e?d[1]:d;c&&(b=b.replace(/\.svg_icon/g,"svg")),a(b).each(function(){this.setAttribute("width",f),this.setAttribute("height",g),window.opera&&window.widget&&(this.parentNode.style.width=f+"px",this.parentNode.style.height=g+"px")})})}}(jQuery),function(){function a(a,d,e){if(a=document.createElementNS(b.svg,a),c)for(var f in d)a.setAttribute(f,d[f]);else for(f in d){var g=d[f],h=a[f];h&&"SVGLength"===h.constructor?h.baseVal.value=g:a.setAttribute(f,g)}return e&&e.appendChild(a),a}var b={svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink"};window.console||(window.console=new function(){this.log=function(){},this.dir=function(){}}),$.jGraduate={Paint:function(a){if(a=a||{},this.alpha=isNaN(a.alpha)?100:a.alpha,a.copy)switch(this.type=a.copy.type,this.alpha=a.copy.alpha,this.radialGradient=this.linearGradient=this.solidColor=null,this.type){case"solidColor":this.solidColor=a.copy.solidColor;break;case"linearGradient":this.linearGradient=a.copy.linearGradient.cloneNode(!0);break;case"radialGradient":this.radialGradient=a.copy.radialGradient.cloneNode(!0)}else a.linearGradient?(this.type="linearGradient",this.radialGradient=this.solidColor=null,this.linearGradient=a.linearGradient.cloneNode(!0)):a.radialGradient?(this.type="radialGradient",this.linearGradient=this.solidColor=null,this.radialGradient=a.radialGradient.cloneNode(!0)):a.solidColor?(this.type="solidColor",this.solidColor=a.solidColor):(this.type="none",this.radialGradient=this.linearGradient=this.solidColor=null)}},jQuery.fn.jGraduateDefaults={paint:new $.jGraduate.Paint,window:{pickerTitle:"Drag markers to pick a paint"},images:{clientPath:"images/"},newstop:"inverse"};var c=navigator.userAgent.indexOf("Gecko/")>=0;jQuery.fn.jGraduate=function(c){var d=arguments;return this.each(function(){function e(b,c,d,e,h){var j=h||a("stop",{"stop-color":c,"stop-opacity":d,offset:b},u);h?(c=h.getAttribute("stop-color"),d=h.getAttribute("stop-opacity"),b=h.getAttribute("offset")):u.appendChild(j),null===d&&(d=1),h=a("path",{d:"M-6.2,0.9c3.6-4,6.7-4.3,6.7-12.4c-0.2,7.9,3.1,8.8,6.5,12.4c3.5,3.8,2.9,9.6,0,12.3c-3.1,2.8-10.4,2.7-13.2,0C-9.6,9.9-9.4,4.4-6.2,0.9z",fill:"url(#jGraduate_trans)",transform:"translate("+(10+b*w)+", 26)"},R);var m=a("path",{d:"M-6.2,0.9c3.6-4,6.7-4.3,6.7-12.4c-0.2,7.9,3.1,8.8,6.5,12.4c3.5,3.8,2.9,9.6,0,12.3c-3.1,2.8-10.4,2.7-13.2,0C-9.6,9.9-9.4,4.4-6.2,0.9z",fill:c,"fill-opacity":d,transform:"translate("+(10+b*w)+", 26)",stroke:"#000","stroke-width":1.5},R);return $(m).mousedown(function(a){return f(this),U=S,q.mousemove(i).mouseup(g),V=W.offset(),a.preventDefault(),!1}).data("stop",j).data("bg",h).dblclick(function(){$("div.jGraduate_LightBox").show();for(var a=this,b=+j.getAttribute("stop-opacity")||1,d=j.getAttribute("stop-color")||1,e=(255*parseFloat(b)).toString(16);e.length<2;)e="0"+e;c=d.substr(1)+e,$("#"+l+"_jGraduate_stopPicker").css({left:100,bottom:15}).jPicker({window:{title:"Pick the start color and opacity for the gradient"},images:{clientPath:k.images.clientPath},color:{active:c,alphaSupport:!0}},function(c){d=c.val("hex")?"#"+c.val("hex"):"none",b=null!==c.val("a")?c.val("a")/256:1,a.setAttribute("fill",d),a.setAttribute("fill-opacity",b),j.setAttribute("stop-color",d),j.setAttribute("stop-opacity",b),$("div.jGraduate_LightBox").hide(),$("#"+l+"_jGraduate_stopPicker").hide()},null,function(){$("div.jGraduate_LightBox").hide(),$("#"+l+"_jGraduate_stopPicker").hide()})}),$(u).find("stop").each(function(){var a=$(this);if(+this.getAttribute("offset")>b){if(!c){var d=this.getAttribute("stop-color"),e=this.getAttribute("stop-opacity");j.setAttribute("stop-color",d),m.setAttribute("fill",d),j.setAttribute("stop-opacity",null===e?1:e),m.setAttribute("fill-opacity",null===e?1:e)}return a.before(j),!1}}),e&&f(m),j}function f(a){S&&S.setAttribute("stroke","#000"),a.setAttribute("stroke","blue"),S=a,S.parentNode.appendChild(S)}function g(){if(q.unbind("mousemove",i),"none"!==X.getAttribute("display")){X.setAttribute("display","none");var a=$(S),b=a.data("stop");a=a.data("bg"),$([S,b,a]).remove()}U=null}function h(){var a=_?"rotate("+_+","+aa+","+ba+") ":"";1===Y&&1===Z?u.removeAttribute("gradientTransform"):u.setAttribute("gradientTransform",a+"translate("+-aa*(Y-1)+","+-ba*(Z-1)+") scale("+Y+","+Z+")")}function i(a){var b=a.pageX-V.left;a=a.pageY-V.top,b=10>b?10:b>w+10?w+10:b;var c="translate("+b+", 26)";-60>a||a>130?(X.setAttribute("display","block"),X.setAttribute("transform",c)):X.setAttribute("display","none"),U.setAttribute("transform",c),$.data(U,"bg").setAttribute("transform",c),$.data(U,"stop").setAttribute("offset",(b-10)/w);var d=0;$(u).find("stop").each(function(){var a=this.getAttribute("offset"),b=$(this);d>a&&(b.prev().before(b),Q=$(u).find("stop")),d=a})}var j=$(this),k=$.extend(!0,{},jQuery.fn.jGraduateDefaults,c),l=j.attr("id"),m="#"+j.attr("id")+" ";if(m){var n=function(){switch(j.paint.type){case"radialGradient":j.paint.linearGradient=null;break;case"linearGradient":j.paint.radialGradient=null;break;case"solidColor":j.paint.radialGradient=j.paint.linearGradient=null}$.isFunction(j.okCallback)&&j.okCallback(j.paint),j.hide()},o=function(){$.isFunction(j.cancelCallback)&&j.cancelCallback(),j.hide()};$.extend(!0,j,{paint:new $.jGraduate.Paint({copy:k.paint}),okCallback:$.isFunction(d[1])&&d[1]||null,cancelCallback:$.isFunction(d[2])&&d[2]||null}),j.position();var p=null,q=$(window);"none"==j.paint.type&&(j.paint=$.jGraduate.Paint({solidColor:"ffffff"})),j.addClass("jGraduate_Picker"),j.html('<ul class="jGraduate_tabs"><li class="jGraduate_tab_color jGraduate_tab_current" data-type="col">Solid Color</li><li class="jGraduate_tab_lingrad" data-type="lg">Linear Gradient</li><li class="jGraduate_tab_radgrad" data-type="rg">Radial Gradient</li></ul><div class="jGraduate_colPick"></div><div class="jGraduate_gradPick"></div><div class="jGraduate_LightBox"></div><div id="'+l+'_jGraduate_stopPicker" class="jGraduate_stopPicker"></div>');var r=$(m+"> .jGraduate_colPick"),s=$(m+"> .jGraduate_gradPick");s.html('<div id="'+l+'_jGraduate_Swatch" class="jGraduate_Swatch"><h2 class="jGraduate_Title">'+k.window.pickerTitle+'</h2><div id="'+l+'_jGraduate_GradContainer" class="jGraduate_GradContainer"></div><div id="'+l+'_jGraduate_StopSlider" class="jGraduate_StopSlider"></div></div><div class="jGraduate_Form jGraduate_Points jGraduate_lg_field"><div class="jGraduate_StopSection"><label class="jGraduate_Form_Heading">Begin Point</label><div class="jGraduate_Form_Section"><label>x:</label><input type="text" id="'+l+'_jGraduate_x1" size="3" title="Enter starting x value between 0.0 and 1.0"/><label> y:</label><input type="text" id="'+l+'_jGraduate_y1" size="3" title="Enter starting y value between 0.0 and 1.0"/></div></div><div class="jGraduate_StopSection"><label class="jGraduate_Form_Heading">End Point</label><div class="jGraduate_Form_Section"><label>x:</label><input type="text" id="'+l+'_jGraduate_x2" size="3" title="Enter ending x value between 0.0 and 1.0"/><label> y:</label><input type="text" id="'+l+'_jGraduate_y2" size="3" title="Enter ending y value between 0.0 and 1.0"/></div></div></div><div class="jGraduate_Form jGraduate_Points jGraduate_rg_field"><div class="jGraduate_StopSection"><label class="jGraduate_Form_Heading">Center Point</label><div class="jGraduate_Form_Section"><label>x:</label><input type="text" id="'+l+'_jGraduate_cx" size="3" title="Enter x value between 0.0 and 1.0"/><label> y:</label><input type="text" id="'+l+'_jGraduate_cy" size="3" title="Enter y value between 0.0 and 1.0"/></div></div><div class="jGraduate_StopSection"><label class="jGraduate_Form_Heading">Focal Point</label><div class="jGraduate_Form_Section"><label>Match center: <input type="checkbox" checked="checked" id="'+l+'_jGraduate_match_ctr"/></label><br/><label>x:</label><input type="text" id="'+l+'_jGraduate_fx" size="3" title="Enter x value between 0.0 and 1.0"/><label> y:</label><input type="text" id="'+l+'_jGraduate_fy" size="3" title="Enter y value between 0.0 and 1.0"/></div></div></div><div class="jGraduate_StopSection jGraduate_SpreadMethod"><label class="jGraduate_Form_Heading">Spread method</label><div class="jGraduate_Form_Section"><select class="jGraduate_spreadMethod"><option value=pad selected>Pad</option><option value=reflect>Reflect</option><option value=repeat>Repeat</option></select></div></div><div class="jGraduate_Form"><div class="jGraduate_Slider jGraduate_RadiusField jGraduate_rg_field"><label class="prelabel">Radius:</label><div id="'+l+'_jGraduate_Radius" class="jGraduate_SliderBar jGraduate_Radius" title="Click to set radius"><img id="'+l+'_jGraduate_RadiusArrows" class="jGraduate_RadiusArrows" src="'+k.images.clientPath+'rangearrows2.gif"></div><label><input type="text" id="'+l+'_jGraduate_RadiusInput" size="3" value="100"/>%</label></div><div class="jGraduate_Slider jGraduate_EllipField jGraduate_rg_field"><label class="prelabel">Ellip:</label><div id="'+l+'_jGraduate_Ellip" class="jGraduate_SliderBar jGraduate_Ellip" title="Click to set Ellip"><img id="'+l+'_jGraduate_EllipArrows" class="jGraduate_EllipArrows" src="'+k.images.clientPath+'rangearrows2.gif"></div><label><input type="text" id="'+l+'_jGraduate_EllipInput" size="3" value="0"/>%</label></div><div class="jGraduate_Slider jGraduate_AngleField jGraduate_rg_field"><label class="prelabel">Angle:</label><div id="'+l+'_jGraduate_Angle" class="jGraduate_SliderBar jGraduate_Angle" title="Click to set Angle"><img id="'+l+'_jGraduate_AngleArrows" class="jGraduate_AngleArrows" src="'+k.images.clientPath+'rangearrows2.gif"></div><label><input type="text" id="'+l+'_jGraduate_AngleInput" size="3" value="0"/>deg</label></div><div class="jGraduate_Slider jGraduate_OpacField"><label class="prelabel">Opac:</label><div id="'+l+'_jGraduate_Opac" class="jGraduate_SliderBar jGraduate_Opac" title="Click to set Opac"><img id="'+l+'_jGraduate_OpacArrows" class="jGraduate_OpacArrows" src="'+k.images.clientPath+'rangearrows2.gif"></div><label><input type="text" id="'+l+'_jGraduate_OpacInput" size="3" value="100"/>%</label></div></div><div class="jGraduate_OkCancel"><input type="button" id="'+l+'_jGraduate_Ok" class="jGraduate_Ok" value="OK"/><input type="button" id="'+l+'_jGraduate_Cancel" class="jGraduate_Cancel" value="Cancel"/></div>');var t,u,v,w=256,x=w-0,y=w-0,z={};$(".jGraduate_SliderBar").width(145);var A=$("#"+l+"_jGraduate_GradContainer")[0],B=a("svg",{id:l+"_jgraduate_svg",width:w,height:w,xmlns:b.svg},A);t=t||j.paint.type;var C=u=j.paint[t],D=j.paint.alpha,E="solidColor"===t;switch(t){case"solidColor":case"linearGradient":if(E||(u.id=l+"_lg_jgraduate_grad",C=u=B.appendChild(u)),a("radialGradient",{id:l+"_rg_jgraduate_grad"},B),"linearGradient"===t)break;case"radialGradient":E||(u.id=l+"_rg_jgraduate_grad",C=u=B.appendChild(u)),a("linearGradient",{id:l+"_lg_jgraduate_grad"},B)}if(E){C=u=$("#"+l+"_lg_jgraduate_grad")[0],p=j.paint[t],e(0,"#"+p,1);var F=typeof k.newstop;if("string"===F)switch(k.newstop){case"same":e(1,"#"+p,1);break;case"inverse":F="";for(var G=0;6>G;G+=2){p.substr(G,2);var H=(255-parseInt(p.substr(G,2),16)).toString(16);H.length<2&&(H=0+H),F+=H}e(1,"#"+F,1);break;case"white":e(1,"#ffffff",1);break;case"black":e(1,"#000000",1)}else"object"===F&&e(1,k.newstop.color||"#"+p,"opac"in k.newstop?k.newstop.opac:1)}p=parseFloat(C.getAttribute("x1")||0),F=parseFloat(C.getAttribute("y1")||0),G=parseFloat(C.getAttribute("x2")||1),H=parseFloat(C.getAttribute("y2")||0);var I=parseFloat(C.getAttribute("cx")||.5),J=parseFloat(C.getAttribute("cy")||.5),K=parseFloat(C.getAttribute("fx")||I),L=parseFloat(C.getAttribute("fy")||J);v=a("rect",{id:l+"_jgraduate_rect",x:0,y:0,width:x,height:y,fill:"url(#"+l+"_jgraduate_grad)","fill-opacity":D/100},B);var M=$("<div/>").attr({"class":"grad_coord jGraduate_lg_field",title:"Begin Stop"}).text(1).css({top:F*w,left:p*w}).data("coord","start").appendTo(A),N=M.clone().text(2).css({top:H*w,left:G*w}).attr("title","End stop").data("coord","end").appendTo(A),O=$("<div/>").attr({"class":"grad_coord jGraduate_rg_field",title:"Center stop"}).text("C").css({top:J*w,left:I*w}).data("coord","center").appendTo(A),P=O.clone().text("F").css({top:L*w,left:K*w,display:"none"}).attr("title","Focus point").data("coord","focus").appendTo(A);P[0].id=l+"_jGraduate_focusCoord",$(m+" .grad_coord"),$.each(["x1","y1","x2","y2","cx","cy","fx","fy"],function(a,b){var c=u.getAttribute(b),d=isNaN(b[1]);c||(c=d?"0.5":"x2"===b?"1.0":"0.0"),z[b]=$("#"+l+"_jGraduate_"+b).val(c).change(function(){isNaN(parseFloat(this.value))||this.value<0?this.value=0:this.value>1&&(this.value=1),("f"!==b[0]||ia)&&(d&&"radialGradient"===t||!d&&"linearGradient"===t)&&u.setAttribute(b,this.value);var a=d?"c"===b[0]?O:P:"1"===b[1]?M:N,c=b.indexOf("x")>=0?"left":"top";a.css(c,this.value*w)}).change()});var Q,R,S,T,U,V,W=$("#"+l+"_jGraduate_StopSlider"),X=a("path",{d:"m9.75,-6l-19.5,19.5m0,-19.5l19.5,19.5",fill:"none",stroke:"#D00","stroke-width":5,display:"none"},T),Y=1,Z=1,_=0,aa=I,ba=J;T=a("svg",{width:"100%",height:45},W[0]),A=a("pattern",{width:16,height:16,patternUnits:"userSpaceOnUse",id:"jGraduate_trans"},T),a("image",{width:16,height:16},A).setAttributeNS(b.xlink,"xlink:href",k.images.clientPath+"map-opacity.png"),$(T).click(function(a){if(V=W.offset(),"path"!==a.target.tagName){var b=a.pageX-V.left-8;b=10>b?10:b>w+10?w+10:b,e(b/w,0,0,!0),a.stopPropagation()}}),$(T).mouseover(function(){T.appendChild(X)}),R=a("g",{},T),a("line",{x1:10,y1:15,x2:w+10,y2:15,"stroke-width":2,stroke:"#000"},T);var ca=s.find(".jGraduate_spreadMethod").change(function(){u.setAttribute("spreadMethod",$(this).val())}),da=null,ea=function(a){var b=a.pageX-ha.left,c=a.pageY-ha.top;b=0>b?0:b>w?w:b,c=0>c?0:c>w?w:c,da.css("left",b).css("top",c),b/=x,c/=y;var d=da.data("coord"),e=u;switch(d){case"start":z.x1.val(b),z.y1.val(c),e.setAttribute("x1",b),e.setAttribute("y1",c);break;case"end":z.x2.val(b),z.y2.val(c),e.setAttribute("x2",b),e.setAttribute("y2",c);break;case"center":z.cx.val(b),z.cy.val(c),e.setAttribute("cx",b),e.setAttribute("cy",c),aa=b,ba=c,h();break;case"focus":z.fx.val(b),z.fy.val(c),e.setAttribute("fx",b),e.setAttribute("fy",c),h()}a.preventDefault()},fa=function(){da=null,q.unbind("mousemove",ea).unbind("mouseup",fa)};if(Q=u.getElementsByTagNameNS(b.svg,"stop"),2>ga){for(;2>ga;)u.appendChild(document.createElementNS(b.svg,"stop")),++ga;Q=u.getElementsByTagNameNS(b.svg,"stop")}var ga=Q.length;for(G=0;ga>G;G++)e(0,0,0,0,Q[G]);ca.val(u.getAttribute("spreadMethod")||"pad");var ha,ia=!1;v.setAttribute("fill-opacity",D/100),$("#"+l+" div.grad_coord").mousedown(function(a){a.preventDefault(),da=$(this),da.offset(),ha=da.parent().offset(),q.mousemove(ea).mouseup(fa)}),$("#"+l+"_jGraduate_Ok").bind("click",function(){j.paint.type=t,j.paint[t]=u.cloneNode(!0),j.paint.solidColor=null,n()}),$("#"+l+"_jGraduate_Cancel").bind("click",function(){o()}),"radialGradient"===t&&(ia?P.show():(P.hide(),z.fx.val(""),z.fy.val(""))),$("#"+l+"_jGraduate_match_ctr")[0].checked=!ia;var ja,ka;if($("#"+l+"_jGraduate_match_ctr").change(function(){ia=!this.checked,P.toggle(ia),z.fx.val(""),z.fy.val("");var a=u;if(ia){var b=ja||.5,c=ka||.5;a.setAttribute("fx",b),a.setAttribute("fy",c),z.fx.val(b),z.fy.val(c)}else ja=a.getAttribute("fx"),ka=a.getAttribute("fy"),a.removeAttribute("fx"),a.removeAttribute("fy")}),Q=u.getElementsByTagNameNS(b.svg,"stop"),ga=Q.length,2>ga){for(;2>ga;)u.appendChild(document.createElementNS(b.svg,"stop")),++ga;Q=u.getElementsByTagNameNS(b.svg,"stop")}var la;D=s=0,"radialGradient"===t&&(B=u.gradientTransform.baseVal,2===B.numberOfItems?(ga=B.getItem(0),B=B.getItem(1),2===ga.type&&3===B.type&&(ga=B.matrix,1!==ga.a?s=Math.round(100*-(1-ga.a)):1!==ga.d&&(s=Math.round(100*(1-ga.d))))):3===B.numberOfItems&&(A=B.getItem(0),ga=B.getItem(1),B=B.getItem(2),4===A.type&&2===ga.type&&3===B.type&&(D=Math.round(A.angle),ga=B.matrix,1!==ga.a?s=Math.round(100*-(1-ga.a)):1!==ga.d&&(s=Math.round(100*(1-ga.d)))))),s={radius:{handle:"#"+l+"_jGraduate_RadiusArrows",input:"#"+l+"_jGraduate_RadiusInput",val:100*(u.getAttribute("r")||.5)},opacity:{handle:"#"+l+"_jGraduate_OpacArrows",input:"#"+l+"_jGraduate_OpacInput",val:j.paint.alpha||100},ellip:{handle:"#"+l+"_jGraduate_EllipArrows",input:"#"+l+"_jGraduate_EllipInput",val:s},angle:{handle:"#"+l+"_jGraduate_AngleArrows",input:"#"+l+"_jGraduate_AngleInput",val:D}},$.each(s,function(a,b){var c=$(b.handle);c.mousedown(function(d){var e=c.parent();la={type:a,elem:c,input:$(b.input),parent:e,offset:e.offset()},q.mousemove(ma).mouseup(na),d.preventDefault()}),$(b.input).val(b.val).change(function(){var b=+this.value,d=0,e="radialGradient"===t;switch(a){case"radius":e&&u.setAttribute("r",b/100),d=Math.pow(b/100,.4)/2*145;break;case"opacity":j.paint.alpha=b,v.setAttribute("fill-opacity",b/100),d=1.45*b;break;case"ellip":if(Y=Z=1,0===b){d=72.5;break}b>99.5&&(b=99.5),b>0?Z=1-b/100:Y=-(b/100)-1,d=145*((b+100)/2)/100,e&&h();break;case"angle":_=b,d=_/180,d+=.5,d*=145,e&&h()}d>145?d=145:0>d&&(d=0),c.css({"margin-left":d-5})}).change()});var ma=function(a){var b=a.pageX-la.offset.left-parseInt(la.parent.css("border-left-width"));b>145&&(b=145),0>=b&&(b=0);var c=b-5;switch(b/=145,la.type){case"radius":b=Math.pow(2*b,2.5),b>.98&&1.02>b&&(b=1),.01>=b&&(b=.01),u.setAttribute("r",b);break;case"opacity":j.paint.alpha=parseInt(100*b),v.setAttribute("fill-opacity",b);break;case"ellip":Z=Y=1,.5>b?(b/=.5,Y=0>=b?.01:b):b>.5&&(b/=.5,b=2-b,Z=0>=b?.01:b),h(),b-=1,Z===b+1&&(b=Math.abs(b));break;case"angle":b-=.5,_=b*=180,h(),b/=100}la.elem.css({"margin-left":c}),b=Math.round(100*b),la.input.val(b),a.preventDefault()},na=function(){q.unbind("mousemove",ma).unbind("mouseup",na),la=null};for(s=(255*j.paint.alpha/100).toString(16);s.length<2;)s="0"+s;s=s.split(".")[0],p="none"==j.paint.solidColor?"":j.paint.solidColor+s,E||(p=Q[0].getAttribute("stop-color")),$.extend($.fn.jPicker.defaults.window,{alphaSupport:!0,effects:{type:"show",speed:0}}),r.jPicker({window:{title:k.window.pickerTitle},images:{clientPath:k.images.clientPath},color:{active:p,alphaSupport:!0}},function(a){j.paint.type="solidColor",j.paint.alpha=a.val("ahex")?Math.round(a.val("a")/255*100):100,j.paint.solidColor=a.val("hex")?a.val("hex"):"none",j.paint.radialGradient=null,n()},null,function(){o()});var oa=$(m+" .jGraduate_tabs li");oa.click(function(){oa.removeClass("jGraduate_tab_current"),$(this).addClass("jGraduate_tab_current"),$(m+" > div").hide();var a=$(this).attr("data-type");if($(m+" .jGraduate_gradPick").show(),"rg"===a||"lg"===a){$(".jGraduate_"+a+"_field").show(),$(".jGraduate_"+("lg"===a?"rg":"lg")+"_field").hide(),$("#"+l+"_jgraduate_rect")[0].setAttribute("fill","url(#"+l+"_"+a+"_jgraduate_grad)"),t="lg"===a?"linearGradient":"radialGradient",$("#"+l+"_jGraduate_OpacInput").val(j.paint.alpha).change();var b=$("#"+l+"_"+a+"_jgraduate_grad")[0];if(u!==b){var c=$(u).find("stop");$(b).empty().append(c),u=b,b=ca.val(),u.setAttribute("spreadMethod",b)}ia="rg"===a&&null!=u.getAttribute("fx")&&!(I==K&&J==L),$("#"+l+"_jGraduate_focusCoord").toggle(ia),ia&&($("#"+l+"_jGraduate_match_ctr")[0].checked=!1)}else $(m+" .jGraduate_gradPick").hide(),$(m+" .jGraduate_colPick").show()}),$(m+" > div").hide(),oa.removeClass("jGraduate_tab_current");var pa;switch(j.paint.type){case"linearGradient":pa=$(m+" .jGraduate_tab_lingrad");break;case"radialGradient":pa=$(m+" .jGraduate_tab_radgrad");break;default:pa=$(m+" .jGraduate_tab_color")}j.show(),setTimeout(function(){pa.addClass("jGraduate_tab_current").click()},10)}else alert("Container element must have an id attribute to maintain unique id strings for sub-elements.")})}}(),document.addEventListener("touchstart",touchHandler,!0),document.addEventListener("touchmove",touchHandler,!0),document.addEventListener("touchend",touchHandler,!0),document.addEventListener("touchcancel",touchHandler,!0),function(a){function b(a){this.ok=!1,"#"==a.charAt(0)&&(a=a.substr(1,6)),a=a.replace(/ /g,""),a=a.toLowerCase();var c={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};for(var d in c)a==d&&(a=c[d]);for(var e=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],f=0;f<e.length;f++){var g=e[f].re,h=e[f].process,i=g.exec(a);i&&(channels=h(i),this.r=channels[0],this.g=channels[1],this.b=channels[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),b=this.g.toString(16),c=this.b.toString(16);return 1==a.length&&(a="0"+a),1==b.length&&(b="0"+b),1==c.length&&(c="0"+c),"#"+a+b+c},this.getHelpXML=function(){for(var a=new Array,d=0;d<e.length;d++)for(var f=e[d].example,g=0;g<f.length;g++)a[a.length]=f[g];
for(var h in c)a[a.length]=h;var i=document.createElement("ul");i.setAttribute("id","rgbcolor-examples");for(var d=0;d<a.length;d++)try{var j=document.createElement("li"),k=new b(a[d]),l=document.createElement("div");l.style.cssText="margin: 3px; border: 1px solid black; background:"+k.toHex()+"; color:"+k.toHex(),l.appendChild(document.createTextNode("test"));var m=document.createTextNode(" "+a[d]+" -> "+k.toRGB()+" -> "+k.toHex());j.appendChild(l),j.appendChild(m),i.appendChild(j)}catch(n){}return i}}"undefined"!=typeof define&&define.amd?define(function(){return b}):"undefined"!=typeof module&&module.exports&&(module.exports=b),a.RGBColor=b}("undefined"!=typeof window?window:this),function(a,b){"use strict";"undefined"!=typeof define&&define.amd?define("canvgModule",["rgbcolor","stackblur"],b):"undefined"!=typeof module&&module.exports&&(module.exports=b(require("rgbcolor"),require("stackblur"))),a.canvg=b(a.RGBColor,a.stackBlur)}("undefined"!=typeof window?window:this,function(a,b){function c(a){var b=[0,0,0],c=function(c,d){var e=a.match(c);null!=e&&(b[d]+=e.length,a=a.replace(c," "))};return a=a.replace(/:not\(([^\)]*)\)/g,"     $1 "),a=a.replace(/{[^]*/gm," "),c(g,1),c(h,0),c(j,1),c(k,2),c(l,1),c(m,1),a=a.replace(/[\*\s\+>~]/g," "),a=a.replace(/[#\.]/g," "),c(n,2),b.join("")}function d(d){var f={opts:d};f.FRAMERATE=30,f.MAX_VIRTUAL_PIXELS=3e4,f.log=function(a){},1==f.opts.log&&"undefined"!=typeof console&&(f.log=function(a){console.log(a)}),f.init=function(a){var b=0;f.UniqueId=function(){return b++,"canvg"+b},f.Definitions={},f.Styles={},f.StylesSpecificity={},f.Animations=[],f.Images=[],f.ctx=a,f.ViewPort=new function(){this.viewPorts=[],this.Clear=function(){this.viewPorts=[]},this.SetCurrent=function(a,b){this.viewPorts.push({width:a,height:b})},this.RemoveCurrent=function(){this.viewPorts.pop()},this.Current=function(){return this.viewPorts[this.viewPorts.length-1]},this.width=function(){return this.Current().width},this.height=function(){return this.Current().height},this.ComputeSize=function(a){return null!=a&&"number"==typeof a?a:"x"==a?this.width():"y"==a?this.height():Math.sqrt(Math.pow(this.width(),2)+Math.pow(this.height(),2))/Math.sqrt(2)}}},f.init(),f.ImagesLoaded=function(){for(var a=0;a<f.Images.length;a++)if(!f.Images[a].loaded)return!1;return!0},f.trim=function(a){return a.replace(/^\s+|\s+$/g,"")},f.compressSpaces=function(a){return a.replace(/[\s\r\t\n]+/gm," ")},f.ajax=function(a){var b;return b=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),b?(b.open("GET",a,!1),b.send(null),b.responseText):null},f.parseXml=function(a){if("undefined"!=typeof Windows&&"undefined"!=typeof Windows.Data&&"undefined"!=typeof Windows.Data.Xml){var b=new Windows.Data.Xml.Dom.XmlDocument,c=new Windows.Data.Xml.Dom.XmlLoadSettings;return c.prohibitDtd=!1,b.loadXml(a,c),b}if(window.DOMParser){var d=new DOMParser;return d.parseFromString(a,"text/xml")}a=a.replace(/<!DOCTYPE svg[^>]*>/,"");var b=new ActiveXObject("Microsoft.XMLDOM");return b.async="false",b.loadXML(a),b},f.Property=function(a,b){this.name=a,this.value=b},f.Property.prototype.getValue=function(){return this.value},f.Property.prototype.hasValue=function(){return null!=this.value&&""!==this.value},f.Property.prototype.numValue=function(){if(!this.hasValue())return 0;var a=parseFloat(this.value);return(this.value+"").match(/%$/)&&(a/=100),a},f.Property.prototype.valueOrDefault=function(a){return this.hasValue()?this.value:a},f.Property.prototype.numValueOrDefault=function(a){return this.hasValue()?this.numValue():a},f.Property.prototype.addOpacity=function(b){var c=this.value;if(null!=b.value&&""!=b.value&&"string"==typeof this.value){var d=new a(this.value);d.ok&&(c="rgba("+d.r+", "+d.g+", "+d.b+", "+b.numValue()+")")}return new f.Property(this.name,c)},f.Property.prototype.getDefinition=function(){var a=this.value.match(/#([^\)'"]+)/);return a&&(a=a[1]),a||(a=this.value),f.Definitions[a]},f.Property.prototype.isUrlDefinition=function(){return 0==this.value.indexOf("url(")},f.Property.prototype.getFillStyleDefinition=function(a,b){var c=this.getDefinition();if(null!=c&&c.createGradient)return c.createGradient(f.ctx,a,b);if(null!=c&&c.createPattern){if(c.getHrefAttribute().hasValue()){var d=c.attribute("patternTransform");c=c.getHrefAttribute().getDefinition(),d.hasValue()&&(c.attribute("patternTransform",!0).value=d.value)}return c.createPattern(f.ctx,a)}return null},f.Property.prototype.getDPI=function(a){return 96},f.Property.prototype.getEM=function(a){var b=12,c=new f.Property("fontSize",f.Font.Parse(f.ctx.font).fontSize);return c.hasValue()&&(b=c.toPixels(a)),b},f.Property.prototype.getUnits=function(){var a=this.value+"";return a.replace(/[0-9\.\-]/g,"")},f.Property.prototype.toPixels=function(a,b){if(!this.hasValue())return 0;var c=this.value+"";if(c.match(/em$/))return this.numValue()*this.getEM(a);if(c.match(/ex$/))return this.numValue()*this.getEM(a)/2;if(c.match(/px$/))return this.numValue();if(c.match(/pt$/))return this.numValue()*this.getDPI(a)*(1/72);if(c.match(/pc$/))return 15*this.numValue();if(c.match(/cm$/))return this.numValue()*this.getDPI(a)/2.54;if(c.match(/mm$/))return this.numValue()*this.getDPI(a)/25.4;if(c.match(/in$/))return this.numValue()*this.getDPI(a);if(c.match(/%$/))return this.numValue()*f.ViewPort.ComputeSize(a);var d=this.numValue();return b&&1>d?d*f.ViewPort.ComputeSize(a):d},f.Property.prototype.toMilliseconds=function(){if(!this.hasValue())return 0;var a=this.value+"";return a.match(/s$/)?1e3*this.numValue():a.match(/ms$/)?this.numValue():this.numValue()},f.Property.prototype.toRadians=function(){if(!this.hasValue())return 0;var a=this.value+"";return a.match(/deg$/)?this.numValue()*(Math.PI/180):a.match(/grad$/)?this.numValue()*(Math.PI/200):a.match(/rad$/)?this.numValue():this.numValue()*(Math.PI/180)};var g={baseline:"alphabetic","before-edge":"top","text-before-edge":"top",middle:"middle",central:"middle","after-edge":"bottom","text-after-edge":"bottom",ideographic:"ideographic",alphabetic:"alphabetic",hanging:"hanging",mathematical:"alphabetic"};return f.Property.prototype.toTextBaseline=function(){return this.hasValue()?g[this.value]:null},f.Font=new function(){this.Styles="normal|italic|oblique|inherit",this.Variants="normal|small-caps|inherit",this.Weights="normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit",this.CreateFont=function(a,b,c,d,e,g){var h=null!=g?this.Parse(g):this.CreateFont("","","","","",f.ctx.font);return{fontFamily:e||h.fontFamily,fontSize:d||h.fontSize,fontStyle:a||h.fontStyle,fontWeight:c||h.fontWeight,fontVariant:b||h.fontVariant,toString:function(){return[this.fontStyle,this.fontVariant,this.fontWeight,this.fontSize,this.fontFamily].join(" ")}}};var a=this;this.Parse=function(b){for(var c={},d=f.trim(f.compressSpaces(b||"")).split(" "),e={fontSize:!1,fontStyle:!1,fontWeight:!1,fontVariant:!1},g="",h=0;h<d.length;h++)e.fontStyle||-1==a.Styles.indexOf(d[h])?e.fontVariant||-1==a.Variants.indexOf(d[h])?e.fontWeight||-1==a.Weights.indexOf(d[h])?e.fontSize?"inherit"!=d[h]&&(g+=d[h]):("inherit"!=d[h]&&(c.fontSize=d[h].split("/")[0]),e.fontStyle=e.fontVariant=e.fontWeight=e.fontSize=!0):("inherit"!=d[h]&&(c.fontWeight=d[h]),e.fontStyle=e.fontVariant=e.fontWeight=!0):("inherit"!=d[h]&&(c.fontVariant=d[h]),e.fontStyle=e.fontVariant=!0):("inherit"!=d[h]&&(c.fontStyle=d[h]),e.fontStyle=!0);return""!=g&&(c.fontFamily=g),c}},f.ToNumberArray=function(a){for(var b=f.trim(f.compressSpaces((a||"").replace(/,/g," "))).split(" "),c=0;c<b.length;c++)b[c]=parseFloat(b[c]);return b},f.Point=function(a,b){this.x=a,this.y=b},f.Point.prototype.angleTo=function(a){return Math.atan2(a.y-this.y,a.x-this.x)},f.Point.prototype.applyTransform=function(a){var b=this.x*a[0]+this.y*a[2]+a[4],c=this.x*a[1]+this.y*a[3]+a[5];this.x=b,this.y=c},f.CreatePoint=function(a){var b=f.ToNumberArray(a);return new f.Point(b[0],b[1])},f.CreatePath=function(a){for(var b=f.ToNumberArray(a),c=[],d=0;d<b.length;d+=2)c.push(new f.Point(b[d],b[d+1]));return c},f.BoundingBox=function(a,b,c,d){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN,this.x=function(){return this.x1},this.y=function(){return this.y1},this.width=function(){return this.x2-this.x1},this.height=function(){return this.y2-this.y1},this.addPoint=function(a,b){null!=a&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=a,this.x2=a),a<this.x1&&(this.x1=a),a>this.x2&&(this.x2=a)),null!=b&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=b,this.y2=b),b<this.y1&&(this.y1=b),b>this.y2&&(this.y2=b))},this.addX=function(a){this.addPoint(a,null)},this.addY=function(a){this.addPoint(null,a)},this.addBoundingBox=function(a){this.addPoint(a.x1,a.y1),this.addPoint(a.x2,a.y2)},this.addQuadraticCurve=function(a,b,c,d,e,f){var g=a+2/3*(c-a),h=b+2/3*(d-b),i=g+1/3*(e-a),j=h+1/3*(f-b);this.addBezierCurve(a,b,g,i,h,j,e,f)},this.addBezierCurve=function(a,b,c,d,e,f,g,h){var j=[a,b],k=[c,d],l=[e,f],m=[g,h];for(this.addPoint(j[0],j[1]),this.addPoint(m[0],m[1]),i=0;i<=1;i++){var n=function(a){return Math.pow(1-a,3)*j[i]+3*Math.pow(1-a,2)*a*k[i]+3*(1-a)*Math.pow(a,2)*l[i]+Math.pow(a,3)*m[i]},o=6*j[i]-12*k[i]+6*l[i],p=-3*j[i]+9*k[i]-9*l[i]+3*m[i],q=3*k[i]-3*j[i];if(0!=p){var r=Math.pow(o,2)-4*q*p;if(!(0>r)){var s=(-o+Math.sqrt(r))/(2*p);s>0&&1>s&&(0==i&&this.addX(n(s)),1==i&&this.addY(n(s)));var t=(-o-Math.sqrt(r))/(2*p);t>0&&1>t&&(0==i&&this.addX(n(t)),1==i&&this.addY(n(t)))}}else{if(0==o)continue;var u=-q/o;u>0&&1>u&&(0==i&&this.addX(n(u)),1==i&&this.addY(n(u)))}}},this.isPointInBox=function(a,b){return this.x1<=a&&a<=this.x2&&this.y1<=b&&b<=this.y2},this.addPoint(a,b),this.addPoint(c,d)},f.Transform=function(a){var b=this;this.Type={},this.Type.translate=function(a){this.p=f.CreatePoint(a),this.apply=function(a){a.translate(this.p.x||0,this.p.y||0)},this.unapply=function(a){a.translate(-1*this.p.x||0,-1*this.p.y||0)},this.applyToPoint=function(a){a.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0])}},this.Type.rotate=function(a){var b=f.ToNumberArray(a);this.angle=new f.Property("angle",b[0]),this.cx=b[1]||0,this.cy=b[2]||0,this.apply=function(a){a.translate(this.cx,this.cy),a.rotate(this.angle.toRadians()),a.translate(-this.cx,-this.cy)},this.unapply=function(a){a.translate(this.cx,this.cy),a.rotate(-1*this.angle.toRadians()),a.translate(-this.cx,-this.cy)},this.applyToPoint=function(a){var b=this.angle.toRadians();a.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0]),a.applyTransform([Math.cos(b),Math.sin(b),-Math.sin(b),Math.cos(b),0,0]),a.applyTransform([1,0,0,1,-this.p.x||0,-this.p.y||0])}},this.Type.scale=function(a){this.p=f.CreatePoint(a),this.apply=function(a){a.scale(this.p.x||1,this.p.y||this.p.x||1)},this.unapply=function(a){a.scale(1/this.p.x||1,1/this.p.y||this.p.x||1)},this.applyToPoint=function(a){a.applyTransform([this.p.x||0,0,0,this.p.y||0,0,0])}},this.Type.matrix=function(a){this.m=f.ToNumberArray(a),this.apply=function(a){a.transform(this.m[0],this.m[1],this.m[2],this.m[3],this.m[4],this.m[5])},this.unapply=function(a){var b=this.m[0],c=this.m[2],d=this.m[4],e=this.m[1],f=this.m[3],g=this.m[5],h=0,i=0,j=1,k=1/(b*(f*j-g*i)-c*(e*j-g*h)+d*(e*i-f*h));a.transform(k*(f*j-g*i),k*(g*h-e*j),k*(d*i-c*j),k*(b*j-d*h),k*(c*g-d*f),k*(d*e-b*g))},this.applyToPoint=function(a){a.applyTransform(this.m)}},this.Type.SkewBase=function(a){this.base=b.Type.matrix,this.base(a),this.angle=new f.Property("angle",a)},this.Type.SkewBase.prototype=new this.Type.matrix,this.Type.skewX=function(a){this.base=b.Type.SkewBase,this.base(a),this.m=[1,0,Math.tan(this.angle.toRadians()),1,0,0]},this.Type.skewX.prototype=new this.Type.SkewBase,this.Type.skewY=function(a){this.base=b.Type.SkewBase,this.base(a),this.m=[1,Math.tan(this.angle.toRadians()),0,1,0,0]},this.Type.skewY.prototype=new this.Type.SkewBase,this.transforms=[],this.apply=function(a){for(var b=0;b<this.transforms.length;b++)this.transforms[b].apply(a)},this.unapply=function(a){for(var b=this.transforms.length-1;b>=0;b--)this.transforms[b].unapply(a)},this.applyToPoint=function(a){for(var b=0;b<this.transforms.length;b++)this.transforms[b].applyToPoint(a)};for(var c=f.trim(f.compressSpaces(a)).replace(/\)([a-zA-Z])/g,") $1").replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/),d=0;d<c.length;d++){var e=f.trim(c[d].split("(")[0]),g=c[d].split("(")[1].replace(")",""),h=new this.Type[e](g);h.type=e,this.transforms.push(h)}},f.AspectRatio=function(a,b,c,d,e,g,h,i,j,k){b=f.compressSpaces(b),b=b.replace(/^defer\s/,"");var l=b.split(" ")[0]||"xMidYMid",m=b.split(" ")[1]||"meet",n=c/d,o=e/g,p=Math.min(n,o),q=Math.max(n,o);"meet"==m&&(d*=p,g*=p),"slice"==m&&(d*=q,g*=q),j=new f.Property("refX",j),k=new f.Property("refY",k),j.hasValue()&&k.hasValue()?a.translate(-p*j.toPixels("x"),-p*k.toPixels("y")):(l.match(/^xMid/)&&("meet"==m&&p==o||"slice"==m&&q==o)&&a.translate(c/2-d/2,0),l.match(/YMid$/)&&("meet"==m&&p==n||"slice"==m&&q==n)&&a.translate(0,e/2-g/2),l.match(/^xMax/)&&("meet"==m&&p==o||"slice"==m&&q==o)&&a.translate(c-d,0),l.match(/YMax$/)&&("meet"==m&&p==n||"slice"==m&&q==n)&&a.translate(0,e-g)),"none"==l?a.scale(n,o):"meet"==m?a.scale(p,p):"slice"==m&&a.scale(q,q),a.translate(null==h?0:-h,null==i?0:-i)},f.Element={},f.EmptyProperty=new f.Property("EMPTY",""),f.Element.ElementBase=function(a){if(this.attributes={},this.styles={},this.stylesSpecificity={},this.children=[],this.attribute=function(a,b){var c=this.attributes[a];return null!=c?c:(1==b&&(c=new f.Property(a,""),this.attributes[a]=c),c||f.EmptyProperty)},this.getHrefAttribute=function(){for(var a in this.attributes)if("href"==a||a.match(/:href$/))return this.attributes[a];return f.EmptyProperty},this.style=function(a,b,c){var d=this.styles[a];if(null!=d)return d;var e=this.attribute(a);if(null!=e&&e.hasValue())return this.styles[a]=e,e;if(1!=c){var g=this.parent;if(null!=g){var h=g.style(a);if(null!=h&&h.hasValue())return h}}return 1==b&&(d=new f.Property(a,""),this.styles[a]=d),d||f.EmptyProperty},this.render=function(a){if("none"!=this.style("display").value&&"hidden"!=this.style("visibility").value){if(a.save(),this.style("mask").hasValue()){var b=this.style("mask").getDefinition();null!=b&&b.apply(a,this)}else if(this.style("filter").hasValue()){var c=this.style("filter").getDefinition();null!=c&&c.apply(a,this)}else this.setContext(a),this.renderChildren(a),this.clearContext(a);a.restore()}},this.setContext=function(a){},this.clearContext=function(a){},this.renderChildren=function(a){for(var b=0;b<this.children.length;b++)this.children[b].render(a)},this.addChild=function(a,b){var c=a;b&&(c=f.CreateElement(a)),c.parent=this,"title"!=c.type&&this.children.push(c)},this.addStylesFromStyleDefinition=function(){for(var b in f.Styles)if("@"!=b[0]&&e(a,b)){var c=f.Styles[b],d=f.StylesSpecificity[b];if(null!=c)for(var g in c){var h=this.stylesSpecificity[g];"undefined"==typeof h&&(h="000"),d>h&&(this.styles[g]=c[g],this.stylesSpecificity[g]=d)}}},null!=a&&1==a.nodeType){for(var b=0;b<a.attributes.length;b++){var c=a.attributes[b];this.attributes[c.nodeName]=new f.Property(c.nodeName,c.value)}if(this.addStylesFromStyleDefinition(),this.attribute("style").hasValue())for(var d=this.attribute("style").value.split(";"),b=0;b<d.length;b++)if(""!=f.trim(d[b])){var g=d[b].split(":"),h=f.trim(g[0]),i=f.trim(g[1]);this.styles[h]=new f.Property(h,i)}this.attribute("id").hasValue()&&null==f.Definitions[this.attribute("id").value]&&(f.Definitions[this.attribute("id").value]=this);for(var b=0;b<a.childNodes.length;b++){var j=a.childNodes[b];if(1==j.nodeType&&this.addChild(j,!0),this.captureTextNodes&&(3==j.nodeType||4==j.nodeType)){var k=j.value||j.text||j.textContent||"";""!=f.compressSpaces(k)&&this.addChild(new f.Element.tspan(j),!1)}}}},f.Element.RenderedElementBase=function(a){this.base=f.Element.ElementBase,this.base(a),this.setContext=function(a){if(this.style("fill").isUrlDefinition()){var b=this.style("fill").getFillStyleDefinition(this,this.style("fill-opacity"));null!=b&&(a.fillStyle=b)}else if(this.style("fill").hasValue()){var c=this.style("fill");"currentColor"==c.value&&(c.value=this.style("color").value),"inherit"!=c.value&&(a.fillStyle="none"==c.value?"rgba(0,0,0,0)":c.value)}if(this.style("fill-opacity").hasValue()){var c=new f.Property("fill",a.fillStyle);c=c.addOpacity(this.style("fill-opacity")),a.fillStyle=c.value}if(this.style("stroke").isUrlDefinition()){var b=this.style("stroke").getFillStyleDefinition(this,this.style("stroke-opacity"));null!=b&&(a.strokeStyle=b)}else if(this.style("stroke").hasValue()){var d=this.style("stroke");"currentColor"==d.value&&(d.value=this.style("color").value),"inherit"!=d.value&&(a.strokeStyle="none"==d.value?"rgba(0,0,0,0)":d.value)}if(this.style("stroke-opacity").hasValue()){var d=new f.Property("stroke",a.strokeStyle);d=d.addOpacity(this.style("stroke-opacity")),a.strokeStyle=d.value}if(this.style("stroke-width").hasValue()){var e=this.style("stroke-width").toPixels();a.lineWidth=0==e?.001:e}if(this.style("stroke-linecap").hasValue()&&(a.lineCap=this.style("stroke-linecap").value),this.style("stroke-linejoin").hasValue()&&(a.lineJoin=this.style("stroke-linejoin").value),this.style("stroke-miterlimit").hasValue()&&(a.miterLimit=this.style("stroke-miterlimit").value),this.style("stroke-dasharray").hasValue()&&"none"!=this.style("stroke-dasharray").value){var g=f.ToNumberArray(this.style("stroke-dasharray").value);"undefined"!=typeof a.setLineDash?a.setLineDash(g):"undefined"!=typeof a.webkitLineDash?a.webkitLineDash=g:"undefined"==typeof a.mozDash||1==g.length&&0==g[0]||(a.mozDash=g);var h=this.style("stroke-dashoffset").numValueOrDefault(1);"undefined"!=typeof a.lineDashOffset?a.lineDashOffset=h:"undefined"!=typeof a.webkitLineDashOffset?a.webkitLineDashOffset=h:"undefined"!=typeof a.mozDashOffset&&(a.mozDashOffset=h)}if("undefined"!=typeof a.font&&(a.font=f.Font.CreateFont(this.style("font-style").value,this.style("font-variant").value,this.style("font-weight").value,this.style("font-size").hasValue()?this.style("font-size").toPixels()+"px":"",this.style("font-family").value).toString()),this.style("transform",!1,!0).hasValue()){var i=new f.Transform(this.style("transform",!1,!0).value);i.apply(a)}if(this.style("clip-path",!1,!0).hasValue()){var j=this.style("clip-path",!1,!0).getDefinition();null!=j&&j.apply(a)}this.style("opacity").hasValue()&&(a.globalAlpha=this.style("opacity").numValue())}},f.Element.RenderedElementBase.prototype=new f.Element.ElementBase,f.Element.PathElementBase=function(a){this.base=f.Element.RenderedElementBase,this.base(a),this.path=function(a){return null!=a&&a.beginPath(),new f.BoundingBox},this.renderChildren=function(a){this.path(a),f.Mouse.checkPath(this,a),""!=a.fillStyle&&("inherit"!=this.style("fill-rule").valueOrDefault("inherit")?a.fill(this.style("fill-rule").value):a.fill()),""!=a.strokeStyle&&a.stroke();var b=this.getMarkers();if(null!=b){if(this.style("marker-start").isUrlDefinition()){var c=this.style("marker-start").getDefinition();c.render(a,b[0][0],b[0][1])}if(this.style("marker-mid").isUrlDefinition())for(var c=this.style("marker-mid").getDefinition(),d=1;d<b.length-1;d++)c.render(a,b[d][0],b[d][1]);if(this.style("marker-end").isUrlDefinition()){var c=this.style("marker-end").getDefinition();c.render(a,b[b.length-1][0],b[b.length-1][1])}}},this.getBoundingBox=function(){return this.path()},this.getMarkers=function(){return null}},f.Element.PathElementBase.prototype=new f.Element.RenderedElementBase,f.Element.svg=function(a){this.base=f.Element.RenderedElementBase,this.base(a),this.baseClearContext=this.clearContext,this.clearContext=function(a){this.baseClearContext(a),f.ViewPort.RemoveCurrent()},this.baseSetContext=this.setContext,this.setContext=function(a){a.strokeStyle="rgba(0,0,0,0)",a.lineCap="butt",a.lineJoin="miter",a.miterLimit=4,"undefined"!=typeof a.font&&"undefined"!=typeof window.getComputedStyle&&(a.font=window.getComputedStyle(a.canvas).getPropertyValue("font")),this.baseSetContext(a),this.attribute("x").hasValue()||(this.attribute("x",!0).value=0),this.attribute("y").hasValue()||(this.attribute("y",!0).value=0),a.translate(this.attribute("x").toPixels("x"),this.attribute("y").toPixels("y"));var b=f.ViewPort.width(),c=f.ViewPort.height();if(this.attribute("width").hasValue()||(this.attribute("width",!0).value="100%"),this.attribute("height").hasValue()||(this.attribute("height",!0).value="100%"),"undefined"==typeof this.root){b=this.attribute("width").toPixels("x"),c=this.attribute("height").toPixels("y");var d=0,e=0;this.attribute("refX").hasValue()&&this.attribute("refY").hasValue()&&(d=-this.attribute("refX").toPixels("x"),e=-this.attribute("refY").toPixels("y")),"visible"!=this.attribute("overflow").valueOrDefault("hidden")&&(a.beginPath(),a.moveTo(d,e),a.lineTo(b,e),a.lineTo(b,c),a.lineTo(d,c),a.closePath(),a.clip())}if(f.ViewPort.SetCurrent(b,c),this.attribute("viewBox").hasValue()){var g=f.ToNumberArray(this.attribute("viewBox").value),h=g[0],i=g[1];b=g[2],c=g[3],f.AspectRatio(a,this.attribute("preserveAspectRatio").value,f.ViewPort.width(),b,f.ViewPort.height(),c,h,i,this.attribute("refX").value,this.attribute("refY").value),f.ViewPort.RemoveCurrent(),f.ViewPort.SetCurrent(g[2],g[3])}}},f.Element.svg.prototype=new f.Element.RenderedElementBase,f.Element.rect=function(a){this.base=f.Element.PathElementBase,this.base(a),this.path=function(a){var b=this.attribute("x").toPixels("x"),c=this.attribute("y").toPixels("y"),d=this.attribute("width").toPixels("x"),e=this.attribute("height").toPixels("y"),g=this.attribute("rx").toPixels("x"),h=this.attribute("ry").toPixels("y");return this.attribute("rx").hasValue()&&!this.attribute("ry").hasValue()&&(h=g),this.attribute("ry").hasValue()&&!this.attribute("rx").hasValue()&&(g=h),g=Math.min(g,d/2),h=Math.min(h,e/2),null!=a&&(a.beginPath(),a.moveTo(b+g,c),a.lineTo(b+d-g,c),a.quadraticCurveTo(b+d,c,b+d,c+h),a.lineTo(b+d,c+e-h),a.quadraticCurveTo(b+d,c+e,b+d-g,c+e),a.lineTo(b+g,c+e),a.quadraticCurveTo(b,c+e,b,c+e-h),a.lineTo(b,c+h),a.quadraticCurveTo(b,c,b+g,c),a.closePath()),new f.BoundingBox(b,c,b+d,c+e)}},f.Element.rect.prototype=new f.Element.PathElementBase,f.Element.circle=function(a){this.base=f.Element.PathElementBase,this.base(a),this.path=function(a){var b=this.attribute("cx").toPixels("x"),c=this.attribute("cy").toPixels("y"),d=this.attribute("r").toPixels();return null!=a&&(a.beginPath(),a.arc(b,c,d,0,2*Math.PI,!0),a.closePath()),new f.BoundingBox(b-d,c-d,b+d,c+d)}},f.Element.circle.prototype=new f.Element.PathElementBase,f.Element.ellipse=function(a){this.base=f.Element.PathElementBase,this.base(a),this.path=function(a){var b=4*((Math.sqrt(2)-1)/3),c=this.attribute("rx").toPixels("x"),d=this.attribute("ry").toPixels("y"),e=this.attribute("cx").toPixels("x"),g=this.attribute("cy").toPixels("y");return null!=a&&(a.beginPath(),a.moveTo(e,g-d),a.bezierCurveTo(e+b*c,g-d,e+c,g-b*d,e+c,g),a.bezierCurveTo(e+c,g+b*d,e+b*c,g+d,e,g+d),a.bezierCurveTo(e-b*c,g+d,e-c,g+b*d,e-c,g),a.bezierCurveTo(e-c,g-b*d,e-b*c,g-d,e,g-d),a.closePath()),new f.BoundingBox(e-c,g-d,e+c,g+d)}},f.Element.ellipse.prototype=new f.Element.PathElementBase,f.Element.line=function(a){this.base=f.Element.PathElementBase,this.base(a),this.getPoints=function(){return[new f.Point(this.attribute("x1").toPixels("x"),this.attribute("y1").toPixels("y")),new f.Point(this.attribute("x2").toPixels("x"),this.attribute("y2").toPixels("y"))]},this.path=function(a){var b=this.getPoints();return null!=a&&(a.beginPath(),a.moveTo(b[0].x,b[0].y),a.lineTo(b[1].x,b[1].y)),new f.BoundingBox(b[0].x,b[0].y,b[1].x,b[1].y)},this.getMarkers=function(){var a=this.getPoints(),b=a[0].angleTo(a[1]);return[[a[0],b],[a[1],b]]}},f.Element.line.prototype=new f.Element.PathElementBase,f.Element.polyline=function(a){this.base=f.Element.PathElementBase,this.base(a),this.points=f.CreatePath(this.attribute("points").value),this.path=function(a){var b=new f.BoundingBox(this.points[0].x,this.points[0].y);null!=a&&(a.beginPath(),a.moveTo(this.points[0].x,this.points[0].y));for(var c=1;c<this.points.length;c++)b.addPoint(this.points[c].x,this.points[c].y),null!=a&&a.lineTo(this.points[c].x,this.points[c].y);return b},this.getMarkers=function(){for(var a=[],b=0;b<this.points.length-1;b++)a.push([this.points[b],this.points[b].angleTo(this.points[b+1])]);return a.push([this.points[this.points.length-1],a[a.length-1][1]]),a}},f.Element.polyline.prototype=new f.Element.PathElementBase,f.Element.polygon=function(a){this.base=f.Element.polyline,this.base(a),this.basePath=this.path,this.path=function(a){var b=this.basePath(a);return null!=a&&(a.lineTo(this.points[0].x,this.points[0].y),a.closePath()),b}},f.Element.polygon.prototype=new f.Element.polyline,f.Element.path=function(a){this.base=f.Element.PathElementBase,this.base(a);var b=this.attribute("d").value;b=b.replace(/,/gm," ");for(var c=0;2>c;c++)b=b.replace(/([MmZzLlHhVvCcSsQqTtAa])([^\s])/gm,"$1 $2");b=b.replace(/([^\s])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2"),b=b.replace(/([0-9])([+\-])/gm,"$1 $2");for(var c=0;2>c;c++)b=b.replace(/(\.[0-9]*)(\.)/gm,"$1 $2");b=b.replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $3 $4 "),b=f.compressSpaces(b),b=f.trim(b),this.PathParser=new function(a){this.tokens=a.split(" "),this.reset=function(){this.i=-1,this.command="",this.previousCommand="",this.start=new f.Point(0,0),this.control=new f.Point(0,0),this.current=new f.Point(0,0),this.points=[],this.angles=[]},this.isEnd=function(){return this.i>=this.tokens.length-1},this.isCommandOrEnd=function(){return this.isEnd()?!0:null!=this.tokens[this.i+1].match(/^[A-Za-z]$/)},this.isRelativeCommand=function(){switch(this.command){case"m":case"l":case"h":case"v":case"c":case"s":case"q":case"t":case"a":case"z":return!0}return!1},this.getToken=function(){return this.i++,this.tokens[this.i]},this.getScalar=function(){return parseFloat(this.getToken())},this.nextCommand=function(){this.previousCommand=this.command,this.command=this.getToken()},this.getPoint=function(){var a=new f.Point(this.getScalar(),this.getScalar());return this.makeAbsolute(a)},this.getAsControlPoint=function(){var a=this.getPoint();return this.control=a,a},this.getAsCurrentPoint=function(){var a=this.getPoint();return this.current=a,a},this.getReflectedControlPoint=function(){if("c"!=this.previousCommand.toLowerCase()&&"s"!=this.previousCommand.toLowerCase()&&"q"!=this.previousCommand.toLowerCase()&&"t"!=this.previousCommand.toLowerCase())return this.current;var a=new f.Point(2*this.current.x-this.control.x,2*this.current.y-this.control.y);return a},this.makeAbsolute=function(a){return this.isRelativeCommand()&&(a.x+=this.current.x,a.y+=this.current.y),a},this.addMarker=function(a,b,c){null!=c&&this.angles.length>0&&null==this.angles[this.angles.length-1]&&(this.angles[this.angles.length-1]=this.points[this.points.length-1].angleTo(c)),this.addMarkerAngle(a,null==b?null:b.angleTo(a))},this.addMarkerAngle=function(a,b){this.points.push(a),this.angles.push(b)},this.getMarkerPoints=function(){return this.points},this.getMarkerAngles=function(){for(var a=0;a<this.angles.length;a++)if(null==this.angles[a])for(var b=a+1;b<this.angles.length;b++)if(null!=this.angles[b]){this.angles[a]=this.angles[b];break}return this.angles}}(b),this.path=function(a){var b=this.PathParser;b.reset();var c=new f.BoundingBox;for(null!=a&&a.beginPath();!b.isEnd();)switch(b.nextCommand(),b.command){case"M":case"m":var d=b.getAsCurrentPoint();for(b.addMarker(d),c.addPoint(d.x,d.y),null!=a&&a.moveTo(d.x,d.y),b.start=b.current;!b.isCommandOrEnd();){var d=b.getAsCurrentPoint();b.addMarker(d,b.start),c.addPoint(d.x,d.y),null!=a&&a.lineTo(d.x,d.y)}break;case"L":case"l":for(;!b.isCommandOrEnd();){var e=b.current,d=b.getAsCurrentPoint();b.addMarker(d,e),c.addPoint(d.x,d.y),null!=a&&a.lineTo(d.x,d.y)}break;case"H":case"h":for(;!b.isCommandOrEnd();){var g=new f.Point((b.isRelativeCommand()?b.current.x:0)+b.getScalar(),b.current.y);b.addMarker(g,b.current),b.current=g,c.addPoint(b.current.x,b.current.y),null!=a&&a.lineTo(b.current.x,b.current.y)}break;case"V":case"v":for(;!b.isCommandOrEnd();){var g=new f.Point(b.current.x,(b.isRelativeCommand()?b.current.y:0)+b.getScalar());b.addMarker(g,b.current),b.current=g,c.addPoint(b.current.x,b.current.y),null!=a&&a.lineTo(b.current.x,b.current.y)}break;case"C":case"c":for(;!b.isCommandOrEnd();){var h=b.current,i=b.getPoint(),j=b.getAsControlPoint(),k=b.getAsCurrentPoint();b.addMarker(k,j,i),c.addBezierCurve(h.x,h.y,i.x,i.y,j.x,j.y,k.x,k.y),null!=a&&a.bezierCurveTo(i.x,i.y,j.x,j.y,k.x,k.y)}break;case"S":case"s":for(;!b.isCommandOrEnd();){var h=b.current,i=b.getReflectedControlPoint(),j=b.getAsControlPoint(),k=b.getAsCurrentPoint();b.addMarker(k,j,i),c.addBezierCurve(h.x,h.y,i.x,i.y,j.x,j.y,k.x,k.y),null!=a&&a.bezierCurveTo(i.x,i.y,j.x,j.y,k.x,k.y)}break;case"Q":case"q":for(;!b.isCommandOrEnd();){var h=b.current,j=b.getAsControlPoint(),k=b.getAsCurrentPoint();b.addMarker(k,j,j),c.addQuadraticCurve(h.x,h.y,j.x,j.y,k.x,k.y),null!=a&&a.quadraticCurveTo(j.x,j.y,k.x,k.y)}break;case"T":case"t":for(;!b.isCommandOrEnd();){var h=b.current,j=b.getReflectedControlPoint();b.control=j;var k=b.getAsCurrentPoint();b.addMarker(k,j,j),c.addQuadraticCurve(h.x,h.y,j.x,j.y,k.x,k.y),null!=a&&a.quadraticCurveTo(j.x,j.y,k.x,k.y)}break;case"A":case"a":for(;!b.isCommandOrEnd();){var h=b.current,l=b.getScalar(),m=b.getScalar(),n=b.getScalar()*(Math.PI/180),o=b.getScalar(),p=b.getScalar(),k=b.getAsCurrentPoint(),q=new f.Point(Math.cos(n)*(h.x-k.x)/2+Math.sin(n)*(h.y-k.y)/2,-Math.sin(n)*(h.x-k.x)/2+Math.cos(n)*(h.y-k.y)/2),r=Math.pow(q.x,2)/Math.pow(l,2)+Math.pow(q.y,2)/Math.pow(m,2);r>1&&(l*=Math.sqrt(r),m*=Math.sqrt(r));var s=(o==p?-1:1)*Math.sqrt((Math.pow(l,2)*Math.pow(m,2)-Math.pow(l,2)*Math.pow(q.y,2)-Math.pow(m,2)*Math.pow(q.x,2))/(Math.pow(l,2)*Math.pow(q.y,2)+Math.pow(m,2)*Math.pow(q.x,2)));isNaN(s)&&(s=0);var t=new f.Point(s*l*q.y/m,s*-m*q.x/l),u=new f.Point((h.x+k.x)/2+Math.cos(n)*t.x-Math.sin(n)*t.y,(h.y+k.y)/2+Math.sin(n)*t.x+Math.cos(n)*t.y),v=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2))},w=function(a,b){return(a[0]*b[0]+a[1]*b[1])/(v(a)*v(b))},x=function(a,b){return(a[0]*b[1]<a[1]*b[0]?-1:1)*Math.acos(w(a,b))},y=x([1,0],[(q.x-t.x)/l,(q.y-t.y)/m]),z=[(q.x-t.x)/l,(q.y-t.y)/m],A=[(-q.x-t.x)/l,(-q.y-t.y)/m],B=x(z,A);w(z,A)<=-1&&(B=Math.PI),w(z,A)>=1&&(B=0);var C=1-p?1:-1,D=y+C*(B/2),E=new f.Point(u.x+l*Math.cos(D),u.y+m*Math.sin(D));if(b.addMarkerAngle(E,D-C*Math.PI/2),b.addMarkerAngle(k,D-C*Math.PI),c.addPoint(k.x,k.y),null!=a){var w=l>m?l:m,F=l>m?1:l/m,G=l>m?m/l:1;a.translate(u.x,u.y),a.rotate(n),a.scale(F,G),a.arc(0,0,w,y,y+B,1-p),a.scale(1/F,1/G),a.rotate(-n),a.translate(-u.x,-u.y)}}break;case"Z":case"z":null!=a&&a.closePath(),b.current=b.start}return c},this.getMarkers=function(){for(var a=this.PathParser.getMarkerPoints(),b=this.PathParser.getMarkerAngles(),c=[],d=0;d<a.length;d++)c.push([a[d],b[d]]);return c}},f.Element.path.prototype=new f.Element.PathElementBase,f.Element.pattern=function(a){this.base=f.Element.ElementBase,this.base(a),this.createPattern=function(a,b){var c=this.attribute("width").toPixels("x",!0),d=this.attribute("height").toPixels("y",!0),e=new f.Element.svg;e.attributes.viewBox=new f.Property("viewBox",this.attribute("viewBox").value),e.attributes.width=new f.Property("width",c+"px"),e.attributes.height=new f.Property("height",d+"px"),e.attributes.transform=new f.Property("transform",this.attribute("patternTransform").value),e.children=this.children;var g=document.createElement("canvas");g.width=c,g.height=d;var h=g.getContext("2d");this.attribute("x").hasValue()&&this.attribute("y").hasValue()&&h.translate(this.attribute("x").toPixels("x",!0),this.attribute("y").toPixels("y",!0));for(var i=-1;1>=i;i++)for(var j=-1;1>=j;j++)h.save(),e.attributes.x=new f.Property("x",i*g.width),e.attributes.y=new f.Property("y",j*g.height),e.render(h),h.restore();var k=a.createPattern(g,"repeat");return k}},f.Element.pattern.prototype=new f.Element.ElementBase,f.Element.marker=function(a){this.base=f.Element.ElementBase,
this.base(a),this.baseRender=this.render,this.render=function(a,b,c){a.translate(b.x,b.y),"auto"==this.attribute("orient").valueOrDefault("auto")&&a.rotate(c),"strokeWidth"==this.attribute("markerUnits").valueOrDefault("strokeWidth")&&a.scale(a.lineWidth,a.lineWidth),a.save();var d=new f.Element.svg;d.attributes.viewBox=new f.Property("viewBox",this.attribute("viewBox").value),d.attributes.refX=new f.Property("refX",this.attribute("refX").value),d.attributes.refY=new f.Property("refY",this.attribute("refY").value),d.attributes.width=new f.Property("width",this.attribute("markerWidth").value),d.attributes.height=new f.Property("height",this.attribute("markerHeight").value),d.attributes.fill=new f.Property("fill",this.attribute("fill").valueOrDefault("black")),d.attributes.stroke=new f.Property("stroke",this.attribute("stroke").valueOrDefault("none")),d.children=this.children,d.render(a),a.restore(),"strokeWidth"==this.attribute("markerUnits").valueOrDefault("strokeWidth")&&a.scale(1/a.lineWidth,1/a.lineWidth),"auto"==this.attribute("orient").valueOrDefault("auto")&&a.rotate(-c),a.translate(-b.x,-b.y)}},f.Element.marker.prototype=new f.Element.ElementBase,f.Element.defs=function(a){this.base=f.Element.ElementBase,this.base(a),this.render=function(a){}},f.Element.defs.prototype=new f.Element.ElementBase,f.Element.GradientBase=function(a){this.base=f.Element.ElementBase,this.base(a),this.stops=[];for(var b=0;b<this.children.length;b++){var c=this.children[b];"stop"==c.type&&this.stops.push(c)}this.getGradient=function(){},this.gradientUnits=function(){return this.attribute("gradientUnits").valueOrDefault("objectBoundingBox")},this.attributesToInherit=["gradientUnits"],this.inheritStopContainer=function(a){for(var b=0;b<this.attributesToInherit.length;b++){var c=this.attributesToInherit[b];!this.attribute(c).hasValue()&&a.attribute(c).hasValue()&&(this.attribute(c,!0).value=a.attribute(c).value)}},this.createGradient=function(a,b,c){var d=this;this.getHrefAttribute().hasValue()&&(d=this.getHrefAttribute().getDefinition(),this.inheritStopContainer(d));var e=function(a){if(c.hasValue()){var b=new f.Property("color",a);return b.addOpacity(c).value}return a},g=this.getGradient(a,b);if(null==g)return e(d.stops[d.stops.length-1].color);for(var h=0;h<d.stops.length;h++)g.addColorStop(d.stops[h].offset,e(d.stops[h].color));if(this.attribute("gradientTransform").hasValue()){var i=f.ViewPort.viewPorts[0],j=new f.Element.rect;j.attributes.x=new f.Property("x",-f.MAX_VIRTUAL_PIXELS/3),j.attributes.y=new f.Property("y",-f.MAX_VIRTUAL_PIXELS/3),j.attributes.width=new f.Property("width",f.MAX_VIRTUAL_PIXELS),j.attributes.height=new f.Property("height",f.MAX_VIRTUAL_PIXELS);var k=new f.Element.g;k.attributes.transform=new f.Property("transform",this.attribute("gradientTransform").value),k.children=[j];var l=new f.Element.svg;l.attributes.x=new f.Property("x",0),l.attributes.y=new f.Property("y",0),l.attributes.width=new f.Property("width",i.width),l.attributes.height=new f.Property("height",i.height),l.children=[k];var m=document.createElement("canvas");m.width=i.width,m.height=i.height;var n=m.getContext("2d");return n.fillStyle=g,l.render(n),n.createPattern(m,"no-repeat")}return g}},f.Element.GradientBase.prototype=new f.Element.ElementBase,f.Element.linearGradient=function(a){this.base=f.Element.GradientBase,this.base(a),this.attributesToInherit.push("x1"),this.attributesToInherit.push("y1"),this.attributesToInherit.push("x2"),this.attributesToInherit.push("y2"),this.getGradient=function(a,b){var c="objectBoundingBox"==this.gradientUnits()?b.getBoundingBox():null;this.attribute("x1").hasValue()||this.attribute("y1").hasValue()||this.attribute("x2").hasValue()||this.attribute("y2").hasValue()||(this.attribute("x1",!0).value=0,this.attribute("y1",!0).value=0,this.attribute("x2",!0).value=1,this.attribute("y2",!0).value=0);var d="objectBoundingBox"==this.gradientUnits()?c.x()+c.width()*this.attribute("x1").numValue():this.attribute("x1").toPixels("x"),e="objectBoundingBox"==this.gradientUnits()?c.y()+c.height()*this.attribute("y1").numValue():this.attribute("y1").toPixels("y"),f="objectBoundingBox"==this.gradientUnits()?c.x()+c.width()*this.attribute("x2").numValue():this.attribute("x2").toPixels("x"),g="objectBoundingBox"==this.gradientUnits()?c.y()+c.height()*this.attribute("y2").numValue():this.attribute("y2").toPixels("y");return d==f&&e==g?null:a.createLinearGradient(d,e,f,g)}},f.Element.linearGradient.prototype=new f.Element.GradientBase,f.Element.radialGradient=function(a){this.base=f.Element.GradientBase,this.base(a),this.attributesToInherit.push("cx"),this.attributesToInherit.push("cy"),this.attributesToInherit.push("r"),this.attributesToInherit.push("fx"),this.attributesToInherit.push("fy"),this.getGradient=function(a,b){var c=b.getBoundingBox();this.attribute("cx").hasValue()||(this.attribute("cx",!0).value="50%"),this.attribute("cy").hasValue()||(this.attribute("cy",!0).value="50%"),this.attribute("r").hasValue()||(this.attribute("r",!0).value="50%");var d="objectBoundingBox"==this.gradientUnits()?c.x()+c.width()*this.attribute("cx").numValue():this.attribute("cx").toPixels("x"),e="objectBoundingBox"==this.gradientUnits()?c.y()+c.height()*this.attribute("cy").numValue():this.attribute("cy").toPixels("y"),f=d,g=e;this.attribute("fx").hasValue()&&(f="objectBoundingBox"==this.gradientUnits()?c.x()+c.width()*this.attribute("fx").numValue():this.attribute("fx").toPixels("x")),this.attribute("fy").hasValue()&&(g="objectBoundingBox"==this.gradientUnits()?c.y()+c.height()*this.attribute("fy").numValue():this.attribute("fy").toPixels("y"));var h="objectBoundingBox"==this.gradientUnits()?(c.width()+c.height())/2*this.attribute("r").numValue():this.attribute("r").toPixels();return a.createRadialGradient(f,g,0,d,e,h)}},f.Element.radialGradient.prototype=new f.Element.GradientBase,f.Element.stop=function(a){this.base=f.Element.ElementBase,this.base(a),this.offset=this.attribute("offset").numValue(),this.offset<0&&(this.offset=0),this.offset>1&&(this.offset=1);var b=this.style("stop-color",!0);""===b.value&&(b.value="#000"),this.style("stop-opacity").hasValue()&&(b=b.addOpacity(this.style("stop-opacity"))),this.color=b.value},f.Element.stop.prototype=new f.Element.ElementBase,f.Element.AnimateBase=function(a){this.base=f.Element.ElementBase,this.base(a),f.Animations.push(this),this.duration=0,this.begin=this.attribute("begin").toMilliseconds(),this.maxDuration=this.begin+this.attribute("dur").toMilliseconds(),this.getProperty=function(){var a=this.attribute("attributeType").value,b=this.attribute("attributeName").value;return"CSS"==a?this.parent.style(b,!0):this.parent.attribute(b,!0)},this.initialValue=null,this.initialUnits="",this.removed=!1,this.calcValue=function(){return""},this.update=function(a){if(null==this.initialValue&&(this.initialValue=this.getProperty().value,this.initialUnits=this.getProperty().getUnits()),this.duration>this.maxDuration){if("indefinite"==this.attribute("repeatCount").value||"indefinite"==this.attribute("repeatDur").value)this.duration=0;else if("freeze"!=this.attribute("fill").valueOrDefault("remove")||this.frozen){if("remove"==this.attribute("fill").valueOrDefault("remove")&&!this.removed)return this.removed=!0,this.getProperty().value=this.parent.animationFrozen?this.parent.animationFrozenValue:this.initialValue,!0}else this.frozen=!0,this.parent.animationFrozen=!0,this.parent.animationFrozenValue=this.getProperty().value;return!1}this.duration=this.duration+a;var b=!1;if(this.begin<this.duration){var c=this.calcValue();if(this.attribute("type").hasValue()){var d=this.attribute("type").value;c=d+"("+c+")"}this.getProperty().value=c,b=!0}return b},this.from=this.attribute("from"),this.to=this.attribute("to"),this.values=this.attribute("values"),this.values.hasValue()&&(this.values.value=this.values.value.split(";")),this.progress=function(){var a={progress:(this.duration-this.begin)/(this.maxDuration-this.begin)};if(this.values.hasValue()){var b=a.progress*(this.values.value.length-1),c=Math.floor(b),d=Math.ceil(b);a.from=new f.Property("from",parseFloat(this.values.value[c])),a.to=new f.Property("to",parseFloat(this.values.value[d])),a.progress=(b-c)/(d-c)}else a.from=this.from,a.to=this.to;return a}},f.Element.AnimateBase.prototype=new f.Element.ElementBase,f.Element.animate=function(a){this.base=f.Element.AnimateBase,this.base(a),this.calcValue=function(){var a=this.progress(),b=a.from.numValue()+(a.to.numValue()-a.from.numValue())*a.progress;return b+this.initialUnits}},f.Element.animate.prototype=new f.Element.AnimateBase,f.Element.animateColor=function(b){this.base=f.Element.AnimateBase,this.base(b),this.calcValue=function(){var b=this.progress(),c=new a(b.from.value),d=new a(b.to.value);if(c.ok&&d.ok){var e=c.r+(d.r-c.r)*b.progress,f=c.g+(d.g-c.g)*b.progress,g=c.b+(d.b-c.b)*b.progress;return"rgb("+parseInt(e,10)+","+parseInt(f,10)+","+parseInt(g,10)+")"}return this.attribute("from").value}},f.Element.animateColor.prototype=new f.Element.AnimateBase,f.Element.animateTransform=function(a){this.base=f.Element.AnimateBase,this.base(a),this.calcValue=function(){for(var a=this.progress(),b=f.ToNumberArray(a.from.value),c=f.ToNumberArray(a.to.value),d="",e=0;e<b.length;e++)d+=b[e]+(c[e]-b[e])*a.progress+" ";return d}},f.Element.animateTransform.prototype=new f.Element.animate,f.Element.font=function(a){this.base=f.Element.ElementBase,this.base(a),this.horizAdvX=this.attribute("horiz-adv-x").numValue(),this.isRTL=!1,this.isArabic=!1,this.fontFace=null,this.missingGlyph=null,this.glyphs=[];for(var b=0;b<this.children.length;b++){var c=this.children[b];"font-face"==c.type?(this.fontFace=c,c.style("font-family").hasValue()&&(f.Definitions[c.style("font-family").value]=this)):"missing-glyph"==c.type?this.missingGlyph=c:"glyph"==c.type&&(""!=c.arabicForm?(this.isRTL=!0,this.isArabic=!0,"undefined"==typeof this.glyphs[c.unicode]&&(this.glyphs[c.unicode]=[]),this.glyphs[c.unicode][c.arabicForm]=c):this.glyphs[c.unicode]=c)}},f.Element.font.prototype=new f.Element.ElementBase,f.Element.fontface=function(a){this.base=f.Element.ElementBase,this.base(a),this.ascent=this.attribute("ascent").value,this.descent=this.attribute("descent").value,this.unitsPerEm=this.attribute("units-per-em").numValue()},f.Element.fontface.prototype=new f.Element.ElementBase,f.Element.missingglyph=function(a){this.base=f.Element.path,this.base(a),this.horizAdvX=0},f.Element.missingglyph.prototype=new f.Element.path,f.Element.glyph=function(a){this.base=f.Element.path,this.base(a),this.horizAdvX=this.attribute("horiz-adv-x").numValue(),this.unicode=this.attribute("unicode").value,this.arabicForm=this.attribute("arabic-form").value},f.Element.glyph.prototype=new f.Element.path,f.Element.text=function(a){this.captureTextNodes=!0,this.base=f.Element.RenderedElementBase,this.base(a),this.baseSetContext=this.setContext,this.setContext=function(a){this.baseSetContext(a);var b=this.style("dominant-baseline").toTextBaseline();null==b&&(b=this.style("alignment-baseline").toTextBaseline()),null!=b&&(a.textBaseline=b)},this.getBoundingBox=function(){var a=this.attribute("x").toPixels("x"),b=this.attribute("y").toPixels("y"),c=this.parent.style("font-size").numValueOrDefault(f.Font.Parse(f.ctx.font).fontSize);return new f.BoundingBox(a,b-c,a+Math.floor(2*c/3)*this.children[0].getText().length,b)},this.renderChildren=function(a){this.x=this.attribute("x").toPixels("x"),this.y=this.attribute("y").toPixels("y"),this.attribute("dx").hasValue()&&(this.x+=this.attribute("dx").toPixels("x")),this.attribute("dy").hasValue()&&(this.y+=this.attribute("dy").toPixels("y")),this.x+=this.getAnchorDelta(a,this,0);for(var b=0;b<this.children.length;b++)this.renderChild(a,this,b)},this.getAnchorDelta=function(a,b,c){var d=this.style("text-anchor").valueOrDefault("start");if("start"!=d){for(var e=0,f=c;f<b.children.length;f++){var g=b.children[f];if(f>c&&g.attribute("x").hasValue())break;e+=g.measureTextRecursive(a)}return-1*("end"==d?e:e/2)}return 0},this.renderChild=function(a,b,c){var d=b.children[c];d.attribute("x").hasValue()?(d.x=d.attribute("x").toPixels("x")+b.getAnchorDelta(a,b,c),d.attribute("dx").hasValue()&&(d.x+=d.attribute("dx").toPixels("x"))):(d.attribute("dx").hasValue()&&(b.x+=d.attribute("dx").toPixels("x")),d.x=b.x),b.x=d.x+d.measureText(a),d.attribute("y").hasValue()?(d.y=d.attribute("y").toPixels("y"),d.attribute("dy").hasValue()&&(d.y+=d.attribute("dy").toPixels("y"))):(d.attribute("dy").hasValue()&&(b.y+=d.attribute("dy").toPixels("y")),d.y=b.y),b.y=d.y,d.render(a);for(var c=0;c<d.children.length;c++)b.renderChild(a,d,c)}},f.Element.text.prototype=new f.Element.RenderedElementBase,f.Element.TextElementBase=function(a){this.base=f.Element.RenderedElementBase,this.base(a),this.getGlyph=function(a,b,c){var d=b[c],e=null;if(a.isArabic){var f="isolated";(0==c||" "==b[c-1])&&c<b.length-2&&" "!=b[c+1]&&(f="terminal"),c>0&&" "!=b[c-1]&&c<b.length-2&&" "!=b[c+1]&&(f="medial"),c>0&&" "!=b[c-1]&&(c==b.length-1||" "==b[c+1])&&(f="initial"),"undefined"!=typeof a.glyphs[d]&&(e=a.glyphs[d][f],null==e&&"glyph"==a.glyphs[d].type&&(e=a.glyphs[d]))}else e=a.glyphs[d];return null==e&&(e=a.missingGlyph),e},this.renderChildren=function(a){var b=this.parent.style("font-family").getDefinition();if(null==b)""!=a.fillStyle&&a.fillText(f.compressSpaces(this.getText()),this.x,this.y),""!=a.strokeStyle&&a.strokeText(f.compressSpaces(this.getText()),this.x,this.y);else{var c=this.parent.style("font-size").numValueOrDefault(f.Font.Parse(f.ctx.font).fontSize),d=this.parent.style("font-style").valueOrDefault(f.Font.Parse(f.ctx.font).fontStyle),e=this.getText();b.isRTL&&(e=e.split("").reverse().join(""));for(var g=f.ToNumberArray(this.parent.attribute("dx").value),h=0;h<e.length;h++){var i=this.getGlyph(b,e,h),j=c/b.fontFace.unitsPerEm;a.translate(this.x,this.y),a.scale(j,-j);var k=a.lineWidth;a.lineWidth=a.lineWidth*b.fontFace.unitsPerEm/c,"italic"==d&&a.transform(1,0,.4,1,0,0),i.render(a),"italic"==d&&a.transform(1,0,-.4,1,0,0),a.lineWidth=k,a.scale(1/j,-1/j),a.translate(-this.x,-this.y),this.x+=c*(i.horizAdvX||b.horizAdvX)/b.fontFace.unitsPerEm,"undefined"==typeof g[h]||isNaN(g[h])||(this.x+=g[h])}}},this.getText=function(){},this.measureTextRecursive=function(a){for(var b=this.measureText(a),c=0;c<this.children.length;c++)b+=this.children[c].measureTextRecursive(a);return b},this.measureText=function(a){var b=this.parent.style("font-family").getDefinition();if(null!=b){var c=this.parent.style("font-size").numValueOrDefault(f.Font.Parse(f.ctx.font).fontSize),d=0,e=this.getText();b.isRTL&&(e=e.split("").reverse().join(""));for(var g=f.ToNumberArray(this.parent.attribute("dx").value),h=0;h<e.length;h++){var i=this.getGlyph(b,e,h);d+=(i.horizAdvX||b.horizAdvX)*c/b.fontFace.unitsPerEm,"undefined"==typeof g[h]||isNaN(g[h])||(d+=g[h])}return d}var j=f.compressSpaces(this.getText());if(!a.measureText)return 10*j.length;a.save(),this.setContext(a);var k=a.measureText(j).width;return a.restore(),k}},f.Element.TextElementBase.prototype=new f.Element.RenderedElementBase,f.Element.tspan=function(a){this.captureTextNodes=!0,this.base=f.Element.TextElementBase,this.base(a),this.text=f.compressSpaces(a.value||a.text||a.textContent||""),this.getText=function(){return this.children.length>0?"":this.text}},f.Element.tspan.prototype=new f.Element.TextElementBase,f.Element.tref=function(a){this.base=f.Element.TextElementBase,this.base(a),this.getText=function(){var a=this.getHrefAttribute().getDefinition();return null!=a?a.children[0].getText():void 0}},f.Element.tref.prototype=new f.Element.TextElementBase,f.Element.a=function(a){this.base=f.Element.TextElementBase,this.base(a),this.hasText=a.childNodes.length>0;for(var b=0;b<a.childNodes.length;b++)3!=a.childNodes[b].nodeType&&(this.hasText=!1);this.text=this.hasText?a.childNodes[0].value:"",this.getText=function(){return this.text},this.baseRenderChildren=this.renderChildren,this.renderChildren=function(a){if(this.hasText){this.baseRenderChildren(a);var b=new f.Property("fontSize",f.Font.Parse(f.ctx.font).fontSize);f.Mouse.checkBoundingBox(this,new f.BoundingBox(this.x,this.y-b.toPixels("y"),this.x+this.measureText(a),this.y))}else if(this.children.length>0){var c=new f.Element.g;c.children=this.children,c.parent=this,c.render(a)}},this.onclick=function(){window.open(this.getHrefAttribute().value)},this.onmousemove=function(){f.ctx.canvas.style.cursor="pointer"}},f.Element.a.prototype=new f.Element.TextElementBase,f.Element.image=function(a){this.base=f.Element.RenderedElementBase,this.base(a);var b=this.getHrefAttribute().value;if(""!=b){var c=b.match(/\.svg$/);if(f.Images.push(this),this.loaded=!1,c)this.img=f.ajax(b),this.loaded=!0;else{this.img=document.createElement("img"),1==f.opts.useCORS&&(this.img.crossOrigin="Anonymous");var d=this;this.img.onload=function(){d.loaded=!0},this.img.onerror=function(){f.log('ERROR: image "'+b+'" not found'),d.loaded=!0},this.img.src=b}this.renderChildren=function(a){var b=this.attribute("x").toPixels("x"),d=this.attribute("y").toPixels("y"),e=this.attribute("width").toPixels("x"),g=this.attribute("height").toPixels("y");0!=e&&0!=g&&(a.save(),c?a.drawSvg(this.img,b,d,e,g):(a.translate(b,d),f.AspectRatio(a,this.attribute("preserveAspectRatio").value,e,this.img.width,g,this.img.height,0,0),a.drawImage(this.img,0,0)),a.restore())},this.getBoundingBox=function(){var a=this.attribute("x").toPixels("x"),b=this.attribute("y").toPixels("y"),c=this.attribute("width").toPixels("x"),d=this.attribute("height").toPixels("y");return new f.BoundingBox(a,b,a+c,b+d)}}},f.Element.image.prototype=new f.Element.RenderedElementBase,f.Element.g=function(a){this.base=f.Element.RenderedElementBase,this.base(a),this.getBoundingBox=function(){for(var a=new f.BoundingBox,b=0;b<this.children.length;b++)a.addBoundingBox(this.children[b].getBoundingBox());return a}},f.Element.g.prototype=new f.Element.RenderedElementBase,f.Element.symbol=function(a){this.base=f.Element.RenderedElementBase,this.base(a),this.render=function(a){}},f.Element.symbol.prototype=new f.Element.RenderedElementBase,f.Element.style=function(a){this.base=f.Element.ElementBase,this.base(a);for(var b="",d=0;d<a.childNodes.length;d++)b+=a.childNodes[d].data;b=b.replace(/(\/\*([^*]|[\r\n]|(\*+([^*\/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,""),b=f.compressSpaces(b);for(var e=b.split("}"),d=0;d<e.length;d++)if(""!=f.trim(e[d]))for(var g=e[d].split("{"),h=g[0].split(","),i=g[1].split(";"),j=0;j<h.length;j++){var k=f.trim(h[j]);if(""!=k){for(var l=f.Styles[k]||{},m=0;m<i.length;m++){var n=i[m].indexOf(":"),o=i[m].substr(0,n),p=i[m].substr(n+1,i[m].length-n);null!=o&&null!=p&&(l[f.trim(o)]=new f.Property(f.trim(o),f.trim(p)))}if(f.Styles[k]=l,f.StylesSpecificity[k]=c(k),"@font-face"==k)for(var q=l["font-family"].value.replace(/"/g,""),r=l.src.value.split(","),s=0;s<r.length;s++)if(r[s].indexOf('format("svg")')>0)for(var t=r[s].indexOf("url"),u=r[s].indexOf(")",t),v=r[s].substr(t+5,u-t-6),w=f.parseXml(f.ajax(v)),x=w.getElementsByTagName("font"),y=0;y<x.length;y++){var z=f.CreateElement(x[y]);f.Definitions[q]=z}}}},f.Element.style.prototype=new f.Element.ElementBase,f.Element.use=function(a){this.base=f.Element.RenderedElementBase,this.base(a),this.baseSetContext=this.setContext,this.setContext=function(a){this.baseSetContext(a),this.attribute("x").hasValue()&&a.translate(this.attribute("x").toPixels("x"),0),this.attribute("y").hasValue()&&a.translate(0,this.attribute("y").toPixels("y"))};var b=this.getHrefAttribute().getDefinition();this.path=function(a){null!=b&&b.path(a)},this.getBoundingBox=function(){return null!=b?b.getBoundingBox():void 0},this.renderChildren=function(a){if(null!=b){var c=b;"symbol"==b.type&&(c=new f.Element.svg,c.type="svg",c.attributes.viewBox=new f.Property("viewBox",b.attribute("viewBox").value),c.attributes.preserveAspectRatio=new f.Property("preserveAspectRatio",b.attribute("preserveAspectRatio").value),c.attributes.overflow=new f.Property("overflow",b.attribute("overflow").value),c.children=b.children),"svg"==c.type&&(this.attribute("width").hasValue()&&(c.attributes.width=new f.Property("width",this.attribute("width").value)),this.attribute("height").hasValue()&&(c.attributes.height=new f.Property("height",this.attribute("height").value)));var d=c.parent;c.parent=null,c.render(a),c.parent=d}}},f.Element.use.prototype=new f.Element.RenderedElementBase,f.Element.mask=function(a){this.base=f.Element.ElementBase,this.base(a),this.apply=function(a,b){var c=this.attribute("x").toPixels("x"),d=this.attribute("y").toPixels("y"),e=this.attribute("width").toPixels("x"),g=this.attribute("height").toPixels("y");if(0==e&&0==g){for(var h=new f.BoundingBox,i=0;i<this.children.length;i++)h.addBoundingBox(this.children[i].getBoundingBox());var c=Math.floor(h.x1),d=Math.floor(h.y1),e=Math.floor(h.width()),g=Math.floor(h.height())}var j=b.attribute("mask").value;b.attribute("mask").value="";var k=document.createElement("canvas");k.width=c+e,k.height=d+g;var l=k.getContext("2d");this.renderChildren(l);var m=document.createElement("canvas");m.width=c+e,m.height=d+g;var n=m.getContext("2d");b.render(n),n.globalCompositeOperation="destination-in",n.fillStyle=l.createPattern(k,"no-repeat"),n.fillRect(0,0,c+e,d+g),a.fillStyle=n.createPattern(m,"no-repeat"),a.fillRect(0,0,c+e,d+g),b.attribute("mask").value=j},this.render=function(a){}},f.Element.mask.prototype=new f.Element.ElementBase,f.Element.clipPath=function(a){this.base=f.Element.ElementBase,this.base(a),this.apply=function(a){var b=CanvasRenderingContext2D.prototype.beginPath;CanvasRenderingContext2D.prototype.beginPath=function(){};var c=CanvasRenderingContext2D.prototype.closePath;CanvasRenderingContext2D.prototype.closePath=function(){},b.call(a);for(var d=0;d<this.children.length;d++){var e=this.children[d];if("undefined"!=typeof e.path){var g=null;e.style("transform",!1,!0).hasValue()&&(g=new f.Transform(e.style("transform",!1,!0).value),g.apply(a)),e.path(a),CanvasRenderingContext2D.prototype.closePath=c,g&&g.unapply(a)}}c.call(a),a.clip(),CanvasRenderingContext2D.prototype.beginPath=b,CanvasRenderingContext2D.prototype.closePath=c},this.render=function(a){}},f.Element.clipPath.prototype=new f.Element.ElementBase,f.Element.filter=function(a){this.base=f.Element.ElementBase,this.base(a),this.apply=function(a,b){var c=b.getBoundingBox(),d=Math.floor(c.x1),e=Math.floor(c.y1),f=Math.floor(c.width()),g=Math.floor(c.height()),h=b.style("filter").value;b.style("filter").value="";for(var i=0,j=0,k=0;k<this.children.length;k++){var l=this.children[k].extraFilterDistance||0;i=Math.max(i,l),j=Math.max(j,l)}var m=document.createElement("canvas");m.width=f+2*i,m.height=g+2*j;var n=m.getContext("2d");n.translate(-d+i,-e+j),b.render(n);for(var k=0;k<this.children.length;k++)"function"==typeof this.children[k].apply&&this.children[k].apply(n,0,0,f+2*i,g+2*j);a.drawImage(m,0,0,f+2*i,g+2*j,d-i,e-j,f+2*i,g+2*j),b.style("filter",!0).value=h},this.render=function(a){}},f.Element.filter.prototype=new f.Element.ElementBase,f.Element.feMorphology=function(a){this.base=f.Element.ElementBase,this.base(a),this.apply=function(a,b,c,d,e){}},f.Element.feMorphology.prototype=new f.Element.ElementBase,f.Element.feComposite=function(a){this.base=f.Element.ElementBase,this.base(a),this.apply=function(a,b,c,d,e){}},f.Element.feComposite.prototype=new f.Element.ElementBase,f.Element.feColorMatrix=function(a){function b(a,b,c,d,e,f){return a[c*d*4+4*b+f]}function c(a,b,c,d,e,f,g){a[c*d*4+4*b+f]=g}function d(a,b){var c=e[a];return c*(0>c?b-255:b)}this.base=f.Element.ElementBase,this.base(a);var e=f.ToNumberArray(this.attribute("values").value);switch(this.attribute("type").valueOrDefault("matrix")){case"saturate":var g=e[0];e=[.213+.787*g,.715-.715*g,.072-.072*g,0,0,.213-.213*g,.715+.285*g,.072-.072*g,0,0,.213-.213*g,.715-.715*g,.072+.928*g,0,0,0,0,0,1,0,0,0,0,0,1];break;case"hueRotate":var h=e[0]*Math.PI/180,i=function(a,b,c){return a+Math.cos(h)*b+Math.sin(h)*c};e=[i(.213,.787,-.213),i(.715,-.715,-.715),i(.072,-.072,.928),0,0,i(.213,-.213,.143),i(.715,.285,.14),i(.072,-.072,-.283),0,0,i(.213,-.213,-.787),i(.715,-.715,.715),i(.072,.928,.072),0,0,0,0,0,1,0,0,0,0,0,1];break;case"luminanceToAlpha":e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2125,.7154,.0721,0,0,0,0,0,0,1]}this.apply=function(a,e,f,g,h){for(var i=a.getImageData(0,0,g,h),f=0;h>f;f++)for(var e=0;g>e;e++){var j=b(i.data,e,f,g,h,0),k=b(i.data,e,f,g,h,1),l=b(i.data,e,f,g,h,2),m=b(i.data,e,f,g,h,3);c(i.data,e,f,g,h,0,d(0,j)+d(1,k)+d(2,l)+d(3,m)+d(4,1)),c(i.data,e,f,g,h,1,d(5,j)+d(6,k)+d(7,l)+d(8,m)+d(9,1)),c(i.data,e,f,g,h,2,d(10,j)+d(11,k)+d(12,l)+d(13,m)+d(14,1)),c(i.data,e,f,g,h,3,d(15,j)+d(16,k)+d(17,l)+d(18,m)+d(19,1))}a.clearRect(0,0,g,h),a.putImageData(i,0,0)}},f.Element.feColorMatrix.prototype=new f.Element.ElementBase,f.Element.feGaussianBlur=function(a){this.base=f.Element.ElementBase,this.base(a),this.blurRadius=Math.floor(this.attribute("stdDeviation").numValue()),this.extraFilterDistance=this.blurRadius,this.apply=function(a,c,d,e,g){return"undefined"==typeof b.canvasRGBA?void f.log("ERROR: StackBlur.js must be included for blur to work"):(a.canvas.id=f.UniqueId(),a.canvas.style.display="none",document.body.appendChild(a.canvas),b.canvasRGBA(a.canvas.id,c,d,e,g,this.blurRadius),void document.body.removeChild(a.canvas))}},f.Element.feGaussianBlur.prototype=new f.Element.ElementBase,f.Element.title=function(a){},f.Element.title.prototype=new f.Element.ElementBase,f.Element.desc=function(a){},f.Element.desc.prototype=new f.Element.ElementBase,f.Element.MISSING=function(a){f.log("ERROR: Element '"+a.nodeName+"' not yet implemented.")},f.Element.MISSING.prototype=new f.Element.ElementBase,f.CreateElement=function(a){var b=a.nodeName.replace(/^[^:]+:/,"");b=b.replace(/\-/g,"");var c=null;return c="undefined"!=typeof f.Element[b]?new f.Element[b](a):new f.Element.MISSING(a),c.type=a.nodeName,c},f.load=function(a,b){f.loadXml(a,f.ajax(b))},f.loadXml=function(a,b){f.loadXmlDoc(a,f.parseXml(b))},f.loadXmlDoc=function(a,b){f.init(a);var c=function(b){for(var c=a.canvas;c;)b.x-=c.offsetLeft,b.y-=c.offsetTop,c=c.offsetParent;return window.scrollX&&(b.x+=window.scrollX),window.scrollY&&(b.y+=window.scrollY),b};1!=f.opts.ignoreMouse&&(a.canvas.onclick=function(a){var b=c(new f.Point(null!=a?a.clientX:event.clientX,null!=a?a.clientY:event.clientY));f.Mouse.onclick(b.x,b.y)},a.canvas.onmousemove=function(a){var b=c(new f.Point(null!=a?a.clientX:event.clientX,null!=a?a.clientY:event.clientY));f.Mouse.onmousemove(b.x,b.y)});var d=f.CreateElement(b.documentElement);d.root=!0,d.addStylesFromStyleDefinition();var e=!0,g=function(){f.ViewPort.Clear(),a.canvas.parentNode&&f.ViewPort.SetCurrent(a.canvas.parentNode.clientWidth,a.canvas.parentNode.clientHeight),1!=f.opts.ignoreDimensions&&(d.style("width").hasValue()&&(a.canvas.width=d.style("width").toPixels("x"),a.canvas.style.width=a.canvas.width+"px"),d.style("height").hasValue()&&(a.canvas.height=d.style("height").toPixels("y"),a.canvas.style.height=a.canvas.height+"px"));var c=a.canvas.clientWidth||a.canvas.width,g=a.canvas.clientHeight||a.canvas.height;if(1==f.opts.ignoreDimensions&&d.style("width").hasValue()&&d.style("height").hasValue()&&(c=d.style("width").toPixels("x"),g=d.style("height").toPixels("y")),f.ViewPort.SetCurrent(c,g),null!=f.opts.offsetX&&(d.attribute("x",!0).value=f.opts.offsetX),null!=f.opts.offsetY&&(d.attribute("y",!0).value=f.opts.offsetY),null!=f.opts.scaleWidth||null!=f.opts.scaleHeight){var h=null,i=null,j=f.ToNumberArray(d.attribute("viewBox").value);null!=f.opts.scaleWidth&&(d.attribute("width").hasValue()?h=d.attribute("width").toPixels("x")/f.opts.scaleWidth:isNaN(j[2])||(h=j[2]/f.opts.scaleWidth)),null!=f.opts.scaleHeight&&(d.attribute("height").hasValue()?i=d.attribute("height").toPixels("y")/f.opts.scaleHeight:isNaN(j[3])||(i=j[3]/f.opts.scaleHeight)),null==h&&(h=i),null==i&&(i=h),d.attribute("width",!0).value=f.opts.scaleWidth,d.attribute("height",!0).value=f.opts.scaleHeight,d.style("transform",!0,!0).value+=" scale("+1/h+","+1/i+")"}1!=f.opts.ignoreClear&&a.clearRect(0,0,c,g),d.render(a),e&&(e=!1,"function"==typeof f.opts.renderCallback&&f.opts.renderCallback(b))},h=!0;f.ImagesLoaded()&&(h=!1,g()),f.intervalID=setInterval(function(){var a=!1;if(h&&f.ImagesLoaded()&&(h=!1,a=!0),1!=f.opts.ignoreMouse&&(a|=f.Mouse.hasEvents()),1!=f.opts.ignoreAnimation)for(var b=0;b<f.Animations.length;b++)a|=f.Animations[b].update(1e3/f.FRAMERATE);"function"==typeof f.opts.forceRedraw&&1==f.opts.forceRedraw()&&(a=!0),a&&(g(),f.Mouse.runEvents())},1e3/f.FRAMERATE)},f.stop=function(){f.intervalID&&clearInterval(f.intervalID)},f.Mouse=new function(){this.events=[],this.hasEvents=function(){return 0!=this.events.length},this.onclick=function(a,b){this.events.push({type:"onclick",x:a,y:b,run:function(a){a.onclick&&a.onclick()}})},this.onmousemove=function(a,b){this.events.push({type:"onmousemove",x:a,y:b,run:function(a){a.onmousemove&&a.onmousemove()}})},this.eventElements=[],this.checkPath=function(a,b){for(var c=0;c<this.events.length;c++){var d=this.events[c];b.isPointInPath&&b.isPointInPath(d.x,d.y)&&(this.eventElements[c]=a)}},this.checkBoundingBox=function(a,b){for(var c=0;c<this.events.length;c++){var d=this.events[c];b.isPointInBox(d.x,d.y)&&(this.eventElements[c]=a)}},this.runEvents=function(){f.ctx.canvas.style.cursor="";for(var a=0;a<this.events.length;a++)for(var b=this.events[a],c=this.eventElements[a];c;)b.run(c),c=c.parent;this.events=[],this.eventElements=[]}},f}var e,f=function(a,b,c){if(null!=a||null!=b||null!=c){"string"==typeof a&&(a=document.getElementById(a)),null!=a.svg&&a.svg.stop();var e=d(c||{});1==a.childNodes.length&&"OBJECT"==a.childNodes[0].nodeName||(a.svg=e);var g=a.getContext("2d");"undefined"!=typeof b.documentElement?e.loadXmlDoc(g,b):"<"==b.substr(0,1)?e.loadXml(g,b):e.load(g,b)}else for(var h=document.querySelectorAll("svg"),i=0;i<h.length;i++){var j=h[i],k=document.createElement("canvas");k.width=j.clientWidth,k.height=j.clientHeight,j.parentNode.insertBefore(k,j),j.parentNode.removeChild(j);var l=document.createElement("div");l.appendChild(j),f(k,l.innerHTML)}};"undefined"!=typeof Element.prototype.matches?e=function(a,b){return a.matches(b)}:"undefined"!=typeof Element.prototype.webkitMatchesSelector?e=function(a,b){return a.webkitMatchesSelector(b)}:"undefined"!=typeof Element.prototype.mozMatchesSelector?e=function(a,b){return a.mozMatchesSelector(b)}:"undefined"!=typeof Element.prototype.msMatchesSelector?e=function(a,b){return a.msMatchesSelector(b)}:"undefined"!=typeof Element.prototype.oMatchesSelector?e=function(a,b){return a.oMatchesSelector(b)}:("function"!=typeof jQuery&&"function"!=typeof Zepto||(e=function(a,b){return $(a).is(b)}),"undefined"==typeof e&&(e=Sizzle.matchesSelector));var g=/(\[[^\]]+\])/g,h=/(#[^\s\+>~\.\[:]+)/g,j=/(\.[^\s\+>~\.\[:]+)/g,k=/(::[^\s\+>~\.\[:]+|:first-line|:first-letter|:before|:after)/gi,l=/(:[\w-]+\([^\)]*\))/gi,m=/(:[^\s\+>~\.\[:]+)/g,n=/([^\s\+>~\.\[:]+)/g;return"undefined"!=typeof CanvasRenderingContext2D&&(CanvasRenderingContext2D.prototype.drawSvg=function(a,b,c,d,e){f(this.canvas,a,{ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,offsetX:b,offsetY:c,scaleWidth:d,scaleHeight:e})}),f}),function(a,b){"use strict";"function"==typeof define&&define.amd?define(["jquery"],b):"object"==typeof exports?module.exports=b(require("jquery")):a.bootbox=b(a.jQuery)}(this,function a(b,c){"use strict";function d(a){var b=q[o.locale];return b?b[a]:q.en[a]}function e(a,c,d){a.stopPropagation(),a.preventDefault();var e=b.isFunction(d)&&d(a)===!1;e||c.modal("hide")}function f(a){var b,c=0;for(b in a)c++;return c}function g(a,c){var d=0;b.each(a,function(a,b){c(a,b,d++)})}function h(a){var c,d;if("object"!=typeof a)throw new Error("Please supply an object of options");if(!a.message)throw new Error("Please specify a message");return a=b.extend({},o,a),a.buttons||(a.buttons={}),a.backdrop=a.backdrop?"static":!1,c=a.buttons,d=f(c),
g(c,function(a,e,f){if(b.isFunction(e)&&(e=c[a]={callback:e}),"object"!==b.type(e))throw new Error("button with key "+a+" must be an object");e.label||(e.label=a),e.className||(2>=d&&f===d-1?e.className="btn-primary":e.className="btn-default")}),a}function i(a,b){var c=a.length,d={};if(1>c||c>2)throw new Error("Invalid argument length");return 2===c||"string"==typeof a[0]?(d[b[0]]=a[0],d[b[1]]=a[1]):d=a[0],d}function j(a,c,d){return b.extend(!0,{},a,i(c,d))}function k(a,b,c,d){var e={className:"bootbox-"+a,buttons:l.apply(null,b)};return m(j(e,d,c),b)}function l(){for(var a={},b=0,c=arguments.length;c>b;b++){var e=arguments[b],f=e.toLowerCase(),g=e.toUpperCase();a[f]={label:d(g)}}return a}function m(a,b){var d={};return g(b,function(a,b){d[b]=!0}),g(a.buttons,function(a){if(d[a]===c)throw new Error("button key "+a+" is not allowed (options are "+b.join("\n")+")")}),a}var n={dialog:"<div class='bootbox modal' tabindex='-1' role='dialog'><div class='modal-dialog'><div class='modal-content'><div class='modal-body'><div class='bootbox-body'></div></div></div></div></div>",header:"<div class='modal-header'><h4 class='modal-title'></h4></div>",footer:"<div class='modal-footer'></div>",closeButton:"<button type='button' class='bootbox-close-button close' data-dismiss='modal' aria-hidden='true'>&times;</button>",form:"<form class='bootbox-form'></form>",inputs:{text:"<input class='bootbox-input bootbox-input-text form-control' autocomplete=off type=text />",textarea:"<textarea class='bootbox-input bootbox-input-textarea form-control'></textarea>",email:"<input class='bootbox-input bootbox-input-email form-control' autocomplete='off' type='email' />",select:"<select class='bootbox-input bootbox-input-select form-control'></select>",checkbox:"<div class='checkbox'><label><input class='bootbox-input bootbox-input-checkbox' type='checkbox' /></label></div>",date:"<input class='bootbox-input bootbox-input-date form-control' autocomplete=off type='date' />",time:"<input class='bootbox-input bootbox-input-time form-control' autocomplete=off type='time' />",number:"<input class='bootbox-input bootbox-input-number form-control' autocomplete=off type='number' />",password:"<input class='bootbox-input bootbox-input-password form-control' autocomplete='off' type='password' />"}},o={locale:"en",backdrop:!0,animate:!0,className:null,closeButton:!0,show:!0,container:"body"},p={};p.alert=function(){var a;if(a=k("alert",["ok"],["message","callback"],arguments),a.callback&&!b.isFunction(a.callback))throw new Error("alert requires callback property to be a function when provided");return a.buttons.ok.callback=a.onEscape=function(){return b.isFunction(a.callback)?a.callback():!0},p.dialog(a)},p.confirm=function(){var a;if(a=k("confirm",["cancel","confirm"],["message","callback"],arguments),a.buttons.cancel.callback=a.onEscape=function(){return a.callback(!1)},a.buttons.confirm.callback=function(){return a.callback(!0)},!b.isFunction(a.callback))throw new Error("confirm requires a callback");return p.dialog(a)},p.prompt=function(){var a,d,e,f,h,i,k;f=b(n.form),d={className:"bootbox-prompt",buttons:l("cancel","confirm"),value:"",inputType:"text"},a=m(j(d,arguments,["title","callback"]),["cancel","confirm"]),i=a.show===c?!0:a.show;var o=["date","time","number"],q=document.createElement("input");if(q.setAttribute("type",a.inputType),o[a.inputType]&&(a.inputType=q.type),a.message=f,a.buttons.cancel.callback=a.onEscape=function(){return a.callback(null)},a.buttons.confirm.callback=function(){var c;switch(a.inputType){case"text":case"textarea":case"email":case"select":case"date":case"time":case"number":case"password":c=h.val();break;case"checkbox":var d=h.find("input:checked");c=[],g(d,function(a,d){c.push(b(d).val())})}return a.callback(c)},a.show=!1,!a.title)throw new Error("prompt requires a title");if(!b.isFunction(a.callback))throw new Error("prompt requires a callback");if(!n.inputs[a.inputType])throw new Error("invalid prompt type");switch(h=b(n.inputs[a.inputType]),a.inputType){case"text":case"textarea":case"email":case"date":case"time":case"number":case"password":h.val(a.value);break;case"select":var r={};if(k=a.inputOptions||[],!k.length)throw new Error("prompt with select requires options");g(k,function(a,d){var e=h;if(d.value===c||d.text===c)throw new Error("given options in wrong format");d.group&&(r[d.group]||(r[d.group]=b("<optgroup/>").attr("label",d.group)),e=r[d.group]),e.append("<option value='"+d.value+"'>"+d.text+"</option>")}),g(r,function(a,b){h.append(b)}),h.val(a.value);break;case"checkbox":var s=b.isArray(a.value)?a.value:[a.value];if(k=a.inputOptions||[],!k.length)throw new Error("prompt with checkbox requires options");if(!k[0].value||!k[0].text)throw new Error("given options in wrong format");h=b("<div/>"),g(k,function(c,d){var e=b(n.inputs[a.inputType]);e.find("input").attr("value",d.value),e.find("label").append(d.text),g(s,function(a,b){b===d.value&&e.find("input").prop("checked",!0)}),h.append(e)})}return a.placeholder&&h.attr("placeholder",a.placeholder),a.pattern&&h.attr("pattern",a.pattern),f.append(h),f.on("submit",function(a){a.preventDefault(),e.find(".btn-primary").click()}),e=p.dialog(a),e.off("shown.bs.modal"),e.on("shown.bs.modal",function(){h.focus()}),i===!0&&e.modal("show"),e},p.dialog=function(a){a=h(a);var c=b(n.dialog),d=c.find(".modal-body"),f=a.buttons,i="",j={onEscape:a.onEscape};if(g(f,function(a,b){i+="<button data-bb-handler='"+a+"' type='button' class='btn "+b.className+"'>"+b.label+"</button>",j[a]=b.callback}),d.find(".bootbox-body").html(a.message),a.animate===!0&&c.addClass("fade"),a.className&&c.addClass(a.className),a.title&&d.before(n.header),a.closeButton){var k=b(n.closeButton);a.title?c.find(".modal-header").prepend(k):k.css("margin-top","-10px").prependTo(d)}return a.title&&c.find(".modal-title").html(a.title),i.length&&(d.after(n.footer),c.find(".modal-footer").html(i)),c.on("hidden.bs.modal",function(a){a.target===this&&c.remove()}),c.on("shown.bs.modal",function(){c.find(".btn-primary:first").focus()}),c.on("escape.close.bb",function(a){j.onEscape&&e(a,c,j.onEscape)}),c.on("click",".modal-footer button",function(a){var d=b(this).data("bb-handler");e(a,c,j[d])}),c.on("click",".bootbox-close-button",function(a){e(a,c,j.onEscape)}),c.on("keyup",function(a){27===a.which&&c.trigger("escape.close.bb")}),b(a.container).append(c),c.modal({backdrop:a.backdrop,keyboard:!1,show:!1}),a.show&&c.modal("show"),c},p.setDefaults=function(){var a={};2===arguments.length?a[arguments[0]]=arguments[1]:a=arguments[0],b.extend(o,a)},p.hideAll=function(){b(".bootbox").modal("hide")};var q={br:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Sim"},da:{OK:"OK",CANCEL:"Annuller",CONFIRM:"Accepter"},de:{OK:"OK",CANCEL:"Abbrechen",CONFIRM:"Akzeptieren"},en:{OK:"OK",CANCEL:"Cancel",CONFIRM:"OK"},es:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Aceptar"},fi:{OK:"OK",CANCEL:"Peruuta",CONFIRM:"OK"},fr:{OK:"OK",CANCEL:"Annuler",CONFIRM:"D'accord"},he:{OK:"",CANCEL:"",CONFIRM:""},it:{OK:"OK",CANCEL:"Annulla",CONFIRM:"Conferma"},lt:{OK:"Gerai",CANCEL:"Ataukti",CONFIRM:"Patvirtinti"},lv:{OK:"Labi",CANCEL:"Atcelt",CONFIRM:"Apstiprint"},nl:{OK:"OK",CANCEL:"Annuleren",CONFIRM:"Accepteren"},no:{OK:"OK",CANCEL:"Avbryt",CONFIRM:"OK"},pl:{OK:"OK",CANCEL:"Anuluj",CONFIRM:"Potwierd"},ru:{OK:"OK",CANCEL:"",CONFIRM:""},sv:{OK:"OK",CANCEL:"Avbryt",CONFIRM:"OK"},tr:{OK:"Tamam",CANCEL:"ptal",CONFIRM:"Onayla"},zh_CN:{OK:"OK",CANCEL:"",CONFIRM:""},zh_TW:{OK:"OK",CANCEL:"",CONFIRM:""}};return p.init=function(c){return a(c||b)},p}),svgedit={NS:{HTML:"http://www.w3.org/1999/xhtml",MATH:"http://www.w3.org/1998/Math/MathML",SE:"http://svg-edit.googlecode.com",SVG:"http://www.w3.org/2000/svg",XLINK:"http://www.w3.org/1999/xlink",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"}},svgedit.getReverseNS=function(){"use strict";var a={};return $.each(this.NS,function(b,c){a[c]=b.toLowerCase()}),a},function(){"use strict";var a=jQuery.fn.attr,b="http://www.w3.org/2000/svg";jQuery.fn.attr=function(c,d){var e,f,g=this.length;if(!g)return a.apply(this,arguments);for(e=0;g>e;++e){var h=this[e];if(h){if(h.namespaceURI!==b)return a.apply(this,arguments);if(void 0!==d)h.setAttribute(c,d);else if($.isArray(c)){for(var i=c.length,j={};i--;){var k=c[i];f=h.getAttribute(k),(f||"0"===f)&&(f=isNaN(f)?f:f-0),j[k]=f}return j}if("object"!=typeof c)return f=h.getAttribute(c),(f||"0"===f)&&(f=isNaN(f)?f:f-0),f;var l;for(l in c)h.setAttribute(l,c[l])}}return this}}(),function(){"use strict";svgedit.browser||(svgedit.browser={});var a=svgedit.NS,b=function(){return!!document.createElementNS&&!!document.createElementNS(a.SVG,"svg").createSVGRect}();if(svgedit.browser.supportsSvg=function(){return b},!svgedit.browser.supportsSvg())return void(window.location="browser-not-supported.html");var c=navigator.userAgent,d=document.createElementNS(a.SVG,"svg"),e=!!window.opera,f=c.indexOf("AppleWebKit")>=0,g=c.indexOf("Gecko/")>=0,h=c.indexOf("MSIE")>=0||c.indexOf("Trident")>=0,i=c.indexOf("Chrome/")>=0,j=c.indexOf("Windows")>=0,k=c.indexOf("Macintosh")>=0,l="ontouchstart"in window,m=function(){return!!d.querySelector}(),n=function(){return!!document.evaluate}(),o=function(){var b=document.createElementNS(a.SVG,"path");b.setAttribute("d","M0,0 10,10");var c=b.pathSegList,d=b.createSVGPathSegLinetoAbs(5,5);try{return c.replaceItem(d,0),!0}catch(e){}return!1}(),p=function(){var b=document.createElementNS(a.SVG,"path");b.setAttribute("d","M0,0 10,10");var c=b.pathSegList,d=b.createSVGPathSegLinetoAbs(5,5);try{return c.insertItemBefore(d,0),!0}catch(e){}return!1}(),q=function(){var b=document.createElementNS(a.SVG,"svg"),c=document.createElementNS(a.SVG,"svg");document.documentElement.appendChild(b),c.setAttribute("x",5),b.appendChild(c);var d=document.createElementNS(a.SVG,"text");d.textContent="a",c.appendChild(d);var e=d.getStartPositionOfChar(0).x;return document.documentElement.removeChild(b),0===e}(),r=function(){var b=document.createElementNS(a.SVG,"svg");document.documentElement.appendChild(b);var c=document.createElementNS(a.SVG,"path");c.setAttribute("d","M0,0 C0,0 10,10 10,0"),b.appendChild(c);var d=c.getBBox();return document.documentElement.removeChild(b),d.height>4&&d.height<5}(),s=function(){var b=document.createElementNS(a.SVG,"svg");document.documentElement.appendChild(b);var c=document.createElementNS(a.SVG,"path");c.setAttribute("d","M0,0 10,0");var d=document.createElementNS(a.SVG,"path");d.setAttribute("d","M5,0 15,0");var e=document.createElementNS(a.SVG,"g");e.appendChild(c),e.appendChild(d),b.appendChild(e);var f=e.getBBox();return document.documentElement.removeChild(b),15==f.width}(),t=function(){return e}(),u=function(){var b=document.createElementNS(a.SVG,"rect");b.setAttribute("x",.1);var c=b.cloneNode(!1),d=-1==c.getAttribute("x").indexOf(",");return d||$.alert('NOTE: This version of Opera is known to contain bugs in SVG-edit.\nPlease upgrade to the <a href="http://opera.com">latest version</a> in which the problems have been fixed.'),d}(),v=function(){var b=document.createElementNS(a.SVG,"rect");return b.setAttribute("style","vector-effect:non-scaling-stroke"),"non-scaling-stroke"===b.style.vectorEffect}(),w=function(){var b=document.createElementNS(a.SVG,"rect"),c=b.transform.baseVal,e=d.createSVGTransform();return c.appendItem(e),c.getItem(0)==e}();svgedit.browser.isOpera=function(){return e},svgedit.browser.isWebkit=function(){return f},svgedit.browser.isGecko=function(){return g},svgedit.browser.isIE=function(){return h},svgedit.browser.isChrome=function(){return i},svgedit.browser.isWindows=function(){return j},svgedit.browser.isMac=function(){return k},svgedit.browser.isTouch=function(){return l},svgedit.browser.supportsSelectors=function(){return m},svgedit.browser.supportsXpath=function(){return n},svgedit.browser.supportsPathReplaceItem=function(){return o},svgedit.browser.supportsPathInsertItemBefore=function(){return p},svgedit.browser.supportsPathBBox=function(){return r},svgedit.browser.supportsHVLineContainerBBox=function(){return s},svgedit.browser.supportsGoodTextCharPos=function(){return q},svgedit.browser.supportsEditableText=function(){return t},svgedit.browser.supportsGoodDecimals=function(){return u},svgedit.browser.supportsNonScalingStroke=function(){return v},svgedit.browser.supportsNativeTransformLists=function(){return w}}(),function(){"use strict";function a(a){var b=a.matrix,c="";switch(a.type){case 1:c="matrix("+[b.a,b.b,b.c,b.d,b.e,b.f].join(",")+")";break;case 2:c="translate("+b.e+","+b.f+")";break;case 3:c=b.a==b.d?"scale("+b.a+")":"scale("+b.a+","+b.d+")";break;case 4:var d=0,e=0;if(0!=a.angle){var f=1-b.a;e=(f*b.f+b.b*b.e)/(f*f+b.b*b.b),d=(b.e-b.b*e)/f}c="rotate("+a.angle+" "+d+","+e+")"}return c}svgedit.transformlist||(svgedit.transformlist={});var b=document.createElementNS(svgedit.NS.SVG,"svg"),c={};svgedit.transformlist.SVGTransformList=function(d){this._elem=d||null,this._xforms=[],this._update=function(){var c,d="";b.createSVGMatrix();for(c=0;c<this.numberOfItems;++c){var e=this._list.getItem(c);d+=a(e)+" "}this._elem.setAttribute("transform",d)},this._list=this,this._init=function(){var a=this._elem.getAttribute("transform");if(a)for(var c=/\s*((scale|matrix|rotate|translate)\s*\(.*?\))\s*,?\s*/,d=!0;d;)if(d=a.match(c),a=a.replace(c,""),d&&d[1]){var e=d[1],f=e.split(/\s*\(/),g=f[0],h=f[1].match(/\s*(.*?)\s*\)/);h[1]=h[1].replace(/(\d)-/g,"$1 -");var i=h[1].split(/[, ]+/),j="abcdef".split(""),k=b.createSVGMatrix();$.each(i,function(a,b){i[a]=parseFloat(b),"matrix"==g&&(k[j[a]]=i[a])});var l=b.createSVGTransform(),m="set"+g.charAt(0).toUpperCase()+g.slice(1),n="matrix"==g?[k]:i;"scale"==g&&1==n.length?n.push(n[0]):"translate"==g&&1==n.length?n.push(0):"rotate"==g&&1==n.length&&n.push(0,0),l[m].apply(l,n),this._list.appendItem(l)}},this._removeFromOtherLists=function(a){if(a){var b,d=!1;for(b in c){var e,f,g=c[b];for(e=0,f=g._xforms.length;f>e;++e)if(g._xforms[e]==a){d=!0,g.removeItem(e);break}if(d)break}}},this.numberOfItems=0,this.clear=function(){this.numberOfItems=0,this._xforms=[]},this.initialize=function(a){this.numberOfItems=1,this._removeFromOtherLists(a),this._xforms=[a]},this.getItem=function(a){if(a<this.numberOfItems&&a>=0)return this._xforms[a];throw{code:1}},this.insertItemBefore=function(a,b){var c=null;if(b>=0)if(b<this.numberOfItems){this._removeFromOtherLists(a);var d,e=new Array(this.numberOfItems+1);for(d=0;b>d;++d)e[d]=this._xforms[d];e[d]=a;var f;for(f=d+1;d<this.numberOfItems;++f,++d)e[f]=this._xforms[d];this.numberOfItems++,this._xforms=e,c=a,this._list._update()}else c=this._list.appendItem(a);return c},this.replaceItem=function(a,b){var c=null;return b<this.numberOfItems&&b>=0&&(this._removeFromOtherLists(a),this._xforms[b]=a,c=a,this._list._update()),c},this.removeItem=function(a){if(a<this.numberOfItems&&a>=0){var b,c,d=this._xforms[a],e=new Array(this.numberOfItems-1);for(b=0;a>b;++b)e[b]=this._xforms[b];for(c=b;c<this.numberOfItems-1;++c,++b)e[c]=this._xforms[b+1];return this.numberOfItems--,this._xforms=e,this._list._update(),d}throw{code:1}},this.appendItem=function(a){return this._removeFromOtherLists(a),this._xforms.push(a),this.numberOfItems++,this._list._update(),a}},svgedit.transformlist.resetListMap=function(){c={}},svgedit.transformlist.removeElementFromListMap=function(a){a.id&&c[a.id]&&delete c[a.id]},svgedit.transformlist.getTransformList=function(a){if(!svgedit.browser.supportsNativeTransformLists()){var b=a.id||"temp",d=c[b];return d&&"temp"!==b||(c[b]=new svgedit.transformlist.SVGTransformList(a),c[b]._init(),d=c[b]),d}return a.transform?a.transform.baseVal:a.gradientTransform?a.gradientTransform.baseVal:a.patternTransform?a.patternTransform.baseVal:null}}(),function(){"use strict";svgedit.math||(svgedit.math={});var a=1e-14,b=document.createElementNS(svgedit.NS.SVG,"svg");svgedit.math.transformPoint=function(a,b,c){return{x:c.a*a+c.c*b+c.e,y:c.b*a+c.d*b+c.f}},svgedit.math.isIdentity=function(a){return 1===a.a&&0===a.b&&0===a.c&&1===a.d&&0===a.e&&0===a.f},svgedit.math.matrixMultiply=function(b){for(var c=arguments,d=c.length,e=c[d-1];d-- >1;){var f=c[d-1];e=f.multiply(e)}return Math.abs(e.a)<a&&(e.a=0),Math.abs(e.b)<a&&(e.b=0),Math.abs(e.c)<a&&(e.c=0),Math.abs(e.d)<a&&(e.d=0),Math.abs(e.e)<a&&(e.e=0),Math.abs(e.f)<a&&(e.f=0),e},svgedit.math.hasMatrixTransform=function(a){if(!a)return!1;for(var b=a.numberOfItems;b--;){var c=a.getItem(b);if(1==c.type&&!svgedit.math.isIdentity(c.matrix))return!0}return!1},svgedit.math.transformBox=function(a,b,c,d,e){var f=svgedit.math.transformPoint,g=f(a,b,e),h=f(a+c,b,e),i=f(a,b+d,e),j=f(a+c,b+d,e),k=Math.min(g.x,h.x,i.x,j.x),l=Math.max(g.x,h.x,i.x,j.x),m=Math.min(g.y,h.y,i.y,j.y),n=Math.max(g.y,h.y,i.y,j.y);return{tl:g,tr:h,bl:i,br:j,aabox:{x:k,y:m,width:l-k,height:n-m}}},svgedit.math.transformListToTransform=function(a,c,d){if(null==a)return b.createSVGTransformFromMatrix(b.createSVGMatrix());if(c=c||0,d=d||a.numberOfItems-1,c=parseInt(c,10),d=parseInt(d,10),c>d){var e=d;d=c,c=e}var f,g=b.createSVGMatrix();for(f=c;d>=f;++f){var h=f>=0&&f<a.numberOfItems?a.getItem(f).matrix:b.createSVGMatrix();g=svgedit.math.matrixMultiply(g,h)}return b.createSVGTransformFromMatrix(g)},svgedit.math.getMatrix=function(a){var b=svgedit.transformlist.getTransformList(a);return svgedit.math.transformListToTransform(b).matrix},svgedit.math.snapToAngle=function(a,b,c,d){var e=Math.PI/4,f=c-a,g=d-b,h=Math.atan2(g,f),i=Math.sqrt(f*f+g*g),j=Math.round(h/e)*e;return{x:a+i*Math.cos(j),y:b+i*Math.sin(j),a:j}},svgedit.math.rectsIntersect=function(a,b){return b.x<a.x+a.width&&b.x+b.width>a.x&&b.y<a.y+a.height&&b.y+b.height>a.y}}(),function(){"use strict";svgedit.units||(svgedit.units={});var a,b=svgedit.NS,c=["x","x1","cx","rx","width"],d=["y","y1","cy","ry","height"],e=["r","radius"].concat(c,d),f={};svgedit.units.init=function(c){a=c;var d=document.createElementNS(b.SVG,"svg");document.body.appendChild(d);var e=document.createElementNS(b.SVG,"rect");e.setAttribute("width","1em"),e.setAttribute("height","1ex"),e.setAttribute("x","1in"),d.appendChild(e);var g=e.getBBox();document.body.removeChild(d);var h=g.x;f={em:g.width,ex:g.height,"in":h,cm:h/2.54,mm:h/25.4,pt:h/72,pc:h/6,px:1,"%":0}},svgedit.units.getTypeMap=function(){return f},svgedit.units.shortFloat=function(b){var c=a.getRoundDigits();return isNaN(b)?$.isArray(b)?svgedit.units.shortFloat(b[0])+","+svgedit.units.shortFloat(b[1]):parseFloat(b).toFixed(c)-0:+(+b).toFixed(c)},svgedit.units.convertUnit=function(b,c){return c=c||a.getBaseUnit(),svgedit.units.shortFloat(b/f[c])},svgedit.units.setUnitAttr=function(a,b,c){a.setAttribute(b,c)};var g={line:["x1","x2","y1","y2"],circle:["cx","cy","r"],ellipse:["cx","cy","rx","ry"],foreignObject:["x","y","width","height"],rect:["x","y","width","height"],image:["x","y","width","height"],use:["x","y","width","height"],text:["x","y"]};svgedit.units.convertAttrs=function(b){var c=b.tagName,d=a.getBaseUnit(),e=g[c];if(e){var h,i=e.length;for(h=0;i>h;h++){var j=e[h],k=b.getAttribute(j);k&&(isNaN(k)||b.setAttribute(j,k/f[d]+d))}}},svgedit.units.convertToNum=function(b,e){if(!isNaN(e))return e-0;var g;if("%"===e.substr(-1)){g=e.substr(0,e.length-1)/100;var h=a.getWidth(),i=a.getHeight();return c.indexOf(b)>=0?g*h:d.indexOf(b)>=0?g*i:g*Math.sqrt(h*h+i*i)/Math.sqrt(2)}var j=e.substr(-2);return g=e.substr(0,e.length-2),g*f[j]},svgedit.units.isValidUnit=function(b,c,d){var g=!1;if(e.indexOf(b)>=0)isNaN(c)?(c=c.toLowerCase(),$.each(f,function(a){if(!g){var b=new RegExp("^-?[\\d\\.]+"+a+"$");b.test(c)&&(g=!0)}})):g=!0;else if("id"==b){var h=!1;try{var i=a.getElement(c);h=null==i||i===d}catch(j){}return h}return g=!0}}(),function(){"use strict";function a(a){if(svgedit.browser.supportsHVLineContainerBBox())try{return a.getBBox()}catch(b){}var c,d,e=$.data(a,"ref"),f=null;e?(d=$(e).children().clone().attr("visibility","hidden"),$(i).append(d),f=d.filter("line, path")):f=$(a).find("line, path");var g=!1;if(f.length)if(f.each(function(){var a=this.getBBox();a.width&&a.height||(g=!0)}),g){var h=e?d:$(a).children();c=getStrokedBBox(h)}else c=a.getBBox();else c=a.getBBox();return e&&d.remove(),c}svgedit.utilities||(svgedit.utilities={});var b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c=svgedit.NS,d="a,circle,ellipse,foreignObject,g,image,line,path,polygon,polyline,rect,svg,text,tspan,use",e=d.split(","),f=null,g=null,h=null,i=null;svgedit.utilities.init=function(a){f=a,g=a.getDOMDocument(),h=a.getDOMContainer(),i=a.getSVGRoot()},svgedit.utilities.toXml=function(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/,"&#x27;")},svgedit.utilities.fromXml=function(a){return $("<p/>").html(a).text()},svgedit.utilities.encode64=function(a){if(a=svgedit.utilities.encodeUTF8(a),window.btoa)return window.btoa(a);var c,d,e,f,g,h,i,j=new Array(4*Math.floor((a.length+2)/3)),k=0,l=0;do c=a.charCodeAt(k++),d=a.charCodeAt(k++),e=a.charCodeAt(k++),f=c>>2,g=(3&c)<<4|d>>4,h=(15&d)<<2|e>>6,i=63&e,isNaN(d)?h=i=64:isNaN(e)&&(i=64),j[l++]=b.charAt(f),j[l++]=b.charAt(g),j[l++]=b.charAt(h),j[l++]=b.charAt(i);while(k<a.length);return j.join("")},svgedit.utilities.decode64=function(a){if(window.atob)return window.atob(a);var c,d,e,f,g,h="",i="",j="",k=0;a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");do e=b.indexOf(a.charAt(k++)),f=b.indexOf(a.charAt(k++)),g=b.indexOf(a.charAt(k++)),j=b.indexOf(a.charAt(k++)),c=e<<2|f>>4,d=(15&f)<<4|g>>2,i=(3&g)<<6|j,h+=String.fromCharCode(c),64!=g&&(h+=String.fromCharCode(d)),64!=j&&(h+=String.fromCharCode(i)),c=d=i="",e=f=g=j="";while(k<a.length);return unescape(h)},svgedit.utilities.encodeUTF8=function(a){if(null===a||"undefined"==typeof a)return"";var b,c,d=String(a),e="",f=0;b=c=0,f=d.length;var g;for(g=0;f>g;g++){var h=d.charCodeAt(g),i=null;if(128>h)c++;else if(h>127&&2048>h)i=String.fromCharCode(h>>6|192,63&h|128);else if(55296!=(63488&h))i=String.fromCharCode(h>>12|224,h>>6&63|128,63&h|128);else{if(55296!=(64512&h))throw new RangeError("Unmatched trail surrogate at "+g);var j=d.charCodeAt(++g);if(56320!=(64512&j))throw new RangeError("Unmatched lead surrogate at "+(g-1));h=((1023&h)<<10)+(1023&j)+65536,i=String.fromCharCode(h>>18|240,h>>12&63|128,h>>6&63|128,63&h|128)}null!==i&&(c>b&&(e+=d.slice(b,c)),e+=i,b=c=g+1)}return c>b&&(e+=d.slice(b,f)),e},svgedit.utilities.convertToXMLReferences=function(a){var b,c="";for(b=0;b<a.length;b++){var d=a.charCodeAt(b);128>d?c+=a[b]:d>127&&(c+="&#"+d+";")}return c},svgedit.utilities.text2xml=function(a){a.indexOf("<svg:svg")>=0&&(a=a.replace(/<(\/?)svg:/g,"<$1").replace("xmlns:svg","xmlns"));var b,c;try{c=window.DOMParser?new DOMParser:new ActiveXObject("Microsoft.XMLDOM"),c.async=!1}catch(d){throw new Error("XML Parser could not be instantiated")}try{b=c.loadXML?c.loadXML(a)?c:!1:c.parseFromString(a,"text/xml")}catch(e){throw new Error("Error parsing XML string")}return b},svgedit.utilities.bboxToObj=function(a){return{x:a.x,y:a.y,width:a.width,height:a.height}},svgedit.utilities.walkTree=function(a,b){if(a&&1==a.nodeType){b(a);for(var c=a.childNodes.length;c--;)svgedit.utilities.walkTree(a.childNodes.item(c),b)}},svgedit.utilities.walkTreePost=function(a,b){if(a&&1==a.nodeType){for(var c=a.childNodes.length;c--;)svgedit.utilities.walkTree(a.childNodes.item(c),b);b(a)}},svgedit.utilities.getUrlFromAttr=function(a){if(a){if(0===a.indexOf('url("'))return a.substring(5,a.indexOf('"',6));if(0===a.indexOf("url('"))return a.substring(5,a.indexOf("'",6));if(0===a.indexOf("url("))return a.substring(4,a.indexOf(")"))}return null},svgedit.utilities.getHref=function(a){return a.getAttributeNS(c.XLINK,"href")},svgedit.utilities.setHref=function(a,b){a.setAttributeNS(c.XLINK,"xlink:href",b)},svgedit.utilities.findDefs=function(){var a=f.getSVGContent(),b=a.getElementsByTagNameNS(c.SVG,"defs");return b.length>0?b=b[0]:(b=a.ownerDocument.createElementNS(c.SVG,"defs"),a.firstChild?a.insertBefore(b,a.firstChild):a.appendChild(b)),b},svgedit.utilities.getPathBBox=function(a){var b,c=a.pathSegList,d=c.numberOfItems,e=[[],[]],f=c.getItem(0),g=[f.x,f.y];for(b=0;d>b;b++){var h=c.getItem(b);if("undefined"!=typeof h.x)if(e[0].push(g[0]),e[1].push(g[1]),h.x1){var i,j=[h.x1,h.y1],k=[h.x2,h.y2],l=[h.x,h.y];for(i=0;2>i;i++){var m=function(a){return Math.pow(1-a,3)*g[i]+3*Math.pow(1-a,2)*a*j[i]+3*(1-a)*Math.pow(a,2)*k[i]+Math.pow(a,3)*l[i]},n=6*g[i]-12*j[i]+6*k[i],o=-3*g[i]+9*j[i]-9*k[i]+3*l[i],p=3*j[i]-3*g[i];if(0!=o){var q=Math.pow(n,2)-4*p*o;if(!(0>q)){var r=(-n+Math.sqrt(q))/(2*o);r>0&&1>r&&e[i].push(m(r));var s=(-n-Math.sqrt(q))/(2*o);s>0&&1>s&&e[i].push(m(s))}}else{if(0==n)continue;var t=-p/n;t>0&&1>t&&e[i].push(m(t))}}g=l}else e[0].push(h.x),e[1].push(h.y)}var u=Math.min.apply(null,e[0]),v=Math.max.apply(null,e[0])-u,w=Math.min.apply(null,e[1]),x=Math.max.apply(null,e[1])-w;return{x:u,y:w,width:v,height:x}},svgedit.utilities.getBBox=function(b){var c=b||f.geSelectedElements()[0];if(1!=b.nodeType)return null;var d=null,g=c.nodeName;switch(g){case"text":if(""===c.textContent)c.textContent="a",d=c.getBBox(),c.textContent="";else try{d=c.getBBox()}catch(h){}break;case"path":if(svgedit.browser.supportsPathBBox())try{d=c.getBBox()}catch(i){}else d=svgedit.utilities.getPathBBox(c);break;case"g":case"a":d=a(c);break;default:if("use"===g&&(d=a(c,!0)),"use"===g||"foreignObject"===g&&svgedit.browser.isWebkit()){if(d||(d=c.getBBox()),!svgedit.browser.isWebkit()){var j={};j.width=d.width,j.height=d.height,j.x=d.x+parseFloat(c.getAttribute("x")||0),j.y=d.y+parseFloat(c.getAttribute("y")||0),d=j}}else if(~e.indexOf(g))try{d=c.getBBox()}catch(k){var l=$(c).closest("foreignObject");if(l.length)try{d=l[0].getBBox()}catch(m){d=null}else d=null}}return d&&(d=svgedit.utilities.bboxToObj(d)),d},svgedit.utilities.getRotationAngle=function(a,b){var c=a||f.getSelectedElements()[0],d=svgedit.transformlist.getTransformList(c);if(!d)return 0;var e,g=d.numberOfItems;for(e=0;g>e;++e){var h=d.getItem(e);if(4==h.type)return b?h.angle*Math.PI/180:h.angle}return 0},svgedit.utilities.getRefElem=function(a){return svgedit.utilities.getElem(svgedit.utilities.getUrlFromAttr(a).substr(1))},svgedit.browser.supportsSelectors()?svgedit.utilities.getElem=function(a){return i.querySelector("#"+a)}:svgedit.browser.supportsXpath()?svgedit.utilities.getElem=function(a){return g.evaluate('svg:svg[@id="svgroot"]//svg:*[@id="'+a+'"]',h,function(){return svgedit.NS.SVG},9,null).singleNodeValue}:svgedit.utilities.getElem=function(a){return $(i).find("[id="+a+"]")[0]},svgedit.utilities.assignAttributes=function(a,b,d,e){d||(d=0);var f=null;svgedit.browser.isOpera()||i.suspendRedraw(d);var g;for(g in b){var h="xml:"===g.substr(0,4)?c.XML:"xlink:"===g.substr(0,6)?c.XLINK:null;h?a.setAttributeNS(h,g,b[g]):e?svgedit.units.setUnitAttr(a,g,b[g]):a.setAttribute(g,b[g])}svgedit.browser.isOpera()||i.unsuspendRedraw(f)},svgedit.utilities.cleanupElement=function(a){var b,c=i.suspendRedraw(60),d={"fill-opacity":1,"stop-opacity":1,opacity:1,stroke:"none","stroke-dasharray":"none","stroke-linejoin":"miter","stroke-linecap":"butt","stroke-opacity":1,"stroke-width":1,rx:0,ry:0};for(b in d){var e=d[b];a.getAttribute(b)==e&&a.removeAttribute(b)}i.unsuspendRedraw(c)},svgedit.utilities.snapToGrid=function(a){var b=f.getSnappingStep(),c=f.getBaseUnit();return"px"!==c&&(b*=svgedit.units.getTypeMap()[c]),a=Math.round(a/b)*b},svgedit.utilities.preg_quote=function(a,b){return String(a).replace(new RegExp("[.\\\\+*?\\[\\^\\]$(){}=!<>|:\\"+(b||"")+"-]","g"),"\\$&")}}(),function(){"use strict";svgedit.sanitize||(svgedit.sanitize={});var a=svgedit.NS,b=svgedit.getReverseNS(),c={a:["class","clip-path","clip-rule","fill","fill-opacity","fill-rule","filter","id","mask","opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","style","systemLanguage","transform","xlink:href","xlink:title"],circle:["class","clip-path","clip-rule","cx","cy","fill","fill-opacity","fill-rule","filter","id","mask","opacity","r","requiredFeatures","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","style","systemLanguage","transform"],clipPath:["class","clipPathUnits","id"],defs:[],style:["type"],desc:[],ellipse:["class","clip-path","clip-rule","cx","cy","fill","fill-opacity","fill-rule","filter","id","mask","opacity","requiredFeatures","rx","ry","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","style","systemLanguage","transform"],feGaussianBlur:["class","color-interpolation-filters","id","requiredFeatures","stdDeviation"],filter:["class","color-interpolation-filters","filterRes","filterUnits","height","id","primitiveUnits","requiredFeatures","width","x","xlink:href","y"],foreignObject:["class","font-size","height","id","opacity","requiredFeatures","style","transform","width","x","y"],g:["class","clip-path","clip-rule","id","display","fill","fill-opacity","fill-rule","filter","mask","opacity","requiredFeatures","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","style","systemLanguage","transform","font-family","font-size","font-style","font-weight","text-anchor"],image:["class","clip-path","clip-rule","filter","height","id","mask","opacity","requiredFeatures","style","systemLanguage","transform","width","x","xlink:href","xlink:title","y"],line:["class","clip-path","clip-rule","fill","fill-opacity","fill-rule","filter","id","marker-end","marker-mid","marker-start","mask","opacity","requiredFeatures","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","style","systemLanguage","transform","x1","x2","y1","y2"],linearGradient:["class","id","gradientTransform","gradientUnits","requiredFeatures","spreadMethod","systemLanguage","x1","x2","xlink:href","y1","y2"],marker:["id","class","markerHeight","markerUnits","markerWidth","orient","preserveAspectRatio","refX","refY","systemLanguage","viewBox"],mask:["class","height","id","maskContentUnits","maskUnits","width","x","y"],metadata:["class","id"],path:["class","clip-path","clip-rule","d","fill","fill-opacity","fill-rule","filter","id","marker-end","marker-mid","marker-start","mask","opacity","requiredFeatures","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","style","systemLanguage","transform"],pattern:["class","height","id","patternContentUnits","patternTransform","patternUnits","requiredFeatures","style","systemLanguage","viewBox","width","x","xlink:href","y"],polygon:["class","clip-path","clip-rule","id","fill","fill-opacity","fill-rule","filter","id","class","marker-end","marker-mid","marker-start","mask","opacity","points","requiredFeatures","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","style","systemLanguage","transform"],polyline:["class","clip-path","clip-rule","id","fill","fill-opacity","fill-rule","filter","marker-end","marker-mid","marker-start","mask","opacity","points","requiredFeatures","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","style","systemLanguage","transform"],radialGradient:["class","cx","cy","fx","fy","gradientTransform","gradientUnits","id","r","requiredFeatures","spreadMethod","systemLanguage","xlink:href"],rect:["class","clip-path","clip-rule","fill","fill-opacity","fill-rule","filter","height","id","mask","opacity","requiredFeatures","rx","ry","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","style","systemLanguage","transform","width","x","y"],stop:["class","id","offset","requiredFeatures","stop-color","stop-opacity","style","systemLanguage"],
svg:["class","clip-path","clip-rule","filter","id","height","mask","preserveAspectRatio","requiredFeatures","style","systemLanguage","viewBox","width","x","xmlns","xmlns:se","xmlns:xlink","y"],"switch":["class","id","requiredFeatures","systemLanguage"],symbol:["class","fill","fill-opacity","fill-rule","filter","font-family","font-size","font-style","font-weight","id","opacity","preserveAspectRatio","requiredFeatures","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","style","systemLanguage","transform","viewBox"],text:["class","clip-path","clip-rule","fill","fill-opacity","fill-rule","filter","font-family","font-size","font-style","font-weight","id","mask","opacity","requiredFeatures","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","style","systemLanguage","text-anchor","transform","x","xml:space","y"],textPath:["class","id","method","requiredFeatures","spacing","startOffset","style","systemLanguage","transform","xlink:href"],title:[],tspan:["class","clip-path","clip-rule","dx","dy","fill","fill-opacity","fill-rule","filter","font-family","font-size","font-style","font-weight","id","mask","opacity","requiredFeatures","rotate","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","style","systemLanguage","text-anchor","textLength","transform","x","xml:space","y"],use:["class","clip-path","clip-rule","fill","fill-opacity","fill-rule","filter","height","id","mask","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","style","transform","width","x","xlink:href","y"],annotation:["encoding"],"annotation-xml":["encoding"],maction:["actiontype","other","selection"],math:["class","id","display","xmlns"],menclose:["notation"],merror:[],mfrac:["linethickness"],mi:["mathvariant"],mmultiscripts:[],mn:[],mo:["fence","lspace","maxsize","minsize","rspace","stretchy"],mover:[],mpadded:["lspace","width","height","depth","voffset"],mphantom:[],mprescripts:[],mroot:[],mrow:["xlink:href","xlink:type","xmlns:xlink"],mspace:["depth","height","width"],msqrt:[],mstyle:["displaystyle","mathbackground","mathcolor","mathvariant","scriptlevel"],msub:[],msubsup:[],msup:[],mtable:["align","columnalign","columnlines","columnspacing","displaystyle","equalcolumns","equalrows","frame","rowalign","rowlines","rowspacing","width"],mtd:["columnalign","columnspan","rowalign","rowspan"],mtext:[],mtr:["columnalign","rowalign"],munder:[],munderover:[],none:[],semantics:[]},d={};$.each(c,function(b,c){var e={};$.each(c,function(b,c){if(c.indexOf(":")>=0){var d=c.split(":");e[d[1]]=a[d[0].toUpperCase()]}else e[c]="xmlns"==c?a.XMLNS:null}),d[b]=e}),svgedit.sanitize.sanitizeSvg=function(e){if(3==e.nodeType&&(e.nodeValue=e.nodeValue.replace(/^\s+|\s+$/g,""),0===e.nodeValue.length&&e.parentNode.removeChild(e)),1==e.nodeType){var f=e.ownerDocument,g=e.parentNode;if(f&&g){var h,i=c[e.nodeName],j=d[e.nodeName];if("undefined"!=typeof i){var k=[];for(h=e.attributes.length;h--;){var l=e.attributes.item(h),m=l.nodeName,n=l.localName,o=l.namespaceURI;if(j.hasOwnProperty(n)&&o==j[n]&&o!=a.XMLNS||o==a.XMLNS&&b[l.nodeValue]||(0===m.indexOf("se:")&&k.push([m,l.nodeValue]),e.removeAttributeNS(o,n)),svgedit.browser.isGecko())switch(m){case"transform":case"gradientTransform":case"patternTransform":var p=l.nodeValue.replace(/(\d)-/g,"$1 -");e.setAttribute(m,p)}if("style"==m){for(var q=l.nodeValue.split(";"),r=q.length;r--;){var s=q[r].split(":"),t=$.trim(s[0]),u=$.trim(s[1]);i.indexOf(t)>=0&&e.setAttribute(t,u)}e.removeAttribute("style")}}$.each(k,function(b,c){e.setAttributeNS(a.SE,c[0],c[1])});var v=svgedit.utilities.getHref(e);if(v&&["filter","linearGradient","pattern","radialGradient","textPath","use"].indexOf(e.nodeName)>=0&&"#"!=v[0]&&(svgedit.utilities.setHref(e,""),e.removeAttributeNS(a.XLINK,"href")),"use"==e.nodeName&&!svgedit.utilities.getHref(e))return void g.removeChild(e);for($.each(["clip-path","fill","filter","marker-end","marker-mid","marker-start","mask","stroke"],function(a,b){var c=e.getAttribute(b);c&&(c=svgedit.utilities.getUrlFromAttr(c),c&&"#"!==c[0]&&(e.setAttribute(b,""),e.removeAttribute(b)))}),h=e.childNodes.length;h--;)svgedit.sanitize.sanitizeSvg(e.childNodes.item(h))}else{for(var w=[];e.hasChildNodes();)w.push(g.insertBefore(e.firstChild,e));for(g.removeChild(e),h=w.length;h--;)svgedit.sanitize.sanitizeSvg(w[h])}}}}}(),function(){"use strict";svgedit.history||(svgedit.history={}),svgedit.history.HistoryEventTypes={BEFORE_APPLY:"before_apply",AFTER_APPLY:"after_apply",BEFORE_UNAPPLY:"before_unapply",AFTER_UNAPPLY:"after_unapply"};svgedit.history.MoveElementCommand=function(a,b,c,d){this.elem=a,this.text=d?"Move "+a.tagName+" to "+d:"Move "+a.tagName,this.oldNextSibling=b,this.oldParent=c,this.newNextSibling=a.nextSibling,this.newParent=a.parentNode},svgedit.history.MoveElementCommand.type=function(){return"svgedit.history.MoveElementCommand"},svgedit.history.MoveElementCommand.prototype.type=svgedit.history.MoveElementCommand.type,svgedit.history.MoveElementCommand.prototype.getText=function(){return this.text},svgedit.history.MoveElementCommand.prototype.apply=function(a){a&&a.handleHistoryEvent(svgedit.history.HistoryEventTypes.BEFORE_APPLY,this),this.elem=this.newParent.insertBefore(this.elem,this.newNextSibling),a&&a.handleHistoryEvent(svgedit.history.HistoryEventTypes.AFTER_APPLY,this)},svgedit.history.MoveElementCommand.prototype.unapply=function(a){a&&a.handleHistoryEvent(svgedit.history.HistoryEventTypes.BEFORE_UNAPPLY,this),this.elem=this.oldParent.insertBefore(this.elem,this.oldNextSibling),a&&a.handleHistoryEvent(svgedit.history.HistoryEventTypes.AFTER_UNAPPLY,this)},svgedit.history.MoveElementCommand.prototype.elements=function(){return[this.elem]},svgedit.history.InsertElementCommand=function(a,b){this.elem=a,this.text=b||"Create "+a.tagName,this.parent=a.parentNode,this.nextSibling=this.elem.nextSibling},svgedit.history.InsertElementCommand.type=function(){return"svgedit.history.InsertElementCommand"},svgedit.history.InsertElementCommand.prototype.type=svgedit.history.InsertElementCommand.type,svgedit.history.InsertElementCommand.prototype.getText=function(){return this.text},svgedit.history.InsertElementCommand.prototype.apply=function(a){a&&a.handleHistoryEvent(svgedit.history.HistoryEventTypes.BEFORE_APPLY,this),this.elem=this.parent.insertBefore(this.elem,this.nextSibling),a&&a.handleHistoryEvent(svgedit.history.HistoryEventTypes.AFTER_APPLY,this)},svgedit.history.InsertElementCommand.prototype.unapply=function(a){a&&a.handleHistoryEvent(svgedit.history.HistoryEventTypes.BEFORE_UNAPPLY,this),this.parent=this.elem.parentNode,this.elem=this.elem.parentNode.removeChild(this.elem),a&&a.handleHistoryEvent(svgedit.history.HistoryEventTypes.AFTER_UNAPPLY,this)},svgedit.history.InsertElementCommand.prototype.elements=function(){return[this.elem]},svgedit.history.RemoveElementCommand=function(a,b,c,d){this.elem=a,this.text=d||"Delete "+a.tagName,this.nextSibling=b,this.parent=c,svgedit.transformlist.removeElementFromListMap(a)},svgedit.history.RemoveElementCommand.type=function(){return"svgedit.history.RemoveElementCommand"},svgedit.history.RemoveElementCommand.prototype.type=svgedit.history.RemoveElementCommand.type,svgedit.history.RemoveElementCommand.prototype.getText=function(){return this.text},svgedit.history.RemoveElementCommand.prototype.apply=function(a){a&&a.handleHistoryEvent(svgedit.history.HistoryEventTypes.BEFORE_APPLY,this),svgedit.transformlist.removeElementFromListMap(this.elem),this.parent=this.elem.parentNode,this.elem=this.parent.removeChild(this.elem),a&&a.handleHistoryEvent(svgedit.history.HistoryEventTypes.AFTER_APPLY,this)},svgedit.history.RemoveElementCommand.prototype.unapply=function(a){a&&a.handleHistoryEvent(svgedit.history.HistoryEventTypes.BEFORE_UNAPPLY,this),svgedit.transformlist.removeElementFromListMap(this.elem),null==this.nextSibling&&window.console&&console.log("Error: reference element was lost"),this.parent.insertBefore(this.elem,this.nextSibling),a&&a.handleHistoryEvent(svgedit.history.HistoryEventTypes.AFTER_UNAPPLY,this)},svgedit.history.RemoveElementCommand.prototype.elements=function(){return[this.elem]},svgedit.history.ChangeElementCommand=function(a,b,c){this.elem=a,this.text=c?"Change "+a.tagName+" "+c:"Change "+a.tagName,this.newValues={},this.oldValues=b;var d;for(d in b)"#text"==d?this.newValues[d]=a.textContent:"#href"==d?this.newValues[d]=svgedit.utilities.getHref(a):this.newValues[d]=a.getAttribute(d)},svgedit.history.ChangeElementCommand.type=function(){return"svgedit.history.ChangeElementCommand"},svgedit.history.ChangeElementCommand.prototype.type=svgedit.history.ChangeElementCommand.type,svgedit.history.ChangeElementCommand.prototype.getText=function(){return this.text},svgedit.history.ChangeElementCommand.prototype.apply=function(a){a&&a.handleHistoryEvent(svgedit.history.HistoryEventTypes.BEFORE_APPLY,this);var b,c=!1;for(b in this.newValues)this.newValues[b]?"#text"==b?this.elem.textContent=this.newValues[b]:"#href"==b?svgedit.utilities.setHref(this.elem,this.newValues[b]):this.elem.setAttribute(b,this.newValues[b]):"#text"==b?this.elem.textContent="":(this.elem.setAttribute(b,""),this.elem.removeAttribute(b)),"transform"==b&&(c=!0);if(!c){var d=svgedit.utilities.getRotationAngle(this.elem);if(d){var e=elem.getBBox(),f=e.x+e.width/2,g=e.y+e.height/2,h=["rotate(",d," ",f,",",g,")"].join("");h!=elem.getAttribute("transform")&&elem.setAttribute("transform",h)}}return a&&a.handleHistoryEvent(svgedit.history.HistoryEventTypes.AFTER_APPLY,this),!0},svgedit.history.ChangeElementCommand.prototype.unapply=function(a){a&&a.handleHistoryEvent(svgedit.history.HistoryEventTypes.BEFORE_UNAPPLY,this);var b,c=!1;for(b in this.oldValues)this.oldValues[b]?"#text"==b?this.elem.textContent=this.oldValues[b]:"#href"==b?svgedit.utilities.setHref(this.elem,this.oldValues[b]):this.elem.setAttribute(b,this.oldValues[b]):"#text"==b?this.elem.textContent="":this.elem.removeAttribute(b),"transform"==b&&(c=!0);if(!c){var d=svgedit.utilities.getRotationAngle(this.elem);if(d){var e=elem.getBBox(),f=e.x+e.width/2,g=e.y+e.height/2,h=["rotate(",d," ",f,",",g,")"].join("");h!=elem.getAttribute("transform")&&elem.setAttribute("transform",h)}}return svgedit.transformlist.removeElementFromListMap(this.elem),a&&a.handleHistoryEvent(svgedit.history.HistoryEventTypes.AFTER_UNAPPLY,this),!0},svgedit.history.ChangeElementCommand.prototype.elements=function(){return[this.elem]},svgedit.history.BatchCommand=function(a){this.text=a||"Batch Command",this.stack=[]},svgedit.history.BatchCommand.type=function(){return"svgedit.history.BatchCommand"},svgedit.history.BatchCommand.prototype.type=svgedit.history.BatchCommand.type,svgedit.history.BatchCommand.prototype.getText=function(){return this.text},svgedit.history.BatchCommand.prototype.apply=function(a){a&&a.handleHistoryEvent(svgedit.history.HistoryEventTypes.BEFORE_APPLY,this);var b,c=this.stack.length;for(b=0;c>b;++b)this.stack[b].apply(a);a&&a.handleHistoryEvent(svgedit.history.HistoryEventTypes.AFTER_APPLY,this)},svgedit.history.BatchCommand.prototype.unapply=function(a){a&&a.handleHistoryEvent(svgedit.history.HistoryEventTypes.BEFORE_UNAPPLY,this);var b;for(b=this.stack.length-1;b>=0;b--)this.stack[b].unapply(a);a&&a.handleHistoryEvent(svgedit.history.HistoryEventTypes.AFTER_UNAPPLY,this)},svgedit.history.BatchCommand.prototype.elements=function(){for(var a=[],b=this.stack.length;b--;)for(var c=this.stack[b].elements(),d=c.length;d--;)-1==a.indexOf(c[d])&&a.push(c[d]);return a},svgedit.history.BatchCommand.prototype.addSubCommand=function(a){this.stack.push(a)},svgedit.history.BatchCommand.prototype.isEmpty=function(){return 0===this.stack.length},svgedit.history.UndoManager=function(a){this.handler_=a||null,this.undoStackPointer=0,this.undoStack=[],this.undoChangeStackPointer=-1,this.undoableChangeStack=[]},svgedit.history.UndoManager.prototype.resetUndoStack=function(){this.undoStack=[],this.undoStackPointer=0},svgedit.history.UndoManager.prototype.getUndoStackSize=function(){return this.undoStackPointer},svgedit.history.UndoManager.prototype.getRedoStackSize=function(){return this.undoStack.length-this.undoStackPointer},svgedit.history.UndoManager.prototype.getNextUndoCommandText=function(){return this.undoStackPointer>0?this.undoStack[this.undoStackPointer-1].getText():""},svgedit.history.UndoManager.prototype.getNextRedoCommandText=function(){return this.undoStackPointer<this.undoStack.length?this.undoStack[this.undoStackPointer].getText():""},svgedit.history.UndoManager.prototype.undo=function(){if($("body").trigger("svgChanged"),this.undoStackPointer>0){var a=this.undoStack[--this.undoStackPointer];return a.unapply(this.handler_),!0}return!1},svgedit.history.UndoManager.prototype.redo=function(){if($("body").trigger("svgChanged"),this.undoStackPointer<this.undoStack.length&&this.undoStack.length>0){var a=this.undoStack[this.undoStackPointer++];return a.apply(this.handler_),!0}return!1},svgedit.history.UndoManager.prototype.addCommandToHistory=function(a){this.undoStackPointer<this.undoStack.length&&this.undoStack.length>0&&(this.undoStack=this.undoStack.splice(0,this.undoStackPointer)),this.undoStack.push(a),this.undoStackPointer=this.undoStack.length,$("body").trigger("svgChanged")},svgedit.history.UndoManager.prototype.beginUndoableChange=function(a,b){for(var c=++this.undoChangeStackPointer,d=b.length,e=new Array(d),f=new Array(d);d--;){var g=b[d];null!=g&&(f[d]=g,e[d]=g.getAttribute(a))}this.undoableChangeStack[c]={attrName:a,oldValues:e,elements:f}},svgedit.history.UndoManager.prototype.finishUndoableChange=function(){for(var a=this.undoChangeStackPointer--,b=this.undoableChangeStack[a],c=b.elements.length,d=b.attrName,e=new svgedit.history.BatchCommand("Change "+d);c--;){var f=b.elements[c];if(null!=f){var g={};g[d]=b.oldValues[c],g[d]!=f.getAttribute(d)&&e.addSubCommand(new svgedit.history.ChangeElementCommand(f,g,d))}}return this.undoableChangeStack[a]=null,e}}();var svgedit=svgedit||{};!function(){"use strict";svgedit.coords||(svgedit.coords={});var a=[0,"z","M","m","L","l","C","c","Q","q","A","a","H","h","V","v","S","s","T","t"],b=null;svgedit.coords.init=function(a){b=a},svgedit.coords.remapElement=function(c,d,e){var f,g,h=function(a,b){return svgedit.math.transformPoint(a,b,e)},i=function(a){return e.a*a},j=function(a){return e.d*a},k=b.getGridSnapping()&&"svg"===c.parentNode.parentNode.localName,l=function(){var a;if(k)for(a in d)d[a]=svgedit.utilities.snapToGrid(d[a]);svgedit.utilities.assignAttributes(c,d,1e3,!0)},m=svgedit.utilities.getBBox(c);for(f=0;2>f;f++){g=0===f?"fill":"stroke";var n=c.getAttribute(g);if(n&&0===n.indexOf("url(")&&(e.a<0||e.d<0)){var o=svgedit.utilities.getRefElem(n),p=o.cloneNode(!0);if(e.a<0){var q=p.getAttribute("x1"),r=p.getAttribute("x2");p.setAttribute("x1",-(q-1)),p.setAttribute("x2",-(r-1))}if(e.d<0){var s=p.getAttribute("y1"),t=p.getAttribute("y2");p.setAttribute("y1",-(s-1)),p.setAttribute("y2",-(t-1))}p.id=b.getDrawing().getNextId(),svgedit.utilities.findDefs().appendChild(p),c.setAttribute(g,"url(#"+p.id+")")}}var u,v,w=c.tagName;if("g"===w||"text"===w||"tspan"==w||"use"===w)if(1!=e.a||0!=e.b||0!=e.c||1!=e.d||0==e.e&&0==e.f)u=svgedit.transformlist.getTransformList(c),v=svgroot.createSVGTransform(),v.setMatrix(svgedit.math.matrixMultiply(svgedit.math.transformListToTransform(u).matrix,e)),u.clear(),u.appendItem(v);else{var x=svgedit.math.transformListToTransform(c).matrix,y=svgedit.math.matrixMultiply(x.inverse(),e,x);d.x=parseFloat(d.x)+y.e,d.y=parseFloat(d.y)+y.f}var z,A,B,C,D;switch(w){case"foreignObject":case"rect":case"image":"image"===w&&(e.a<0||e.d<0)?(u=svgedit.transformlist.getTransformList(c),v=svgroot.createSVGTransform(),v.setMatrix(svgedit.math.matrixMultiply(svgedit.math.transformListToTransform(u).matrix,e)),u.clear(),u.appendItem(v)):(B=h(d.x,d.y),d.width=i(d.width),d.height=j(d.height),d.x=B.x+Math.min(0,d.width),d.y=B.y+Math.min(0,d.height),d.width=Math.abs(d.width),d.height=Math.abs(d.height)),l();break;case"ellipse":z=h(d.cx,d.cy),d.cx=z.x,d.cy=z.y,d.rx=i(d.rx),d.ry=j(d.ry),d.rx=Math.abs(d.rx),d.ry=Math.abs(d.ry),l();break;case"circle":z=h(d.cx,d.cy),d.cx=z.x,d.cy=z.y;var E=svgedit.math.transformBox(m.x,m.y,m.width,m.height,e),F=E.tr.x-E.tl.x,G=E.bl.y-E.tl.y;d.r=Math.min(F/2,G/2),d.r&&(d.r=Math.abs(d.r)),l();break;case"line":B=h(d.x1,d.y1),C=h(d.x2,d.y2),d.x1=B.x,d.y1=B.y,d.x2=C.x,d.y2=C.y;case"text":case"tspan":case"use":l();break;case"g":var H=$(c).data("gsvg");H&&svgedit.utilities.assignAttributes(H,d,1e3,!0);break;case"polyline":case"polygon":for(D=d.points.length,f=0;D>f;++f)A=d.points[f],A=h(A.x,A.y),d.points[f].x=A.x,d.points[f].y=A.y;D=d.points.length;var I="";for(f=0;D>f;++f)A=d.points[f],I+=A.x+","+A.y+" ";c.setAttribute("points",I);break;case"path":var J,K=c.pathSegList;for(D=K.numberOfItems,d.d=[],f=0;D>f;++f)J=K.getItem(f),d.d[f]={type:J.pathSegType,x:J.x,y:J.y,x1:J.x1,y1:J.y1,x2:J.x2,y2:J.y2,r1:J.r1,r2:J.r2,angle:J.angle,largeArcFlag:J.largeArcFlag,sweepFlag:J.sweepFlag};D=d.d.length;var L=d.d[0],M=h(L.x,L.y);for(d.d[0].x=M.x,d.d[0].y=M.y,f=1;D>f;++f)if(J=d.d[f],g=J.type,g%2==0){var N=void 0!=J.x?J.x:M.x,O=void 0!=J.y?J.y:M.y;A=h(N,O),B=h(J.x1,J.y1),C=h(J.x2,J.y2),J.x=A.x,J.y=A.y,J.x1=B.x,J.y1=B.y,J.x2=C.x,J.y2=C.y,J.r1=i(J.r1),J.r2=j(J.r2)}else J.x=i(J.x),J.y=j(J.y),J.x1=i(J.x1),J.y1=j(J.y1),J.x2=i(J.x2),J.y2=j(J.y2),J.r1=i(J.r1),J.r2=j(J.r2);var P="";for(D=d.d.length,f=0;D>f;++f)switch(J=d.d[f],g=J.type,P+=a[g],g){case 13:case 12:P+=J.x+" ";break;case 15:case 14:P+=J.y+" ";break;case 3:case 5:case 19:case 2:case 4:case 18:P+=J.x+","+J.y+" ";break;case 7:case 6:P+=J.x1+","+J.y1+" "+J.x2+","+J.y2+" "+J.x+","+J.y+" ";break;case 9:case 8:P+=J.x1+","+J.y1+" "+J.x+","+J.y+" ";break;case 11:case 10:P+=J.r1+","+J.r2+" "+J.angle+" "+ +J.largeArcFlag+" "+ +J.sweepFlag+" "+J.x+","+J.y+" ";break;case 17:case 16:P+=J.x2+","+J.y2+" "+J.x+","+J.y+" "}c.setAttribute("d",P)}}}();var svgedit=svgedit||{};!function(){svgedit.recalculate||(svgedit.recalculate={});var a,b=svgedit.NS;svgedit.recalculate.init=function(b){a=b},svgedit.recalculate.updateClipPath=function(b,c,d){var e=getRefElem(b).firstChild,f=svgedit.transformlist.getTransformList(e),g=a.getSVGRoot().createSVGTransform();g.setTranslate(c,d),f.appendItem(g),svgedit.recalculate.recalculateDimensions(e)},svgedit.recalculate.recalculateDimensions=function(c){if(null==c)return null;if("svg"==c.nodeName&&navigator.userAgent.indexOf("Firefox/20")>=0)return null;var d,e=a.getSVGRoot(),f=svgedit.transformlist.getTransformList(c);if(f&&f.numberOfItems>0){for(d=f.numberOfItems;d--;){var g=f.getItem(d);0===g.type?f.removeItem(d):1===g.type?svgedit.math.isIdentity(g.matrix)&&f.removeItem(d):4===g.type&&0===g.angle&&f.removeItem(d)}if(1===f.numberOfItems&&svgedit.utilities.getRotationAngle(c))return null}if(!f||0==f.numberOfItems)return c.setAttribute("transform",""),c.removeAttribute("transform"),null;if(f){d=f.numberOfItems;for(var h=[];d--;){var g=f.getItem(d);1===g.type?h.push([g.matrix,d]):h.length&&(h=[])}if(2===h.length){var i=e.createSVGTransformFromMatrix(svgedit.math.matrixMultiply(h[1][0],h[0][0]));f.removeItem(h[0][1]),f.removeItem(h[1][1]),f.insertItemBefore(i,h[1][1])}if(d=f.numberOfItems,d>=2&&1===f.getItem(d-2).type&&2===f.getItem(d-1).type){var j=e.createSVGTransform(),k=svgedit.math.matrixMultiply(f.getItem(d-2).matrix,f.getItem(d-1).matrix);j.setMatrix(k),f.removeItem(d-2),f.removeItem(d-2),f.appendItem(j)}}switch(c.tagName){case"line":case"polyline":case"polygon":case"path":break;default:if(1===f.numberOfItems&&1===f.getItem(0).type||2===f.numberOfItems&&1===f.getItem(0).type&&4===f.getItem(0).type)return null}var l=$(c).data("gsvg"),m=new svgedit.history.BatchCommand("Transform"),n={},o=null,p=[];switch(c.tagName){case"line":p=["x1","y1","x2","y2"];break;case"circle":p=["cx","cy","r"];break;case"ellipse":p=["cx","cy","rx","ry"];break;case"foreignObject":case"rect":case"image":p=["width","height","x","y"];break;case"use":case"text":case"tspan":p=["x","y"];break;case"polygon":case"polyline":o={},o.points=c.getAttribute("points");var q=c.points,r=q.numberOfItems;n.points=new Array(r);var s;for(s=0;r>s;++s){var t=q.getItem(s);n.points[s]={x:t.x,y:t.y}}break;case"path":o={},o.d=c.getAttribute("d"),n.d=c.getAttribute("d")}if(p.length?(n=$(c).attr(p),$.each(n,function(a,b){n[a]=svgedit.units.convertToNum(a,b)})):l&&(n={x:$(l).attr("x")||0,y:$(l).attr("y")||0}),null==o&&(o=$.extend(!0,{},n),$.each(o,function(a,b){o[a]=svgedit.units.convertToNum(a,b)})),o.transform=a.getStartTransform()||"","g"==c.tagName&&!l||"a"==c.tagName){var u=svgedit.utilities.getBBox(c),v={x:u.x+u.width/2,y:u.y+u.height/2},w=svgedit.math.transformPoint(u.x+u.width/2,u.y+u.height/2,svgedit.math.transformListToTransform(f).matrix),k=e.createSVGMatrix(),x=svgedit.utilities.getRotationAngle(c);if(x){var y=x*Math.PI/180;if(Math.abs(y)>1e-10)var z=Math.sin(y)/(1-Math.cos(y));else var z=2/y;var s;for(s=0;s<f.numberOfItems;++s){var g=f.getItem(s);if(4==g.type){var A=g.matrix;v.y=(z*A.e+A.f)/2,v.x=(A.e-z*A.f)/2,f.removeItem(s);break}}}var B=0,C=0,D=0,E=f.numberOfItems;if(E)var F=f.getItem(0).matrix;if(E>=3&&3==f.getItem(E-2).type&&2==f.getItem(E-3).type&&2==f.getItem(E-1).type){D=3;for(var G=f.getItem(E-3).matrix,H=f.getItem(E-2).matrix,I=f.getItem(E-1).matrix,J=c.childNodes,K=J.length;K--;){var L=J.item(K);if(B=0,C=0,1==L.nodeType){var M=svgedit.transformlist.getTransformList(L);if(!M)continue;var k=svgedit.math.transformListToTransform(M).matrix,N=svgedit.utilities.getRotationAngle(L),O=a.getStartTransform(),P=[];if(a.setStartTransform(L.getAttribute("transform")),N||svgedit.math.hasMatrixTransform(M)){var Q=e.createSVGTransform();Q.setMatrix(svgedit.math.matrixMultiply(G,H,I,k)),M.clear(),M.appendItem(Q),P.push(Q)}else{var R=svgedit.math.matrixMultiply(k.inverse(),I,k),S=e.createSVGMatrix();S.e=-R.e,S.f=-R.f;var T=svgedit.math.matrixMultiply(S.inverse(),k.inverse(),G,H,I,k,R.inverse()),U=e.createSVGTransform(),V=e.createSVGTransform(),W=e.createSVGTransform();U.setTranslate(R.e,R.f),V.setScale(T.a,T.d),W.setTranslate(S.e,S.f),M.appendItem(W),M.appendItem(V),M.appendItem(U),P.push(W),P.push(V),P.push(U)}m.addSubCommand(svgedit.recalculate.recalculateDimensions(L)),a.setStartTransform(O)}}f.removeItem(E-1),f.removeItem(E-2),f.removeItem(E-3)}else if(E>=3&&1==f.getItem(E-1).type){D=3,k=svgedit.math.transformListToTransform(f).matrix;var Q=e.createSVGTransform();Q.setMatrix(k),f.clear(),f.appendItem(Q)}else if((1==E||E>1&&3!=f.getItem(1).type)&&2==f.getItem(0).type){D=2;var X=svgedit.math.transformListToTransform(f).matrix;f.removeItem(0);var Y=svgedit.math.transformListToTransform(f).matrix.inverse(),Z=svgedit.math.matrixMultiply(Y,X);if(B=Z.e,C=Z.f,0!=B||0!=C){for(var J=c.childNodes,K=J.length,_=[];K--;){var L=J.item(K);if(1==L.nodeType){if(L.getAttribute("clip-path")){var aa=L.getAttribute("clip-path");-1===_.indexOf(aa)&&(svgedit.recalculate.updateClipPath(aa,B,C),_.push(aa))}var O=a.getStartTransform();a.setStartTransform(L.getAttribute("transform"));var M=svgedit.transformlist.getTransformList(L);if(M){var ba=e.createSVGTransform();ba.setTranslate(B,C),M.numberOfItems?M.insertItemBefore(ba,0):M.appendItem(ba),m.addSubCommand(svgedit.recalculate.recalculateDimensions(L));for(var ca=c.getElementsByTagNameNS(b.SVG,"use"),da="#"+L.id,ea=ca.length;ea--;){var fa=ca.item(ea);if(da==svgedit.utilities.getHref(fa)){var ga=e.createSVGTransform();ga.setTranslate(-B,-C),svgedit.transformlist.getTransformList(fa).insertItemBefore(ga,0),m.addSubCommand(svgedit.recalculate.recalculateDimensions(fa))}}a.setStartTransform(O)}}}_=[],a.setStartTransform(O)}}else{if(1!=E||1!=f.getItem(0).type||x){if(x){var ha=e.createSVGTransform();ha.setRotate(x,w.x,w.y),f.numberOfItems?f.insertItemBefore(ha,0):f.appendItem(ha)}return 0==f.numberOfItems&&c.removeAttribute("transform"),null}D=1;for(var k=f.getItem(0).matrix,J=c.childNodes,K=J.length;K--;){var L=J.item(K);if(1==L.nodeType){var O=a.getStartTransform();a.setStartTransform(L.getAttribute("transform"));var M=svgedit.transformlist.getTransformList(L);if(!M)continue;var ia=svgedit.math.matrixMultiply(k,svgedit.math.transformListToTransform(M).matrix),ja=e.createSVGTransform();ja.setMatrix(ia),M.clear(),M.appendItem(ja,0),m.addSubCommand(svgedit.recalculate.recalculateDimensions(L)),a.setStartTransform(O);var ka=L.getAttribute("stroke-width");if("none"!==L.getAttribute("stroke")&&!isNaN(ka)){var la=(Math.abs(ia.a)+Math.abs(ia.d))/2;L.setAttribute("stroke-width",ka*la)}}}f.clear()}if(2==D){if(x){w={x:v.x+F.e,y:v.y+F.f};var ha=e.createSVGTransform();ha.setRotate(x,w.x,w.y),f.numberOfItems?f.insertItemBefore(ha,0):f.appendItem(ha)}}else if(3==D){var k=svgedit.math.transformListToTransform(f).matrix,ma=e.createSVGTransform();ma.setRotate(x,v.x,v.y);var na=ma.matrix,oa=e.createSVGTransform();oa.setRotate(x,w.x,w.y);var pa=oa.matrix.inverse(),qa=k.inverse(),ra=svgedit.math.matrixMultiply(qa,pa,na,k);if(B=ra.e,C=ra.f,0!=B||0!=C)for(var J=c.childNodes,K=J.length;K--;){var L=J.item(K);if(1==L.nodeType){var O=a.getStartTransform();a.setStartTransform(L.getAttribute("transform"));var M=svgedit.transformlist.getTransformList(L),ba=e.createSVGTransform();ba.setTranslate(B,C),M.numberOfItems?M.insertItemBefore(ba,0):M.appendItem(ba),m.addSubCommand(svgedit.recalculate.recalculateDimensions(L)),a.setStartTransform(O)}}x&&(f.numberOfItems?f.insertItemBefore(oa,0):f.appendItem(oa))}}else{var u=svgedit.utilities.getBBox(c);if(!u&&"path"!=c.tagName)return null;var k=e.createSVGMatrix(),N=svgedit.utilities.getRotationAngle(c);if(N){var v={x:u.x+u.width/2,y:u.y+u.height/2},w=svgedit.math.transformPoint(u.x+u.width/2,u.y+u.height/2,svgedit.math.transformListToTransform(f).matrix),y=N*Math.PI/180;if(Math.abs(y)>1e-10)var z=Math.sin(y)/(1-Math.cos(y));else var z=2/y;for(var s=0;s<f.numberOfItems;++s){var g=f.getItem(s);if(4==g.type){var A=g.matrix;v.y=(z*A.e+A.f)/2,v.x=(A.e-z*A.f)/2,f.removeItem(s);break}}}var D=0,E=f.numberOfItems;if(!svgedit.browser.isWebkit()){var sa=c.getAttribute("fill");if(sa&&0===sa.indexOf("url(")){var ta=getRefElem(sa),ua="pattern";ta.tagName!==ua&&(ua="gradient");var va=ta.getAttribute(ua+"Units");if("userSpaceOnUse"===va){k=svgedit.math.transformListToTransform(f).matrix;var wa=svgedit.transformlist.getTransformList(ta),xa=svgedit.math.transformListToTransform(wa).matrix;k=svgedit.math.matrixMultiply(k,xa);var ya="matrix("+[k.a,k.b,k.c,k.d,k.e,k.f].join(",")+")";ta.setAttribute(ua+"Transform",ya)}}}if(E>=3&&3==f.getItem(E-2).type&&2==f.getItem(E-3).type&&2==f.getItem(E-1).type)D=3,k=svgedit.math.transformListToTransform(f,E-3,E-1).matrix,f.removeItem(E-1),f.removeItem(E-2),f.removeItem(E-3);else if(4==E&&1==f.getItem(E-1).type){D=3,k=svgedit.math.transformListToTransform(f).matrix;var Q=e.createSVGTransform();Q.setMatrix(k),f.clear(),f.appendItem(Q),k=e.createSVGMatrix()}else if((1==E||E>1&&3!=f.getItem(1).type)&&2==f.getItem(0).type){D=2;var za=f.getItem(0).matrix,Aa=svgedit.math.transformListToTransform(f,1).matrix,Ba=Aa.inverse();k=svgedit.math.matrixMultiply(Ba,za,Aa),f.removeItem(0)}else{if(1!=E||1!=f.getItem(0).type||N){if(D=4,N){var ha=e.createSVGTransform();ha.setRotate(N,w.x,w.y),f.numberOfItems?f.insertItemBefore(ha,0):f.appendItem(ha)}return 0==f.numberOfItems&&c.removeAttribute("transform"),null}switch(k=svgedit.math.transformListToTransform(f).matrix,c.tagName){case"line":n=$(c).attr(["x1","y1","x2","y2"]);case"polyline":case"polygon":if(n.points=c.getAttribute("points"),n.points){var q=c.points,r=q.numberOfItems;n.points=new Array(r);for(var s=0;r>s;++s){var t=q.getItem(s);n.points[s]={x:t.x,y:t.y}}}case"path":n.d=c.getAttribute("d"),D=1,f.clear()}}if(1!=D&&2!=D&&3!=D||svgedit.coords.remapElement(c,n,k),2==D){if(N){svgedit.math.hasMatrixTransform(f)||(w={x:v.x+k.e,y:v.y+k.f});var ha=e.createSVGTransform();ha.setRotate(N,w.x,w.y),f.numberOfItems?f.insertItemBefore(ha,0):f.appendItem(ha)}if("text"==c.tagName)for(var J=c.childNodes,K=J.length;K--;){var L=J.item(K);if("tspan"==L.tagName){var Ca={x:$(L).attr("x")||0,y:$(L).attr("y")||0};svgedit.coords.remapElement(L,Ca,k)}}}else if(3==D&&N){var k=svgedit.math.transformListToTransform(f).matrix,ma=e.createSVGTransform();ma.setRotate(N,v.x,v.y);var na=ma.matrix,oa=e.createSVGTransform();oa.setRotate(N,w.x,w.y);var pa=oa.matrix.inverse(),qa=k.inverse(),ra=svgedit.math.matrixMultiply(qa,pa,na,k);svgedit.coords.remapElement(c,n,ra),N&&(f.numberOfItems?f.insertItemBefore(oa,0):f.appendItem(oa))}}return 0==f.numberOfItems&&c.removeAttribute("transform"),m.addSubCommand(new svgedit.history.ChangeElementCommand(c,o)),m}}(),function(){"use strict";svgedit.select||(svgedit.select={});var a,b,c,d=svgedit.browser.isTouch()?10:4;svgedit.select.Selector=function(b,c){this.id=b,this.selectedElement=c,this.locked=!0,this.selectorGroup=a.createSVGElement({element:"g",attr:{id:"selectorGroup"+this.id}}),this.selectorRect=this.selectorGroup.appendChild(a.createSVGElement({element:"path",attr:{id:"selectedBox"+this.id,fill:"none",stroke:"#000","stroke-width":"1","stroke-dasharray":"5,5",style:"pointer-events:none"}})),this.gripCoords={nw:null,ne:null,se:null,sw:null},this.reset(this.selectedElement)},svgedit.select.Selector.prototype.reset=function(a){this.locked=!0,this.selectedElement=a,this.resize(),this.selectorGroup.setAttribute("display","inline")},svgedit.select.Selector.prototype.updateGripCursors=function(a){var b,d=[],e=Math.round(a/45);0>e&&(e+=8);for(b in c.selectorGrips)d.push(b);for(;e>0;)d.push(d.shift()),e--;var f=0;for(b in c.selectorGrips)"nw"!=b&&c.selectorGrips[b].setAttribute("style","cursor:"+d[f]+"-resize"),f++},svgedit.select.Selector.prototype.showGrips=function(a,b){var d=a?"inline":"none";c.selectorGripsGroup.setAttribute("display",d);var e=this.selectedElement;this.hasGrips=a,e&&a&&(this.selectorGroup.appendChild(c.selectorGripsGroup),this.updateGripCursors(svgedit.utilities.getRotationAngle(e))),b&&(this.selectorGroup.appendChild(c.rotateGripConnector),this.selectorGroup.appendChild(c.rotateGrip),this.selectorGroup.appendChild(c.selectorGrips.nw),this.updateGripCursors(svgedit.utilities.getRotationAngle(e)))},svgedit.select.Selector.prototype.resize=function(){var b=this.selectorRect,e=c,f=e.selectorGrips,g=this.selectedElement,h=g.getAttribute("stroke-width"),i=a.currentZoom(),j=1/i;"none"===g.getAttribute("stroke")||isNaN(h)||(j+=h/2);var k=g.tagName;"text"===k&&(j+=2/i);var l=svgedit.transformlist.getTransformList(g),m=svgedit.math.transformListToTransform(l).matrix;m.e*=i,m.f*=i;var n=svgedit.utilities.getBBox(g);if("g"===k&&!$.data(g,"gsvg")){var o=a.getStrokedBBox(g.childNodes);o&&(n=o)}var p=n.x,q=n.y,r=n.width,s=n.height;n={x:p,y:q,width:r,height:s},j*=i;var t=svgedit.math.transformBox(p*i,q*i,r*i,s*i,m),u=t.aabox,v=u.x-j,w=u.y-j,x=u.width+2*j,y=u.height+2*j,z=v+x/2,A=w+y/2,B=svgedit.utilities.getRotationAngle(g);if(B){var C=a.svgRoot().createSVGTransform();C.setRotate(-B,z,A);var D=C.matrix;t.tl=svgedit.math.transformPoint(t.tl.x,t.tl.y,D),t.tr=svgedit.math.transformPoint(t.tr.x,t.tr.y,D),t.bl=svgedit.math.transformPoint(t.bl.x,t.bl.y,D),t.br=svgedit.math.transformPoint(t.br.x,t.br.y,D);var E=t.tl,F=E.x,G=E.y,H=E.x,I=E.y,J=Math.min,K=Math.max;F=J(F,J(t.tr.x,J(t.bl.x,t.br.x)))-j,G=J(G,J(t.tr.y,J(t.bl.y,t.br.y)))-j,H=K(H,K(t.tr.x,K(t.bl.x,t.br.x)))+j,I=K(I,K(t.tr.y,K(t.bl.y,t.br.y)))+j,v=F,w=G,x=H-F,y=I-G}var L=a.svgRoot().suspendRedraw(100),M="M"+v+","+w+" L"+(v+x)+","+w+" "+(v+x)+","+(w+y)+" "+v+","+(w+y)+"z";b.setAttribute("d",M);var N=B?"rotate("+[B,z,A].join(",")+")":"";this.selectorGroup.setAttribute("transform",N),this.gripCoords={nw:[v,w],ne:[v+x,w],sw:[v,w+y],se:[v+x,w+y]};var O;for(O in this.gripCoords){var P=this.gripCoords[O];f[O].setAttribute("x",P[0]-10),f[O].setAttribute("y",P[1]-10)}e.rotateGripConnector.setAttribute("x1",v+x/2),
e.rotateGripConnector.setAttribute("y1",w),e.rotateGripConnector.setAttribute("x2",v+x/2),e.rotateGripConnector.setAttribute("y2",w-5*d-20),e.rotateGrip.setAttribute("cx",v+x/2),e.rotateGrip.setAttribute("cy",w-5*d),e.rotateGrip.setAttribute("x",v+x/2-10),e.rotateGrip.setAttribute("y",w-5*d-20),a.svgRoot().unsuspendRedraw(L)},svgedit.select.SelectorManager=function(){this.selectorParentGroup=null,this.rubberBandBox=null,this.selectors=[],this.selectorMap={},this.selectorGrips={nw:null,ne:null,se:null,sw:null},this.selectorGripsGroup=null,this.rotateGripConnector=null,this.rotateGrip=null,this.initGroup()},svgedit.select.SelectorManager.prototype.initGroup=function(){this.selectorParentGroup&&this.selectorParentGroup.parentNode&&this.selectorParentGroup.parentNode.removeChild(this.selectorParentGroup),this.selectorParentGroup=a.createSVGElement({element:"g",attr:{id:"selectorParentGroup"}}),this.selectorGripsGroup=a.createSVGElement({element:"g",attr:{display:"none"}}),this.selectorParentGroup.appendChild(this.selectorGripsGroup),a.svgRoot().appendChild(this.selectorParentGroup),this.selectorMap={},this.selectors=[],this.rubberBandBox=null;var c;for(c in this.selectorGrips)if("nw"==c){var e=a.createSVGElement({element:"image",attr:{height:"20px",width:"20px",id:"selectorGrip_resize_nw","xlink:href":"images/trash-16.png",r:d}});$.data(e,"dir","nw"),this.selectorGrips[c]=this.selectorGripsGroup.appendChild(e)}else{var e=a.createSVGElement({element:"image",attr:{height:"20px",width:"20px",id:"selectorGrip_resize_"+c,"xlink:href":"images/"+c+"-16.png",r:d,style:"cursor:"+c+"-resize"}});$.data(e,"dir",c),$.data(e,"type","resize"),this.selectorGrips[c]=this.selectorGripsGroup.appendChild(e)}if(this.rotateGripConnector=this.selectorGripsGroup.appendChild(a.createSVGElement({element:"line",attr:{id:"selectorGrip_rotateconnector",stroke:"#000","stroke-width":"1"}})),this.rotateGrip=this.selectorGripsGroup.appendChild(a.createSVGElement({element:"image",attr:{height:"20px",width:"20px",id:"selectorGrip_rotate","xlink:href":"images/rotate-16.png",r:d,style:"cursor:url("+b.imgPath+"rotate.png) 12 12, auto;"}})),$.data(this.rotateGrip,"type","rotate"),!$("#canvasBackground").length){var f=b.dimensions,g=a.createSVGElement({element:"svg",attr:{id:"canvasBackground",width:f[0],height:f[1],x:0,y:0,overflow:svgedit.browser.isWebkit()?"none":"visible",style:"pointer-events:none"}}),h=a.createSVGElement({element:"rect",attr:{width:"100%",height:"100%",x:0,y:0,"stroke-width":1,stroke:"#000",fill:"#FFF",style:"pointer-events:none"}});g.appendChild(h),a.svgRoot().insertBefore(g,a.svgContent())}},svgedit.select.SelectorManager.prototype.requestSelector=function(a){if(null==a)return null;var b,c=this,d=this.selectors.length;if($(a).css("cursor","move"),"object"==typeof this.selectorMap[a.id])return this.selectorMap[a.id].locked=!0,this.selectorMap[a.id];if("text"==a.tagName){var e=$(a).offset(),f=a.getBoundingClientRect(),g=function(){a.setAttribute("x",parseFloat($("#textMoveHandle").css("left"))/svgCanvas.getZoom()),a.setAttribute("y",(parseFloat($("#textMoveHandle").css("top"))-25)/svgCanvas.getZoom());var b=$(a).offset();a.setAttribute("x",(parseFloat($("#textMoveHandle").css("left"))-(b.left-parseFloat($("#textMoveHandle").css("left"))))/svgCanvas.getZoom()),b.top<parseFloat($("#textMoveHandle").css("top"))?a.setAttribute("y",(parseFloat($("#textMoveHandle").css("top"))+(parseFloat($("#textMoveHandle").css("top"))-b.top))/svgCanvas.getZoom()):a.setAttribute("y",(parseFloat($("#textMoveHandle").css("top"))-(b.top-parseFloat($("#textMoveHandle").css("top"))))/svgCanvas.getZoom()),svgCanvas.setMode("select")},h=function(){var b=a.getBoundingClientRect();a.setAttribute("x",parseFloat($("#textMoveHandle2").css("left"))/svgCanvas.getZoom()),a.setAttribute("y",(parseFloat($("#textMoveHandle2").css("top"))+b.height+5)/svgCanvas.getZoom());var c=$(a).offset();a.setAttribute("x",(parseFloat($("#textMoveHandle2").css("left"))-(c.left-parseFloat($("#textMoveHandle2").css("left"))))/svgCanvas.getZoom()),c.top<parseFloat($("#textMoveHandle2").css("top"))?a.setAttribute("y",(parseFloat($("#textMoveHandle2").css("top"))+(parseFloat($("#textMoveHandle2").css("top"))-c.top))/svgCanvas.getZoom()):a.setAttribute("y",(parseFloat($("#textMoveHandle2").css("top"))-(c.top-parseFloat($("#textMoveHandle2").css("top"))))/svgCanvas.getZoom()),svgCanvas.setMode("select")};$("#textMoveHandle").remove(),$("#textMoveHandle2").remove(),$("body").append('<div id="textMoveHandle" style="cursor: move; height: 20px; position: absolute; text-align: center; top: '+(e.top-25)+"px; left: "+e.left+"; min-width: "+f.width+"px; width: "+f.width+'px"></div>'),$("body").append('<div id="textMoveHandle2" style="cursor: move; height: 20px; position: absolute; text-align: center; top: '+(e.top+f.height)+"px; left: "+e.left+"; min-width: "+f.width+"px; width: "+f.width+'px"></div>');var i,j;$("#textMoveHandle2").draggable({cursor:"move",start:function(b,c){i=a.getAttribute("x"),j=a.getAttribute("y")},drag:function(b,d){h(),$("#textMoveHandle").css("left",$("#textMoveHandle2").css("left")),$("#textMoveHandle").css("top",$(a).offset().top-25),c.selectors[0].resize()},stop:function(b,c){var d=new svgedit.history.ChangeElementCommand(a,{x:i,y:j},{x:a.getAttribute("x"),y:a.getAttribute("y")});svgCanvas.addCommandToHistory(d)}}),$("#textMoveHandle").draggable({cursor:"move",start:function(b,c){i=a.getAttribute("x"),j=a.getAttribute("y")},drag:function(b,d){g(),$("#textMoveHandle2").css("left",$("#textMoveHandle").css("left")),$("#textMoveHandle2").css("top",$(a).offset().top+a.getBBox().height*svgCanvas.getZoom()+5),c.selectors[0].resize()},stop:function(b,c){var d=new svgedit.history.ChangeElementCommand(a,{x:i,y:j},{x:a.getAttribute("x"),y:a.getAttribute("y")});svgCanvas.addCommandToHistory(d)}})}for(b=0;d>b;++b)if(this.selectors[b]&&!this.selectors[b].locked)return this.selectors[b].locked=!0,this.selectors[b].reset(a),this.selectorMap[a.id]=this.selectors[b],$(this.selectors[b].selectorRect).attr("stroke","#000"),this.selectors[b];return this.selectors[d]=new svgedit.select.Selector(d,a),this.selectorParentGroup.appendChild(this.selectors[d].selectorGroup),this.selectorMap[a.id]=this.selectors[d],$(this.selectors[d].selectorRect).attr("stroke","#000"),$("#selectorGrip_resize_nw").off().mouseup(function(a){a.stopPropagation(),svgCanvas.deleteSelectedElements(),svgCanvas.setMode("select")}),this.selectors[d]},svgedit.select.SelectorManager.prototype.releaseSelector=function(a){if(null!=a){$(a).css("cursor"),"text"==a.tagName&&($("#textMoveHandle").remove(),$("#textMoveHandle2").remove());var b,c=this.selectors.length,d=this.selectorMap[a.id];for(b=0;c>b;++b)if(this.selectors[b]&&this.selectors[b]==d){0==d.locked&&console.log("WARNING! selector was released but was already unlocked"),delete this.selectorMap[a.id],d.locked=!1,d.selectedElement=null,d.showGrips(!1);try{d.selectorGroup.setAttribute("display","none")}catch(e){}break}}},svgedit.select.SelectorManager.prototype.getRubberBandBox=function(){return this.rubberBandBox||(this.rubberBandBox=this.selectorParentGroup.appendChild(a.createSVGElement({element:"rect",attr:{id:"selectorRubberBand",fill:"#000","fill-opacity":.15,stroke:"#000","stroke-width":.5,display:"none",style:"pointer-events:none"}}))),this.rubberBandBox},svgedit.select.init=function(d,e){b=d,a=e,c=new svgedit.select.SelectorManager},svgedit.select.getSelectorManager=function(){return c}}(),function(){"use strict";svgedit.draw||(svgedit.draw={});var a=svgedit.NS,b="a,circle,ellipse,foreignObject,g,image,line,path,polygon,polyline,rect,svg,text,tspan,use".split(","),c={LET_DOCUMENT_DECIDE:0,ALWAYS_RANDOMIZE:1,NEVER_RANDOMIZE:2},d=c.LET_DOCUMENT_DECIDE;svgedit.draw.Layer=function(a,b){this.name_=a,this.group_=b},svgedit.draw.Layer.prototype.getName=function(){return this.name_},svgedit.draw.Layer.prototype.getGroup=function(){return this.group_},svgedit.draw.randomizeIds=function(a,b){d=a===!1?c.NEVER_RANDOMIZE:c.ALWAYS_RANDOMIZE,d!=c.ALWAYS_RANDOMIZE||b.getNonce()?d==c.NEVER_RANDOMIZE&&b.getNonce()&&b.clearNonce():b.setNonce(Math.floor(100001*Math.random()))},svgedit.draw.Drawing=function(b,e){if(!b||!b.tagName||!b.namespaceURI||"svg"!=b.tagName||b.namespaceURI!=a.SVG)throw"Error: svgedit.draw.Drawing instance initialized without a <svg> element";this.svgElem_=b,this.obj_num=0,this.idPrefix=e||"svg_",this.releasedNums=[],this.all_layers=[],this.current_layer=null,this.nonce_="";var f=this.svgElem_.getAttributeNS(a.SE,"nonce");f&&d!=c.NEVER_RANDOMIZE?this.nonce_=f:d==c.ALWAYS_RANDOMIZE&&this.setNonce(Math.floor(100001*Math.random()))},svgedit.draw.Drawing.prototype.getElem_=function(a){return this.svgElem_.querySelector?this.svgElem_.querySelector("#"+a):$(this.svgElem_).find("[id="+a+"]")[0]},svgedit.draw.Drawing.prototype.getSvgElem=function(){return this.svgElem_},svgedit.draw.Drawing.prototype.getNonce=function(){return this.nonce_},svgedit.draw.Drawing.prototype.setNonce=function(b){this.svgElem_.setAttributeNS(a.XMLNS,"xmlns:se",a.SE),this.svgElem_.setAttributeNS(a.SE,"se:nonce",b),this.nonce_=b},svgedit.draw.Drawing.prototype.clearNonce=function(){this.nonce_=""},svgedit.draw.Drawing.prototype.getId=function(){return this.nonce_?this.idPrefix+this.nonce_+"_"+this.obj_num:this.idPrefix+this.obj_num},svgedit.draw.Drawing.prototype.getNextId=function(){var a=this.obj_num,b=!1;this.releasedNums.length>0?(this.obj_num=this.releasedNums.pop(),b=!0):this.obj_num++;for(var c=this.getId();this.getElem_(c);)b&&(this.obj_num=a,b=!1),this.obj_num++,c=this.getId();return b&&(this.obj_num=a),c},svgedit.draw.Drawing.prototype.releaseId=function(a){var b=this.idPrefix+(this.nonce_?this.nonce_+"_":"");if("string"!=typeof a||0!==a.indexOf(b))return!1;var c=parseInt(a.substr(b.length),10);return"number"!=typeof c||0>=c||-1!=this.releasedNums.indexOf(c)?!1:(this.releasedNums.push(c),!0)},svgedit.draw.Drawing.prototype.getNumLayers=function(){return this.all_layers.length},svgedit.draw.Drawing.prototype.hasLayer=function(a){var b;for(b=0;b<this.getNumLayers();b++)if(this.all_layers[b][0]==a)return!0;return!1},svgedit.draw.Drawing.prototype.getLayerName=function(a){return a>=0&&a<this.getNumLayers()?this.all_layers[a][0]:""},svgedit.draw.Drawing.prototype.getCurrentLayer=function(){return this.current_layer},svgedit.draw.Drawing.prototype.getCurrentLayerName=function(){var a;for(a=0;a<this.getNumLayers();++a)if(this.all_layers[a][1]==this.current_layer)return this.getLayerName(a);return""},svgedit.draw.Drawing.prototype.setCurrentLayer=function(a){var b;for(b=0;b<this.getNumLayers();++b)if(a==this.getLayerName(b))return this.current_layer!=this.all_layers[b][1]&&(this.current_layer.setAttribute("style","pointer-events:none"),this.current_layer=this.all_layers[b][1],this.current_layer.setAttribute("style","pointer-events:all")),!0;return!1},svgedit.draw.Drawing.prototype.deleteCurrentLayer=function(){if(this.current_layer&&this.getNumLayers()>1){var a=this.current_layer.parentNode,b=(this.current_layer.nextSibling,a.removeChild(this.current_layer));return this.identifyLayers(),b}return null},svgedit.draw.Drawing.prototype.identifyLayers=function(){this.all_layers=[];var c,d=this.svgElem_.childNodes.length,e=[],f=[],g=null,h=!1;for(c=0;d>c;++c){var i=this.svgElem_.childNodes.item(c);if(i&&1==i.nodeType)if("g"==i.tagName){h=!0;var j=$("title",i).text();!j&&svgedit.browser.isOpera()&&i.querySelectorAll&&(j=$(i.querySelectorAll("title")).text()),j?(f.push(j),this.all_layers.push([j,i]),g=i,svgedit.utilities.walkTree(i,function(a){a.setAttribute("style","pointer-events:inherit")}),g.setAttribute("style","pointer-events:none")):e.push(i)}else if(~b.indexOf(i.nodeName)){svgedit.utilities.getBBox(i);e.push(i)}}var k=this.svgElem_.ownerDocument;if(e.length>0||!h){for(c=1;f.indexOf("Layer "+c)>=0;)c++;var l="Layer "+c;g=k.createElementNS(a.SVG,"g");var m=k.createElementNS(a.SVG,"title");m.textContent=l,g.appendChild(m);var n;for(n=0;n<e.length;++n)g.appendChild(e[n]);this.svgElem_.appendChild(g),this.all_layers.push([l,g])}svgedit.utilities.walkTree(g,function(a){a.setAttribute("style","pointer-events:inherit")}),this.current_layer=g,this.current_layer.setAttribute("style","pointer-events:all")},svgedit.draw.Drawing.prototype.createLayer=function(b){var c=this.svgElem_.ownerDocument,d=c.createElementNS(a.SVG,"g"),e=c.createElementNS(a.SVG,"title");return e.textContent=b,d.appendChild(e),this.svgElem_.appendChild(d),this.identifyLayers(),d},svgedit.draw.Drawing.prototype.getLayerVisibility=function(a){var b,c=null;for(b=0;b<this.getNumLayers();++b)if(this.getLayerName(b)==a){c=this.all_layers[b][1];break}return c?"none"!==c.getAttribute("display"):!1},svgedit.draw.Drawing.prototype.setLayerVisibility=function(a,b){if("boolean"!=typeof b)return null;var c,d=null;for(c=0;c<this.getNumLayers();++c)if(this.getLayerName(c)==a){d=this.all_layers[c][1];break}if(!d)return null;var e=d.getAttribute("display");return e||(e="inline"),d.setAttribute("display",b?"inline":"none"),d},svgedit.draw.Drawing.prototype.getLayerOpacity=function(a){var b;for(b=0;b<this.getNumLayers();++b)if(this.getLayerName(b)==a){var c=this.all_layers[b][1],d=c.getAttribute("opacity");return d||(d="1.0"),parseFloat(d)}return null},svgedit.draw.Drawing.prototype.setLayerOpacity=function(a,b){if(!("number"!=typeof b||0>b||b>1)){var c;for(c=0;c<this.getNumLayers();++c)if(this.getLayerName(c)==a){var d=this.all_layers[c][1];d.setAttribute("opacity",b);break}}}}(),function(){"use strict";svgedit.path||(svgedit.path={});var a=svgedit.NS,b={pathNodeTooltip:"Drag node to move it. Double-click node to change segment type",pathCtrlPtTooltip:"Drag control point to adjust curve properties"},c={2:["x","y"],4:["x","y"],6:["x","y","x1","y1","x2","y2"],8:["x","y","x1","y1"],10:["x","y","r1","r2","angle","largeArcFlag","sweepFlag"],12:["x"],14:["y"],16:["x","y","x2","y2"],18:["x","y"]},d=[],e=!0,f={};svgedit.path.setLinkControlPoints=function(a){e=a},svgedit.path.path=null;var g=null;svgedit.path.init=function(a){g=a,d=[0,"ClosePath"];var b=["Moveto","Lineto","CurvetoCubic","CurvetoQuadratic","Arc","LinetoHorizontal","LinetoVertical","CurvetoCubicSmooth","CurvetoQuadraticSmooth"];$.each(b,function(a,b){d.push(b+"Abs"),d.push(b+"Rel")})},svgedit.path.insertItemBefore=function(a,b,c){var d=a.pathSegList;if(svgedit.browser.supportsPathInsertItemBefore())return void d.insertItemBefore(b,c);var e,f=d.numberOfItems,g=[];for(e=0;f>e;e++){var h=d.getItem(e);g.push(h)}for(d.clear(),e=0;f>e;e++)e==c&&d.appendItem(b),d.appendItem(g[e])},svgedit.path.ptObjToArr=function(a,b){var d,e=c[a],f=e.length,g=[];for(d=0;f>d;d++)g[d]=b[e[d]];return g},svgedit.path.getGripPt=function(a,b){var c={x:b?b.x:a.item.x,y:b?b.y:a.item.y},d=a.path;if(d.matrix){var e=svgedit.math.transformPoint(c.x,c.y,d.matrix);c=e}return c.x*=g.getCurrentZoom(),c.y*=g.getCurrentZoom(),c},svgedit.path.getPointFromGrip=function(a,b){var c={x:a.x,y:a.y};return b.matrix&&(a=svgedit.math.transformPoint(c.x,c.y,b.imatrix),c.x=a.x,c.y=a.y),c.x/=g.getCurrentZoom(),c.y/=g.getCurrentZoom(),c},svgedit.path.addPointGrip=function(c,d,e){var f=svgedit.path.getGripContainer(),g=svgedit.utilities.getElem("pathpointgrip_"+c);if(!g){g=document.createElementNS(a.SVG,"circle"),svgedit.utilities.assignAttributes(g,{id:"pathpointgrip_"+c,display:"none",r:4,fill:"#0FF",stroke:"#00F","stroke-width":2,cursor:"move",style:"pointer-events:all","xlink:title":b.pathNodeTooltip}),g=f.appendChild(g);var h=$("#pathpointgrip_"+c);h.dblclick(function(){svgedit.path.path&&svgedit.path.path.setSegType()})}return d&&e&&svgedit.utilities.assignAttributes(g,{cx:d,cy:e,display:"inline"}),g},svgedit.path.getGripContainer=function(){var b=svgedit.utilities.getElem("pathpointgrip_container");if(!b){var c=svgedit.utilities.getElem("selectorParentGroup");b=c.appendChild(document.createElementNS(a.SVG,"g")),b.id="pathpointgrip_container"}return b},svgedit.path.addCtrlGrip=function(c){var d=svgedit.utilities.getElem("ctrlpointgrip_"+c);return d?d:(d=document.createElementNS(a.SVG,"circle"),svgedit.utilities.assignAttributes(d,{id:"ctrlpointgrip_"+c,display:"none",r:4,fill:"#0FF",stroke:"#55F","stroke-width":1,cursor:"move",style:"pointer-events:all","xlink:title":b.pathCtrlPtTooltip}),svgedit.path.getGripContainer().appendChild(d),d)},svgedit.path.getCtrlLine=function(b){var c=svgedit.utilities.getElem("ctrlLine_"+b);return c?c:(c=document.createElementNS(a.SVG,"line"),svgedit.utilities.assignAttributes(c,{id:"ctrlLine_"+b,stroke:"#555","stroke-width":1,style:"pointer-events:none"}),svgedit.path.getGripContainer().appendChild(c),c)},svgedit.path.getPointGrip=function(a,b){var c=a.index,d=svgedit.path.addPointGrip(c);if(b){var e=svgedit.path.getGripPt(a);svgedit.utilities.assignAttributes(d,{cx:e.x,cy:e.y,display:"inline"})}return d},svgedit.path.getControlPoints=function(a){var b=a.item,c=a.index;if(!("x1"in b&&"x2"in b))return null;var d,e={},f=(svgedit.path.getGripContainer(),svgedit.path.path.segs[c-1].item),g=[f,b];for(d=1;3>d;d++){var h=c+"c"+d,i=e["c"+d+"_line"]=svgedit.path.getCtrlLine(h),j=svgedit.path.getGripPt(a,{x:b["x"+d],y:b["y"+d]}),k=svgedit.path.getGripPt(a,{x:g[d-1].x,y:g[d-1].y});svgedit.utilities.assignAttributes(i,{x1:j.x,y1:j.y,x2:k.x,y2:k.y,display:"inline"}),e["c"+d+"_line"]=i;var l=e["c"+d]=svgedit.path.addCtrlGrip(h);svgedit.utilities.assignAttributes(l,{cx:j.x,cy:j.y,display:"inline"}),e["c"+d]=l}return e},svgedit.path.replacePathSeg=function(a,b,c,e){var f=e||svgedit.path.path.elem,g="createSVGPathSeg"+d[a],h=f[g].apply(f,c);if(svgedit.browser.supportsPathReplaceItem())f.pathSegList.replaceItem(h,b);else{var i,j=f.pathSegList,k=j.numberOfItems,l=[];for(i=0;k>i;i++){var m=j.getItem(i);l.push(m)}for(j.clear(),i=0;k>i;i++)i==b?j.appendItem(h):j.appendItem(l[i])}},svgedit.path.getSegSelector=function(b,c){var d=b.index,e=svgedit.utilities.getElem("segline_"+d);if(!e){var f=svgedit.path.getGripContainer();e=document.createElementNS(a.SVG,"path"),svgedit.utilities.assignAttributes(e,{id:"segline_"+d,display:"none",fill:"none",stroke:"#0FF","stroke-width":2,style:"pointer-events:none",d:"M0,0 0,0"}),f.appendChild(e)}if(c){var g=b.prev;if(!g)return e.setAttribute("display","none"),e;var h=svgedit.path.getGripPt(g);svgedit.path.replacePathSeg(2,0,[h.x,h.y],e);var i,j=svgedit.path.ptObjToArr(b.type,b.item,!0);for(i=0;i<j.length;i+=2)h=svgedit.path.getGripPt(b,{x:j[i],y:j[i+1]}),j[i]=h.x,j[i+1]=h.y;svgedit.path.replacePathSeg(b.type,1,j,e)}return e},svgedit.path.smoothControlPoints=function(a,b,c){var d=a.x-c.x,e=a.y-c.y,f=b.x-c.x,h=b.y-c.y;if(!(0==d&&0==e||0==f&&0==h)){var i=Math.atan2(e,d),j=Math.atan2(h,f),k=Math.sqrt(d*d+e*e),l=Math.sqrt(f*f+h*h),m=g.getSVGRoot().createSVGPoint(),n=g.getSVGRoot().createSVGPoint();0>i&&(i+=2*Math.PI),0>j&&(j+=2*Math.PI);var o,p,q=Math.abs(i-j),r=Math.abs(Math.PI-q)/2;return i-j>0?(o=q<Math.PI?i+r:i-r,p=q<Math.PI?j-r:j+r):(o=q<Math.PI?i-r:i+r,p=q<Math.PI?j+r:j-r),m.x=k*Math.cos(o)+c.x,m.y=k*Math.sin(o)+c.y,n.x=l*Math.cos(p)+c.x,n.y=l*Math.sin(p)+c.y,[m,n]}},svgedit.path.Segment=function(a,b){this.selected=!1,this.index=a,this.item=b,this.type=b.pathSegType,this.ctrlpts=[],this.ptgrip=null,this.segsel=null},svgedit.path.Segment.prototype.showCtrlPts=function(a){var b;for(b in this.ctrlpts)this.ctrlpts.hasOwnProperty(b)&&this.ctrlpts[b].setAttribute("display",a?"inline":"none")},svgedit.path.Segment.prototype.selectCtrls=function(a){$("#ctrlpointgrip_"+this.index+"c1, #ctrlpointgrip_"+this.index+"c2").attr("fill",a?"#0FF":"#EEE")},svgedit.path.Segment.prototype.show=function(a){this.ptgrip&&(this.ptgrip.setAttribute("display",a?"inline":"none"),this.segsel.setAttribute("display",a?"inline":"none"),this.showCtrlPts(a))},svgedit.path.Segment.prototype.select=function(a){this.ptgrip&&(this.ptgrip.setAttribute("stroke",a?"#0FF":"#00F"),this.segsel.setAttribute("display",a?"inline":"none"),this.ctrlpts&&this.selectCtrls(a),this.selected=a)},svgedit.path.Segment.prototype.addGrip=function(){this.ptgrip=svgedit.path.getPointGrip(this,!0),this.ctrlpts=svgedit.path.getControlPoints(this,!0),this.segsel=svgedit.path.getSegSelector(this,!0)},svgedit.path.Segment.prototype.update=function(a){if(this.ptgrip){var b=svgedit.path.getGripPt(this);svgedit.utilities.assignAttributes(this.ptgrip,{cx:b.x,cy:b.y}),svgedit.path.getSegSelector(this,!0),this.ctrlpts&&(a&&(this.item=svgedit.path.path.elem.pathSegList.getItem(this.index),this.type=this.item.pathSegType),svgedit.path.getControlPoints(this))}},svgedit.path.Segment.prototype.move=function(a,b){var c,d=this.item;if(c=this.ctrlpts?[d.x+=a,d.y+=b,d.x1,d.y1,d.x2+=a,d.y2+=b]:[d.x+=a,d.y+=b],svgedit.path.replacePathSeg(this.type,this.index,c),this.next&&this.next.ctrlpts){var e=this.next.item,f=[e.x,e.y,e.x1+=a,e.y1+=b,e.x2,e.y2];svgedit.path.replacePathSeg(this.next.type,this.next.index,f)}if(this.mate){d=this.mate.item;var g=[d.x+=a,d.y+=b];svgedit.path.replacePathSeg(this.mate.type,this.mate.index,g)}this.update(!0),this.next&&this.next.update(!0)},svgedit.path.Segment.prototype.setLinked=function(a){var b,c,d;if(2==a){if(c=1,b=this.next,!b)return;d=this.item}else{if(c=2,b=this.prev,!b)return;d=b.item}var e=b.item;e["x"+c]=d.x+(d.x-this.item["x"+a]),e["y"+c]=d.y+(d.y-this.item["y"+a]);var f=[e.x,e.y,e.x1,e.y1,e.x2,e.y2];svgedit.path.replacePathSeg(b.type,b.index,f),b.update(!0)},svgedit.path.Segment.prototype.moveCtrl=function(a,b,c){var d=this.item;d["x"+a]+=b,d["y"+a]+=c;var e=[d.x,d.y,d.x1,d.y1,d.x2,d.y2];svgedit.path.replacePathSeg(this.type,this.index,e),this.update(!0)},svgedit.path.Segment.prototype.setType=function(a,b){svgedit.path.replacePathSeg(a,this.index,b),this.type=a,this.item=svgedit.path.path.elem.pathSegList.getItem(this.index),this.showCtrlPts(6===a),this.ctrlpts=svgedit.path.getControlPoints(this),this.update(!0)},svgedit.path.Path=function(a){if(!a||"path"!==a.tagName)throw"svgedit.path.Path constructed without a <path> element";this.elem=a,this.segs=[],this.selected_pts=[],svgedit.path.path=this,this.init()},svgedit.path.Path.prototype.init=function(){$(svgedit.path.getGripContainer()).find("*").attr("display","none");var a=this.elem.pathSegList,b=a.numberOfItems;this.segs=[],this.selected_pts=[],this.first_seg=null;var c;for(c=0;b>c;c++){var d=a.getItem(c),e=new svgedit.path.Segment(c,d);e.path=this,this.segs.push(e)}var f=this.segs,g=null;for(c=0;b>c;c++){var h,i=f[c],j=c+1>=b?null:f[c+1],k=0>c-1?null:f[c-1];2===i.type?(k&&1!==k.type&&(h=f[g],h.next=f[g+1],h.next.prev=h,h.addGrip()),g=c):j&&1===j.type?(i.next=f[g+1],i.next.prev=i,i.mate=f[g],i.addGrip(),null==this.first_seg&&(this.first_seg=i)):j?1!==i.type&&(i.addGrip(),j&&2!==j.type&&(i.next=j,i.next.prev=i)):1!==i.type&&(h=f[g],h.next=f[g+1],h.next.prev=h,h.addGrip(),i.addGrip(),this.first_seg||(this.first_seg=f[g]))}return this},svgedit.path.Path.prototype.eachSeg=function(a){var b,c=this.segs.length;for(b=0;c>b;b++){var d=a.call(this.segs[b],b);if(d===!1)break}},svgedit.path.Path.prototype.addSeg=function(a){var b=this.segs[a];if(b.prev){var c,d,e,f=b.prev;switch(b.item.pathSegType){case 4:d=(b.item.x+f.item.x)/2,e=(b.item.y+f.item.y)/2,c=this.elem.createSVGPathSegLinetoAbs(d,e);break;case 6:var g=(f.item.x+b.item.x1)/2,h=(b.item.x1+b.item.x2)/2,i=(b.item.x2+b.item.x)/2,j=(g+h)/2,k=(h+i)/2;d=(j+k)/2;var l=(f.item.y+b.item.y1)/2,m=(b.item.y1+b.item.y2)/2,n=(b.item.y2+b.item.y)/2,o=(l+m)/2,p=(m+n)/2;e=(o+p)/2,c=this.elem.createSVGPathSegCurvetoCubicAbs(d,e,g,l,j,o);var q=[b.item.x,b.item.y,k,p,i,n];svgedit.path.replacePathSeg(b.type,a,q)}svgedit.path.insertItemBefore(this.elem,c,a)}},svgedit.path.Path.prototype.deleteSeg=function(a){var b=this.segs[a],c=this.elem.pathSegList;b.show(!1);var d,e=b.next;if(b.mate)d=[e.item.x,e.item.y],svgedit.path.replacePathSeg(2,e.index,d),svgedit.path.replacePathSeg(4,b.index,d),c.removeItem(b.mate.index);else if(b.prev)c.removeItem(a);else{b.item;d=[e.item.x,e.item.y],svgedit.path.replacePathSeg(2,b.next.index,d),c.removeItem(a)}},svgedit.path.Path.prototype.subpathIsClosed=function(a){var b=!1;return svgedit.path.path.eachSeg(function(c){return a>=c?!0:2===this.type?!1:1===this.type?(b=!0,!1):void 0}),b},svgedit.path.Path.prototype.removePtFromSelection=function(a){var b=this.selected_pts.indexOf(a);-1!=b&&(this.segs[a].select(!1),this.selected_pts.splice(b,1))},svgedit.path.Path.prototype.clearSelection=function(){this.eachSeg(function(){this.select(!1)}),this.selected_pts=[]},svgedit.path.Path.prototype.storeD=function(){this.last_d=this.elem.getAttribute("d")},svgedit.path.Path.prototype.show=function(a){return this.eachSeg(function(){this.show(a)}),a&&this.selectPt(this.first_seg.index),this},svgedit.path.Path.prototype.movePts=function(a,b){for(var c=this.selected_pts.length;c--;){var d=this.segs[this.selected_pts[c]];d.move(a,b)}},svgedit.path.Path.prototype.moveCtrl=function(a,b){var c=this.segs[this.selected_pts[0]];c.moveCtrl(this.dragctrl,a,b),e&&c.setLinked(this.dragctrl)},svgedit.path.Path.prototype.setSegType=function(a){this.storeD();for(var b,c=this.selected_pts.length;c--;){var d=this.selected_pts[c],e=this.segs[d],f=e.prev;if(f){if(!a){b="Toggle Path Segment Type";var g=e.type;a=6==g?4:6}a=Number(a);var h,i=e.item.x,j=e.item.y,k=f.item.x,l=f.item.y;switch(a){case 6:if(e.olditem){var m=e.olditem;h=[i,j,m.x1,m.y1,m.x2,m.y2]}else{var n=i-k,o=j-l,p=k+n/3,q=l+o/3,r=i-n/3,s=j-o/3;h=[i,j,p,q,r,s]}break;case 4:h=[i,j],e.olditem=e.item}e.setType(a,h)}}svgedit.path.path.endChanges(b)},svgedit.path.Path.prototype.selectPt=function(a,b){this.clearSelection(),null==a&&this.eachSeg(function(b){this.prev&&(a=b)}),this.addPtsToSelection(a),b&&(this.dragctrl=b,e&&this.segs[a].setLinked(b))},svgedit.path.Path.prototype.update=function(){var a=this.elem;return svgedit.utilities.getRotationAngle(a)?(this.matrix=svgedit.math.getMatrix(a),this.imatrix=this.matrix.inverse()):(this.matrix=null,this.imatrix=null),this.eachSeg(function(b){this.item=a.pathSegList.getItem(b),this.update()}),this},svgedit.path.getPath_=function(a){var b=f[a.id];return b||(b=f[a.id]=new svgedit.path.Path(a)),b},svgedit.path.removePath_=function(a){a in f&&delete f[a]};var h,i,j,k,l,m=function(a,b){var c=a-j,d=b-k,e=Math.sqrt(c*c+d*d),f=Math.atan2(d,c)+l;return c=e*Math.cos(f)+j,d=e*Math.sin(f)+k,c-=h,d-=i,e=Math.sqrt(c*c+d*d),f=Math.atan2(d,c)-l,{x:e*Math.cos(f)+h,y:e*Math.sin(f)+i}};svgedit.path.recalcRotatedPath=function(){var a=svgedit.path.path.elem;if(l=svgedit.utilities.getRotationAngle(a,!0)){var b=svgedit.utilities.getBBox(a),c=svgedit.path.path.oldbbox;j=c.x+c.width/2,k=c.y+c.height/2,h=b.x+b.width/2,i=b.y+b.height/2;var d=h-j,e=i-k,f=Math.sqrt(d*d+e*e),g=Math.atan2(e,d)+l;h=f*Math.cos(g)+j,i=f*Math.sin(g)+k;for(var n=a.pathSegList,o=n.numberOfItems;o;){o-=1;var p=n.getItem(o),q=p.pathSegType;if(1!=q){var r=m(p.x,p.y),s=[r.x,r.y];if(null!=p.x1&&null!=p.x2){var t=m(p.x1,p.y1),u=m(p.x2,p.y2);s.splice(s.length,0,t.x,t.y,u.x,u.y)}svgedit.path.replacePathSeg(q,o,s)}}b=svgedit.utilities.getBBox(a);var v=svgroot.createSVGTransform(),w=svgedit.transformlist.getTransformList(a);v.setRotate(180*l/Math.PI,h,i),w.replaceItem(v,0)}},svgedit.path.clearData=function(){f={}}}(),function(){window.console||(window.console={},window.console.log=function(a){},window.console.dir=function(a){}),window.opera&&(window.console.log=function(a){opera.postError(a)},window.console.dir=function(a){})}(),$.SvgCanvas=function(a,b){function c(a,b){var c,d=svgedit.utilities.getBBox(a);for(c=0;2>c;c++){var e=0===c?"fill":"stroke",f=a.getAttribute(e);if(f&&0===f.indexOf("url(")){var g=svgedit.utilities.getRefElem(f);if("linearGradient"===g.tagName){var h=g.getAttribute("x1")||0,i=g.getAttribute("y1")||0,j=g.getAttribute("x2")||1,k=g.getAttribute("y2")||0;h=d.width*h+d.x,i=d.height*i+d.y,j=d.width*j+d.x,k=d.height*k+d.y;var l=svgedit.math.transformPoint(h,i,b),m=svgedit.math.transformPoint(j,k,b),n={};n.x1=(l.x-d.x)/d.width,n.y1=(l.y-d.y)/d.height,n.x2=(m.x-d.x)/d.width,n.y2=(m.y-d.y)/d.height;var o=g.cloneNode(!0);$(o).attr(n),o.id=ua(),svgedit.utilities.findDefs().appendChild(o),a.setAttribute(e,"url(#"+o.id+")")}}}}var d=!1,e=svgedit.NS,f={show_outside_canvas:!0,selectNew:!0,dimensions:[640,480]};b&&$.extend(f,b);var g=f.dimensions,h=this,i=a.ownerDocument,j=i.importNode(svgedit.utilities.text2xml('<svg id="svgroot" xmlns="'+e.SVG+'" xlinkns="'+e.XLINK+'" width="'+g[0]+'" height="'+g[1]+'" x="'+g[0]+'" y="'+g[1]+'" overflow="visible"><defs><filter id="canvashadow" filterUnits="objectBoundingBox"><feGaussianBlur in="SourceAlpha" stdDeviation="4" result="blur"/><feOffset in="blur" dx="5" dy="5" result="offsetBlur"/><feMerge><feMergeNode in="offsetBlur"/><feMergeNode in="SourceGraphic"/></feMerge></filter></defs></svg>').documentElement,!0);a.appendChild(j);var k=i.createElementNS(e.SVG,"svg"),m=h.clearSvgContentElement=function(){for(;k.firstChild;)k.removeChild(k.firstChild);$(k).attr({id:"svgcontent",width:g[0],height:g[1],x:g[0],y:g[1],overflow:f.show_outside_canvas?"visible":"hidden",xmlns:e.SVG,"xmlns:se":e.SE,"xmlns:xlink":e.XLINK}).appendTo(j);var a=i.createComment(" Created with OnlineFreeLogo.com - https://www.onlinefreelogo.com/ ");k.appendChild(a)};m();var n="svg_";h.setIdPrefix=function(a){n=a},h.current_drawing_=new svgedit.draw.Drawing(k,n);var o=h.getCurrentDrawing=function(){return h.current_drawing_},p=1,q=null,r={shape:{fill:("none"==f.initFill.color?"":"#")+f.initFill.color,fill_paint:null,fill_opacity:f.initFill.opacity,stroke:"#"+f.initStroke.color,stroke_paint:null,stroke_opacity:f.initStroke.opacity,stroke_width:f.initStroke.width,stroke_dasharray:"none",stroke_linejoin:"miter",stroke_linecap:"butt",opacity:f.initOpacity}};r.text=$.extend(!0,{},r.shape),$.extend(r.text,{fill:"#000000",stroke_width:0,font_size:24,font_family:"serif"});var s=r.shape,t=new Array(1),u=this.addSvgElementFromJson=function(a){var b=svgedit.utilities.getElem(a.attr.id),c=o().getCurrentLayer();return b&&a.element!=b.tagName&&(c.removeChild(b),b=null),b||(b=i.createElementNS(e.SVG,a.element),c&&(q||c).appendChild(b)),a.curStyles&&svgedit.utilities.assignAttributes(b,{fill:s.fill,stroke:s.stroke,"stroke-width":s.stroke_width,"stroke-dasharray":s.stroke_dasharray,"stroke-linejoin":s.stroke_linejoin,"stroke-linecap":s.stroke_linecap,"stroke-opacity":s.stroke_opacity,"fill-opacity":s.fill_opacity,opacity:s.opacity/2,style:"pointer-events:inherit"},100),svgedit.utilities.assignAttributes(b,a.attr,100),svgedit.utilities.cleanupElement(b),b},v=(h.getTransformList=svgedit.transformlist.getTransformList,svgedit.math.transformPoint),w=h.matrixMultiply=svgedit.math.matrixMultiply,z=h.hasMatrixTransform=svgedit.math.hasMatrixTransform,A=h.transformListToTransform=svgedit.math.transformListToTransform;svgedit.math.snapToAngle,svgedit.math.getMatrix;svgedit.units.init({getBaseUnit:function(){return f.baseUnit},getElement:svgedit.utilities.getElem,getHeight:function(){return k.getAttribute("height")/p},getWidth:function(){return k.getAttribute("width")/p},getRoundDigits:function(){return ca.round_digits}});h.convertToNum=svgedit.units.convertToNum;svgedit.utilities.init({getDOMDocument:function(){return i},getDOMContainer:function(){return a},getSVGRoot:function(){return j},getSelectedElements:function(){return t},getSVGContent:function(){return k},getBaseUnit:function(){return f.baseUnit},getStepSize:function(){return f.stepSize}});var B=h.findDefs=svgedit.utilities.findDefs,C=h.getUrlFromAttr=svgedit.utilities.getUrlFromAttr,D=h.getHref=svgedit.utilities.getHref,E=h.setHref=svgedit.utilities.setHref,F=svgedit.utilities.getPathBBox,G=(h.getBBox=svgedit.utilities.getBBox,h.getRotationAngle=svgedit.utilities.getRotationAngle,h.getElem=svgedit.utilities.getElem),H=(h.getRefElem=svgedit.utilities.getRefElem,h.assignAttributes=svgedit.utilities.assignAttributes),I=this.cleanupElement=svgedit.utilities.cleanupElement;svgedit.coords.init({getDrawing:function(){return o()},getGridSnapping:function(){return f.gridSnapping}});var J=this.remapElement=svgedit.coords.remapElement;svgedit.recalculate.init({
getSVGRoot:function(){return j},getStartTransform:function(){return ea},setStartTransform:function(a){ea=a}});var K=this.recalculateDimensions=svgedit.recalculate.recalculateDimensions,L=svgedit.getReverseNS(),M=h.sanitizeSvg=svgedit.sanitize.sanitizeSvg,N=svgedit.history.MoveElementCommand,O=svgedit.history.InsertElementCommand,P=svgedit.history.RemoveElementCommand,Q=svgedit.history.ChangeElementCommand,R=svgedit.history.BatchCommand;h.undoMgr=new svgedit.history.UndoManager({handleHistoryEvent:function(a,b){var c=svgedit.history.HistoryEventTypes;if(a==c.BEFORE_UNAPPLY||a==c.BEFORE_APPLY)h.clearSelection();else if(a==c.AFTER_APPLY||a==c.AFTER_UNAPPLY){var d=b.elements();h.pathActions.clear(),va("changed",d);var e=b.type(),f=a==c.AFTER_APPLY;if(e==N.type()){var g=f?b.newParent:b.oldParent;g==k&&h.identifyLayers()}else if(e==O.type()||e==P.type())b.parent==k&&h.identifyLayers(),e==O.type()?f&&Z(b.elem):f||Z(b.elem),"use"===b.elem.tagName&&Oa(b.elem);else if(e==Q.type()){"title"==b.elem.tagName&&b.elem.parentNode.parentNode==k&&h.identifyLayers();var i=f?b.newValues:b.oldValues;i.stdDeviation&&h.setBlurOffsets(b.elem.parentNode,i.stdDeviation)}}}});var S=this.addCommandToHistory=function(a){h.undoMgr.addCommandToHistory(a)};svgedit.select.init(f,{createSVGElement:function(a){return h.addSvgElementFromJson(a)},svgRoot:function(){return j},svgContent:function(){return k},currentZoom:function(){return p},getStrokedBBox:function(a){return h.getStrokedBBox([a])}});var T=this.selectorManager=svgedit.select.getSelectorManager();svgedit.path.init({getCurrentZoom:function(){return p},getSVGRoot:function(){return j}});var U={exportNoBlur:"Blurred elements will appear as un-blurred",exportNoforeignObject:"foreignObject elements will not appear",exportNoDashArray:"Strokes will appear filled",exportNoText:"Text may not appear as expected"},V="a,circle,ellipse,foreignObject,g,image,line,path,polygon,polyline,rect,svg,text,tspan,use",W=["clip-path","fill","filter","marker-end","marker-mid","marker-start","mask","stroke"],X=$.data,Y=document.createElementNS(e.SVG,"animate");$(Y).attr({attributeName:"opacity",begin:"indefinite",dur:1,fill:"freeze"}).appendTo(j);var Z=function(a){var b,c,d=$(a).attr(W);for(b in d){var e=d[b];if(e&&0===e.indexOf("url(")){var f=svgedit.utilities.getUrlFromAttr(e).substr(1),g=G(f);g||(svgedit.utilities.findDefs().appendChild(pa[f]),delete pa[f])}}var h=a.getElementsByTagName("*");if(h.length)for(c=0,l=h.length;c<l;c++)Z(h[c])},_={},aa=f.imgPath+"logo.png",ba=[],ca={round_digits:5},da=!1,ea=null,fa="select",ga="none",ha={},ia=r.text,ja=s,ka=null,la=null,ma=[],na={},oa=null,pa={};h.clipBoard=[];var qa=this.runExtensions=function(a,b,c){var d=c?[]:!1;return $.each(na,function(e,f){f&&a in f&&(c?d.push(f[a](b)):d=f[a](b))}),d};this.addExtension=function(a,b){var c;a in na?console.log('Cannot add extension "'+a+'", an extension by that name already exists"'):(c=$.isFunction(b)?b($.extend(h.getPrivateMethods(),{svgroot:j,svgcontent:k,nonce:o().getNonce(),selectorManager:T})):b,na[a]=c,va("extension_added",c))};var ra=this.round=function(a){return parseInt(a*p,10)/p},sa=this.getIntersectionList=function(a){if(null==la)return null;var b=q||o().getCurrentLayer();ma.length||(ma=za(b));var c=null;try{c=b.getIntersectionList(a,null)}catch(d){}if(null==c||"function"!=typeof c.item){c=[];var e;if(a)e=a;else{e=la.getBBox();var f,g={};for(f in e)g[f]=e[f]/p;e=g}for(var h=ma.length;h--;)e.width&&svgedit.math.rectsIntersect(e,ma[h].bbox)&&c.push(ma[h].elem)}return c};getStrokedBBox=this.getStrokedBBox=function(a){if(a||(a=ya()),!a.length)return!1;var b,c=function(a){try{var b=svgedit.utilities.getBBox(a),c=svgedit.utilities.getRotationAngle(a);if(c&&c%90||svgedit.math.hasMatrixTransform(svgedit.transformlist.getTransformList(a))){var d=!1,f=["ellipse","path","line","polyline","polygon"];if(f.indexOf(a.tagName)>=0)b=d=h.convertToPath(a,!0);else if("rect"==a.tagName){var g=a.getAttribute("rx"),i=a.getAttribute("ry");(g||i)&&(b=d=h.convertToPath(a,!0))}if(!d){var j=a.cloneNode(!0),k=document.createElementNS(e.SVG,"g"),l=a.parentNode;l.appendChild(k),k.appendChild(j),b=svgedit.utilities.bboxToObj(k.getBBox()),l.removeChild(k)}}return b}catch(m){return console.log(a,m),null}};if($.each(a,function(){b||this.parentNode&&(b=c(this))}),null==b)return null;var d=b.x+b.width,f=b.y+b.height,g=b.x,i=b.y,j=function(a){var b=a.getAttribute("stroke-width"),c=0;return"none"==a.getAttribute("stroke")||isNaN(b)||(c+=b/2),c},k=[];return $.each(a,function(a,b){var d=c(b);if(d){var e=j(b);g=Math.min(g,d.x-e),i=Math.min(i,d.y-e),k.push(d)}}),b.x=g,b.y=i,$.each(a,function(a,b){var c=k[a];if(c&&1==b.nodeType){var e=j(b);d=Math.max(d,c.x+c.width+e),f=Math.max(f,c.y+c.height+e)}}),b.width=d-g,b.height=f-i,b};var ta,ua,va,wa,xa,ya=this.getVisibleElements=function(a){a||(a=$(k).children());var b=[];return $(a).children().each(function(a,c){try{c.getBBox()&&b.push(c)}catch(d){}}),b.reverse()},za=this.getVisibleElementsAndBBoxes=function(a){a||(a=$(k).children());var b=[];return $(a).children().each(function(a,c){try{c.getBBox()&&b.push({elem:c,bbox:getStrokedBBox([c])})}catch(d){}}),b.reverse()},Aa=this.groupSvgElem=function(a){var b=document.createElementNS(e.SVG,"g");a.parentNode.replaceChild(b,a),$(b).append(a).data("gsvg",a)[0].id=ua()},Ba=function(a){var b=document.createElementNS(a.namespaceURI,a.nodeName);if($.each(a.attributes,function(a,c){"-moz-math-font-style"!=c.localName&&b.setAttributeNS(c.namespaceURI,c.nodeName,c.nodeValue)}),b.removeAttribute("id"),b.id=ua(),svgedit.browser.isWebkit()&&"path"==a.nodeName){var c=xa.convertPath(a);b.setAttribute("d",c)}if($.each(a.childNodes,function(a,c){switch(c.nodeType){case 1:b.appendChild(Ba(c));break;case 3:b.textContent=c.nodeValue}}),$(a).data("gsvg"))$(b).data("gsvg",b.firstChild);else if($(a).data("symbol")){var d=$(a).data("symbol");$(b).data("ref",d).data("symbol",d)}else"image"==b.tagName&&La(b);return b};!function(a){var b={};ta=a.getId=function(){return o().getId()},ua=a.getNextId=function(){return o().getNextId()},va=a.call=function(a,c){return b[a]?b[a](this,c):void 0},a.bind=function(a,c){var d=b[a];return b[a]=c,d}}(h),this.prepareSvg=function(a){this.sanitizeSvg(a.documentElement);var b,c,d,f=a.getElementsByTagNameNS(e.SVG,"path");for(b=0,d=f.length;d>b;++b)c=f[b],c.setAttribute("d",xa.convertPath(c)),xa.fixEnd(c)};var Ca=function(a){if(!svgedit.browser.isGecko())return a;var b=a.cloneNode(!0);return a.parentNode.insertBefore(b,a),a.parentNode.removeChild(a),T.releaseSelector(a),t[0]=b,T.requestSelector(b).showGrips(!0),b};this.setRotationAngle=function(a,b){a=parseFloat(a);var c=t[0],d=c.getAttribute("transform"),e=svgedit.utilities.getBBox(c),f=e.x+e.width/2,g=e.y+e.height/2,h=svgedit.transformlist.getTransformList(c);if(h.numberOfItems>0){var i=h.getItem(0);4==i.type&&h.removeItem(0)}if(0!=a){var k=svgedit.math.transformPoint(f,g,svgedit.math.transformListToTransform(h).matrix),l=j.createSVGTransform();l.setRotate(a,k.x,k.y),h.numberOfItems?h.insertItemBefore(l,0):h.appendItem(l)}else 0==h.numberOfItems&&c.removeAttribute("transform");if(!b){var m=c.getAttribute("transform");c.setAttribute("transform",d),Ya("transform",m,t),va("changed",t)}var n=(svgedit.utilities.getElem("pathpointgrip_container"),T.requestSelector(t[0]));n.resize(),n.updateGripCursors(a)};var Da=this.recalculateAllSelectedDimensions=function(){for(var a="none"==ga?"position":"size",b=new svgedit.history.BatchCommand(a),c=t.length;c--;){var d=t[c],e=svgedit.recalculate.recalculateDimensions(d);e&&b.addSubCommand(e)}b.isEmpty()||(S(b),va("changed",t))},Ea=[0,"z","M","m","L","l","C","c","Q","q","A","a","H","h","V","v","S","s","T","t"],Fa=function(a){console.log([a.a,a.b,a.c,a.d,a.e,a.f])},Ga=null,Ha=this.clearSelection=function(a){if(null!=t[0]){var b,c,d=t.length;for(b=0;d>b&&(c=t[b],null!=c);++b)T.releaseSelector(c),t[b]=null}a||va("selected",t)},Ia=this.addToSelection=function(a,b){if(0!=a.length){for(var c=0;c<t.length&&null!=t[c];)++c;for(var d=a.length;d--;){var e=a[d];if(e&&svgedit.utilities.getBBox(e)&&("a"===e.tagName&&1===e.childNodes.length&&(e=e.firstChild),-1==t.indexOf(e))){t[c]=e,c++;var f=T.requestSelector(e);t.length>1&&f.showGrips(!1)}}for(va("selected",t),b||1==t.length?"text"==t[0].tagName?T.requestSelector(t[0]).showGrips(!1,!0):T.requestSelector(t[0]).showGrips(!0):T.requestSelector(t[0]).showGrips(!1),t.sort(function(a,b){return a&&b&&a.compareDocumentPosition?3-(6&b.compareDocumentPosition(a)):null==a?1:void 0});null==t[0];)t.shift(0)}},Ja=this.selectOnly=function(a,b){Ha(!0),Ia(a,b)};this.removeFromSelection=function(a){if(null!=t[0]&&0!=a.length){var b,c=0,d=new Array(t.length),e=t.length;for(b=0;e>b;++b){var f=t[b];f&&(-1==a.indexOf(f)?(d[c]=f,c++):T.releaseSelector(f))}t=d}};this.selectAllInCurrentLayer=function(){var a=o().getCurrentLayer();a&&(fa="select",Ja($(q||a).children()))};var Ka=this.getMouseTarget=function(b){if(null==b)return null;var c=b.target;if(c.correspondingUseElement&&(c=c.correspondingUseElement),[e.MATH,e.HTML].indexOf(c.namespaceURI)>=0&&"svgcanvas"!=c.id)for(;"foreignObject"!=c.nodeName;)if(c=c.parentNode,!c)return j;var d=o().getCurrentLayer();if([j,a,k,d].indexOf(c)>=0)return j;var f=$(c);if(f.closest("#selectorParentGroup").length)return T.selectorParentGroup;for(;c.parentNode!==(q||d);)c=c.parentNode;return c};!function(){var b,c,e=null,g=null,i=null,k=null,l=null,m={},n={minx:null,miny:null,maxx:null,maxy:null},r=0,v={x:0,y:0},w={x:0,y:0},z={x:0,y:0},A={x:0,y:0},B={x:0,y:0},C={x:0,y:0},D=.8,F=10,G=function(a){var b={x:0,y:0},c=v,d=w,e=z,f=A,g=1/6,h=a*a,i=h*a,j=[[-1,3,-3,1],[3,-6,3,0],[-3,0,3,0],[1,4,1,0]];return b.x=g*((c.x*j[0][0]+d.x*j[0][1]+e.x*j[0][2]+f.x*j[0][3])*i+(c.x*j[1][0]+d.x*j[1][1]+e.x*j[1][2]+f.x*j[1][3])*h+(c.x*j[2][0]+d.x*j[2][1]+e.x*j[2][2]+f.x*j[2][3])*a+(c.x*j[3][0]+d.x*j[3][1]+e.x*j[3][2]+f.x*j[3][3])),b.y=g*((c.y*j[0][0]+d.y*j[0][1]+e.y*j[0][2]+f.y*j[0][3])*i+(c.y*j[1][0]+d.y*j[1][1]+e.y*j[1][2]+f.y*j[1][3])*h+(c.y*j[2][0]+d.y*j[2][1]+e.y*j[2][2]+f.y*j[2][3])*a+(c.y*j[3][0]+d.y*j[3][1]+e.y*j[3][2]+f.y*j[3][3])),{x:b.x,y:b.y}},H=function(a){if(!h.spaceKey&&1!==a.button){var b=2===a.button;a.altKey&&svgCanvas.cloneSelectedElements(0,0),Ga=$("#svgcontent g")[0].getScreenCTM().inverse();var c=svgedit.math.transformPoint(a.pageX,a.pageY,Ga),d=c.x*p,o=c.y*p;a.preventDefault(),b&&(fa="select",oa=c);var q=d/p,r=o/p,v=Ka(a);"a"===v.tagName&&1===v.childNodes.length&&(v=v.firstChild);var w=q;k=g=q;var x=r;if(l=i=r,f.gridSnapping&&(q=svgedit.utilities.snapToGrid(q),r=svgedit.utilities.snapToGrid(r),g=svgedit.utilities.snapToGrid(g),i=svgedit.utilities.snapToGrid(i)),v==T.selectorParentGroup&&null!=t[0]){var y=a.target,A=X(y,"type");"rotate"==A?fa="rotate":"resize"==A&&(fa="resize",ga=X(y,"dir")),v=t[0]}ea=v.getAttribute("transform");var B,C,D=svgedit.transformlist.getTransformList(v);switch(fa){case"select":if(da=!0,ga="none",b&&(da=!1),v!=j){if(-1==t.indexOf(v)&&(a.shiftKey||Ha(!0),Ia([v]),ka=v,xa.clear()),!b)for(B=0;B<t.length;++B)if(null!=t[B]){var F=svgedit.transformlist.getTransformList(t[B]);F.numberOfItems?F.insertItemBefore(j.createSVGTransform(),0):F.appendItem(j.createSVGTransform())}}else b||(Ha(),fa="multiselect",null==la&&(la=T.getRubberBandBox()),k*=p,l*=p,svgedit.utilities.assignAttributes(la,{x:k,y:l,width:0,height:0,display:"inline"},100));break;case"zoom":da=!0,null==la&&(la=T.getRubberBandBox()),svgedit.utilities.assignAttributes(la,{x:w*p,y:w*p,width:0,height:0,display:"inline"},100);break;case"resize":da=!0,g=q,i=r,m=svgedit.utilities.getBBox($("#selectedBox0")[0]);var G={};$.each(m,function(a,b){G[a]=b/p}),m=G;var H=svgedit.utilities.getRotationAngle(v)?1:0;if(svgedit.math.hasMatrixTransform(D))D.insertItemBefore(j.createSVGTransform(),H),D.insertItemBefore(j.createSVGTransform(),H),D.insertItemBefore(j.createSVGTransform(),H);else if(D.appendItem(j.createSVGTransform()),D.appendItem(j.createSVGTransform()),D.appendItem(j.createSVGTransform()),svgedit.browser.supportsNonScalingStroke()){var I=svgedit.browser.isWebkit();if(I)var J=function(a){var b=a.getAttributeNS(null,"stroke");a.removeAttributeNS(null,"stroke"),setTimeout(function(){a.setAttributeNS(null,"stroke",b)},0)};v.style.vectorEffect="non-scaling-stroke",I&&J(v);var K=v.getElementsByTagName("*"),L=K.length;for(B=0;L>B;B++)K[B].style.vectorEffect="non-scaling-stroke",I&&J(K[B])}break;case"fhellipse":case"fhrect":case"fhpath":z.x=w,z.y=x,da=!0,e=w+","+x+" ",C=0==s.stroke_width?1:s.stroke_width,u({element:"polyline",curStyles:!0,attr:{points:e,id:ua(),fill:"none",opacity:s.opacity/2,"stroke-linecap":"round",style:"pointer-events:none"}}),n.minx=w,n.maxx=w,n.miny=x,n.maxy=x;break;case"image":da=!0;var M=u({element:"image",attr:{x:q,y:r,width:0,height:0,id:ua(),opacity:s.opacity/2,style:"pointer-events:inherit"}});E(M,aa),La(M);break;case"square":case"rect":da=!0,g=q,i=r,u({element:"rect",curStyles:!0,attr:{x:q,y:r,width:0,height:0,id:ua(),opacity:s.opacity/2}});break;case"line":da=!0,C=0==s.stroke_width?1:s.stroke_width,u({element:"line",curStyles:!0,attr:{x1:q,y1:r,x2:q,y2:r,id:ua(),stroke:s.stroke,"stroke-width":C,"stroke-dasharray":s.stroke_dasharray,"stroke-linejoin":s.stroke_linejoin,"stroke-linecap":s.stroke_linecap,"stroke-opacity":s.stroke_opacity,fill:"none",opacity:s.opacity/2,style:"pointer-events:none"}});break;case"circle":da=!0,u({element:"circle",curStyles:!0,attr:{cx:q,cy:r,r:0,id:ua(),opacity:s.opacity/2}});break;case"ellipse":da=!0,u({element:"ellipse",curStyles:!0,attr:{cx:q,cy:r,rx:0,ry:0,id:ua(),opacity:s.opacity/2}});break;case"text":da=!0;u({element:"text",curStyles:!0,attr:{x:q,y:r,id:ua(),fill:ia.fill,"stroke-width":ia.stroke_width,"font-size":ia.font_size,"font-family":ia.font_family,"text-anchor":"middle","xml:space":"preserve",opacity:s.opacity}});break;case"path":case"pathedit":g*=p,i*=p,xa.mouseDown(a,v,g,i),da=!0;break;case"textedit":g*=p,i*=p,wa.mouseDown(a,v,g,i),da=!0;break;case"rotate":da=!0,$("#text_selectblock").remove(),h.undoMgr.beginUndoableChange("transform",t)}var N=qa("mouseDown",{event:a,start_x:g,start_y:i,selectedElements:t},!0);$.each(N,function(a,b){b&&b.started&&(da=!0)})}},J=function(a){if(da&&1!==a.button&&!h.spaceKey){var d,o,q,s,u,E,H,I,J,K,L=t[0],M=svgedit.math.transformPoint(a.pageX,a.pageY,Ga),N=M.x*p,O=M.y*p,P=svgedit.utilities.getElem(ta()),Q=N/p;x=Q;var R=O/p;y=R,f.gridSnapping&&(x=svgedit.utilities.snapToGrid(x),y=svgedit.utilities.snapToGrid(y)),a.preventDefault();var S;switch(fa){case"select":if(null!==t[0]&&(E=x-g,H=y-i,f.gridSnapping&&(E=svgedit.utilities.snapToGrid(E),H=svgedit.utilities.snapToGrid(H)),a.shiftKey&&(o=svgedit.math.snapToAngle(g,i,x,y),x=o.x,y=o.y),0!=E||0!=H)){for(I=t.length,d=0;I>d&&(L=t[d],null!=L);++d){var U=j.createSVGTransform();S=svgedit.transformlist.getTransformList(L),U.setTranslate(E,H),S.numberOfItems?S.replaceItem(U,0):S.appendItem(U),T.requestSelector(L).resize()}va("transition",t)}break;case"multiselect":Q*=p,R*=p,svgedit.utilities.assignAttributes(la,{x:Math.min(k,Q),y:Math.min(l,R),width:Math.abs(Q-k),height:Math.abs(R-l)},100);var V=[],W=[],X=sa();for(I=t.length,d=0;I>d;++d){var Y=X.indexOf(t[d]);-1==Y?V.push(t[d]):X[Y]=null}for(I=X.length,d=0;I>d;++d)X[d]&&W.push(X[d]);V.length>0&&h.removeFromSelection(V),W.length>0&&Ia(W);break;case"resize":S=svgedit.transformlist.getTransformList(L);var Z=svgedit.math.hasMatrixTransform(S);K=Z?m:svgedit.utilities.getBBox(L);var _=K.x,aa=K.y,ba=K.width,ca=K.height;if(E=x-g,H=y-i,f.gridSnapping&&(E=svgedit.utilities.snapToGrid(E),H=svgedit.utilities.snapToGrid(H),ca=svgedit.utilities.snapToGrid(ca),ba=svgedit.utilities.snapToGrid(ba)),J=svgedit.utilities.getRotationAngle(L)){var ea=Math.sqrt(E*E+H*H),ha=Math.atan2(H,E)-J*Math.PI/180;E=ea*Math.cos(ha),H=ea*Math.sin(ha)}-1==ga.indexOf("n")&&-1==ga.indexOf("s")&&(H=0),-1==ga.indexOf("e")&&-1==ga.indexOf("w")&&(E=0);var ia=0,ja=0,ka=ca?(ca+H)/ca:1,ma=ba?(ba+E)/ba:1;ga.indexOf("n")>=0&&(ka=ca?(ca-H)/ca:1,ja=ca),ga.indexOf("w")>=0&&(ma=ba?(ba-E)/ba:1,ia=ba);var na=j.createSVGTransform(),oa=j.createSVGTransform(),pa=j.createSVGTransform();if(f.gridSnapping&&(_=svgedit.utilities.snapToGrid(_),ia=svgedit.utilities.snapToGrid(ia),aa=svgedit.utilities.snapToGrid(aa),ja=svgedit.utilities.snapToGrid(ja)),na.setTranslate(-(_+ia),-(aa+ja)),1==ma?ma=ka:ka=ma,oa.setScale(ma,ka),pa.setTranslate(_+ia,aa+ja),Z){var ra=J?1:0;S.replaceItem(na,2+ra),S.replaceItem(oa,1+ra),S.replaceItem(pa,Number(ra))}else{var ua=S.numberOfItems;S.replaceItem(pa,ua-3),S.replaceItem(oa,ua-2),S.replaceItem(na,ua-1)}T.requestSelector(L).resize(),va("transition",t);break;case"zoom":Q*=p,R*=p,svgedit.utilities.assignAttributes(la,{x:Math.min(k*p,Q),y:Math.min(l*p,R),width:Math.abs(Q-k*p),height:Math.abs(R-l*p)},100);break;case"text":svgedit.utilities.assignAttributes(P,{x:x,y:y},1e3);break;case"line":var ya=null;window.opera||j.suspendRedraw(1e3),f.gridSnapping&&(x=svgedit.utilities.snapToGrid(x),y=svgedit.utilities.snapToGrid(y));var za=x,Aa=y;a.shiftKey&&(o=svgedit.math.snapToAngle(g,i,za,Aa),za=o.x,Aa=o.y),P.setAttributeNS(null,"x2",za),P.setAttributeNS(null,"y2",Aa),window.opera||j.unsuspendRedraw(ya);break;case"foreignObject":case"square":case"rect":case"image":var Ba,Ca,Da="square"==fa||a.shiftKey,Ea=Math.abs(x-g),Fa=Math.abs(y-i);Da?(Ea=Fa=Math.max(Ea,Fa),Ba=g<x?g:g-Ea,Ca=i<y?i:i-Fa):(Ba=Math.min(g,x),Ca=Math.min(i,y)),f.gridSnapping&&(Ea=svgedit.utilities.snapToGrid(Ea),Fa=svgedit.utilities.snapToGrid(Fa),Ba=svgedit.utilities.snapToGrid(Ba),Ca=svgedit.utilities.snapToGrid(Ca)),svgedit.utilities.assignAttributes(P,{width:Ea,height:Fa,x:Ba,y:Ca},1e3);break;case"circle":q=$(P).attr(["cx","cy"]),s=q.cx,u=q.cy;var Ha=Math.sqrt((x-s)*(x-s)+(y-u)*(y-u));f.gridSnapping&&(Ha=svgedit.utilities.snapToGrid(Ha)),P.setAttributeNS(null,"r",Ha);break;case"ellipse":q=$(P).attr(["cx","cy"]),s=q.cx,u=q.cy,ya=null,window.opera||j.suspendRedraw(1e3),f.gridSnapping&&(x=svgedit.utilities.snapToGrid(x),s=svgedit.utilities.snapToGrid(s),y=svgedit.utilities.snapToGrid(y),u=svgedit.utilities.snapToGrid(u)),P.setAttributeNS(null,"rx",Math.abs(x-s));var Ja=Math.abs(a.shiftKey?x-s:y-u);P.setAttributeNS(null,"ry",Ja),window.opera||j.unsuspendRedraw(ya);break;case"fhellipse":case"fhrect":n.minx=Math.min(Q,n.minx),n.maxx=Math.max(Q,n.maxx),n.miny=Math.min(R,n.miny),n.maxy=Math.max(R,n.maxy);case"fhpath":if(A.x=Q,A.y=R,v.x&&v.y)for(d=0;F-1>d;d++)b=d/F,c=(d+1)/F,B=G(c),C=B,B=G(b),r+=Math.sqrt((C.x-B.x)*(C.x-B.x)+(C.y-B.y)*(C.y-B.y)),r>D&&(e+=+B.x+","+B.y+" ",P.setAttributeNS(null,"points",e),r-=D);v={x:w.x,y:w.y},w={x:z.x,y:z.y},z={x:A.x,y:A.y};break;case"path":case"pathedit":if(x*=p,y*=p,f.gridSnapping&&(x=svgedit.utilities.snapToGrid(x),y=svgedit.utilities.snapToGrid(y),g=svgedit.utilities.snapToGrid(g),i=svgedit.utilities.snapToGrid(i)),a.shiftKey){var Ka,La,Ma=svgedit.path.path;Ma?(Ka=Ma.dragging?Ma.dragging[0]:g,La=Ma.dragging?Ma.dragging[1]:i):(Ka=g,La=i),o=svgedit.math.snapToAngle(Ka,La,x,y),x=o.x,y=o.y}la&&"none"!==la.getAttribute("display")&&(Q*=p,R*=p,svgedit.utilities.assignAttributes(la,{x:Math.min(k*p,Q),y:Math.min(l*p,R),width:Math.abs(Q-k*p),height:Math.abs(R-l*p)},100)),xa.mouseMove(x,y);break;case"textedit":x*=p,y*=p,wa.mouseMove(N,O);break;case"rotate":K=svgedit.utilities.getBBox(L),s=K.x+K.width/2,u=K.y+K.height/2;var Na=svgedit.math.getMatrix(L),Oa=svgedit.math.transformPoint(s,u,Na);if(s=Oa.x,u=Oa.y,J=(Math.atan2(u-y,s-x)*(180/Math.PI)-90)%360,f.gridSnapping&&(J=svgedit.utilities.snapToGrid(J)),a.shiftKey){var Pa=45;J=Math.round(J/Pa)*Pa}h.setRotationAngle(-180>J?360+J:J,!0),va("transition",t)}qa("mouseMove",{event:a,mouse_x:N,mouse_y:O,selected:L})}},K=function(a){if(2!==a.button){var b=ka;if(ka=null,da){var c=svgedit.math.transformPoint(a.pageX,a.pageY,Ga),e=c.x*p,g=c.y*p,i=e/p,j=g/p,m=svgedit.utilities.getElem(ta()),q=!1,x=i,y=j,B=!1;da=!1;var C,D;switch(fa){case"resize":case"multiselect":null!=la&&(la.setAttribute("display","none"),ma=[]),fa="select";case"select":if(null!=t[0]){if(null==t[1]){var E=t[0];switch(E.tagName){case"g":case"use":case"image":case"foreignObject":break;default:ja.fill=E.getAttribute("fill"),ja.fill_opacity=E.getAttribute("fill-opacity"),ja.stroke=E.getAttribute("stroke"),ja.stroke_opacity=E.getAttribute("stroke-opacity"),ja.stroke_width=E.getAttribute("stroke-width"),ja.stroke_dasharray=E.getAttribute("stroke-dasharray"),ja.stroke_linejoin=E.getAttribute("stroke-linejoin"),ja.stroke_linecap=E.getAttribute("stroke-linecap")}"text"==E.tagName?(ia.font_size=E.getAttribute("font-size"),ia.font_family=E.getAttribute("font-family"),T.requestSelector(E).showGrips(!1,!0)):T.requestSelector(E).showGrips(!0)}if(Da(),x!=k||y!=l){var F,G=t.length;for(F=0;G>F&&null!=t[F];++F)t[F].firstChild||T.requestSelector(t[F]).resize()}else D=a.target,"path"===t[0].nodeName&&null==t[1]?xa.select(t[0]):a.shiftKey&&b!=D&&h.removeFromSelection([D]);if(svgedit.browser.supportsNonScalingStroke()){var H=t[0];H&&(H.removeAttribute("style"),svgedit.utilities.walkTree(H,function(a){a.removeAttribute("style")}))}}return void(void 0!=E&&"text"==E.tagName&&(d=!1,L(a)));case"zoom":null!=la&&la.setAttribute("display","none");var J=a.shiftKey?.5:2;return void va("zoomed",{x:Math.min(k,x),y:Math.min(l,y),width:Math.abs(x-k),height:Math.abs(y-l),factor:J});case"fhpath":r=0,v={x:0,y:0},w={x:0,y:0},z={x:0,y:0},A={x:0,y:0};var K=m.getAttribute("points"),M=K.indexOf(",");q=M>=0?K.indexOf(",",M+1)>=0:K.indexOf(" ",K.indexOf(" ")+1)>=0,q&&(m=xa.smoothPolylineIntoPath(m));break;case"line":C=$(m).attr(["x1","x2","y1","y2"]),q=C.x1!=C.x2||C.y1!=C.y2;break;case"foreignObject":case"square":case"rect":case"image":C=$(m).attr(["width","height"]),q=0!=C.width||0!=C.height||"image"===fa;break;case"circle":q=0!=m.getAttribute("r");break;case"ellipse":C=$(m).attr(["rx","ry"]),q=null!=C.rx||null!=C.ry;break;case"fhellipse":n.maxx-n.minx>0&&n.maxy-n.miny>0&&(m=u({element:"ellipse",curStyles:!0,attr:{cx:(n.minx+n.maxx)/2,cy:(n.miny+n.maxy)/2,rx:(n.maxx-n.minx)/2,ry:(n.maxy-n.miny)/2,id:ta()}}),va("changed",[m]),q=!0);break;case"fhrect":n.maxx-n.minx>0&&n.maxy-n.miny>0&&(m=u({element:"rect",curStyles:!0,attr:{x:n.minx,y:n.miny,width:n.maxx-n.minx,height:n.maxy-n.miny,id:ta()}}),va("changed",[m]),q=!0);break;case"text":q=!0,Ja([m]),wa.start(m);break;case"path":m=null,da=!0;var N=xa.mouseUp(a,m,e,g);m=N.element,q=N.keep;break;case"pathedit":q=!0,m=null,xa.mouseUp(a);break;case"textedit":q=!1,m=null,wa.mouseUp(a,e,g);break;case"rotate":q=!0,m=null,fa="select";var O=h.undoMgr.finishUndoableChange();O.isEmpty()||S(O),Da(),va("changed",t)}var P=qa("mouseUp",{event:a,mouse_x:e,mouse_y:g},!0);if($.each(P,function(a,b){b&&(q=b.keep||q,m=b.element,da=b.started||da)}),q||null==m){if(null!=m){h.addedNew=!0,B&&svgedit.units.convertAttrs(m);var Q,R=.2;if(Y.beginElement&&m.getAttribute("opacity")!=s.opacity){Q=$(Y).clone().attr({to:s.opacity,dur:R}).appendTo(m);try{Q[0].beginElement()}catch(U){}}else R=0;setTimeout(function(){Q&&Q.remove(),m.setAttribute("opacity",s.opacity),m.setAttribute("style","pointer-events:inherit"),I(m),"path"===fa?xa.toEditMode(m):f.selectNew&&Ja([m],!0),S(new svgedit.history.InsertElementCommand(m)),va("changed",[m])},1e3*R)}}else{for(o().releaseId(ta()),m.parentNode.removeChild(m),m=null,D=a.target;"g"==D.parentNode.parentNode.tagName;)D=D.parentNode;"path"==fa&&drawn_path||"selectorParentGroup"==D.parentNode.id||"svgcanvas"==D.id||"svgroot"==D.id||(h.setMode("select"),Ja([D],!0))}ea=null}}},L=function(a){var b=a.target,c=b.parentNode,d=Ka(a),e=d.tagName;if("text"===e&&"textedit"!==fa){var f=svgedit.math.transformPoint(a.pageX,a.pageY,Ga);wa.select(d,f.x,f.y),$("#text").focus()}c!==q&&("g"!==e&&"a"!==e||!svgedit.utilities.getRotationAngle(d)||(Za(d),d=t[0],Ha(!0)),q&&Sa(),"g"!==c.tagName&&"a"!==c.tagName||c===o().getCurrentLayer()||d===T.selectorParentGroup||Ta(d))},M=function(a){return a.preventDefault(),!1};$(a).mousedown(H).mousemove(J).click(M).dblclick(L).mouseup(K),$(a).bind("mousewheel DOMMouseScroll",function(a){return})}();var La=function(a){$(a).click(function(a){a.preventDefault()})};wa=h.textActions=function(){function a(a){var b=""===o.value;if(!arguments.length)if(b)a=0;else{if(o.selectionEnd!==o.selectionStart)return;a=o.selectionEnd}var c;c=z[a],b||o.setSelectionRange(a,a),q=svgedit.utilities.getElem("text_cursor"),q||(q=document.createElementNS(e.SVG,"line"),svgedit.utilities.assignAttributes(q,{id:"text_cursor",stroke:"#333","stroke-width":1}),q=svgedit.utilities.getElem("selectorParentGroup").appendChild(q)),s||(s=setInterval(function(){var a="none"===q.getAttribute("display");q.setAttribute("display",a?"inline":"none")},600));var d=k(c.x,u.y),f=k(c.x,u.y+u.height);svgedit.utilities.assignAttributes(q,{x1:d.x,y1:d.y,x2:f.x,y2:f.y,visibility:"visible",display:"inline"}),r&&r.setAttribute("d","")}function b(b,c,d){if(b===c)return void a(c);d||o.setSelectionRange(b,c),r=svgedit.utilities.getElem("text_selectblock"),r||(r=document.createElementNS(e.SVG,"path"),svgedit.utilities.assignAttributes(r,{id:"text_selectblock",fill:"green",opacity:.5,style:"pointer-events:none"}),svgedit.utilities.getElem("selectorParentGroup").appendChild(r));var f=z[b],g=z[c];q.setAttribute("visibility","hidden");var h=k(f.x,u.y),i=k(f.x+(g.x-f.x),u.y),j=k(f.x,u.y+u.height),l=k(f.x+(g.x-f.x),u.y+u.height),m="M"+h.x+","+h.y+" L"+i.x+","+i.y+" "+l.x+","+l.y+" "+j.x+","+j.y+"z";svgedit.utilities.assignAttributes(r,{d:m,display:"inline"})}function c(a,b){var c=j.createSVGPoint();if(c.x=a,c.y=b,1==z.length)return 0;var d=n.getCharNumAtPosition(c);0>d?(d=z.length-2,a<=z[0].x&&(d=0)):d>=z.length-2&&(d=z.length-2);var e=z[d],f=e.x+e.width/2;return a>f&&d++,d}function f(b,d){a(c(b,d))}function g(a,d,e){var f=o.selectionStart,g=c(a,d),h=Math.min(f,g),i=Math.max(f,g);b(h,i,!e)}function i(a,b){var c={x:a,y:b};if(c.x/=p,c.y/=p,v){var d=svgedit.math.transformPoint(c.x,c.y,v.inverse());c.x=d.x,c.y=d.y}return c}function k(a,b){var c={x:a,y:b};if(v){var d=svgedit.math.transformPoint(c.x,c.y,v);c.x=d.x,c.y=d.y}return c.x*=p,c.y*=p,c}function l(a){b(0,n.textContent.length),$(this).unbind(a)}function m(a){if(y&&n){var d=svgedit.math.transformPoint(a.pageX,a.pageY,Ga),e=d.x*p,f=d.y*p,g=i(e,f),h=c(g.x,g.y),j=n.textContent,k=j.substr(0,h).replace(/[a-z0-9]+$/i,"").length,m=j.substr(h).match(/^[a-z0-9]+/i),o=(m?m[0].length:0)+h;b(k,o),$(a.target).click(l),setTimeout(function(){$(a.target).unbind("click",l)},300)}}var n,o,q,r,s,u,v,w,x,y,z=[];return{select:function(a,b,c){n=a,wa.toEditMode(b,c)},start:function(a){n=a,wa.toEditMode()},mouseDown:function(a,b,c,d){var e=i(c,d);o.focus(),f(e.x,e.y),w=c,x=d},mouseMove:function(a,b){var c=i(a,b);g(c.x,c.y)},mouseUp:function(a,b,c){var e=i(b,c);1==d?g(e.x,e.y,!0):d=!0,a.target!==n&&w+2>b&&b>w-2&&x+2>c&&c>x-2&&(wa.toSelectMode(!0),svgCanvas.clearSelection())},setCursor:a,toEditMode:function(b,c){n.oldText=n.textContent,y=!1,fa="textedit",T.requestSelector(n).showGrips(!1,!0);T.requestSelector(n).selectorRect;if(wa.init(),$(n).css("cursor","text"),arguments.length){var d=i(b,c);f(d.x,d.y)}else a();setTimeout(function(){y=!0},300),void 0!=d&&f(0,d.y),g(1e4,c,!0)},toSelectMode:function(a){var b=new svgedit.history.ChangeElementCommand(n,{"#text":n.oldText},{"#text":n.textContent});n.oldText!=n.textContent&&S(b),fa="select",clearInterval(s),s=null,r&&$(r).attr("display","none"),q&&$(q).attr("visibility","hidden"),$(n).css("cursor","move"),a&&(Ha(),$(n).css("cursor","move"),va("selected",[n]),Ia([n],!0)),n&&!n.textContent.length&&h.deleteSelectedElements(),$(o).blur(),n=!1},setInputElem:function(a){o=a},clear:function(){"textedit"==fa&&wa.toSelectMode()},init:function(a){if(n){var c,d;n.parentNode||(n=t[0],T.requestSelector(n).showGrips(!1));var e=n.textContent,f=e.length,g=n.getAttribute("transform");for(u=svgedit.utilities.getBBox(n),v=g?svgedit.math.getMatrix(n):null,z=new Array(f),$(n).unbind("dblclick",m).dblclick(m),f||(d={x:u.x+u.width/2,width:0}),c=0;f>c;c++){var i=0;try{i=n.getStartPositionOfChar(c)}catch(j){i=c-1}if(d=n.getEndPositionOfChar(c),!svgedit.browser.supportsGoodTextCharPos()){var k=h.contentW*p;i.x-=k,d.x-=k,i.x/=p,d.x/=p}z[c]={x:i.x,y:u.y,width:d.x-i.x,height:u.height}}z.push({x:d.x,width:0}),b(o.selectionStart,o.selectionEnd,!0)}}}}(),xa=h.pathActions=function(){function b(a){a.setAttribute("d",xa.convertPath(a))}var d,g,i,j=!1;svgedit.path.Path.prototype.endChanges=function(a){svgedit.browser.isWebkit()&&b(this.elem);var c=new svgedit.history.ChangeElementCommand(this.elem,{d:this.last_d},a);S(c),va("changed",[this.elem])},svgedit.path.Path.prototype.addPtsToSelection=function(a){var b,c;for($.isArray(a)||(a=[a]),b=0;b<a.length;b++){var d=a[b];c=this.segs[d],c.ptgrip&&-1==this.selected_pts.indexOf(d)&&d>=0&&this.selected_pts.push(d)}this.selected_pts.sort(),b=this.selected_pts.length;for(var e=new Array(b);b--;){var f=this.selected_pts[b];c=this.segs[f],c.select(!0),e[b]=c.ptgrip}xa.canDeleteNodes=!0,xa.closed_subpath=this.subpathIsClosed(this.selected_pts[0]),va("selected",e)},d=null;var k=null,l=!1,m=function(a){var b,c=a.points,d=c.numberOfItems;if(d>=4){var e=c.getItem(0),f=null,g=[];for(g.push(["M",e.x,",",e.y," C"].join("")),b=1;d-4>=b;b+=3){var h=c.getItem(b),i=c.getItem(b+1),j=c.getItem(b+2);if(f){var k=svgedit.path.smoothControlPoints(f,h,e);if(k&&2==k.length){var l=g[g.length-1].split(",");l[2]=k[0].x,l[3]=k[0].y,g[g.length-1]=l.join(","),h=k[1]}}g.push([h.x,h.y,i.x,i.y,j.x,j.y].join(",")),e=j,f=i}for(g.push("L");d>b;){var m=c.getItem(b);g.push([m.x,m.y].join(",")),b++}g=g.join(" "),a=u({element:"path",curStyles:!0,attr:{id:ta(),d:g,fill:"none"}})}return a};return{mouseDown:function(b,c,d,h){var i;if("path"!==fa){if(svgedit.path.path){svgedit.path.path.storeD(),i=b.target.id;var l;if("pathpointgrip_"==i.substr(0,14)){l=svgedit.path.path.cur_pt=parseInt(i.substr(14)),svgedit.path.path.dragging=[d,h];var m=svgedit.path.path.segs[l];b.shiftKey?m.selected?svgedit.path.path.removePtFromSelection(l):svgedit.path.path.addPtsToSelection(l):((svgedit.path.path.selected_pts.length<=1||!m.selected)&&svgedit.path.path.clearSelection(),svgedit.path.path.addPtsToSelection(l))}else if(0==i.indexOf("ctrlpointgrip_")){svgedit.path.path.dragging=[d,h];var n=i.split("_")[1].split("c");l=Number(n[0]);var o=Number(n[1]);svgedit.path.path.selectPt(l,o)}svgedit.path.path.dragging||(null==la&&(la=T.getRubberBandBox()),svgedit.utilities.assignAttributes(la,{x:d*p,y:h*p,width:0,height:0,display:"inline"},100))}}else{mouse_x=d,mouse_y=h;var q=mouse_x/p,r=mouse_y/p,t=svgedit.utilities.getElem("path_stretch_line");g=[q,r],f.gridSnapping&&(q=svgedit.utilities.snapToGrid(q),r=svgedit.utilities.snapToGrid(r),mouse_x=svgedit.utilities.snapToGrid(mouse_x),mouse_y=svgedit.utilities.snapToGrid(mouse_y)),t||(t=document.createElementNS(e.SVG,"path"),svgedit.utilities.assignAttributes(t,{id:"path_stretch_line",stroke:"#22C","stroke-width":"0.5",fill:"none"}),t=svgedit.utilities.getElem("selectorParentGroup").appendChild(t)),t.setAttribute("display","inline");var v,w=null;if(k){for(var x=k.pathSegList,y=x.numberOfItems,z=6/p,A=!1;y;){y--;var B=x.getItem(y),C=B.x,D=B.y;if(q>=C-z&&C+z>=q&&r>=D-z&&D+z>=r){A=!0;break}}i=ta(),svgedit.path.removePath_(i);var E,F,G=svgedit.utilities.getElem(i),H=x.numberOfItems;if(A){if(1>=y&&H>=2){var I=x.getItem(0).x,J=x.getItem(0).y;F=t.pathSegList.getItem(1),E=4===F.pathSegType?k.createSVGPathSegLinetoAbs(I,J):k.createSVGPathSegCurvetoCubicAbs(I,J,F.x1/p,F.y1/p,I,J);var K=k.createSVGPathSegClosePath();x.appendItem(E),x.appendItem(K)}else if(3>H)return w=!1;if($(t).remove(),element=G,k=null,da=!1,j){svgedit.path.path.matrix&&svgedit.coords.remapElement(G,{},svgedit.path.path.matrix.inverse());var L=G.getAttribute("d"),M=$(svgedit.path.path.elem).attr("d");return $(svgedit.path.path.elem).attr("d",M+L),$(G).remove(),svgedit.path.path.matrix&&svgedit.path.recalcRotatedPath(),svgedit.path.path.init(),xa.toEditMode(svgedit.path.path.elem),svgedit.path.path.selectPt(),!1}}else{if(!$.contains(a,Ka(b)))return console.log("Clicked outside canvas"),!1;var N=k.pathSegList.numberOfItems,O=k.pathSegList.getItem(N-1),P=O.x,Q=O.y;
if(b.shiftKey){var R=svgedit.math.snapToAngle(P,Q,q,r);q=R.x,r=R.y}F=t.pathSegList.getItem(1),E=4===F.pathSegType?k.createSVGPathSegLinetoAbs(ra(q),ra(r)):k.createSVGPathSegCurvetoCubicAbs(ra(q),ra(r),F.x1/p,F.y1/p,F.x2/p,F.y2/p),k.pathSegList.appendItem(E),q*=p,r*=p,t.setAttribute("d",["M",q,r,q,r].join(" ")),v=N,j&&(v+=svgedit.path.path.segs.length),svgedit.path.addPointGrip(v,q,r)}}else d_attr="M"+q+","+r+" ",k=u({element:"path",curStyles:!0,attr:{d:d_attr,id:ua(),opacity:s.opacity/2}}),t.setAttribute("d",["M",mouse_x,mouse_y,mouse_x,mouse_y].join(" ")),v=j?svgedit.path.path.segs.length:0,svgedit.path.addPointGrip(v,mouse_x,mouse_y)}},mouseMove:function(a,b){if(l=!0,"path"!==fa)if(svgedit.path.path.dragging){var c=svgedit.path.getPointFromGrip({x:svgedit.path.path.dragging[0],y:svgedit.path.path.dragging[1]},svgedit.path.path),d=svgedit.path.getPointFromGrip({x:a,y:b},svgedit.path.path),e=d.x-c.x,f=d.y-c.y;svgedit.path.path.dragging=[a,b],svgedit.path.path.dragctrl?svgedit.path.path.moveCtrl(e,f):svgedit.path.path.movePts(e,f)}else svgedit.path.path.selected_pts=[],svgedit.path.path.eachSeg(function(a){var b=this;if(b.next||b.prev){var c=(b.item,la.getBBox()),d=svgedit.path.getGripPt(b),e={x:d.x,y:d.y,width:0,height:0},f=svgedit.math.rectsIntersect(c,e);this.select(f),f&&svgedit.path.path.selected_pts.push(b.index)}});else{if(!k)return;var h=k.pathSegList,j=h.numberOfItems-1;if(g){var m=svgedit.path.addCtrlGrip("1c1"),n=svgedit.path.addCtrlGrip("0c2");m.setAttribute("cx",a),m.setAttribute("cy",b),m.setAttribute("display","inline");var o=g[0],q=g[1],r=(h.getItem(j),a/p),s=b/p,t=o+(o-r),u=q+(q-s);n.setAttribute("cx",t*p),n.setAttribute("cy",u*p),n.setAttribute("display","inline");var v=svgedit.path.getCtrlLine(1);if(svgedit.utilities.assignAttributes(v,{x1:a,y1:b,x2:t*p,y2:u*p,display:"inline"}),0===j)i=[a,b];else{var w=h.getItem(j-1),x=w.x,y=w.y;6===w.pathSegType?(x+=x-w.x2,y+=y-w.y2):i&&(x=i[0]/p,y=i[1]/p),svgedit.path.replacePathSeg(6,j,[o,q,x,y,t,u],k)}}else{var z=svgedit.utilities.getElem("path_stretch_line");if(z){var A=h.getItem(j);if(6===A.pathSegType){var B=A.x+(A.x-A.x2),C=A.y+(A.y-A.y2);svgedit.path.replacePathSeg(6,1,[a,b,B*p,C*p,a,b],z)}else i?svgedit.path.replacePathSeg(6,1,[a,b,i[0],i[1],a,b],z):svgedit.path.replacePathSeg(4,1,[a,b],z)}}}},mouseUp:function(a,b,c,d){if("path"===fa)return g=null,k||(b=svgedit.utilities.getElem(ta()),da=!1,i=null),{keep:!0,element:b};if(svgedit.path.path.dragging){var e=svgedit.path.path.cur_pt;svgedit.path.path.dragging=!1,svgedit.path.path.dragctrl=!1,svgedit.path.path.update(),l&&svgedit.path.path.endChanges("Move path point(s)"),a.shiftKey||l||svgedit.path.path.selectPt(e)}else la&&"none"!=la.getAttribute("display")?(la.setAttribute("display","none"),la.getAttribute("width")<=2&&la.getAttribute("height")<=2&&xa.toSelectMode(a.target)):xa.toSelectMode(a.target);l=!1},toEditMode:function(a){},toSelectMode:function(a){var b=a==svgedit.path.path.elem;fa="select",svgedit.path.path.show(!1),d=!1,Ha(),svgedit.path.path.matrix&&svgedit.path.recalcRotatedPath(),b&&(va("selected",[a]),Ia([a],!0))},addSubPath:function(a){a?(fa="path",j=!0):(xa.clear(!0),xa.toEditMode(svgedit.path.path.elem))},select:function(a){},reorient:function(){var a=t[0];if(a){var b=svgedit.utilities.getRotationAngle(a);if(0!=b){var c=new svgedit.history.BatchCommand("Reorient path"),d={d:a.getAttribute("d"),transform:a.getAttribute("transform")};c.addSubCommand(new svgedit.history.ChangeElementCommand(a,d)),Ha(),this.resetOrientation(a),S(c),svgedit.path.getPath_(a).show(!1).matrix=null,this.clear(),Ia([a],!0),va("changed",t)}}},clear:function(a){if(d=null,k){var b=svgedit.utilities.getElem(ta());$(svgedit.utilities.getElem("path_stretch_line")).remove(),$(b).remove(),$(svgedit.utilities.getElem("pathpointgrip_container")).find("*").attr("display","none"),k=i=null,da=!1}else"pathedit"==fa&&this.toSelectMode();svgedit.path.path&&svgedit.path.path.init().show(!1)},resetOrientation:function(a){if(null==a||"path"!=a.nodeName)return!1;var b=svgedit.transformlist.getTransformList(a),d=svgedit.math.transformListToTransform(b).matrix;b.clear(),a.removeAttribute("transform");var e,f=a.pathSegList,g=f.numberOfItems;for(e=0;g>e;++e){var h=f.getItem(e),i=h.pathSegType;if(1!=i){var j=[];$.each(["",1,2],function(a,b){var c=h["x"+b],e=h["y"+b];if(void 0!==c&&void 0!==e){var f=svgedit.math.transformPoint(c,e,d);j.splice(j.length,0,f.x,f.y)}}),svgedit.path.replacePathSeg(i,e,j,a)}}c(a,d)},zoomChange:function(){"pathedit"==fa&&svgedit.path.path.update()},getNodePoint:function(){var a=svgedit.path.path.selected_pts.length?svgedit.path.path.selected_pts[0]:1,b=svgedit.path.path.segs[a];return{x:b.item.x,y:b.item.y,type:b.type}},linkControlPoints:function(a){svgedit.path.setLinkControlPoints(a)},clonePathNode:function(){svgedit.path.path.storeD();for(var a=svgedit.path.path.selected_pts,b=(svgedit.path.path.segs,a.length),c=[];b--;){var d=a[b];svgedit.path.path.addSeg(d),c.push(d+b),c.push(d+b+1)}svgedit.path.path.init().addPtsToSelection(c),svgedit.path.path.endChanges("Clone path node(s)")},opencloseSubPath:function(){var a=svgedit.path.path.selected_pts;if(1===a.length){var b=svgedit.path.path.elem,c=b.pathSegList,d=(c.numberOfItems,a[0]),e=null,f=null;if(svgedit.path.path.eachSeg(function(a){return 2===this.type&&d>=a&&(f=this.item),d>=a?!0:2===this.type?(e=a,!1):1===this.type?(e=!1,!1):void 0}),null==e&&(e=svgedit.path.path.segs.length-1),e!==!1){var g=b.createSVGPathSegLinetoAbs(f.x,f.y),h=b.createSVGPathSegClosePath();return e==svgedit.path.path.segs.length-1?(c.appendItem(g),c.appendItem(h)):(svgedit.path.insertItemBefore(b,h,e),svgedit.path.insertItemBefore(b,g,e)),void svgedit.path.path.init().selectPt(e+1)}var i=svgedit.path.path.segs[d];if(i.mate)return c.removeItem(d),c.removeItem(d),void svgedit.path.path.init().selectPt(d-1);var j,k,l;for(j=0;j<c.numberOfItems;j++){var m=c.getItem(j);if(2===m.pathSegType)k=j;else if(j===d)c.removeItem(k);else if(1===m.pathSegType&&j>d){l=j-1,c.removeItem(j);break}}for(var n=d-k-1;n--;)svgedit.path.insertItemBefore(b,c.getItem(k),l);var o=c.getItem(k);svgedit.path.replacePathSeg(2,k,[o.x,o.y]),j=d,svgedit.path.path.init().selectPt(0)}},deletePathNode:function(){if(xa.canDeleteNodes){svgedit.path.path.storeD();for(var a=svgedit.path.path.selected_pts,b=a.length;b--;){var c=a[b];svgedit.path.path.deleteSeg(c)}var d=function(){var a=svgedit.path.path.elem.pathSegList,b=a.numberOfItems,c=function(b,c){for(;c--;)a.removeItem(b)};if(1>=b)return!0;for(;b--;){var e=a.getItem(b);if(1===e.pathSegType){var f=a.getItem(b-1),g=a.getItem(b-2);if(2===f.pathSegType){c(b-1,2),d();break}if(2===g.pathSegType){c(b-2,3),d();break}}else if(2===e.pathSegType&&b>0){var h=a.getItem(b-1).pathSegType;if(2===h){c(b-1,1),d();break}if(1===h&&a.numberOfItems-1===b){c(b,1),d();break}}}return!1};if(d(),svgedit.path.path.elem.pathSegList.numberOfItems<=1)return xa.toSelectMode(svgedit.path.path.elem),void h.deleteSelectedElements();if(svgedit.path.path.init(),svgedit.path.path.clearSelection(),window.opera){var e=$(svgedit.path.path.elem);e.attr("d",e.attr("d"))}svgedit.path.path.endChanges("Delete path node(s)")}},smoothPolylineIntoPath:m,setSegType:function(a){svgedit.path.path.setSegType(a)},moveNode:function(a,b){var c=svgedit.path.path.selected_pts;if(c.length){svgedit.path.path.storeD();var d=svgedit.path.path.segs[c[0]],e={x:0,y:0};e[a]=b-d.item[a],d.move(e.x,e.y),svgedit.path.path.endChanges("Move path point")}},fixEnd:function(a){var c,d,e=a.pathSegList,f=e.numberOfItems;for(c=0;f>c;++c){var g=e.getItem(c);if(2===g.pathSegType&&(d=g),1===g.pathSegType){var h=e.getItem(c-1);if(h.x!=d.x||h.y!=d.y){var i=a.createSVGPathSegLinetoAbs(d.x,d.y);svgedit.path.insertItemBefore(a,i,c),xa.fixEnd(a);break}}}svgedit.browser.isWebkit()&&b(a)},convertPath:function(a,b){var c,d=a.pathSegList,e=d.numberOfItems,f=0,g=0,h="",i=null;for(c=0;e>c;++c){var j=d.getItem(c),k=j.x||0,l=j.y||0,m=j.x1||0,n=j.y1||0,o=j.x2||0,p=j.y2||0,q=j.pathSegType,r=Ea[q]["to"+(b?"Lower":"Upper")+"Case"](),s=function(a,b,c){b=b?" "+b.join(" "):"",c=c?" "+svgedit.units.shortFloat(c):"",$.each(a,function(b,c){a[b]=svgedit.units.shortFloat(c)}),h+=r+a.join(" ")+b+c};switch(q){case 1:h+="z";break;case 12:k-=f;case 13:b?(f+=k,r="l"):(k+=f,f=k,r="L"),s([[k,g]]);break;case 14:l-=g;case 15:b?(g+=l,r="l"):(l+=g,g=l,r="L"),s([[f,l]]);break;case 2:case 4:case 18:k-=f,l-=g;case 5:case 3:i&&1===d.getItem(c-1).pathSegType&&!b&&(f=i[0],g=i[1]);case 19:b?(f+=k,g+=l):(k+=f,l+=g,f=k,g=l),3===q&&(i=[f,g]),s([[k,l]]);break;case 6:k-=f,m-=f,o-=f,l-=g,n-=g,p-=g;case 7:b?(f+=k,g+=l):(k+=f,m+=f,o+=f,l+=g,n+=g,p+=g,f=k,g=l),s([[m,n],[o,p],[k,l]]);break;case 8:k-=f,m-=f,l-=g,n-=g;case 9:b?(f+=k,g+=l):(k+=f,m+=f,l+=g,n+=g,f=k,g=l),s([[m,n],[k,l]]);break;case 10:k-=f,l-=g;case 11:b?(f+=k,g+=l):(k+=f,l+=g,f=k,g=l),s([[j.r1,j.r2]],[j.angle,j.largeArcFlag?1:0,j.sweepFlag?1:0],[k,l]);break;case 16:k-=f,o-=f,l-=g,p-=g;case 17:b?(f+=k,g+=l):(k+=f,o+=f,l+=g,p+=g,f=k,g=l),s([[o,p],[k,l]])}}return h}}}();var Ma=this.removeUnusedDefElems=function(){var a=k.getElementsByTagNameNS(e.SVG,"defs");if(!a||!a.length)return 0;var b,c,d=[],f=0,g=["fill","stroke","filter","marker-start","marker-mid","marker-end"],h=g.length,i=k.getElementsByTagNameNS(e.SVG,"*"),j=i.length;for(b=0;j>b;b++){var l=i[b];for(c=0;h>c;c++){var m=svgedit.utilities.getUrlFromAttr(l.getAttribute(g[c]));m&&d.push(m.substr(1))}var n=D(l);n&&0===n.indexOf("#")&&d.push(n.substr(1))}var o=$(a).find("linearGradient, radialGradient, filter, marker, svg, symbol");for(b=o.length;b--;){var p=o[b],q=p.id;d.indexOf(q)<0&&(pa[q]=p,p.parentNode.removeChild(p),f++)}return f};this.svgCanvasToString=function(){for(;Ma()>0;);xa.clear(!0),$.each(k.childNodes,function(a,b){a&&8===b.nodeType&&b.data.indexOf("Created with")>=0&&k.insertBefore(b,k.firstChild)}),q&&(Sa(),Ja([q]));var a=[];$(k).find("g:data(gsvg)").each(function(){var b,c=this.attributes,d=c.length;for(b=0;d>b;b++)"id"!=c[b].nodeName&&"style"!=c[b].nodeName||d--;if(0>=d){var e=this.firstChild;a.push(e),$(this).replaceWith(e)}});var b=this.svgToString(k,0);return a.length&&$(a).each(function(){Aa(this)}),b},this.svgToString=function(a,b){var c=[],d=svgedit.utilities.toXml,g=f.baseUnit,h=new RegExp("^-?[\\d\\.]+"+g+"$");if(a){I(a);var i,j,k=a.attributes,l=a.childNodes;for(j=0;b>j;j++)c.push(" ");if(c.push("<"),c.push(a.nodeName),"svgcontent"===a.id){var m=Ua(),n="";"px"!==g&&(m.w=svgedit.units.convertUnit(m.w,g)+g,m.h=svgedit.units.convertUnit(m.h,g)+g),c.push(' width="'+m.w+'" height="'+m.h+'"'+n+' xmlns="'+e.SVG+'"');var o={};$(a).find("*").andSelf().each(function(){var a=this.namespaceURI;a&&!o[a]&&L[a]&&"xmlns"!==L[a]&&"xml"!==L[a]&&(o[a]=!0,c.push(" xmlns:"+L[a]+'="'+a+'"')),$.each(this.attributes,function(a,b){var d=b.namespaceURI;d&&!o[d]&&"xmlns"!==L[d]&&"xml"!==L[d]&&(o[d]=!0,c.push(" xmlns:"+L[d]+'="'+d+'"'))})}),j=k.length;for(var p=["width","height","xmlns","x","y","viewBox","id","overflow"];j--;){i=k.item(j);var q=d(i.nodeValue);0!==i.nodeName.indexOf("xmlns:")&&""!=q&&-1==p.indexOf(i.localName)&&(i.namespaceURI&&!L[i.namespaceURI]||(c.push(" "),c.push(i.nodeName),c.push('="'),c.push(q),c.push('"')))}}else{if("defs"===a.nodeName&&!a.firstChild)return;var r=["-moz-math-font-style","_moz-math-font-style"];for(j=k.length-1;j>=0;j--){i=k.item(j);var q=d(i.nodeValue);if(!(r.indexOf(i.localName)>=0)&&""!=q){if(0===q.indexOf("pointer-events")&&"product-design"!=a.id)continue;if("class"===i.localName&&0===q.indexOf("se_"))continue;if(c.push(" "),"d"===i.localName&&(q=xa.convertPath(a,!0)),isNaN(q)?h.test(q)&&(q=svgedit.units.shortFloat(q)+g):q=svgedit.units.shortFloat(q),ca.apply&&"image"===a.nodeName&&"href"===i.localName&&ca.images&&"embed"===ca.images){var s=_[q];s&&(q=s)}i.namespaceURI&&i.namespaceURI!=e.SVG&&!L[i.namespaceURI]||(c.push(i.nodeName),c.push('="'),c.push(q),c.push('"'))}}}if(a.hasChildNodes()){c.push(">"),b++;var t=!1;for(j=0;j<l.length;j++){var u=l.item(j);switch(u.nodeType){case 1:c.push("\n"),c.push(this.svgToString(l.item(j),b));break;case 3:var v=u.nodeValue.replace(/^\s+|\s+$/g,"");""!=v&&(t=!0,c.push(String(d(v))));break;case 4:c.push("\n"),c.push(new Array(b+1).join(" ")),c.push("<![CDATA["),c.push(u.nodeValue),c.push("]]>");break;case 8:c.push("\n"),c.push(new Array(b+1).join(" ")),c.push("<!--"),c.push(u.data),c.push("-->")}}if(b--,!t)for(c.push("\n"),j=0;b>j;j++)c.push(" ");c.push("</"),c.push(a.nodeName),c.push(">")}else c.push("/>")}return c.join("")},this.embedImage=function(a,b){$(new Image).load(function(){var c=document.createElement("canvas");c.width=this.width,c.height=this.height,c.getContext("2d").drawImage(this,0,0);try{_[a]=c.toDataURL()}catch(d){_[a]=!1}aa=a,b&&b(_[a],this)}).attr("src",a)},this.setGoodImage=function(a){aa=a},this.open=function(){},this.save=function(a){Ha(),a&&$.extend(ca,a),ca.apply=!0;var b=this.svgCanvasToString();va("saved",b)},this.rasterExport=function(a,b){var c="image/"+a.toLowerCase();Ha();var d=[],e={feGaussianBlur:U.exportNoBlur,foreignObject:U.exportNoforeignObject,"[stroke-dasharray]":U.exportNoDashArray},f=$(k);"font"in $("<canvas>")[0].getContext("2d")||(e.text=U.exportNoText),$.each(e,function(a,b){f.find(a).length&&d.push(b)});var g=this.svgCanvasToString();va("exported",{svg:g,issues:d,type:a,mimeType:c,quality:b})},this.getSvgString=function(){return ca.apply=!1,this.svgCanvasToString()},this.randomizeIds=function(a){arguments.length>0&&0==a?svgedit.draw.randomizeIds(!1,o()):svgedit.draw.randomizeIds(!0,o())};var Na=this.uniquifyElems=function(a){var b={},c=["filter","linearGradient","pattern","radialGradient","symbol","textPath","use"];svgedit.utilities.walkTree(a,function(a){if(1==a.nodeType){a.id&&(a.id in b||(b[a.id]={elem:null,attrs:[],hrefs:[]}),b[a.id].elem=a),$.each(W,function(c,d){var e=a.getAttributeNode(d);if(e){var f=svgedit.utilities.getUrlFromAttr(e.value),g=f?f.substr(1):null;g&&(g in b||(b[g]={elem:null,attrs:[],hrefs:[]}),b[g].attrs.push(e))}});var d=svgedit.utilities.getHref(a);if(d&&c.indexOf(a.nodeName)>=0){var e=d.substr(1);e&&(e in b||(b[e]={elem:null,attrs:[],hrefs:[]}),b[e].hrefs.push(a))}}});var d;for(d in b)if(d){var e=b[d].elem;if(e){var f=ua();e.id=f;for(var g=b[d].attrs,h=g.length;h--;){var i=g[h];i.ownerElement.setAttribute(i.name,"url(#"+f+")")}for(var j=b[d].hrefs,k=j.length;k--;){var l=j[k];svgedit.utilities.setHref(l,"#"+f)}}}},Oa=this.setUseData=function(a){var b=$(a);"use"!==a.tagName&&(b=b.find("use")),b.each(function(){var a=D(this).substr(1),b=svgedit.utilities.getElem(a);b&&($(this).data("ref",b),"symbol"!=b.tagName&&"svg"!=b.tagName||$(this).data("symbol",b).data("ref",b))})},Pa=this.convertGradients=function(a){var b=$(a).find("linearGradient, radialGradient");!b.length&&svgedit.browser.isWebkit()&&(b=$(a).find("*").filter(function(){return this.tagName.indexOf("Gradient")>=0})),b.each(function(){var a=this;if("userSpaceOnUse"===$(a).attr("gradientUnits")){var b=$(k).find('[fill="url(#'+a.id+')"],[stroke="url(#'+a.id+')"]');if(!b.length)return;var c=svgedit.utilities.getBBox(b[0]);if(!c)return;if("linearGradient"===a.tagName){var d=$(a).attr(["x1","y1","x2","y2"]),e=a.gradientTransform.baseVal;if(e&&e.numberOfItems>0){var f=svgedit.math.transformListToTransform(e).matrix,g=svgedit.math.transformPoint(d.x1,d.y1,f),h=svgedit.math.transformPoint(d.x2,d.y2,f);d.x1=g.x,d.y1=g.y,d.x2=h.x,d.y2=h.y,a.removeAttribute("gradientTransform")}$(a).attr({x1:(d.x1-c.x)/c.width,y1:(d.y1-c.y)/c.height,x2:(d.x2-c.x)/c.width,y2:(d.y2-c.y)/c.height}),a.removeAttribute("gradientUnits")}}})},Qa=this.convertToGroup=function(a){a||(a=t[0]);var b,c=$(a),d=new svgedit.history.BatchCommand;if(c.data("gsvg")){var f=a.firstChild,g=$(f).attr(["x","y"]);$(a.firstChild.firstChild).unwrap(),$(a).removeData("gsvg");var h=svgedit.transformlist.getTransformList(a),l=j.createSVGTransform();l.setTranslate(g.x,g.y),h.appendItem(l),svgedit.recalculate.recalculateDimensions(a),va("selected",[a])}else if(c.data("symbol")){a=c.data("symbol"),b=c.attr("transform");var m=c.attr(["x","y"]),n=a.getAttribute("viewBox");if(n){var o=n.split(" ");m.x-=+o[0],m.y-=+o[1]}b+=" translate("+(m.x||0)+","+(m.y||0)+")";var p=c.prev();d.addSubCommand(new svgedit.history.RemoveElementCommand(c[0],c[0].nextSibling,c[0].parentNode)),c.remove();var q,r=$(k).find("use:data(symbol)").length,s=i.createElementNS(e.SVG,"g"),u=a.childNodes;for(q=0;q<u.length;q++)s.appendChild(u[q].cloneNode(!0));if(svgedit.browser.isGecko()){var v=$(svgedit.utilities.findDefs()).children("linearGradient,radialGradient,pattern").clone();$(s).append(v)}b&&s.setAttribute("transform",b);var w=a.parentNode;if(Na(s),svgedit.browser.isGecko()&&$(B()).append($(s).find("linearGradient,radialGradient,pattern")),s.id=ua(),p.after(s),w){if(!r){var x=a.nextSibling;w.removeChild(a),d.addSubCommand(new svgedit.history.RemoveElementCommand(a,x,w))}d.addSubCommand(new svgedit.history.InsertElementCommand(s))}Oa(s),Pa(svgedit.browser.isGecko()?svgedit.utilities.findDefs():s),svgedit.utilities.walkTreePost(s,function(a){try{svgedit.recalculate.recalculateDimensions(a)}catch(b){console.log(b)}}),$(s).find(V).each(function(){this.id||(this.id=ua())}),Ja([s]);var y=Za(s,!0);y&&d.addSubCommand(y),S(d)}else console.log("Unexpected element to ungroup:",a)};this.setSvgString=function(a){try{var b=svgedit.utilities.text2xml(a);this.prepareSvg(b);var c=new svgedit.history.BatchCommand("Change Source"),d=k.nextSibling,g=j.removeChild(k);c.addSubCommand(new svgedit.history.RemoveElementCommand(g,d,j)),k=i.adoptNode?i.adoptNode(b.documentElement):i.importNode(b.documentElement,!0),j.appendChild(k);var l=$(k);h.current_drawing_=new svgedit.draw.Drawing(k,n);var m=o().getNonce();m?va("setnonce",m):va("unsetnonce"),l.find("image").each(function(){var a=this;La(a);var b=D(this);if(b){if(0===b.indexOf("data:")){var c=b.match(/svgedit_url=(.*?);/);if(c){var d=decodeURIComponent(c[1]);$(new Image).load(function(){a.setAttributeNS(e.XLINK,"xlink:href",d)}).attr("src",d)}}h.embedImage(b)}}),l.find("svg").each(function(){if(!$(this).closest("defs").length){Na(this);var a=this.parentNode;1===a.childNodes.length&&"g"===a.nodeName?($(a).data("gsvg",this),a.id=a.id||ua()):Aa(this)}}),svgedit.browser.isGecko()&&l.find("linearGradient, radialGradient, pattern").appendTo(svgedit.utilities.findDefs()),Oa(l),Pa(l[0]),svgedit.utilities.walkTreePost(k,function(a){try{svgedit.recalculate.recalculateDimensions(a)}catch(b){console.log(b)}});var q={id:"svgcontent",overflow:f.show_outside_canvas?"visible":"hidden"},r=!1;if(l.attr("viewBox")){var s=l.attr("viewBox").split(" ");q.width=s[2],q.height=s[3]}else $.each(["width","height"],function(a,b){var c=l.attr(b);c||(c="100%"),"%"===String(c).substr(-1)?r=!0:q[b]=svgedit.units.convertToNum(b,c)});if(Ra(),l.children().find(V).each(function(){this.id||(this.id=ua())}),r){var t=getStrokedBBox();q.width=t.width+t.x,q.height=t.height+t.y}q.width<=0&&(q.width=100),q.height<=0&&(q.height=100),l.attr(q),this.contentW=q.width,this.contentH=q.height,c.addSubCommand(new svgedit.history.InsertElementCommand(k));var u=l.attr(["width","height"]);c.addSubCommand(new svgedit.history.ChangeElementCommand(j,u)),p=1,svgedit.transformlist.resetListMap(),Ha(),svgedit.path.clearData(),j.appendChild(T.selectorParentGroup),S(c),va("changed",[k])}catch(v){return console.log(v),!1}return $("title").text("Click to Edit"),!0},this.importSvgString=function(a,b){b||(b={pos:{}});var c,d;try{var f=svgedit.utilities.encode64(a.length+a).substr(0,32),g=!1;ha[f]&&$(ha[f].symbol).parents("#svgroot").length&&(g=!0);var h,j=new svgedit.history.BatchCommand("Import SVG");if(g)h=ha[f].symbol,d=ha[f].xform;else{var l=svgedit.utilities.text2xml(a);this.prepareSvg(l);var m;m=i.adoptNode?i.adoptNode(l.documentElement):i.importNode(l.documentElement,!0),Na(m);var n=svgedit.units.convertToNum("width",m.getAttribute("width")),p=svgedit.units.convertToNum("height",m.getAttribute("height")),r=m.getAttribute("viewBox"),s=r?r.split(" "):[0,0,n,p];for(c=0;4>c;++c)s[c]=+s[c];var t=(+k.getAttribute("width"),+k.getAttribute("height"));d=p>n?"scale("+t/3/s[3]+")":"scale("+t/3/s[2]+")",d="translate(0) "+d+" translate(0)",h=i.createElementNS(e.SVG,"symbol");var u=svgedit.utilities.findDefs();for(svgedit.browser.isGecko()&&$(m).find("linearGradient, radialGradient, pattern").appendTo(u);m.firstChild;){var v=m.firstChild;h.appendChild(v)}var w,x=m.attributes;for(w=0;w<x.length;w++){var y=x[w];h.setAttribute(y.nodeName,y.nodeValue)}h.id=ua(),ha[f]={symbol:h,xform:d},svgedit.utilities.findDefs().appendChild(h),j.addSubCommand(new svgedit.history.InsertElementCommand(h))}var z=i.createElementNS(e.SVG,"use");z.id=b.id||ua(),E(z,"#"+h.id),(q||o().getCurrentLayer()).appendChild(z),j.addSubCommand(new svgedit.history.InsertElementCommand(z)),Ha(),b.pos.x&&z.setAttribute("x",b.pos.x),b.pos.y&&z.setAttribute("y",b.pos.y),b.pos.height&&z.setAttribute("height",b.pos.height),b.pos.width&&z.setAttribute("width",b.pos.width),b.transform&&z.setAttribute("transform",b.transform),svgedit.recalculate.recalculateDimensions(z),$(z).data("symbol",h).data("ref",h),Ia([z]),S(j),va("changed",[k])}catch(A){return console.log(A),!1}return!0};var Ra=h.identifyLayers=function(){Sa(),o().identifyLayers()};this.createLayer=function(a){var b=new svgedit.history.BatchCommand("Create Layer"),c=o().createLayer(a);b.addSubCommand(new svgedit.history.InsertElementCommand(c)),S(b),Ha(),va("changed",[c])},this.cloneLayer=function(a){var b=new svgedit.history.BatchCommand("Duplicate Layer"),c=i.createElementNS(e.SVG,"g"),d=i.createElementNS(e.SVG,"title");d.textContent=a,c.appendChild(d);var f=o().getCurrentLayer();$(f).after(c);var g,j=f.childNodes;for(g=0;g<j.length;g++){var k=j[g];"title"!=k.localName&&c.appendChild(Ba(k))}Ha(),Ra(),b.addSubCommand(new svgedit.history.InsertElementCommand(c)),S(b),h.setCurrentLayer(a),va("changed",[c])},this.deleteCurrentLayer=function(){var a=o().getCurrentLayer(),b=a.nextSibling,c=a.parentNode;if(a=o().deleteCurrentLayer()){var d=new svgedit.history.BatchCommand("Delete Layer");return d.addSubCommand(new svgedit.history.RemoveElementCommand(a,b,c)),S(d),Ha(),va("changed",[c]),!0}return!1},this.setCurrentLayer=function(a){var b=o().setCurrentLayer(svgedit.utilities.toXml(a));return b&&Ha(),b},this.renameCurrentLayer=function(a){var b,c=o();if(c.current_layer){var d=c.current_layer;if(!h.setCurrentLayer(a)){var e=new svgedit.history.BatchCommand("Rename Layer");for(b=0;b<c.getNumLayers()&&c.all_layers[b][1]!=d;++b);var f=c.getLayerName(b);c.all_layers[b][0]=svgedit.utilities.toXml(a);var g=d.childNodes.length;for(b=0;g>b;++b){var i=d.childNodes.item(b);if(i&&"title"==i.tagName){for(;i.firstChild;)i.removeChild(i.firstChild);return i.textContent=a,e.addSubCommand(new svgedit.history.ChangeElementCommand(i,{"#text":f})),S(e),va("changed",[d]),!0}}}c.current_layer=d}return!1},this.setCurrentLayerPosition=function(a){var b,c=o();if(c.current_layer&&a>=0&&a<c.getNumLayers()){for(b=0;b<c.getNumLayers()&&c.all_layers[b][1]!=c.current_layer;++b);if(b==c.getNumLayers())return!1;if(b!=a){var d=null,e=c.current_layer.nextSibling;return a>b?a<c.getNumLayers()-1&&(d=c.all_layers[a+1][1]):d=c.all_layers[a][1],k.insertBefore(c.current_layer,d),S(new svgedit.history.MoveElementCommand(c.current_layer,e,k)),Ra(),h.setCurrentLayer(c.getLayerName(a)),!0}}return!1},this.setLayerVisibility=function(a,b){var c=o(),d=c.getLayerVisibility(a),e=c.setLayerVisibility(a,b);if(!e)return!1;var f=d?"inline":"none";return S(new svgedit.history.ChangeElementCommand(e,{display:f},"Layer Visibility")),e==c.getCurrentLayer()&&(Ha(),xa.clear()),!0},this.moveSelectedToLayer=function(a){var b,c=null,d=o();for(b=0;b<d.getNumLayers();++b)if(d.getLayerName(b)==a){c=d.all_layers[b][1];break}if(!c)return!1;var e=new svgedit.history.BatchCommand("Move Elements to Layer"),f=t;for(b=f.length;b--;){var g=f[b];if(g){var h=g.nextSibling,i=g.parentNode;c.appendChild(g),e.addSubCommand(new svgedit.history.MoveElementCommand(g,h,i))}}return S(e),!0},this.mergeLayer=function(a){var b=new svgedit.history.BatchCommand("Merge Layer"),c=o(),d=$(c.current_layer).prev()[0];if(d){var e=c.current_layer.childNodes,f=(e.length,c.current_layer.nextSibling);for(b.addSubCommand(new svgedit.history.RemoveElementCommand(c.current_layer,f,k));c.current_layer.firstChild;){var g=c.current_layer.firstChild;if("title"!=g.localName){var h=g.nextSibling;d.appendChild(g),b.addSubCommand(new svgedit.history.MoveElementCommand(g,h,c.current_layer))}else{var i=g.nextSibling;b.addSubCommand(new svgedit.history.RemoveElementCommand(g,i,c.current_layer)),c.current_layer.removeChild(g)}}return k.removeChild(c.current_layer),a||(Ha(),Ra(),va("changed",[k]),S(b)),c.current_layer=d,b}},this.mergeAllLayers=function(){var a=new svgedit.history.BatchCommand("Merge all Layers"),b=o();for(b.current_layer=b.all_layers[b.getNumLayers()-1][1];$(k).children("g").length>1;)a.addSubCommand(h.mergeLayer(!0));Ha(),Ra(),va("changed",[k]),S(a)};var Sa=this.leaveContext=function(){var a,b=ba.length;if(b){for(a=0;b>a;a++){var c=ba[a],d=X(c,"orig_opac");1!==d?c.setAttribute("opacity",d):c.removeAttribute("opacity"),c.setAttribute("style","pointer-events: inherit")}ba=[],Ha(!0),va("contextset",null)}q=null},Ta=this.setContext=function(a){Sa(),"string"==typeof a&&(a=svgedit.utilities.getElem(a)),q=a,$(a).parentsUntil("#svgcontent").andSelf().siblings().each(function(){var a=this.getAttribute("opacity")||1;X(this,"orig_opac",a),this.setAttribute("opacity",.33*a),this.setAttribute("style","pointer-events: none"),ba.push(this)}),Ha(),va("contextset",q)};this.clear=function(){xa.clear(),Ha(),h.clearSvgContentElement(),h.current_drawing_=new svgedit.draw.Drawing(k),h.createLayer("Layer 1"),h.undoMgr.resetUndoStack(),T.initGroup(),la=T.getRubberBandBox(),va("cleared")},this.linkControlPoints=xa.linkControlPoints,this.getContentElem=function(){return k},this.getRootElem=function(){return j},this.getSelectedElems=function(){return t};var Ua=this.getResolution=function(){var a=k.getAttribute("width")/p,b=k.getAttribute("height")/p;return{w:a,h:b,zoom:p}};this.getZoom=function(){return p},this.getVersion=function(){return"svgcanvas.js ($Rev: 2705 $)"},this.setUiStrings=function(a){$.extend(U,a.notification)},this.setConfig=function(a){$.extend(f,a)},this.getTitle=function(a){var b;if(a=a||t[0]){a=$(a).data("gsvg")||$(a).data("symbol")||a;var c=a.childNodes;for(b=0;b<c.length;b++)if("title"==c[b].nodeName)return c[b].textContent;return""}},this.setGroupTitle=function(a){var b=t[0];b=$(b).data("gsvg")||b;var c=$(b).children("title"),d=new svgedit.history.BatchCommand("Set Label");if(a.length)if(c.length){var f=c[0];d.addSubCommand(new svgedit.history.ChangeElementCommand(f,{"#text":f.textContent})),f.textContent=a}else f=i.createElementNS(e.SVG,"title"),f.textContent=a,$(b).prepend(f),d.addSubCommand(new svgedit.history.InsertElementCommand(f));else{var g=c.nextSibling;d.addSubCommand(new svgedit.history.RemoveElementCommand(c[0],g,b)),c.remove()}S(d)},this.getDocumentTitle=function(){return h.getTitle(k)},this.setDocumentTitle=function(a){var b,c=k.childNodes,d=!1,f="",g=new svgedit.history.BatchCommand("Change Image Title");for(b=0;b<c.length;b++)if("title"==c[b].nodeName){d=c[b],f=d.textContent;break}d||(d=i.createElementNS(e.SVG,"title"),k.insertBefore(d,k.firstChild)),a.length?d.textContent=a:d.parentNode.removeChild(d),g.addSubCommand(new svgedit.history.ChangeElementCommand(d,{"#text":f})),S(g)},this.getEditorNS=function(a){return a&&k.setAttribute("xmlns:se",e.SE),e.SE},this.setResolution=function(a,b){var c,d=Ua(),e=d.w,f=d.h;if("fit"==a){var g=getStrokedBBox();if(!g)return!1;c=new svgedit.history.BatchCommand("Fit Canvas to Content");var i=ya();Ia(i);var l=[],m=[];$.each(i,function(a,b){l.push(-1*g.x),m.push(-1*g.y)});var n=h.moveSelectedElements(l,m,!0);c.addSubCommand(n),Ha(),a=Math.round(g.width),b=Math.round(g.height)}if(a!=e||b!=f){var o=j.suspendRedraw(1e3);c||(c=new svgedit.history.BatchCommand("Change Image Dimensions")),a=svgedit.units.convertToNum("width",a),b=svgedit.units.convertToNum("height",b),k.setAttribute("width",a),k.setAttribute("height",b),this.contentW=a,this.contentH=b,c.addSubCommand(new svgedit.history.ChangeElementCommand(k,{width:e,height:f})),k.setAttribute("viewBox",[0,0,a/p,b/p].join(" ")),c.addSubCommand(new svgedit.history.ChangeElementCommand(k,{viewBox:["0 0",e,f].join(" ")})),S(c),j.unsuspendRedraw(o),va("changed",[k])}return!0},this.getOffset=function(){return $(k).attr(["x","y"])},this.setBBoxZoom=function(a,b,c){var d,e=.85,f=function(a){if(!a)return!1;var d=Math.round(b/a.width*100*e)/100,f=Math.round(c/a.height*100*e)/100,g=Math.min(d,f);return h.setZoom(g),{zoom:g,bbox:a}};if("object"==typeof a){if(d=a,0==d.width||0==d.height){var g=d.zoom?d.zoom:p*d.factor;return h.setZoom(g),{zoom:p,bbox:d}}return f(d)}switch(a){case"selection":if(!t[0])return;var i=$.map(t,function(a){return a?a:void 0});d=getStrokedBBox(i);break;case"canvas":var j=Ua();e=.95,d={width:j.w,height:j.h,x:0,y:0};break;case"content":d=getStrokedBBox();break;case"layer":d=getStrokedBBox(ya(o().getCurrentLayer()));break;default:return}return f(d)},this.setZoom=function(a){if(a>0){var b=Ua();k.setAttribute("viewBox","0 0 "+b.w/a+" "+b.h/a),p=a,$.each(t,function(a,b){b&&T.requestSelector(b).resize()}),xa.zoomChange(),qa("zoomChanged",a)}},this.getMode=function(){return fa},this.setMode=function(a){xa.clear(!0),wa.clear(),ja=t[0]&&"text"==t[0].nodeName?ia:s,fa=a},this.getColor=function(a){return ja[a]},this.setColor=function(a,b,c){function d(a){"g"!=a.nodeName&&e.push(a)}s[a]=b,ja[a+"_paint"]={type:"solidColor"};for(var e=[],f=t.length;f--;){var g=t[f];g&&("g"==g.tagName?svgedit.utilities.walkTree(g,d):"fill"==a?"polyline"!=g.tagName&&"line"!=g.tagName&&e.push(g):e.push(g))}e.length>0&&(c?Xa(a,b,e):(Ya(a,b,e),va("changed",e)))};var Va=this.setGradient=function(a){if(ja[a+"_paint"]&&"solidColor"!=ja[a+"_paint"].type){var b=h[a+"Grad"],c=Wa(b),d=svgedit.utilities.findDefs();if(c)b=c;else{b=d.appendChild(i.importNode(b,!0)),b.id=ua()}h.setColor(a,"url(#"+b.id+")")}},Wa=function(a){for(var b=svgedit.utilities.findDefs(),c=$(b).find("linearGradient, radialGradient"),d=c.length,f=["r","cx","cy","fx","fy"];d--;){var g=c[d];if("linearGradient"==a.tagName){if(a.getAttribute("x1")!=g.getAttribute("x1")||a.getAttribute("y1")!=g.getAttribute("y1")||a.getAttribute("x2")!=g.getAttribute("x2")||a.getAttribute("y2")!=g.getAttribute("y2"))continue}else{var h=$(a).attr(f),i=$(g).attr(f),j=!1;if($.each(f,function(a,b){h[b]!=i[b]&&(j=!0)}),j)continue}var k=a.getElementsByTagNameNS(e.SVG,"stop"),l=g.getElementsByTagNameNS(e.SVG,"stop");if(k.length==l.length){for(var m=k.length;m--;){var n=k[m],o=l[m];if(n.getAttribute("offset")!=o.getAttribute("offset")||n.getAttribute("stop-opacity")!=o.getAttribute("stop-opacity")||n.getAttribute("stop-color")!=o.getAttribute("stop-color"))break}if(-1==m)return g}}return null};this.setPaint=function(a,b){var c=new $.jGraduate.Paint(b);switch(this.setPaintOpacity(a,c.alpha/100,!0),ja[a+"_paint"]=c,c.type){case"solidColor":this.setColor(a,"none"!=c.solidColor?"#"+c.solidColor:"none");break;case"linearGradient":case"radialGradient":h[a+"Grad"]=c[c.type],Va(a)}},this.setStrokePaint=function(a){this.setPaint("stroke",a)},this.setFillPaint=function(a){this.setPaint("fill",a)},this.getStrokeWidth=function(){return ja.stroke_width},this.setStrokeWidth=function(a){function b(a){"g"!=a.nodeName&&c.push(a)}if(0==a&&["line","path"].indexOf(fa)>=0)return void h.setStrokeWidth(1);ja.stroke_width=a;for(var c=[],d=t.length;d--;){var e=t[d];e&&("g"==e.tagName?svgedit.utilities.walkTree(e,b):c.push(e))}c.length>0&&(Ya("stroke-width",a,c),va("changed",t))},this.setStrokeAttr=function(a,b){s[a.replace("-","_")]=b;for(var c=[],d=t.length;d--;){var e=t[d];e&&("g"==e.tagName?svgedit.utilities.walkTree(e,function(a){"g"!=a.nodeName&&c.push(a)}):c.push(e))}c.length>0&&(Ya(a,b,c),va("changed",t))},this.getStyle=function(){return s},this.getOpacity=function(){return s.opacity},this.setOpacity=function(a){
s.opacity=a,Ya("opacity",a)},this.getFillOpacity=function(){return s.fill_opacity},this.getStrokeOpacity=function(){return s.stroke_opacity},this.setPaintOpacity=function(a,b,c){s[a+"_opacity"]=b,c?Xa(a+"-opacity",b):Ya(a+"-opacity",b)},this.getPaintOpacity=function(a){return"fill"===a?this.getFillOpacity():this.getStrokeOpacity()},this.getBlur=function(a){var b=0;if(a){var c=a.getAttribute("filter");if(c){var d=svgedit.utilities.getElem(a.id+"_blur");d&&(b=d.firstChild.getAttribute("stdDeviation"))}}return b},function(){function a(){var a=h.undoMgr.finishUndoableChange();b.addSubCommand(a),S(b),b=null,c=null}var b=null,c=null,d=!1;h.setBlurNoUndo=function(a){if(!c)return void h.setBlur(a);if(0===a)Xa("filter",""),d=!0;else{var b=t[0];d&&Xa("filter","url(#"+b.id+"_blur)"),svgedit.browser.isWebkit()&&(console.log("e",b),b.removeAttribute("filter"),b.setAttribute("filter","url(#"+b.id+"_blur)")),Xa("stdDeviation",a,[c.firstChild]),h.setBlurOffsets(c,a)}},h.setBlurOffsets=function(a,b){b>3?svgedit.utilities.assignAttributes(a,{x:"-50%",y:"-50%",width:"200%",height:"200%"},100):svgedit.browser.isWebkit()||(a.removeAttribute("x"),a.removeAttribute("y"),a.removeAttribute("width"),a.removeAttribute("height"))},h.setBlur=function(d,e){if(b)return void a();var f=t[0],g=f.id;c=svgedit.utilities.getElem(g+"_blur"),d-=0;var i=new svgedit.history.BatchCommand;if(c)0===d&&(c=null);else{var j=u({element:"feGaussianBlur",attr:{"in":"SourceGraphic",stdDeviation:d}});c=u({element:"filter",attr:{id:g+"_blur"}}),c.appendChild(j),svgedit.utilities.findDefs().appendChild(c),i.addSubCommand(new svgedit.history.InsertElementCommand(c))}var k={filter:f.getAttribute("filter")};return 0===d?(f.removeAttribute("filter"),void i.addSubCommand(new svgedit.history.ChangeElementCommand(f,k))):(Ya("filter","url(#"+g+"_blur)"),i.addSubCommand(new svgedit.history.ChangeElementCommand(f,k)),h.setBlurOffsets(c,d),b=i,h.undoMgr.beginUndoableChange("stdDeviation",[c?c.firstChild:null]),void(e&&(h.setBlurNoUndo(d),a())))}}(),this.getBold=function(){var a=t[0];return null!=a&&"text"==a.tagName&&null==t[1]?"bold"==a.getAttribute("font-weight"):!1},this.setBold=function(a){var b=t[0];null!=b&&"text"==b.tagName&&null==t[1]&&Ya("font-weight",a?"bold":"normal"),t[0].textContent||wa.setCursor()},this.getItalic=function(){var a=t[0];return null!=a&&"text"==a.tagName&&null==t[1]?"italic"==a.getAttribute("font-style"):!1},this.setItalic=function(a){var b=t[0];null!=b&&"text"==b.tagName&&null==t[1]&&Ya("font-style",a?"italic":"normal"),t[0].textContent||wa.setCursor()},this.getFontFamily=function(){return ia.font_family},this.setFontFamily=function(a){ia.font_family=a,Ya("font-family",a),t[0]&&!t[0].textContent&&wa.setCursor()},this.setFontColor=function(a){ia.fill=a,Ya("fill",a)},this.getFontColor=function(){return ia.fill},this.getFontSize=function(){return ia.font_size},this.setFontSize=function(a){ia.font_size=a,Ya("font-size",a),t[0].textContent||wa.setCursor()},this.setDefaultFontSize=function(a){ia.font_size=a},this.getText=function(){var a=t[0];return null==a?"":a.textContent},this.setTextContent=function(a){Ya("#text",a),wa.init(a),wa.setCursor()},this.setImageURL=function(a){var b=t[0];if(b){var c=$(b).attr(["width","height"]),d=!c.width||!c.height,e=D(b);if(e!==a)d=!0;else if(!d)return;var f=new svgedit.history.BatchCommand("Change Image URL");E(b,a),f.addSubCommand(new svgedit.history.ChangeElementCommand(b,{"#href":e})),d?$(new Image).load(function(){var a=$(b).attr(["width","height"]);$(b).attr({width:this.width,height:this.height}),T.requestSelector(b).resize(),f.addSubCommand(new svgedit.history.ChangeElementCommand(b,a)),S(f),va("changed",[b])}).attr("src",a):S(f)}},this.setLinkURL=function(a){var b=t[0];if(b){if("a"!==b.tagName){var c=$(b).parents("a");if(!c.length)return;b=c[0]}var d=D(b);if(d!==a){var e=new svgedit.history.BatchCommand("Change Link URL");E(b,a),e.addSubCommand(new svgedit.history.ChangeElementCommand(b,{"#href":d})),S(e)}}},this.setRectRadius=function(a){var b=t[0];if(null!=b&&"rect"==b.tagName){var c=b.getAttribute("rx");c!=a&&(b.setAttribute("rx",a),b.setAttribute("ry",a),S(new svgedit.history.ChangeElementCommand(b,{rx:c,ry:c},"Radius")),va("changed",[b]))}},this.makeHyperlink=function(a){h.groupSelectedElements("a",a)},this.removeHyperlink=function(){h.ungroupSelectedElement()},this.setSegType=function(a){xa.setSegType(a)},this.convertToPath=function(a,b){if(null==a){return void $.each(t,function(a,b){b&&h.convertToPath(b)})}if(!b)var c=new svgedit.history.BatchCommand("Convert element to Path");var d=b?{}:{fill:s.fill,"fill-opacity":s.fill_opacity,stroke:s.stroke,"stroke-width":s.stroke_width,"stroke-dasharray":s.stroke_dasharray,"stroke-linejoin":s.stroke_linejoin,"stroke-linecap":s.stroke_linecap,"stroke-opacity":s.stroke_opacity,opacity:s.opacity,visibility:"hidden"};$.each(["marker-start","marker-end","marker-mid","filter","clip-path"],function(){a.getAttribute(this)&&(d[this]=a.getAttribute(this))});var e=u({element:"path",attr:d}),f=a.getAttribute("transform");f&&e.setAttribute("transform",f);var g=a.id,i=a.parentNode;a.nextSibling?i.insertBefore(e,a):i.appendChild(e);var j,k,l="",m=function(a){$.each(a,function(a,b){var c,d=b[0],e=b[1];for(l+=d,c=0;c<e.length;c+=2)l+=e[c]+","+e[c+1]+" "})},n=1.81;switch(a.tagName){case"ellipse":case"circle":j=$(a).attr(["rx","ry","cx","cy"]);var o=j.cx,p=j.cy;k=j.rx,ry=j.ry,"circle"==a.tagName&&(k=ry=$(a).attr("r")),m([["M",[o-k,p]],["C",[o-k,p-ry/n,o-k/n,p-ry,o,p-ry]],["C",[o+k/n,p-ry,o+k,p-ry/n,o+k,p]],["C",[o+k,p+ry/n,o+k/n,p+ry,o,p+ry]],["C",[o-k/n,p+ry,o-k,p+ry/n,o-k,p]],["Z",[]]]);break;case"path":l=a.getAttribute("d");break;case"line":j=$(a).attr(["x1","y1","x2","y2"]),l="M"+j.x1+","+j.y1+"L"+j.x2+","+j.y2;break;case"polyline":case"polygon":l="M"+a.getAttribute("points");break;case"rect":var q=$(a).attr(["rx","ry"]);k=q.rx,ry=q.ry;var r=a.getBBox(),v=r.x,w=r.y,x=r.width,y=r.height;n=4-n,m(k||ry?[["M",[v,w+ry]],["C",[v,w+ry/n,v+k/n,w,v+k,w]],["L",[v+x-k,w]],["C",[v+x-k/n,w,v+x,w+ry/n,v+x,w+ry]],["L",[v+x,w+y-ry]],["C",[v+x,w+y-ry/n,v+x-k/n,w+y,v+x-k,w+y]],["L",[v+k,w+y]],["C",[v+k/n,w+y,v,w+y-ry/n,v,w+y-ry]],["L",[v,w+ry]],["Z",[]]]:[["M",[v,w]],["L",[v+x,w]],["L",[v+x,w+y]],["L",[v,w+y]],["L",[v,w]],["Z",[]]]);break;default:e.parentNode.removeChild(e)}if(l&&e.setAttribute("d",l),b){xa.resetOrientation(e);var z=!1;try{z=e.getBBox()}catch(A){}return e.parentNode.removeChild(e),z}if(f){var B=svgedit.transformlist.getTransformList(e);svgedit.math.hasMatrixTransform(B)&&xa.resetOrientation(e)}var C=a.nextSibling;c.addSubCommand(new svgedit.history.RemoveElementCommand(a,C,i)),c.addSubCommand(new svgedit.history.InsertElementCommand(e)),Ha(),a.parentNode.removeChild(a),e.setAttribute("id",g),e.removeAttribute("visibility"),Ia([e],!0),S(c)};var Xa=function(a,b,c){var d=j.suspendRedraw(1e3);"pathedit"==fa&&xa.moveNode(a,b),c=c||t;for(var e=c.length,f=["g","polyline","path"],g=["transform","opacity","filter"];e--;){var i=c[e];if(null!=i)if(("x"===a||"y"===a)&&f.indexOf(i.tagName)>=0){var k=getStrokedBBox([i]),l="x"===a?b-k.x:0,m="y"===a?b-k.y:0;h.moveSelectedElements(l*p,m*p,!0)}else{"g"===i.tagName&&g.indexOf(a)>=0;var n="#text"===a?i.textContent:i.getAttribute(a);if(null==n&&(n=""),n!==String(b)){if("#text"==a){svgedit.utilities.getBBox(i).width;i.textContent=b,/rotate/.test(i.getAttribute("transform"))&&(i=Ca(i))}else"#href"==a?E(i,b):i.setAttribute(a,b);"textedit"===fa&&"#text"!==a&&i.textContent.length&&wa.toSelectMode(i),svgedit.browser.isGecko()&&"text"===i.nodeName&&/rotate/.test(i.getAttribute("transform"))&&(0===String(b).indexOf("url")||["font-size","font-family","x","y"].indexOf(a)>=0&&i.textContent)&&(i=Ca(i)),t.indexOf(i)>=0&&setTimeout(function(){i.parentNode&&T.requestSelector(i).resize()},0);var o=svgedit.utilities.getRotationAngle(i);if(0!=o&&"transform"!=a)for(var q=svgedit.transformlist.getTransformList(i),r=q.numberOfItems;r--;){var s=q.getItem(r);if(4==s.type){q.removeItem(r);var u=svgedit.utilities.getBBox(i),v=svgedit.math.transformPoint(u.x+u.width/2,u.y+u.height/2,svgedit.math.transformListToTransform(q).matrix),w=v.x,x=v.y,y=j.createSVGTransform();y.setRotate(o,w,x),q.insertItemBefore(y,r);break}}}}}j.unsuspendRedraw(d)},Ya=this.changeSelectedAttribute=function(a,b,c){c=c||t,h.undoMgr.beginUndoableChange(a,c);c.length;Xa(a,b,c);var d=h.undoMgr.finishUndoableChange();d.isEmpty()||S(d)};this.deleteSelectedElements=function(){var a,b=new svgedit.history.BatchCommand("Delete Elements"),c=t.length,d=[];for(a=0;c>a;++a){var e=t[a];if(null==e)break;var f=e.parentNode,g=e;T.releaseSelector(g),svgedit.path.removePath_(g.id),"a"===f.tagName&&1===f.childNodes.length&&(g=f,f=f.parentNode);var h=g.nextSibling,i=f.removeChild(g);d.push(e),t[a]=null,b.addSubCommand(new P(i,h,f))}b.isEmpty()||S(b),va("changed",d),Ha()},this.cutSelectedElements=function(){var a,b=new svgedit.history.BatchCommand("Cut Elements"),c=t.length,d=[];for(a=0;c>a;++a){var e=t[a];if(null==e)break;var f=e.parentNode,g=e;T.releaseSelector(g),svgedit.path.removePath_(g.id);var i=g.nextSibling,j=f.removeChild(g);d.push(e),t[a]=null,b.addSubCommand(new P(j,i,f))}b.isEmpty()||S(b),va("changed",d),Ha(),h.clipBoard=d},this.copySelectedElements=function(){h.clipBoard=$.merge([],t)},this.pasteElements=function(a,b,c){var d=h.clipBoard,e=d.length;if(e){for(var f=[],g=new svgedit.history.BatchCommand("Paste elements");e--;){var i=d[e];if(i){var j=Ba(i);svgedit.utilities.getElem(i.id)||(j.id=i.id),f.push(j),(q||o().getCurrentLayer()).appendChild(j),g.addSubCommand(new svgedit.history.InsertElementCommand(j))}}if(Ja(f),"in_place"!==a){var k,l;a?"point"===a&&(k=b,l=c):(k=oa.x,l=oa.y);var m=getStrokedBBox(f),n=k-(m.x+m.width/2),p=l-(m.y+m.height/2),r=[],s=[];$.each(f,function(a,b){r.push(n),s.push(p)});var t=h.moveSelectedElements(r,s,!1);g.addSubCommand(t)}S(g),va("changed",f)}},this.groupSelectedElements=function(a,b){a||(a="g");var c="";switch(a){case"a":c="Make hyperlink";var d="";arguments.length>1&&(d=b);break;default:a="g",c="Group Elements"}var e=new svgedit.history.BatchCommand(c),f=u({element:a,attr:{id:ua()}});"a"===a&&E(f,d),e.addSubCommand(new svgedit.history.InsertElementCommand(f));for(var g=t.length;g--;){var h=t[g];if(null!=h){"a"===h.parentNode.tagName&&1===h.parentNode.childNodes.length&&(h=h.parentNode);var i=h.nextSibling,j=h.parentNode;f.appendChild(h),e.addSubCommand(new svgedit.history.MoveElementCommand(h,i,j))}}e.isEmpty()||S(e),Ja([f],!0)};var Za=this.pushGroupProperties=function(a,b){var c,d,e,f=a.childNodes,g=f.length,i=a.getAttribute("transform"),k=svgedit.transformlist.getTransformList(a),l=svgedit.math.transformListToTransform(k).matrix,m=new svgedit.history.BatchCommand("Push group properties"),n=0,o=svgedit.utilities.getRotationAngle(a),p=$(a).attr(["filter","opacity"]);for(n=0;g>n;n++){var q=f[n];if(1===q.nodeType){if(null!==p.opacity&&1!==p.opacity){var r=(q.getAttribute("opacity")||1,Math.round((q.getAttribute("opacity")||1)*p.opacity*100)/100);Ya("opacity",r,[q])}if(p.filter){var s=this.getBlur(q),t=s;d||(d=this.getBlur(a)),s?s=Number(d)+Number(s):0===s&&(s=d),t?c=svgedit.utilities.getRefElem(q.getAttribute("filter")):c?(c=Ba(c),svgedit.utilities.findDefs().appendChild(c)):c=svgedit.utilities.getRefElem(p.filter);var u="feGaussianBlur"===c.firstChild.tagName?"blur":"filter";c.id=q.id+"_"+u,Ya("filter","url(#"+c.id+")",[q]),s&&(Ya("stdDeviation",s,[c.firstChild]),h.setBlurOffsets(c,s))}var v=svgedit.transformlist.getTransformList(q);if(~q.tagName.indexOf("Gradient")&&(v=null),v&&"defs"!==q.tagName&&k.numberOfItems){if(o&&1==k.numberOfItems){var w=k.getItem(0).matrix,x=j.createSVGMatrix(),y=svgedit.utilities.getRotationAngle(q);y&&(x=v.getItem(0).matrix);var z=svgedit.utilities.getBBox(q),A=svgedit.math.transformListToTransform(v).matrix,B=svgedit.math.transformPoint(z.x+z.width/2,z.y+z.height/2,A),C=o+y,D=j.createSVGTransform();D.setRotate(C,B.x,B.y);var E=svgedit.math.matrixMultiply(w,x,D.matrix.inverse());if(y&&v.removeItem(0),C&&(v.numberOfItems?v.insertItemBefore(D,0):v.appendItem(D)),E.e||E.f){var F=j.createSVGTransform();F.setTranslate(E.e,E.f),v.numberOfItems?v.insertItemBefore(F,0):v.appendItem(F)}}else{var G=q.getAttribute("transform");e={},e.transform=G||"";var H=j.createSVGTransform(),I=svgedit.math.transformListToTransform(v).matrix,J=I.inverse(),K=svgedit.math.matrixMultiply(J,l,I);H.setMatrix(K),v.appendItem(H)}var L=svgedit.recalculate.recalculateDimensions(q);L&&m.addSubCommand(L)}}}return i&&(e={},e.transform=i,a.setAttribute("transform",""),a.removeAttribute("transform"),m.addSubCommand(new svgedit.history.ChangeElementCommand(a,e))),b&&!m.isEmpty()?m:void 0};this.ungroupSelectedElement=function(){var a=t[0];if($(a).data("gsvg")||$(a).data("symbol"))return void Qa(a);if("use"===a.tagName){var b=svgedit.utilities.getElem(D(a).substr(1));return $(a).data("symbol",b).data("ref",b),void Qa(a)}var c=$(a).parents("a");if(c.length&&(a=c[0]),"g"===a.tagName||"a"===a.tagName){var d=new svgedit.history.BatchCommand("Ungroup Elements"),e=Za(a,!0);e&&d.addSubCommand(e);for(var f=a.parentNode,g=a.nextSibling,h=new Array(a.childNodes.length),i=0;a.firstChild;){var j=a.firstChild,k=j.nextSibling,l=j.parentNode;if("title"!==j.tagName)h[i++]=j=f.insertBefore(j,g),d.addSubCommand(new svgedit.history.MoveElementCommand(j,k,l));else{var m=j.nextSibling;d.addSubCommand(new svgedit.history.RemoveElementCommand(j,m,l)),l.removeChild(j)}}Ha();var n=a.nextSibling;a=f.removeChild(a),d.addSubCommand(new svgedit.history.RemoveElementCommand(a,n,f)),d.isEmpty()||S(d),Ia(h)}},this.moveToTopSelectedElement=function(){var a=t[0];if(null!=a){var b=a,c=b.parentNode,d=b.nextSibling;b=b.parentNode.appendChild(b),d!=b.nextSibling&&(S(new svgedit.history.MoveElementCommand(b,d,c,"top")),va("changed",[b]))}},this.moveToBottomSelectedElement=function(){var a=t[0];if(null!=a){var b=a,c=b.parentNode,d=b.nextSibling,e=b.parentNode.firstChild;"title"==e.tagName&&(e=e.nextSibling),"defs"==e.tagName&&(e=e.nextSibling),b=b.parentNode.insertBefore(b,e),d!=b.nextSibling&&(S(new svgedit.history.MoveElementCommand(b,d,c,"bottom")),va("changed",[b]))}},this.moveUpDownSelected=function(a){var b=t[0];if(b){ma=[];var c,d,e=$(sa(getStrokedBBox([b]))).toArray();if("Down"==a&&e.reverse(),$.each(e,function(){return d?(c=this,!1):void(this==b&&(d=!0))}),c){var f=b,g=f.parentNode,h=f.nextSibling;$(c)["Down"==a?"before":"after"](f),h!=f.nextSibling&&(S(new svgedit.history.MoveElementCommand(f,h,g,"Move "+a)),va("changed",[f]))}}},this.moveSelectedElements=function(a,b,c){a.constructor!=Array&&(a/=p,b/=p),c=c||!0;for(var d=new svgedit.history.BatchCommand("position"),e=t.length;e--;){var f=t[e];if(null!=f){var g=j.createSVGTransform(),h=svgedit.transformlist.getTransformList(f);a.constructor==Array?g.setTranslate(a[e],b[e]):g.setTranslate(a,b),h.numberOfItems?h.insertItemBefore(g,0):h.appendItem(g);var i=svgedit.recalculate.recalculateDimensions(f);i&&d.addSubCommand(i),T.requestSelector(f).resize()}}return d.isEmpty()?void 0:(c&&S(d),va("changed",t),d)},this.cloneSelectedElements=function(a,b){function c(a,b){return $(b).index()-$(a).index()}var d,e,f=new svgedit.history.BatchCommand("Clone Elements"),g=t.length;for(t.sort(c),d=0;g>d&&(e=t[d],null!=e);++d);var h=t.slice(0,d);for(this.clearSelection(!0),d=h.length;d--;)e=h[d]=Ba(h[d]),(q||o().getCurrentLayer()).appendChild(e),f.addSubCommand(new svgedit.history.InsertElementCommand(e));f.isEmpty()||(Ia(h.reverse()),this.moveSelectedElements(a,b,!1),S(f))},this.alignSelectedElements=function(a,b){var c,d,e=[],f=Number.MAX_VALUE,g=Number.MIN_VALUE,i=Number.MAX_VALUE,j=Number.MIN_VALUE,k=Number.MIN_VALUE,l=Number.MIN_VALUE,m=t.length;if(m){for(c=0;m>c&&null!=t[c];++c)switch(d=t[c],e[c]=getStrokedBBox([d]),b){case"smallest":(("l"==a||"c"==a||"r"==a)&&(k==Number.MIN_VALUE||k>e[c].width)||("t"==a||"m"==a||"b"==a)&&(l==Number.MIN_VALUE||l>e[c].height))&&(f=e[c].x,i=e[c].y,g=e[c].x+e[c].width,j=e[c].y+e[c].height,k=e[c].width,l=e[c].height);break;case"largest":(("l"==a||"c"==a||"r"==a)&&(k==Number.MIN_VALUE||k<e[c].width)||("t"==a||"m"==a||"b"==a)&&(l==Number.MIN_VALUE||l<e[c].height))&&(f=e[c].x,i=e[c].y,g=e[c].x+e[c].width,j=e[c].y+e[c].height,k=e[c].width,l=e[c].height);break;default:e[c].x<f&&(f=e[c].x),e[c].y<i&&(i=e[c].y),e[c].x+e[c].width>g&&(g=e[c].x+e[c].width),e[c].y+e[c].height>j&&(j=e[c].y+e[c].height)}"page"==b&&(f=0,i=0,g=h.contentW,j=h.contentH);var n=new Array(m),o=new Array(m);for(c=0;m>c&&null!=t[c];++c){d=t[c];var p=e[c];switch(n[c]=0,o[c]=0,a){case"l":n[c]=f-p.x;break;case"c":n[c]=(f+g)/2-(p.x+p.width/2);break;case"r":n[c]=g-(p.x+p.width);break;case"t":o[c]=i-p.y;break;case"m":o[c]=(i+j)/2-(p.y+p.height/2);break;case"b":o[c]=j-(p.y+p.height)}}this.moveSelectedElements(n,o)}},this.contentW=Ua().w,this.contentH=Ua().h,this.updateCanvas=function(a,b){j.setAttribute("width",a),j.setAttribute("height",b);var c=$("#canvasBackground")[0],d=k.getAttribute("x"),e=k.getAttribute("y"),f=a/2-this.contentW*p/2,g=b/2-this.contentH*p/2;svgedit.utilities.assignAttributes(k,{width:this.contentW*p,height:this.contentH*p,x:f,y:g,viewBox:"0 0 "+this.contentW+" "+this.contentH}),svgedit.utilities.assignAttributes(c,{width:k.getAttribute("width"),height:k.getAttribute("height"),x:f,y:g});var h=svgedit.utilities.getElem("background_image");return h&&svgedit.utilities.assignAttributes(h,{width:"100%",height:"100%"}),T.selectorParentGroup.setAttribute("transform","translate("+f+","+g+")"),qa("canvasUpdated",{new_x:f,new_y:g,old_x:d,old_y:e,d_x:f-d,d_y:g-e}),{x:f,y:g,old_x:d,old_y:e,d_x:f-d,d_y:g-e}},this.setBackground=function(a,b){var c=svgedit.utilities.getElem("canvasBackground"),d=$(c).find("rect")[0],f=svgedit.utilities.getElem("background_image");d.setAttribute("fill",a),b?(f||(f=i.createElementNS(e.SVG,"image"),svgedit.utilities.assignAttributes(f,{id:"background_image",width:"100%",height:"100%",preserveAspectRatio:"xMinYMin",style:"pointer-events:none"})),E(f,b),c.appendChild(f)):f&&f.parentNode.removeChild(f)},this.cycleElement=function(a){var b,c=t[0],d=!1,e=ya(q||o().getCurrentLayer());if(e.length){if(null==c)b=a?e.length-1:0,d=e[b];else for(var f=e.length;f--;)if(e[f]==c){b=a?f-1:f+1,b>=e.length?b=0:0>b&&(b=e.length-1),d=e[b];break}Ja([d],!0),va("selected",t)}},this.clear(),this.getPrivateMethods=function(){var a={addCommandToHistory:S,setGradient:Va,addSvgElementFromJson:u,assignAttributes:H,BatchCommand:R,call:va,ChangeElementCommand:Q,copyElem:Ba,ffClone:Ca,findDefs:B,findDuplicateGradient:Wa,getElem:G,getId:ta,getIntersectionList:sa,getMouseTarget:Ka,getNextId:ua,getPathBBox:F,getUrlFromAttr:C,hasMatrixTransform:z,identifyLayers:Ra,InsertElementCommand:O,isIdentity:svgedit.math.isIdentity,logMatrix:Fa,matrixMultiply:w,MoveElementCommand:N,preventClickDefault:La,recalculateAllSelectedDimensions:Da,recalculateDimensions:K,remapElement:J,RemoveElementCommand:P,removeUnusedDefElems:Ma,round:ra,runExtensions:qa,sanitizeSvg:M,SVGEditTransformList:svgedit.transformlist.SVGTransformList,toString:toString,transformBox:svgedit.math.transformBox,transformListToTransform:A,transformPoint:v,walkTree:svgedit.utilities.walkTree};return a}};var lastToolBarPosition;!function(){window.svgEditor||(window.svgEditor=function(a){function b(b,c){var e=d.setSvgString(b)!==!1;c=c||a.noop,e?c(!0):a.alert(o.notification.errorLoadingSVG,function(){c(!1)})}var c={};c.tool_scale=1,c.langChanged=!1,c.showSaveWarning=!1,c.storagePromptClosed=!1;var d,e,f=svgedit.utilities,g=!1,h=[],i={},j={lang:"",iconsize:"",bkgd_color:"#FFF",bkgd_url:"",img_save:"embed",save_notice_done:!1,export_notice_done:!1},k={},l={extensions:[],allowedOrigins:[]},m=["ext-overview_window.js","ext-markers.js","ext-connector.js","ext-eyedropper.js","ext-shapes.js","ext-imagelib.js","ext-grid.js","ext-polygon.js","ext-star.js","ext-panning.js"],n={canvasName:"default",canvas_expansion:3,initFill:{color:"FF0000",opacity:1},initStroke:{width:5,color:"000000",opacity:1},initOpacity:1,colorPickerCSS:null,initTool:"select",wireframe:!1,showlayers:!1,no_save_warning:!1,imgPath:"images/",langPath:"locale/",extPath:"extensions/",jGraduatePath:"jgraduate/images/",dimensions:[640,480],gridSnapping:!1,gridColor:"#000",baseUnit:"px",snappingStep:10,showRulers:!0,preventAllURLConfig:!1,preventURLContentLoading:!1,lockExtensions:!1,noDefaultExtensions:!1,showGrid:!0,noStorageOnLoad:!1,forceStorage:!1,emptyStorageOnDecline:!1},o=c.uiStrings={common:{ok:"OK",cancel:"Cancel",key_up:"Up",key_down:"Down",key_backspace:"Backspace",key_del:"Del"},layers:{layer:"Layer"},notification:{invalidAttrValGiven:"Invalid value given",noContentToFitTo:"No content to fit to",dupeLayerName:"There is already a layer named that!",enterUniqueLayerName:"Please enter a unique layer name",enterNewLayerName:"Please enter the new layer name",layerHasThatName:"Layer already has that name",QmoveElemsToLayer:"Move selected elements to layer '%s'?",QwantToClear:"Do you want to clear the drawing?\nThis will also erase your undo history!",QwantToOpen:"Do you want to open a new file?\nThis will also erase your undo history!",QerrorsRevertToSource:"There were parsing errors in your SVG source.\nRevert back to original SVG source?",QignoreSourceChanges:"Ignore changes made to SVG source?",featNotSupported:"Feature not supported",enterNewImgURL:"Enter the new image URL",defsFailOnSave:"NOTE: Due to a bug in your browser, this image may appear wrong (missing gradients or elements). It will however appear correct once actually saved.",loadingImage:"Loading image, please wait...",saveFromBrowser:"Select 'Save As...' in your browser to save this image as a %s file.",noteTheseIssues:"Also note the following issues: ",unsavedChanges:"There are unsaved changes.",enterNewLinkURL:"Enter the new hyperlink URL",errorLoadingSVG:"Error: Unable to load SVG data",URLloadFail:"Unable to load from URL",retrieving:"Retrieving '%s' ..."}};return a.pref=function(a,b){return b?(k[a]=b,void(c.curPrefs=k)):a in k?k[a]:j[a]},c.loadContentAndPrefs=function(){if(l.forceStorage||!l.noStorageOnLoad&&document.cookie.match(/(?:^|;\s*)store=(?:prefsAndContent|prefsOnly)/)){if(c.storage&&(l.forceStorage||!l.noStorageOnLoad&&document.cookie.match(/(?:^|;\s*)store=prefsAndContent/))){var a="svgedit-"+l.canvasName,b=c.storage.getItem(a);b&&c.loadFromString(b)}var d;for(d in j)if(j.hasOwnProperty(d)){var e="svg-edit-"+d;if(c.storage){var g=c.storage.getItem(e);g&&(j[d]=String(g))}else if(window.widget)j[d]=widget.preferenceForKey(e);else{var h=document.cookie.match(new RegExp("(?:^|;\\s*)"+f.preg_quote(encodeURIComponent(e))+"=([^;]+)"));j[d]=h?decodeURIComponent(h[1]):""}}}},c.setConfig=function(b,d){function e(b,c,d){b[c]&&"object"==typeof b[c]?a.extend(!0,b[c],d):b[c]=d}d=d||{},a.each(b,function(c,f){if(b.hasOwnProperty(c))if(j.hasOwnProperty(c)){if(d.overwrite===!1&&(l.preventAllURLConfig||k.hasOwnProperty(c)))return;d.allowInitialUserOverride===!0?j[c]=f:a.pref(c,f)}else if(["extensions","allowedOrigins"].indexOf(c)>-1){if(d.overwrite===!1&&(l.preventAllURLConfig||"allowedOrigins"===c||"extensions"===c&&l.lockExtensions))return;l[c]=l[c].concat(f)}else if(n.hasOwnProperty(c)){if(d.overwrite===!1&&(l.preventAllURLConfig||l.hasOwnProperty(c)))return;if(l.hasOwnProperty(c)){if(d.overwrite===!1)return;e(l,c,f)}else d.allowInitialUserOverride===!0?e(n,c,f):n[c]&&"object"==typeof n[c]?(l[c]={},a.extend(!0,l[c],f)):l[c]=f}}),c.curConfig=l},c.setCustomHandlers=function(b){c.ready(function(){b.open&&(a('#tool_open > input[type="file"]').remove(),a("#tool_open").show(),d.open=b.open),b.save&&(c.showSaveWarning=!1,d.bind("saved",b.save)),(b.exportImage||b.pngsave)&&d.bind("exported",b.exportImage||b.pngsave),i=b})},c.randomizeIds=function(){d.randomizeIds(arguments)},c.init=function(){function g(){k=a.extend(!0,{},j,k),c.curPrefs=k}function h(){l=a.extend(!0,{},n,l),l.noDefaultExtensions||(l.extensions=l.extensions.concat(m)),a.each(["extensions","allowedOrigins"],function(b,c){l[c]=a.grep(l[c],function(a,b){return b===l[c].indexOf(a)})}),c.curConfig=l}function p(b,c){var e=b.id,f=e.split("_"),g=f[0],h=f[1];c&&d.setStrokeAttr("stroke-"+g,h),ga(),z("#cur_"+g,e,20),a(b).addClass("current").siblings().removeClass("current")}function q(b,c){a.pref("bkgd_color",b),a.pref("bkgd_url",c),d.setBackground(b,c)}function r(){var b=d.getHref(V);b=0===b.indexOf("data:")?"":b,a.prompt(o.notification.enterNewImgURL,b,function(a){a&&ja(a)})}function s(){d.deleteCurrentLayer()&&(oa(),ca(),a("#layerlist tr.layer").removeClass("layersel"),a("#layerlist tr.layer:first").addClass("layersel"))}function t(b){var c=a("#layerlist tr.layersel").index(),e=d.getCurrentDrawing().getNumLayers();(c>0||e-1>c)&&(c+=b,d.setCurrentLayerPosition(e-c-1),ca())}function u(a){a.stopPropagation(),a.preventDefault()}function v(a){a.stopPropagation(),a.preventDefault()}function w(a){a.stopPropagation(),a.preventDefault()}try{"localStorage"in window&&(c.storage=localStorage)}catch(x){}var y=[];a("#lang_select option").each(function(){y.push(this.value)}),function(){var b,d;if(e=a.deparam.querystring(!0),a.isEmptyObject(e))h(),c.loadContentAndPrefs(),g();else{if(e.dimensions&&(e.dimensions=e.dimensions.split(",")),e.bkgd_color&&(e.bkgd_color="#"+e.bkgd_color),e.extensions&&(e.extensions=e.extensions.match(/[:\/\\]/)?"":e.extensions.split(",")),a.each(["extPath","imgPath","langPath","jGraduatePath"],function(a){e[a]&&delete e[a]}),c.setConfig(e,{overwrite:!1}),h(),!l.preventURLContentLoading){if(b=e.source,d=a.param.querystring(),b||d.indexOf("source=data:")>=0&&(b=d.match(/source=(data:[^&]*)/)[1]),b)return void(0===b.indexOf("data:")?(b=b.replace(/ /g,"+"),c.loadFromDataURI(b)):c.loadFromString(b));if(-1!==d.indexOf("paramurl="))return void c.loadFromURL(d.substr(9));if(e.url)return void c.loadFromURL(e.url)}e.noStorageOnLoad&&!l.forceStorage||c.loadContentAndPrefs(),g()}}(),function(){var a,b=window.opener;if(b)try{a=b.document.createEvent("Event"),a.initEvent("svgEditorReady",!0,!0),b.document.documentElement.dispatchEvent(a)}catch(c){}}();var z=c.setIcon=function(b,c,d){var e="string"==typeof c?a.getSvgIcon(c,!0):c.clone();return e?void a(b).empty().append(e):void console.log("NOTE: Icon image missing: "+c)},A=function(){a.each(l.extensions,function(){var b=this;b.match(/^ext-.*\.js/)&&a.getScript(l.extPath+b,function(a){if(!a){var c=document.createElement("script");c.src=l.extPath+b,document.querySelector("head").appendChild(c)}})}),c.putLocale(null,y)};"file:"===document.location.protocol?setTimeout(A,100):A(),a.svgIcons(l.imgPath+"svg_edit_icons.svg",{w:24,h:24,id_match:!1,no_img:!svgedit.browser.isWebkit(),fallback_path:l.imgPath,fallback:{new_image:"clear.png",save:"save.png",open:"open.png",source:"source.png",docprops:"document-properties.png",wireframe:"wireframe.png",undo:"undo.png",redo:"redo.png",select:"select.png",select_node:"select_node.png",pencil:"fhpath.png",pen:"line.png",square:"square.png",rect:"rect.png",fh_rect:"freehand-square.png",circle:"circle.png",ellipse:"ellipse.png",fh_ellipse:"freehand-circle.png",path:"path.png",text:"text.png",image:"image.png",zoom:"zoom.png",clone:"clone.png",node_clone:"node_clone.png","delete":"delete.png",node_delete:"node_delete.png",group:"shape_group_elements.png",ungroup:"shape_ungroup.png",move_top:"move_top.png",move_bottom:"move_bottom.png",to_path:"to_path.png",link_controls:"link_controls.png",reorient:"reorient.png",align_left:"align-left.png",align_center:"align-center.png",align_right:"align-right.png",align_top:"align-top.png",align_middle:"align-middle.png",align_bottom:"align-bottom.png",go_up:"go-up.png",go_down:"go-down.png",ok:"save.png",cancel:"cancel.png",arrow_right:"flyouth.png",arrow_down:"dropdown.gif"},placement:{"#logo":"logo","#tool_clear div,#layer_new":"new_image","#tool_save div":"save","#tool_export div":"export","#tool_open div div":"open","#tool_import div div":"import","#tool_source":"source","#tool_docprops > div":"docprops","#tool_wireframe":"wireframe","#tool_undo":"undo","#tool_redo":"redo","#tool_select":"select","#tool_fhpath":"pencil","#tool_line":"pen","#tool_rect,#tools_rect_show":"rect","#tool_square":"square","#tool_fhrect":"fh_rect","#tool_ellipse,#tools_ellipse_show":"ellipse","#tool_circle":"circle","#tool_fhellipse":"fh_ellipse","#tool_path":"path","#tool_text,#layer_rename":"text","#tool_image":"image","#tool_zoom":"zoom","#tool_clone,#tool_clone_multi":"clone","#tool_node_clone":"node_clone","#layer_delete,#tool_delete,#tool_delete_multi":"delete","#tool_node_delete":"node_delete","#tool_add_subpath":"add_subpath","#tool_openclose_path":"open_path","#tool_move_top":"move_top","#tool_move_bottom":"move_bottom","#tool_topath":"to_path","#tool_node_link":"link_controls","#tool_reorient":"reorient","#tool_group_elements":"group_elements","#tool_ungroup":"ungroup","#tool_unlink_use":"unlink_use","#tool_alignleft, #tool_posleft":"align_left","#tool_aligncenter, #tool_poscenter":"align_center","#tool_alignright, #tool_posright":"align_right","#tool_aligntop, #tool_postop":"align_top","#tool_alignmiddle, #tool_posmiddle":"align_middle","#tool_alignbottom, #tool_posbottom":"align_bottom","#cur_position":"align","#linecap_butt,#cur_linecap":"linecap_butt","#linecap_round":"linecap_round","#linecap_square":"linecap_square","#linejoin_miter,#cur_linejoin":"linejoin_miter","#linejoin_round":"linejoin_round","#linejoin_bevel":"linejoin_bevel","#url_notice":"warning","#layer_up":"go_up","#layer_down":"go_down","#layer_moreopts":"context_menu","#layerlist td.layervis":"eye","#tool_source_save,#tool_docprops_save,#tool_prefs_save":"ok","#tool_source_cancel,#tool_docprops_cancel,#tool_prefs_cancel":"cancel","#rwidthLabel, #iwidthLabel":"width","#rheightLabel, #iheightLabel":"height","#cornerRadiusLabel span":"c_radius","#angleLabel":"angle","#linkLabel,#tool_make_link,#tool_make_link_multi":"globe_link","#zoomLabel":"zoom","#tool_fill label":"fill","#tool_stroke .icon_label":"stroke","#group_opacityLabel":"opacity","#blurLabel":"blur","#font_sizeLabel":"fontsize",".flyout_arrow_horiz":"arrow_right",".dropdown button, #main_button .dropdown":"arrow_down","#palette .palette_item:first, #fill_bg, #stroke_bg":"no_color"},resize:{"#logo .svg_icon":28,".flyout_arrow_horiz .svg_icon":5,".layer_button .svg_icon, #layerlist td.layervis .svg_icon":14,".dropdown button .svg_icon":7,"#main_button .dropdown .svg_icon":9,".palette_item:first .svg_icon":15,"#fill_bg .svg_icon, #stroke_bg .svg_icon":16,".toolbar_button button .svg_icon":16,".stroke_tool div div .svg_icon":20,"#tools_bottom label .svg_icon":18},callback:function(b){a(".toolbar_button button > svg, .toolbar_button button > img").each(function(){a(this).parent().prepend(this)});var d,e=a("#tools_left");0!==e.length&&(d=e.offset().top+e.outerHeight());var f=a.pref("iconsize");c.setIconSize(f||(a(window).height()<d?"s":"m")),a(".tools_flyout").each(function(){var b=a("#"+this.id+"_show"),c=b.attr("data-curopt");if(!b.children("svg, img").length){var d=a(c).children().clone();d.length&&(d[0].removeAttribute("style"),b.append(d))}}),c.runCallbacks(),setTimeout(function(){a(".flyout_arrow_horiz:empty").each(function(){a(this).append(a.getSvgIcon("arrow_right").width(5).height(5))})},1)}}),c.canvas=d=new a.SvgCanvas(document.getElementById("svgcanvas"),l);var B,C,D,E,F,G=["#000000","#3f3f3f","#7f7f7f","#bfbfbf","#ffffff","#ff0000","#ff7f00","#ffff00","#7fff00","#00ff00","#00ff7f","#00ffff","#007fff","#0000ff","#7f00ff","#ff00ff","#ff007f","#7f0000","#7f3f00","#7f7f00","#3f7f00","#007f00","#007f3f","#007f7f","#003f7f","#00007f","#3f007f","#7f007f","#7f003f","#ffaaaa","#ffd4aa","#ffffaa","#d4ffaa","#aaffaa","#aaffd4","#aaffff","#aad4ff","#aaaaff","#d4aaff","#ffaaff","#ffaad4"],H=svgedit.browser.isMac()?"meta+":"ctrl+",I=d.pathActions,J=d.undoMgr,K=l.imgPath+"logo.png",L=a("#workarea"),M=(a("#cmenu_canvas"),null),N="crosshair",O="crosshair",P="toolbars",Q="",R={fill:null,stroke:null};!function(){a("#dialog_container").draggable({cancel:"#dialog_content, #dialog_buttons *",containment:"window"});var b=a("#dialog_box"),c=a("#dialog_buttons"),d=a("#dialog_content"),e=function(e,f,g,h,i,j,k){
var l,m,n;if(d.html("<p>"+f.replace(/\n/g,"</p><p>")+"</p>").toggleClass("prompt","prompt"==e),c.empty(),l=a('<input type="button" value="'+o.common.ok+'">').appendTo(c),"alert"!==e&&a('<input type="button" value="'+o.common.cancel+'">').appendTo(c).click(function(){b.hide(),g(!1)}),"prompt"===e)m=a('<input type="text">').prependTo(c),m.val(h||""),m.bind("keydown","return",function(){l.click()});else if("select"===e){var p=a('<div style="text-align:center;">');if(m=a("<select>").appendTo(p),k){var q=a("<label>").text(k.label);n=a('<input type="checkbox">').appendTo(q),n.val(k.value),k.tooltip&&q.attr("title",k.tooltip),n.prop("checked",!!k.checked),p.append(a("<div>").append(q))}a.each(i||[],function(b,c){"object"==typeof c?m.append(a("<option>").val(c.value).html(c.text)):m.append(a("<option>").html(c))}),d.append(p),h&&m.val(h),j&&m.bind("change","return",j),m.bind("keydown","return",function(){l.click()})}"process"===e&&l.hide(),b.show(),l.click(function(){b.hide();var a="prompt"===e||"select"===e?m.val():!0;g&&(n?g(a,n.prop("checked")):g(a))}).focus(),"prompt"!==e&&"select"!==e||m.focus()};a.alert=function(a,b){e("alert",a,b)},a.confirm=function(a,b){e("confirm",a,b)},a.process_cancel=function(a,b){e("process",a,b)},a.prompt=function(a,b,c){e("prompt",a,c,b)},a.select=function(a,b,c,d,f,g){e("select",a,c,f,b,d,g)}}();var S,T=function(){var b=a(".tool_button_current");b.length&&"tool_select"!==b[0].id&&(b.removeClass("tool_button_current").addClass("tool_button"),a("#tool_select").addClass("tool_button_current").removeClass("tool_button"),a("#styleoverrides").text("#svgcanvas svg *{cursor:move;pointer-events:all} #svgcanvas svg{cursor:default}")),d.setMode("select"),L.css("cursor","auto")},U=!1,V=null,W=!1,X=!1,Y=!1,Z=!1,$="",_=a("title:first").text(),aa=[];for(S=.1;1e5>S;S*=10)aa.push(S),aa.push(2*S),aa.push(5*S);var ba=function(a){var b,c=[],e=d.getCurrentDrawing().getNumLayers();for(b=0;e>b;b++)c[b]=d.getCurrentDrawing().getLayerName(b);if(a)for(b=0;e>b;++b)c[b]!=a&&d.getCurrentDrawing().setLayerOpacity(c[b],.5);else for(b=0;e>b;++b)d.getCurrentDrawing().setLayerOpacity(c[b],1)},ca=function(){d.clearSelection();for(var b=a("#layerlist tbody").empty(),c=a("#selLayerNames").empty(),e=d.getCurrentDrawing(),f=e.getCurrentLayerName(),g=d.getCurrentDrawing().getNumLayers(),h=a.getSvgIcon("eye");g--;){var i=e.getLayerName(g),j=a('<tr class="layer">').toggleClass("layersel",i===f),k=a('<td class="layervis">').toggleClass("layerinvis",!e.getLayerVisibility(i)),l=a('<td class="layername">'+i+"</td>");b.append(j.append(k,l)),c.append('<option value="'+i+'">'+i+"</option>")}if(void 0!==h){var m=h.clone();a("td.layervis",b).append(m),a.resizeSvgIcons({"td.layervis .svg_icon":14})}a("#layerlist td.layername").mouseup(function(b){a("#layerlist tr.layer").removeClass("layersel"),a(this.parentNode).addClass("layersel"),d.setCurrentLayer(this.textContent),b.preventDefault()}).mouseover(function(){ba(this.textContent)}).mouseout(function(){ba()}),a("#layerlist td.layervis").click(function(){var b=a(this.parentNode).prevAll().length,c=a("#layerlist tr.layer:eq("+b+") td.layername").text(),e=a(this).hasClass("layerinvis");d.setLayerVisibility(c,e),a(this).toggleClass("layerinvis")});for(var n=5-a("#layerlist tr.layer").size();n-- >0;)b.append('<tr><td style="color:white">_</td><td/></tr>')},da=function(b,c){a("#path_node_panel").toggle(b),a("#tools_bottom_2,#tools_bottom_3").toggle(!b),b||setTimeout(function(){z("#tool_select","select")},1e3)},ea=function(b,d){if(c.showSaveWarning=!1,d='<?xml version="1.0"?>\n'+d,svgedit.browser.isIE())return void showSourceEditor(0,!0);var e=b.open("data:image/svg+xml;base64,"+f.encode64(d)),g=a.pref("save_notice_done");if("all"!==g){var h=o.notification.saveFromBrowser.replace("%s","SVG");svgedit.browser.isGecko()?-1!==d.indexOf("<defs")?(h+="\n\n"+o.notification.defsFailOnSave,a.pref("save_notice_done","all"),g="all"):a.pref("save_notice_done","part"):a.pref("save_notice_done","all"),"part"!==g&&e.alert(h)}},fa=function(b,c){var e=c.issues,f=c.type||"PNG",g=("ICO"===f?"BMP":f).toLowerCase();a("#export_canvas").length||a("<canvas>",{id:"export_canvas"}).hide().appendTo("body");var h=a("#export_canvas")[0];h.width=d.contentW,h.height=d.contentH,canvg(h,c.svg,{renderCallback:function(){var b=c.quality?h.toDataURL("image/"+g,c.quality):h.toDataURL("image/"+g);M.location.href=b;var d=a.pref("export_notice_done");if("all"!==d){var i=o.notification.saveFromBrowser.replace("%s",f);if(e.length){var j="\n  ";i+="\n\n"+o.notification.noteTheseIssues+j+e.join(j)}a.pref("export_notice_done","all"),M.alert(i)}}})},ga=function(){window.opera&&a("<p/>").hide().appendTo("body").remove()},ha=c.toolButtonClick=function(b,c){if(a(b).hasClass("disabled"))return!1;if(a(b).parent().hasClass("tools_flyout"))return!0;var d="normal";return c||a(".tools_flyout").fadeOut(d),a("#styleoverrides").text(""),L.css("cursor","auto"),a(".tool_button_current").removeClass("tool_button_current").addClass("tool_button"),a(b).addClass("tool_button_current").removeClass("tool_button"),!0},ia=c.clickSelect=function(){ha("#tool_select")&&(d.setMode("select"),a("#styleoverrides").text("#svgcanvas svg *{cursor:move;pointer-events:all}, #svgcanvas svg{cursor:default}"))},ja=c.setImageURL=function(b){b||(b=K),d.setImageURL(b),a("#image_url").val(b),0===b.indexOf("data:")?(a("#image_url").hide(),a("#change_image_url").show()):(d.embedImage(b,function(c){a("#url_notice").toggle(!c),K=b}),a("#image_url").show(),a("#change_image_url").hide())},ka=function(b){var c=Math.min(Math.max(12+6*b.value.length,50),300);a(b).width(c)},la=c.updateCanvas=function(b,f){var g=L.width(),h=L.height(),i=g,j=h,k=d.getZoom(),m=L,n=a("#svgcanvas"),o={x:m[0].scrollLeft+i/2,y:m[0].scrollTop+j/2},p=l.canvas_expansion;g=Math.max(i,d.contentW*k*p),h=Math.max(j,d.contentH*k*p),g==i&&h==j?L.css("overflow","hidden"):L.css("overflow","scroll");var q=n.height()/2,r=n.width()/2;n.width(g).height(h);var s=h/2,t=g/2,u=d.updateCanvas(g,h),v=t/r,w=g/2-i/2,x=h/2-j/2;if(f)f.x+=u.x,f.y+=u.y;else{var y=o.x-r,z=t+y*v,A=o.y-q,B=s+A*v;f={x:z,y:B}}b?d.contentW>m.width()?(L[0].scrollLeft=u.x-10,L[0].scrollTop=u.y-10):(m[0].scrollLeft=w,m[0].scrollTop=x):(m[0].scrollLeft=f.x-i/2,m[0].scrollTop=f.y-j/2),addBorderElement(),e.storagePrompt===!0||c.storagePromptClosed||a("#dialog_box").hide()},ma=function(){var b,c,e="none"==d.getColor("fill"),f="none"==d.getColor("stroke"),g=["#tool_fhpath","#tool_line"],h=["#tools_rect .tool_button","#tools_ellipse .tool_button","#tool_text","#tool_path"];if(f)for(b in g)c=g[b],a(c).hasClass("tool_button_current")&&ia(),a(c).addClass("disabled");else for(b in g)c=g[b],a(c).removeClass("disabled");if(f&&e)for(b in h)c=h[b],a(c).hasClass("tool_button_current")&&ia(),a(c).addClass("disabled");else for(b in h)c=h[b],a(c).removeClass("disabled");d.runExtensions("toolButtonStateUpdate",{nofill:e,nostroke:f}),a(".tools_flyout").each(function(){var b=a("#"+this.id+"_show"),c=!1;a(this).children().each(function(){a(this).hasClass("disabled")||(c=!0)}),b.toggleClass("disabled",!c)}),ga()},na=function(){var b,c;if(null!=V)switch(V.tagName){case"use":case"image":case"foreignObject":break;case"g":case"a":var d=null,e=V.getElementsByTagName("*");for(b=0,c=e.length;c>b;b++){var f=e[b].getAttribute("stroke-width");0===b?d=f:d!==f&&(d=null)}a("#stroke_width").val(null===d?"":d),R.fill.update(!0),R.stroke.update(!0);break;default:R.fill.update(!0),R.stroke.update(!0),a("#stroke_width").val(V.getAttribute("stroke-width")||1),a("#stroke_style").val(V.getAttribute("stroke-dasharray")||"none");var g=V.getAttribute("stroke-linejoin")||"miter";0!=a("#linejoin_"+g).length&&p(a("#linejoin_"+g)[0]),g=V.getAttribute("stroke-linecap")||"butt",0!=a("#linecap_"+g).length&&p(a("#linecap_"+g)[0])}if(null!=V){var h=100*(V.getAttribute("opacity")||1);a("#group_opacity").val(h),a("#opac_slider").slider("option","value",h),a("#elem_id").val(V.id)}ma()},oa=svgEditor.updateContextPanel=function(){var b=V;null==b||b.parentNode||(b=null);var c=d.getCurrentDrawing().getCurrentLayerName(),e=d.getMode(),f="px"!==l.baseUnit?l.baseUnit:null,g="pathedit"==e;a("#cmenu_canvas li");a("#selected_panel, #multiselected_panel, #g_panel, #rect_panel, #circle_panel,#ellipse_panel, #line_panel, #text_panel, #image_panel, #container_panel, #use_panel, #a_panel").hide(),a("#popup_toolbar").children().appendTo(".invisibleDiv"),a("#popup_toolbar").remove();var h=a("<div id='popup_toolbar' class='popup_toolbar_style'></div>"),i=function(b){a("#colorTools").appendTo(h),null==b&&(b="FFFFFF"),document.getElementById("colorPicker").jscolor.fromString(b)},j=function(){void 0==lastToolBarPosition||void 0==lastToolBarPosition.left?(a(h).css("left",a("body").width()/2-a(h).width()/2),a(h).css("top","-45px")):(a(h).css("left",lastToolBarPosition.left),a(h).css("top",lastToolBarPosition.top)),a(h).draggable({stop:function(){lastToolBarPosition={left:a(h).css("left"),top:a(h).css("top")}},containment:"parent",scroll:!1})};if(null!=b){var k=b.nodeName;h.appendTo("body");var m=d.getRotationAngle(b);a("#angle").val(m);var n=d.getBlur(b);if(a("#blur").val(n),a("#blur_slider").slider("option","value",n),d.addedNew&&"image"===k&&0!==d.getHref(b).indexOf("data:")&&r(),g||"pathedit"==e){var o=I.getNodePoint();if(a("#tool_add_subpath").removeClass("push_button_pressed").addClass("tool_button"),a("#tool_node_delete").toggleClass("disabled",!I.canDeleteNodes),z("#tool_openclose_path",I.closed_subpath?"open_path":"close_path"),o){var p=a("#seg_type");f&&(o.x=svgedit.units.convertUnit(o.x),o.y=svgedit.units.convertUnit(o.y)),a("#path_node_x").val(o.x),a("#path_node_y").val(o.y),o.type?p.val(o.type).removeAttr("disabled"):p.val(4).attr("disabled","disabled")}return}if(a("#selected_panel").show(),["line","circle","ellipse"].indexOf(k)>=0)a("#xy_panel").hide();else{var q,s;if(["g","polyline","path"].indexOf(k)>=0){var t=d.getStrokedBBox([b]);t&&(q=t.x,s=t.y)}else q=b.getAttribute("x"),s=b.getAttribute("y");f&&(q=svgedit.units.convertUnit(q),s=svgedit.units.convertUnit(s)),a("#selected_x").val(q||0),a("#selected_y").val(s||0),a("#xy_panel").show()}var u=-1==["image","text","path","g","use"].indexOf(k);a("#tool_topath").toggle(u),a("#tool_reorient").toggle("path"===k),a("#tool_reorient").toggleClass("disabled",0===m);var v={g:[],a:[],rect:["rx","width","height"],image:["width","height"],circle:["cx","cy","r"],ellipse:["cx","cy","rx","ry"],line:["x1","y1","x2","y2"],text:[],use:[]},w=b.tagName,x=null;if("a"===w&&(x=d.getHref(b),a("#g_panel").show()),"a"===b.parentNode.tagName&&(a(b).siblings().length||(a("#a_panel").show(),x=d.getHref(b.parentNode))),a("#tool_make_link, #tool_make_link").toggle(!x),x&&a("#link_url").val(x),v[w]){var y=v[w];if(a("#"+w+"_panel").show(),a.each(y,function(c,d){var e=b.getAttribute(d);if("px"!==l.baseUnit&&b[d]){var f=b[d].baseVal.value;e=svgedit.units.convertUnit(f)}a("#"+w+"_"+d).val(e||0)}),"text"==w){a("#text_panel").css("display","inline"),d.getItalic()?a("#tool_italic").addClass("push_button_pressed").removeClass("tool_button"):a("#tool_italic").removeClass("push_button_pressed").addClass("tool_button"),d.getBold()?a("#tool_bold").addClass("push_button_pressed").removeClass("tool_button"):a("#tool_bold").removeClass("push_button_pressed").addClass("tool_button"),a("#font_family").val(b.getAttribute("font-family")),a("#font_size").val(b.getAttribute("font-size")),a("#text").val(b.textContent),d.addedNew&&setTimeout(function(){a("#text").focus().select()},100),a("#textTools").appendTo(h);var A=a(b).attr("font-family"),B=a("#preview td").filter(function(){if(a(this).attr("data-value")==A)return!0;var b=a(this).attr("data-alias"),c=!1;return void 0!=b&&"undefined"!=b&&(b=b.split(","),b.forEach(function(a,b){A==a&&(c=!0)})),c|!1});a("#fontPreviewList").html(B.text()+"<span class='fontArrow'></span>");var C=parseInt(parseInt(a(b).attr("font-size")));option=a("#comboFontSize option").filter(function(){return a(this).text()==C}),a(option).attr("selected",!0),i(a(b).attr("fill"))}else if("logo"==b.id||"image"==w||a(b).find("svg").length>0)ja(d.getHref(b)),a("#imgTools").appendTo(h);else if("g"===w||"use"===w){a("#container_panel").show();var D=d.getTitle(),E=a("#g_title")[0];void 0!=E&&(E.value=D,ka(E),a("#g_title").prop("disabled","use"==w)),i(getColor(b)),a("#unGroupTools").appendTo(h)}else i(a(b).attr("fill"))}else i(a(b).attr("fill"));j()}else W&&(h.appendTo("body"),i(a(d.getSelectedElems()[0]).attr("fill")),a("#groupTools").appendTo(h),j(),a("#multiselected_panel").show());a("#tool_undo").toggleClass("disabled",0===J.getUndoStackSize()),a("#tool_redo").toggleClass("disabled",0===J.getRedoStackSize()),d.addedNew=!1,b&&!g||W?a("#selLayerNames").removeAttr("disabled").val(c):a("#selLayerNames").attr("disabled","disabled")},pa=function(){if(!B){var b="#workarea.wireframe #svgcontent * { stroke-width: "+1/d.getZoom()+"px; }";a("#wireframe_rules").text(L.hasClass("wireframe")?b:"")}},qa=function(b){b=b||d.getDocumentTitle();var c=_+(b?": "+b:"");a("title:first").text(c)},ra=function(a,b){var c=d.getMode();"select"===c&&T();var e="pathedit"==c;V=1===b.length||null==b[1]?b[0]:null,W=b.length>=2&&null!=b[1],null!=V&&(e||na()),da(e,b),oa(),d.runExtensions("selectedChanged",{elems:b,selectedElement:V,multiselected:W})},sa=function(b,c){var e=d.getMode(),f=c[0];if(f){if(W=c.length>=2&&null!=c[1],!W)switch(e){case"rotate":var g=d.getRotationAngle(f);a("#angle").val(g),a("#tool_reorient").toggleClass("disabled",0===g)}d.runExtensions("elementTransition",{elems:c})}},ta=function(a,b){var e,f=d.getMode();for("select"===f&&T(),e=0;e<b.length;++e){var g=b[e];g&&"svg"===g.tagName?(ca(),la()):g&&V&&null==V.parentNode&&(V=g)}c.showSaveWarning=!0,oa(),V&&"select"===f&&(R.fill.update(),R.stroke.update()),d.runExtensions("elementChanged",{elems:b})},ua=function(){pa()},va=d.zoomChanged=function(b,c,e){var f=15,g=L,h=d.setBBoxZoom(c,g.width()-f,g.height()-f);if(h){var i=h.zoom,j=h.bbox;if(.001>i)return void D({value:.1});a("#zoom").val((100*i).toFixed(1)),e?la():la(!1,{x:j.x*i+j.width*i/2,y:j.y*i+j.height*i/2}),"zoom"==d.getMode()&&j.width&&T(),ua()}};D=c.changeZoom=function(a){var b=a.value/100;if(.001>b)return void(a.value=.1);var c=d.getZoom(),e=L;va(window,{width:0,height:0,x:(e[0].scrollLeft+e.width()/2)/c,y:(e[0].scrollTop+e.height()/2)/c,zoom:b},!0)},a("#cur_context_panel").delegate("a","click",function(){var b=a(this);return b.attr("data-root")?d.leaveContext():d.setContext(b.text()),d.clearSelection(),!1});var wa=function(b,c){var e="";if(c){var f="";e='<a href="#" data-root="y">'+d.getCurrentDrawing().getCurrentLayerName()+"</a>",a(c).parentsUntil("#svgcontent > g").andSelf().each(function(){this.id&&(f+=" > "+this.id,e+=this!==c?' > <a href="#">'+this.id+"</a>":" > "+this.id)}),$=f}else $=null;a("#cur_context_panel").toggle(!!c).html(e),qa()},xa=function(){R.fill.prep(),R.stroke.prep()},ya={},za=function(){a(".tools_flyout").each(function(){var b=a("#"+this.id+"_show");if(!b.data("isLibrary")){var c=[];a(this).children().each(function(){c.push(this.title)}),b[0].title=c.join(" / ")}})},Aa=function(){a(".tools_flyout").each(function(){var b=a("#"+this.id+"_show"),d=b.offset(),e=b.outerWidth();a(this).css({left:(d.left+e)*c.tool_scale,top:d.top})})},Ba=function(b){a.each(b,function(c,d){var e=a(c).children(),f=c+"_show",g=a(f),h=!1;e.addClass("tool_button").unbind("click mousedown mouseup").each(function(c){var e=d[c];ya[e.sel]=e.fn,e.isDefault&&(h=c);var i=function(c){var d=e;if("keydown"===c.type){var h=a(d.parent+"_show").hasClass("tool_button_current"),i=a(d.parent+"_show").attr("data-curopt");a.each(b[e.parent],function(a,f){f.sel==i&&(d=c.shiftKey&&h?b[e.parent][a+1]||b[e.parent][0]:f)})}if(a(this).hasClass("disabled"))return!1;ha(f)&&d.fn();var j;j=d.icon?a.getSvgIcon(d.icon,!0):a(d.sel).children().eq(0).clone(),j[0].setAttribute("width",g.width()),j[0].setAttribute("height",g.height()),g.children(":not(.flyout_arrow_horiz)").remove(),g.append(j).attr("data-curopt",d.sel)};a(this).mouseup(i),e.key&&a(document).bind("keydown",e.key[0]+" shift+"+e.key[0],i)}),h?g.attr("data-curopt",d[h].sel):g.attr("data-curopt")||g.attr("data-curopt",d[0].sel);var i,j=a(f).position();g.mousedown(function(b){if(g.hasClass("disabled"))return!1;var d=a(c),e=j.left+34,f=-1*d.width(),h=d.data("shown_popop")?200:0;i=setTimeout(function(){g.data("isLibrary")?d.css("left",e).show():d.css("left",f).show().animate({left:e},150),d.data("shown_popop",!0)},h),b.preventDefault()}).mouseup(function(b){clearTimeout(i);var c=a(this).attr("data-curopt");return g.data("isLibrary")&&a(f.replace("_show","")).is(":visible")?void ha(f,!0):void(ha(f)&&ya[c]&&ya[c]())})}),za(),Aa()},Ca=function(b,c){var d=a("<div>",{"class":"tools_flyout",id:b}).appendTo("#svg_editor").append(c);return d},Da=function(){var a,b=/^(Moz|Webkit|Khtml|O|ms|Icab)(?=[A-Z])/,c=document.getElementsByTagName("script")[0];for(a in c.style)if(b.test(a))return a.match(b)[0];return"WebkitOpacity"in c.style?"Webkit":"KhtmlOpacity"in c.style?"Khtml":""}(),Ea=function(b,c){var d=["top","left","bottom","right"];b.each(function(){var b,e=a(this),f=e.outerWidth()*(c-1),g=e.outerHeight()*(c-1);for(b=0;4>b;b++){var h=d[b],i=e.data("orig_margin-"+h);null==i&&(i=parseInt(e.css("margin-"+h),10),e.data("orig_margin-"+h,i));var j=i*c;"right"===h?j+=f:"bottom"===h&&(j+=g),e.css("margin-"+h,j)}})},Fa=c.setIconSize=function(b){var d="#tools_top .toolset, #editor_panel > *, #history_panel > *,				#main_button, #tools_left > *, #path_node_panel > *, #multiselected_panel > *,				#g_panel > *, #tool_font_size > *, .tools_flyout",e=a(d),f=1;if("number"==typeof b)f=b;else{var g={s:.75,m:1,l:1.25,xl:1.5};f=g[b]}c.tool_scale=f,Aa();var h=e.parents(":hidden");h.css("visibility","hidden").show(),Ea(e,f),h.css("visibility","visible").hide(),a.pref("iconsize",b),a("#iconsize").val(b);var i={"#tools_top":{left:50,height:72},"#tools_left":{width:31,top:74},"div#workarea":{left:38,top:74}},j=a("#tool_size_rules");if(j.length?j.empty():j=a('<style id="tool_size_rules"></style>').appendTo("head"),"m"!==b){var k="";a.each(i,function(c,d){c="#svg_editor "+c.replace(/,/g,", #svg_editor"),k+=c+"{",a.each(d,function(a,c){var d;"number"==typeof c?d=c*f+"px":(c[b]||c.all)&&(d=c[b]||c.all),k+=a+":"+d+";"}),k+="}"});var l="-"+Da.toLowerCase()+"-";k+=d+"{"+l+"transform: scale("+f+");} #svg_editor div.toolset .toolset {"+l+"transform: scale(1); margin: 1px !important;} #svg_editor .ui-slider {"+l+"transform: scale("+1/f+");}",j.text(k)}Aa()},Ga=function(b,c,d,e){var f=a(b);c=a(c);var g=!1,h=e.dropUp;h&&a(b).addClass("dropup"),c.find("li").bind("mouseup",function(){e.seticon&&(z("#cur_"+f[0].id,a(this).children()),a(this).addClass("current").siblings().removeClass("current")),d.apply(this,arguments)}),a(window).mouseup(function(a){g||(f.removeClass("down"),c.hide(),c.css({top:0,left:0})),g=!1}),f.bind("mousedown",function(){var a=f.offset();h?(a.top-=c.height(),a.left+=8):a.top+=f.height(),c.offset(a),f.hasClass("down")?(c.hide(),c.css({top:0,left:0})):(c.show(),g=!0),f.toggleClass("down")}).hover(function(){g=!0}).mouseout(function(){g=!1}),e.multiclick&&c.mousedown(function(){g=!0})},Ha=[],Ia=function(b,d){function e(){C&&(clearTimeout(C),C=null),g||(C=setTimeout(function(){g=!0,Fa(a.pref("iconsize"))},50))}if(d){var f=!1,g=!1,h=!0;if(d.langReady)if(c.langChanged){var i=a.pref("lang");d.langReady({lang:i,uiStrings:o})}else Ha.push(d);var j=function(){d.callback&&!f&&h&&(f=!0,d.callback())},k=[];if(d.context_tools&&a.each(d.context_tools,function(b,c){var d,e=c.container_id?' id="'+c.container_id+'"':"",f=a("#"+c.panel);switch(f.length||(f=a("<div>",{id:c.panel}).appendTo("#tools_top")),c.type){case"tool_button":d='<div class="tool_button">'+c.id+"</div>";var g=a(d).appendTo(f);c.events&&a.each(c.events,function(b,c){a(g).bind(b,c)});break;case"select":d="<label"+e+'><select id="'+c.id+'">',a.each(c.options,function(a,b){var e=a==c.defval?" selected":"";d+='<option value="'+a+'"'+e+">"+b+"</option>"}),d+="</select></label>";var h=a(d).appendTo(f).find("select");a.each(c.events,function(b,c){a(h).bind(b,c)});break;case"button-select":d='<div id="'+c.id+'" class="dropdown toolset" title="'+c.title+'"><div id="cur_'+c.id+'" class="icon_label"></div><button></button></div>';var i=a('<ul id="'+c.id+'_opts"></ul>').appendTo("#option_lists");c.colnum&&i.addClass("optcols"+c.colnum);a(d).appendTo(f).children();k.push({elem:"#"+c.id,list:"#"+c.id+"_opts",title:c.title,callback:c.events.change,cur:"#cur_"+c.id});break;case"input":d="<label"+e+'><span id="'+c.id+'_label">'+c.label+':</span><input id="'+c.id+'" title="'+c.title+'" size="'+(c.size||"4")+'" value="'+(c.defval||"")+'" type="text"/></label>';var j=a(d).appendTo(f).find("input");c.spindata&&j.SpinButton(c.spindata),c.events&&a.each(c.events,function(a,b){j.bind(a,b)})}}),d.buttons){var l={},m={},n=d.svgicons,p={};a.each(d.buttons,function(b,c){for(var d,e,f,g=c.id,h=b;a("#"+g).length;)g=c.id+"_"+ ++h;n?(l[g]=c.icon,e=c.svgicon||c.id,"app_menu"==c.type?m["#"+g+" > div"]=e:m["#"+g]=e):d=a('<img src="'+c.icon+'">');var i,j;switch(c.type){case"mode_flyout":case"mode":i="tool_button",j="#tools_left";break;case"context":i="tool_button",j="#"+c.panel,a(j).length||a("<div>",{id:c.panel}).appendTo("#tools_top");break;case"app_menu":i="",j="#main_menu ul"}var k,o,q,r,s,t=a(c.list||"app_menu"==c.type?"<li/>":"<div/>").attr("id",g).attr("title",c.title).addClass(i);if(c.includeWith||c.list){if(c.list)t.addClass("push_button"),a("#"+c.list+"_opts").append(t),c.isDefault&&(a("#cur_"+c.list).append(t.children().clone()),e=c.svgicon||c.id,m["#cur_"+c.list]=e);else if(c.includeWith){var u=c.includeWith;s=a(u.button),k=s.parent(),s.parent().hasClass("tools_flyout")||(f=s[0].id.replace("tool_","tools_"),q=s.clone().attr("id",f+"_show").append(a("<div>",{"class":"flyout_arrow_horiz"})),s.before(q),k=Ca(f,s)),r=E.getButtonData(u.button),u.isDefault&&(m["#"+f+"_show"]=c.id),o=p["#"+k[0].id]=[{sel:"#"+g,fn:c.events.click,icon:c.id,key:c.key,isDefault:c.includeWith?c.includeWith.isDefault:0},r];var v="position"in u?u.position:"last",w=k.children().length;!isNaN(v)&&v>=0&&w>v?k.children().eq(v).before(t):(k.append(t),o.reverse())}}else"position"in c?a(j).children().eq(c.position).length?a(j).children().eq(c.position).before(t):a(j).children().last().before(t):t.appendTo(j),"mode_flyout"==c.type?(s=a(t),k=s.parent(),s.parent().hasClass("tools_flyout")||(f=s[0].id.replace("tool_","tools_"),q=s.clone().attr("id",f+"_show").append(a("<div>",{"class":"flyout_arrow_horiz"})),s.before(q),k=Ca(f,s),k.data("isLibrary",!0),q.data("isLibrary",!0)),m["#"+f+"_show"]=c.id,o=p["#"+k[0].id]=[{sel:"#"+g,fn:c.events.click,icon:c.id,isDefault:!0},r]):"app_menu"==c.type&&t.append("<div>").append(c.title);n||t.append(d),c.list||a.each(c.events,function(b,d){"click"==b&&"mode"==c.type?(c.includeWith?t.bind(b,d):t.bind(b,function(){ha(t)&&d()}),c.key&&(a(document).bind("keydown",c.key,d),c.title&&t.attr("title",c.title+" ["+c.key+"]"))):t.bind(b,d)}),Ba(p)}),a.each(k,function(){Ga(this.elem,this.list,this.callback,{seticon:!0})}),n&&(h=!1),a.svgIcons(n,{w:24,h:24,id_match:!1,no_img:!svgedit.browser.isWebkit(),fallback:l,placement:m,callback:function(b){"m"!==a.pref("iconsize")&&e(),h=!0,j()}})}j()}},Ja=function(b,c,e){var f={alpha:c};if(0===b.indexOf("url(#")){var g=d.getRefElem(b);g=g?g.cloneNode(!0):a("#"+e+"_color defs *")[0],f[g.tagName]=g}else 0===b.indexOf("#")?f.solidColor=b.substr(1):f.solidColor="none";return new a.jGraduate.Paint(f)};a("#text").focus(function(){U=!0}),a("#text").blur(function(){U=!1}),d.bind("selected",ra),d.bind("transition",sa),d.bind("changed",ta),d.bind("saved",ea),d.bind("exported",fa),d.bind("zoomed",va),d.bind("contextset",wa),d.bind("extension_added",Ia),d.textActions.setInputElem(a("#text")[0]);var Ka='<div class="palette_item" data-rgb="none"></div>';a.each(G,function(a,b){Ka+='<div class="palette_item" style="background-color: '+b+';" data-rgb="'+b+'"></div>'}),a("#palette").append(Ka);var La=["#FFF","#888","#000"];Ka="",a.each(La,function(){Ka+='<div class="color_block" style="background-color:'+this+';"></div>'}),a("#bg_blocks").append(Ka);var Ma=a("#bg_blocks div"),Na="cur_background";Ma.each(function(){var b=a(this);b.click(function(){Ma.removeClass(Na),a(this).addClass(Na)})}),q(a.pref("bkgd_color"),a.pref("bkgd_url")),a("#image_save_opts input").val([a.pref("img_save")]);var Oa=function(b,c){null==c&&(c=b.value),a("#group_opacity").val(c),b&&b.handle||a("#opac_slider").slider("option","value",c),d.setOpacity(c/100)},Pa=function(b,c,e){null==c&&(c=b.value),a("#blur").val(c);var f=!1;b&&b.handle||(a("#blur_slider").slider("option","value",c),f=!0),e?d.setBlurNoUndo(c):d.setBlur(c,f)};a("#stroke_style").change(function(){d.setStrokeAttr("stroke-dasharray",a(this).val()),ga()}),a("#stroke_linejoin").change(function(){d.setStrokeAttr("stroke-linejoin",a(this).val()),ga()}),a("select").change(function(){a(this).blur()});var Qa=!1;a("#selLayerNames").change(function(){var b=this.options[this.selectedIndex].value,c=o.notification.QmoveElemsToLayer.replace("%s",b),e=function(a){a&&(Qa=!0,d.moveSelectedToLayer(b),d.clearSelection(),ca())};b&&(Qa?e(!0):a.confirm(c,e))}),a("#font_family").change(function(){d.setFontFamily(this.value)}),a("#seg_type").change(function(){d.setSegType(a(this).val())}),a("#text").keyup(function(){d.setTextContent(this.value)}),a("#image_url").change(function(){ja(this.value)}),a("#link_url").change(function(){this.value.length?d.setLinkURL(this.value):d.removeHyperlink()}),a("#g_title").change(function(){d.setGroupTitle(this.value)}),a(".attr_changer").change(function(){var b=this.getAttribute("data-attr"),c=this.value,e=svgedit.units.isValidUnit(b,c,V);if(!e)return a.alert(o.notification.invalidAttrValGiven),this.value=V.getAttribute(b),!1;if("id"!==b)if(isNaN(c))c=d.convertToNum(b,c);else if("px"!==l.baseUnit){var f=svgedit.units.getTypeMap();(V[b]||"pathedit"===d.getMode()||"x"===b||"y"===b)&&(c*=f[l.baseUnit])}if("id"===b){var g=V;d.clearSelection(),g.id=c,d.addToSelection([g],!0)}else d.changeSelectedAttribute(b,c);this.blur()}),a("#palette").mouseover(function(){var b=a('<input type="hidden">');a(this).append(b),b.focus().remove()}),a(".palette_item").mousedown(function(b){var c,e=b.shiftKey||2===b.button?"stroke":"fill",f=a(this).data("rgb");"none"===f||"transparent"===f||"initial"===f?(f="none",c=new a.jGraduate.Paint):c=new a.jGraduate.Paint({alpha:100,solidColor:f.substr(1)}),R[e].setPaint(c),d.setColor(e,f),"none"!==f&&1!==d.getPaintOpacity(e)&&d.setPaintOpacity(e,1),ma()}).bind("contextmenu",function(a){a.preventDefault()}),a("#toggle_stroke_tools").on("click",function(){a("#tools_bottom").toggleClass("expanded")}),function(){var b=null,e=null,f=L[0],g=!1,h=!1;a("#svgcanvas").bind("mousemove mouseup",function(a){return g!==!1?(f.scrollLeft-=a.clientX-b,f.scrollTop-=a.clientY-e,b=a.clientX,e=a.clientY,"mouseup"===a.type&&(g=!1),!1):void 0}).mousedown(function(a){return 1===a.button||h===!0?(g=!0,b=a.clientX,e=a.clientY,!1):void 0}),a(window).mouseup(function(){g=!1}),a(document).bind("keydown","space",function(a){d.spaceKey=h=!0,a.preventDefault()}).bind("keyup","space",function(a){a.preventDefault(),d.spaceKey=h=!1}).bind("keydown","shift",function(a){"zoom"===d.getMode()&&L.css("cursor",O)}).bind("keyup","shift",function(a){"zoom"===d.getMode()&&L.css("cursor",N)}),c.setPanning=function(a){d.spaceKey=h=a}}(),function(){var b=a("#main_icon"),c=a("#main_icon span"),d=a("#main_menu"),e=!1,f=0,g=!0,h=!1;a(window).mouseup(function(c){e||(b.removeClass("buttondown"),"INPUT"!=c.target.tagName?d.fadeOut(200):h||(h=!0,a(c.target).click(function(){d.css("margin-left","-9999px").show()}))),e=!1}).mousedown(function(b){a(b.target).closest("div.tools_flyout, .contextMenu").length}),c.bind("mousedown",function(){b.hasClass("buttondown")?d.fadeOut(200):(d.css("margin-left",0).show(),f||(f=d.height()),d.css("height",0).animate({height:f},200),e=!0),b.toggleClass("buttondown buttonup")}).hover(function(){e=!0}).mouseout(function(){e=!1});var i=a("#main_menu li");i.mouseover(function(){g="rgba(0, 0, 0, 0)"==a(this).css("background-color"),i.unbind("mouseover"),g&&i.mouseover(function(){this.style.backgroundColor="#FFC"}).mouseout(function(){return this.style.backgroundColor="transparent",!0})})}(),c.addDropDown=function(b,c,d){if(0!=a(b).length){var e=a(b).find("button"),f=a(b).find("ul").attr("id",a(b)[0].id+"-list"),g=!1;d?a(b).addClass("dropup"):a("#option_lists").append(f),f.find("li").bind("mouseup",c),a(window).mouseup(function(a){g||(e.removeClass("down"),f.hide()),g=!1}),e.bind("mousedown",function(){if(e.hasClass("down"))f.hide();else{if(!d){var c=a(b).position();f.css({top:c.top+24,left:c.left-10})}f.show(),g=!0}e.toggleClass("down")}).hover(function(){g=!0}).mouseout(function(){g=!1})}},c.addDropDown("#font_family_dropdown",function(){a("#font_family").val(a(this).text()).change()}),c.addDropDown("#opacity_dropdown",function(){if(!a(this).find("div").length){var b=parseInt(a(this).text().split("%")[0],10);Oa(!1,b)}},!0),a("#opac_slider").slider({start:function(){a("#opacity_dropdown li:not(.special)").hide()},stop:function(){a("#opacity_dropdown li").show(),a(window).mouseup()},slide:function(a,b){Oa(b)}}),c.addDropDown("#blur_dropdown",a.noop);var Ra=!1;a("#blur_slider").slider({max:10,step:.1,stop:function(b,c){Ra=!1,Pa(c),a("#blur_dropdown li").show(),a(window).mouseup()},start:function(){Ra=!0},slide:function(a,b){Pa(b,null,Ra)}}),c.addDropDown("#zoom_dropdown",function(){var b=a(this),c=b.data("val");c?va(window,c):D({value:parseFloat(b.text())})},!0),Ga("#stroke_linecap","#linecap_opts",function(){p(this,!0)},{dropUp:!0}),Ga("#stroke_linejoin","#linejoin_opts",function(){p(this,!0)},{dropUp:!0}),Ga("#tool_position","#position_opts",function(){var a=this.id.replace("tool_pos","").charAt(0);d.alignSelectedElements(a,"page")},{multiclick:!0}),function(){var b,c=function(){a(b).blur()};a("#svg_editor").find("button, select, input:not(#text)").focus(function(){b=this,P="toolbars",L.mousedown(c)}).blur(function(){P="canvas",L.unbind("mousedown",c),"textedit"==d.getMode()&&a("#text").focus()})}();var Sa=function(){ha("#tool_fhpath")&&d.setMode("fhpath")},Ta=function(){ha("#tool_line")&&d.setMode("line")},Ua=function(){ha("#tool_square")&&d.setMode("square")},Va=function(){ha("#tool_rect")&&d.setMode("rect")},Wa=function(){ha("#tool_fhrect")&&d.setMode("fhrect")},Xa=function(){ha("#tool_circle")&&d.setMode("circle")},Ya=function(){ha("#tool_ellipse")&&d.setMode("ellipse")},Za=function(){ha("#tool_fhellipse")&&d.setMode("fhellipse")},$a=function(){ha("#tool_image")&&d.setMode("image")},_a=function(){ha("#tool_zoom")&&(d.setMode("zoom"),L.css("cursor",N))},ab=function(b){var c=d.getResolution();b=b?c.zoom*b:1,a("#zoom").val(100*b),d.setZoom(b),ua(),la(!0)},bb=function(){ha("#tool_zoom")&&(ab(),T())},cb=function(){ha("#tool_text")&&d.setMode("text")},db=function(){ha("#tool_path")&&d.setMode("path")},eb=function(){(null!=V||W)&&d.deleteSelectedElements()},fb=function(){(null!=V||W)&&d.cutSelectedElements()},gb=function(){(null!=V||W)&&d.copySelectedElements()},hb=function(){var a=d.getZoom(),b=(L[0].scrollLeft+L.width()/2)/a-d.contentW,c=(L[0].scrollTop+L.height()/2)/a-d.contentH;d.pasteElements("point",b,c)},ib=function(){null!=V&&d.moveToTopSelectedElement()},jb=function(){null!=V&&d.moveToBottomSelectedElement()},kb=function(a){null!=V&&d.moveUpDownSelected(a)},lb=function(){null!=V&&d.convertToPath()},mb=function(){null!=V&&I.reorient()},nb=function(){(null!=V||W)&&a.prompt(o.notification.enterNewLinkURL,"http://",function(a){a&&d.makeHyperlink(a)})},ob=function(a,b){if(null!=V||W){if(l.gridSnapping){var c=d.getZoom()*l.snappingStep;a*=c,b*=c}d.moveSelectedElements(a,b)}},pb=function(){a("#tool_node_link").toggleClass("push_button_pressed tool_button");var b=a("#tool_node_link").hasClass("push_button_pressed");I.linkControlPoints(b)},qb=function(){I.getNodePoint()&&I.clonePathNode()},rb=function(){I.getNodePoint()&&I.deletePathNode()},sb=function(){
var b=a("#tool_add_subpath"),c=!b.hasClass("push_button_pressed");b.toggleClass("push_button_pressed tool_button"),I.addSubPath(c)},tb=function(){I.opencloseSubPath()},ub=function(){d.cycleElement(1)},vb=function(){d.cycleElement(0)},wb=function(b,c){if(null!=V&&!W){b||(c*=-1);var e=parseFloat(a("#angle").val())+c;d.setRotationAngle(e),oa()}},xb=function(){var b=l.dimensions;a.confirm(o.notification.QwantToClear,function(a){a&&(T(),d.clear(),d.setResolution(b[0],b[1]),la(!0),ab(),ca(),oa(),xa(),d.runExtensions("onNewDocument"))})},yb=function(){return d.setBold(!d.getBold()),oa(),!1},zb=function(){return d.setItalic(!d.getItalic()),oa(),!1},Ab=function(){var b={images:a.pref("img_save"),round_digits:6};d.save(b)},Bb=function(){a.select("Select an image type for export: ",["PNG","JPEG","BMP","WEBP"],function(b){if(b){if(!i.exportImage&&!i.pngsave){var c=o.notification.loadingImage;M=window.open("data:text/html;charset=utf-8,<title>"+c+"</title><h1>"+c+"</h1>")}var e=parseInt(a("#image-slider").val(),10)/100;window.canvg?d.rasterExport(b,e):a.getScript("canvg/rgbcolor.js",function(){a.getScript("canvg/canvg.js",function(){d.rasterExport(b,e)})})}},function(){var b=a(this);"JPEG"===b.val()||"WEBP"===b.val()?a("#image-slider").length||a('<div><label>Quality: <input id="image-slider" type="range" min="1" max="100" value="92" /></label></div>').appendTo(b.parent()):a("#image-slider").parent().remove()})},Cb=function(){d.open()},Db=function(){},Eb=function(){J.getUndoStackSize()>0&&(J.undo(),ca())},Fb=function(){J.getRedoStackSize()>0&&(J.redo(),ca())},Gb=function(){W?d.groupSelectedElements():V&&d.ungroupSelectedElement()},Hb=function(){d.cloneSelectedElements(20,20)},Ib=function(){var b=this.id.replace("tool_align","").charAt(0);d.alignSelectedElements(b,a("#align_relative_to").val())},Jb=function(){if(a("#tool_wireframe").toggleClass("push_button_pressed tool_button"),L.toggleClass("wireframe"),!B){var b=a("#wireframe_rules");b.length?b.empty():b=a('<style id="wireframe_rules"></style>').appendTo("head"),pa()}};a("#svg_docprops_container, #svg_prefs_container").draggable({cancel:"button,fieldset",containment:"window"});var Kb=function(){a("#svg_source_editor").hide(),X=!1,a("#svg_source_textarea").blur()},Lb=function(){if(X){var b=function(){d.clearSelection(),Kb(),ab(),ca(),qa(),xa()};d.setSvgString(a("#svg_source_textarea").val())?b():a.confirm(o.notification.QerrorsRevertToSource,function(a){return a?void b():!1}),T()}},Mb=function(){a("#svg_docprops").hide(),a("#canvas_width,#canvas_height").removeAttr("disabled"),a("#resolution")[0].selectedIndex=0,a("#image_save_opts input").val([a.pref("img_save")]),Y=!1},Nb=function(){a("#svg_prefs").hide(),Z=!1},Ob=function(){var b=a("#canvas_title").val();qa(b),d.setDocumentTitle(b);var c=a("#canvas_width"),e=c.val(),f=a("#canvas_height"),g=f.val();return"fit"==e||svgedit.units.isValidUnit("width",e)?(c.parent().removeClass("error"),"fit"==g||svgedit.units.isValidUnit("height",g)?(f.parent().removeClass("error"),d.setResolution(e,g)?(a.pref("img_save",a("#image_save_opts :checked").val()),la(),void Mb()):(a.alert(o.notification.noContentToFitTo),!1)):(a.alert(o.notification.invalidAttrValGiven),f.parent().addClass("error"),!1)):(a.alert(o.notification.invalidAttrValGiven),c.parent().addClass("error"),!1)},Pb=(c.savePreferences=function(){var b=a("#bg_blocks div.cur_background").css("background-color")||"#FFF";q(b,a("#canvas_bg_url").val());var e=a("#lang_select").val();e!==a.pref("lang")&&c.putLocale(e,y),Fa(a("#iconsize").val()),l.gridSnapping=a("#grid_snapping_on")[0].checked,l.snappingStep=a("#grid_snapping_step").val(),l.gridColor=a("#grid_color").val(),l.showRulers=!1,console.log("ShowRulers=false"),l.baseUnit=a("#base_unit").val(),d.setConfig(l),la(),Nb()},a.noop),Qb=function(){return a("#dialog_box").hide(),X||Y||Z?(X?Q!==a("#svg_source_textarea").val()?a.confirm(o.notification.QignoreSourceChanges,function(a){a&&Kb()}):Kb():Y?Mb():Z&&Nb(),void Pb()):void($&&d.leaveContext())},Rb={width:a(window).width(),height:a(window).height()};if(svgedit.browser.isIE()&&!function(){Pb=function(){0===L[0].scrollLeft&&0===L[0].scrollTop&&(L[0].scrollLeft=F.left,L[0].scrollTop=F.top)},F={left:L[0].scrollLeft,top:L[0].scrollTop},a(window).resize(Pb),c.ready(function(){setTimeout(function(){Pb()},500)}),L.scroll(function(){F={left:L[0].scrollLeft,top:L[0].scrollTop}})}(),a(window).resize(function(b){a.each(Rb,function(b,c){var d=a(window)[b]();L[0]["scroll"+("width"===b?"Left":"Top")]-=(d-c)/2,Rb[b]=d}),Aa()}),function(){L.scroll(function(){0!=a("#ruler_x").length&&(a("#ruler_x")[0].scrollLeft=L[0].scrollLeft),0!=a("#ruler_y").length&&(a("#ruler_y")[0].scrollTop=L[0].scrollTop)})}(),a("#url_notice").click(function(){a.alert(this.title)}),a("#change_image_url").click(r),function(){var b=["clear","open","save","source","delete","delete_multi","paste","clone","clone_multi","move_top","move_bottom"],c="",d="tool_button_current";a.each(b,function(a,b){c+="#tool_"+b}),a(c).mousedown(function(){a(this).addClass(d)}).bind("mousedown mouseout",function(){a(this).removeClass(d)}),a("#tool_undo, #tool_redo").mousedown(function(){a(this).hasClass("disabled")||a(this).addClass(d)}).bind("mousedown mouseout",function(){a(this).removeClass(d)})}(),svgedit.browser.isMac()&&!window.opera){var Sb=["tool_clear","tool_save","tool_source","tool_undo","tool_redo","tool_clone"];for(S=Sb.length;S--;){var Tb=document.getElementById(Sb[S]);if(Tb){var Ub=Tb.title,Vb=Ub.indexOf("Ctrl+");Tb.title=[Ub.substr(0,Vb),"Cmd+",Ub.substr(Vb+5)].join("")}}}var Wb=function(b){var c="stroke_color"==b.attr("id")?"stroke":"fill",e=R[c].paint,f="stroke"==c?"Pick a Stroke Paint and Opacity":"Pick a Fill Paint and Opacity",g=b.offset();a("#color_picker").draggable({cancel:".jGraduate_tabs, .jGraduate_colPick, .jGraduate_gradPick, .jPicker",containment:"window"}).css(l.colorPickerCSS||{left:g.left-140,bottom:40}).jGraduate({paint:e,window:{pickerTitle:f},images:{clientPath:l.jGraduatePath},newstop:"inverse"},function(b){e=new a.jGraduate.Paint(b),R[c].setPaint(e),d.setPaint(c,e),a("#color_picker").hide()},function(){a("#color_picker").hide()})},Xb=function(b,c){var e,f,g=l["fill"===c?"initFill":"initStroke"],h=(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg"><rect width="16.5" height="16.5"					fill="#'+g.color+'" opacity="'+g.opacity+'"/>					<defs><linearGradient id="gradbox_"/></defs></svg>',"text/xml"),i=h.documentElement;i=a(b)[0].appendChild(document.importNode(i,!0)),i.setAttribute("width",16.5),this.rect=i.firstChild,this.defs=i.getElementsByTagName("defs")[0],this.grad=this.defs.firstChild,this.paint=new a.jGraduate.Paint({solidColor:g.color}),this.type=c,this.setPaint=function(a,b){this.paint=a;var c="none",g=a.type,h=a.alpha/100;switch(g){case"solidColor":c="none"!=a[g]?"#"+a[g]:a[g];break;case"linearGradient":case"radialGradient":this.defs.removeChild(this.grad),this.grad=this.defs.appendChild(a[g]);var i=this.grad.id="gradbox_"+this.type;c="url(#"+i+")"}this.rect.setAttribute("fill",c),this.rect.setAttribute("opacity",h),b&&(d.setColor(this.type,e,!0),d.setPaintOpacity(this.type,f,!0))},this.update=function(a){if(V){var b,c,g=this.type;switch(V.tagName){case"use":case"image":case"foreignObject":return;case"g":case"a":var h=null,i=V.getElementsByTagName("*");for(b=0,c=i.length;c>b;b++){var j=i[b],k=j.getAttribute(g);if(0===b)h=k;else if(h!==k){h=null;break}}if(null===h)return void(e=null);e=h,f=1;break;default:f=parseFloat(V.getAttribute(g+"-opacity")),isNaN(f)&&(f=1);var l="fill"===g?"black":"none";e=V.getAttribute(g)||l}a&&(d.setColor(g,e,!0),d.setPaintOpacity(g,f,!0)),f*=100;var m=Ja(e,f,g);this.setPaint(m)}},this.prep=function(){var b=this.paint.type;switch(b){case"linearGradient":case"radialGradient":var e=new a.jGraduate.Paint({copy:this.paint});d.setPaint(c,e)}}};R.fill=new Xb("#fill_color","fill"),R.stroke=new Xb("#stroke_color","stroke"),a("#stroke_width").val(l.initStroke.width),a("#group_opacity").val(100*l.initOpacity);var Yb=R.fill.rect.cloneNode(!1);Yb.setAttribute("style","vector-effect:non-scaling-stroke"),B="non-scaling-stroke"===Yb.style.vectorEffect,Yb.removeAttribute("style");var Zb=R.fill.rect.ownerDocument,$b=Zb.createElementNS(svgedit.NS.SVG,"feGaussianBlur");void 0===$b.stdDeviationX&&a("#tool_blur").hide(),a($b).remove(),function(){var a="-"+Da.toLowerCase()+"-zoom-",b=a+"in";L.css("cursor",b),L.css("cursor")===b&&(N=b,O=a+"out"),L.css("cursor","auto")}(),setTimeout(function(){d.embedImage("images/logo.png",function(b){b||(a("#image_save_opts [value=embed]").attr("disabled","disabled"),a("#image_save_opts input").val(["ref"]),a.pref("img_save","ref"),a("#image_opt_embed").css("color","#666").attr("title",o.notification.featNotSupported))})},1e3),a("#fill_color, #tool_fill .icon_label").click(function(){Wb(a("#fill_color")),ma()}),a("#stroke_color, #tool_stroke .icon_label").click(function(){Wb(a("#stroke_color")),ma()}),a("#group_opacityLabel").click(function(){a("#opacity_dropdown button").mousedown(),a(window).mouseup()}),a("#zoomLabel").click(function(){a("#zoom_dropdown button").mousedown(),a(window).mouseup()}),a("#tool_move_top").mousedown(function(b){a("#tools_stacking").show(),b.preventDefault()}),a(".layer_button").mousedown(function(){a(this).addClass("layer_buttonpressed")}).mouseout(function(){a(this).removeClass("layer_buttonpressed")}).mouseup(function(){a(this).removeClass("layer_buttonpressed")}),a(".push_button").mousedown(function(){a(this).hasClass("disabled")||a(this).addClass("push_button_pressed").removeClass("push_button")}).mouseout(function(){a(this).removeClass("push_button_pressed").addClass("push_button")}).mouseup(function(){a(this).removeClass("push_button_pressed").addClass("push_button")}),a("#layer_new").click(function(){var b,c=d.getCurrentDrawing().getNumLayers();do b=o.layers.layer+" "+ ++c;while(d.getCurrentDrawing().hasLayer(b));a.prompt(o.notification.enterUniqueLayerName,b,function(b){if(b){if(d.getCurrentDrawing().hasLayer(b))return void a.alert(o.notification.dupeLayerName);d.createLayer(b),oa(),ca()}})}),a("#layer_delete").click(s),a("#layer_up").click(function(){t(-1)}),a("#layer_down").click(function(){t(1)}),a("#layer_rename").click(function(){var b=a("#layerlist tr.layersel td.layername").text();a.prompt(o.notification.enterNewLayerName,"",function(c){if(c){if(b==c||d.getCurrentDrawing().hasLayer(c))return void a.alert(o.notification.layerHasThatName);d.renameCurrentLayer(c),ca()}})});var _b=300,ac=150,bc=-1,cc=!1,dc=!1,ec=function(b){var c=a("#ruler_x");a("#sidepanels").width("+="+b),a("#layerpanel").width("+="+b),c.css("right",parseInt(c.css("right"),10)+b),L.css("right",parseInt(L.css("right"),10)+b),d.runExtensions("workareaResized")},fc=function(b){if(dc&&-1!=bc){cc=!0;var c=bc-b.pageX,d=a("#sidepanels").width();d+c>_b?(c=_b-d,d=_b):2>d+c&&(c=2-d,d=2),0!=c&&(bc-=c,ec(c))}},gc=function(b){var c=a("#sidepanels").width(),d=(c>2||b?2:ac)-c;ec(d)};a("#sidepanel_handle").mousedown(function(b){bc=b.pageX,a(window).mousemove(fc),dc=!1,setTimeout(function(){dc=!0},20)}).mouseup(function(a){cc||gc(),bc=-1,cc=!1}),a(window).mouseup(function(){bc=-1,cc=!1,a("#svg_editor").unbind("mousemove",fc)}),ca();var hc=function(){L.css("line-height",L.height()+"px")};if(a(window).bind("load resize",hc),a("#resolution").change(function(){var b=a("#canvas_width,#canvas_height");if(this.selectedIndex)if("content"==this.value)b.val("fit").attr("disabled","disabled");else{var c=this.value.split("x");a("#canvas_width").val(c[0]),a("#canvas_height").val(c[1]),b.removeAttr("disabled")}else"fit"==a("#canvas_width").val()&&b.removeAttr("disabled").val(100)}),a("input,select").attr("autocomplete","off"),E=function(){var b=[{sel:"#tool_select",fn:ia,evt:"click",key:["V",!0]},{sel:"#tool_fhpath",fn:Sa,evt:"click",key:["Q",!0]},{sel:"#tool_line",fn:Ta,evt:"click",key:["L",!0]},{sel:"#tool_rect",fn:Va,evt:"mouseup",key:["R",!0],parent:"#tools_rect",icon:"rect"},{sel:"#tool_square",fn:Ua,evt:"mouseup",parent:"#tools_rect",icon:"square"},{sel:"#tool_fhrect",fn:Wa,evt:"mouseup",parent:"#tools_rect",icon:"fh_rect"},{sel:"#tool_ellipse",fn:Ya,evt:"mouseup",key:["E",!0],parent:"#tools_ellipse",icon:"ellipse"},{sel:"#tool_circle",fn:Xa,evt:"mouseup",parent:"#tools_ellipse",icon:"circle"},{sel:"#tool_fhellipse",fn:Za,evt:"mouseup",parent:"#tools_ellipse",icon:"fh_ellipse"},{sel:"#tool_path",fn:db,evt:"click",key:["P",!0]},{sel:"#tool_text",fn:cb,evt:"click",key:["T",!0]},{sel:"#tool_image",fn:$a,evt:"mouseup"},{sel:"#tool_zoom",fn:_a,evt:"mouseup",key:["Z",!0]},{sel:"#tool_clear",fn:xb,evt:"mouseup",key:["N",!0]},{sel:"#tool_save",fn:function(){X?Lb():Ab()},evt:"mouseup",key:["S",!0]},{sel:"#tool_export",fn:Bb,evt:"mouseup"},{sel:"#tool_open",fn:Cb,evt:"mouseup",key:["O",!0]},{sel:"#tool_import",fn:Db,evt:"mouseup"},{sel:"#tool_wireframe",fn:Jb,evt:"click",key:["F",!0]},{sel:"#tool_source_cancel,.overlay,#tool_docprops_cancel,#tool_prefs_cancel",fn:Qb,evt:"click",key:["esc",!1,!1],hidekey:!0},{sel:"#tool_source_save",fn:Lb,evt:"click"},{sel:"#tool_docprops_save",fn:Ob,evt:"click"},{sel:"#tool_prefs_option",fn:function(){return showPreferences(),!1},evt:"mouseup"},{sel:"#tool_delete,#tool_delete_multi",fn:eb,evt:"click",key:["del/backspace",!0]},{sel:"#tool_reorient",fn:mb,evt:"click"},{sel:"#tool_node_link",fn:pb,evt:"click"},{sel:"#tool_node_clone",fn:qb,evt:"click"},{sel:"#tool_node_delete",fn:rb,evt:"click"},{sel:"#tool_openclose_path",fn:tb,evt:"click"},{sel:"#tool_add_subpath",fn:sb,evt:"click"},{sel:"#tool_move_top",fn:ib,evt:"click",key:"ctrl+shift+]"},{sel:"#tool_move_bottom",fn:jb,evt:"click",key:"ctrl+shift+["},{sel:"#tool_topath",fn:lb,evt:"click"},{sel:"#tool_make_link,#tool_make_link_multi",fn:nb,evt:"click"},{sel:"#tool_undo",fn:Eb,evt:"click",key:["Z",!0]},{sel:"#tool_redo",fn:Fb,evt:"click",key:["Y",!0]},{sel:"#tool_clone,#tool_clone_multi",fn:Hb,evt:"click",key:["D",!0]},{sel:"#tool_group_elements",fn:Gb,evt:"click",key:["G",!0]},{sel:"#tool_ungroup",fn:Gb,evt:"click"},{sel:"#tool_unlink_use",fn:Gb,evt:"click"},{sel:"[id^=tool_align]",fn:Ib,evt:"click"},{sel:"#tool_bold",fn:yb,evt:"mousedown"},{sel:"#tool_italic",fn:zb,evt:"mousedown"},{sel:"#sidepanel_handle",fn:gc,key:["X"]},{sel:"#copy_save_done",fn:Qb,evt:"click"},{key:"ctrl+left",fn:function(){wb(0,1)}},{key:"ctrl+right",fn:function(){wb(1,1)}},{key:"ctrl+shift+left",fn:function(){wb(0,5)}},{key:"ctrl+shift+right",fn:function(){wb(1,5)}},{key:"shift+O",fn:vb},{key:"shift+P",fn:ub},{key:[H+"up",!0],fn:function(){ab(2)}},{key:[H+"down",!0],fn:function(){ab(.5)}},{key:[H+"]",!0],fn:function(){kb("Up")}},{key:[H+"[",!0],fn:function(){kb("Down")}},{key:["up",!0],fn:function(){ob(0,-1)}},{key:["down",!0],fn:function(){ob(0,1)}},{key:["left",!0],fn:function(){ob(-1,0)}},{key:["right",!0],fn:function(){ob(1,0)}},{key:"shift+up",fn:function(){ob(0,-10)}},{key:"shift+down",fn:function(){ob(0,10)}},{key:"shift+left",fn:function(){ob(-10,0)}},{key:"shift+right",fn:function(){ob(10,0)}},{key:["alt+up",!0],fn:function(){d.cloneSelectedElements(0,-1)}},{key:["alt+down",!0],fn:function(){d.cloneSelectedElements(0,1)}},{key:["alt+left",!0],fn:function(){d.cloneSelectedElements(-1,0)}},{key:["alt+right",!0],fn:function(){d.cloneSelectedElements(1,0)}},{key:["alt+shift+up",!0],fn:function(){d.cloneSelectedElements(0,-10)}},{key:["alt+shift+down",!0],fn:function(){d.cloneSelectedElements(0,10)}},{key:["alt+shift+left",!0],fn:function(){d.cloneSelectedElements(-10,0)}},{key:["alt+shift+right",!0],fn:function(){d.cloneSelectedElements(10,0)}},{key:"A",fn:function(){d.selectAllInCurrentLayer()}},{key:H+"z",fn:Eb},{key:H+"shift+z",fn:Fb},{key:H+"y",fn:Fb},{key:H+"x",fn:fb},{key:H+"c",fn:gb},{key:H+"v",fn:hb}],c={"4/Shift+4":"#tools_rect_show","5/Shift+5":"#tools_ellipse_show"};return{setAll:function(){var d={};a.each(b,function(b,e){var f;if(e.sel){if(f=a(e.sel),0==f.length)return!0;if(e.evt&&(svgedit.browser.isTouch()&&"click"===e.evt&&(e.evt="mousedown"),f[e.evt](e.fn)),e.parent&&0!=a(e.parent+"_show").length){var g=a(e.parent);g.length||(g=Ca(e.parent.substr(1))),g.append(f),a.isArray(d[e.parent])||(d[e.parent]=[]),d[e.parent].push(e)}}if(e.key){var h,i=!0,j=e.fn,k=!1;if(a.isArray(e.key)?(h=e.key[0],e.key.length>1&&(k=e.key[1]),e.key.length>2&&(i=e.key[2])):h=e.key,h+="",a.each(h.split("/"),function(b,c){a(document).bind("keydown",c,function(a){return j(),k&&a.preventDefault(),!1})}),e.sel&&!e.hidekey&&f.attr("title")){var l=f.attr("title").split("[")[0]+" ("+h+")";c[h]=e.sel,f.parents("#main_menu").length||f.attr("title",l)}}}),Ba(d),a(".attr_changer, #image_url").bind("keydown","return",function(b){a(this).change(),b.preventDefault()}),a(window).bind("keydown","tab",function(a){"canvas"===P&&(a.preventDefault(),ub())}).bind("keydown","shift+tab",function(a){"canvas"===P&&(a.preventDefault(),vb())}),a("#tool_zoom").dblclick(bb)},setTitles:function(){a.each(c,function(b,c){var d=a(c).parents("#main_menu").length;a(c).each(function(){var c;c=d?a(this).text().split(" [")[0]:this.title.split(" [")[0];var e="";a.each(b.split("/"),function(a,b){var c=b.split("+"),d="";c.length>1&&(d=c[0]+"+",b=c[1]),e+=(a?"/":"")+d+(o["key_"+b]||b)}),d?this.lastChild.textContent=c+" ["+e+"]":this.title=c+" ["+e+"]"})})},getButtonData:function(c){var d;return a.each(b,function(a,b){b.sel===c&&(d=b)}),d}}}(),E.setAll(),c.ready(function(){var b,c=l.initTool,d=a("#tools_left, #svg_editor .tools_flyout"),e=d.find("#tool_"+c),f=d.find("#"+c);b=e.length?e:f.length?f:a("#tool_select"),b.click().mouseup(),l.wireframe&&a("#tool_wireframe").click(),l.showlayers&&gc(),l.baseUnit&&a("#base_unit").val(l.baseUnit),l.gridSnapping&&(a("#grid_snapping_on")[0].checked=!0),l.snappingStep&&a("#grid_snapping_step").val(l.snappingStep),l.gridColor&&a("#grid_color").val(l.gridColor)}),window.addEventListener("beforeunload",function(a){return 0===J.getUndoStackSize()&&(c.showSaveWarning=!1),!l.no_save_warning&&c.showSaveWarning?(a.returnValue=o.notification.unsavedChanges,o.notification.unsavedChanges):void 0},!1),c.openPrep=function(b){a("#main_menu").hide(),0===J.getUndoStackSize()?b(!0):a.confirm(o.notification.QwantToOpen,b)},window.FileReader){var ic=function(b){a.process_cancel(o.notification.loadingImage),b.stopPropagation(),b.preventDefault(),a("#main_menu").hide();var c="drop"==b.type?b.dataTransfer.files[0]:this.files[0];if(c&&-1!=c.type.indexOf("image")){var e;-1!=c.type.indexOf("svg")?(e=new FileReader,e.onloadend=function(a){d.importSvgString(a.target.result,!0),d.ungroupSelectedElement(),d.ungroupSelectedElement(),d.groupSelectedElements(),d.alignSelectedElements("m","page"),d.alignSelectedElements("c","page")},e.readAsText(c)):(e=new FileReader,e.onloadend=function(a){var b=function(b,c){var e=d.addSvgElementFromJson({element:"image",attr:{x:0,y:0,width:b,height:c,id:d.getNextId(),style:"pointer-events:inherit"}});d.setHref(e,a.target.result),d.selectOnly([e]),d.alignSelectedElements("m","page"),d.alignSelectedElements("c","page"),oa()},c=100,e=100,f=new Image;f.src=a.target.result,f.style.opacity=0,f.onload=function(){c=f.offsetWidth,e=f.offsetHeight,b(c,e)}},e.readAsDataURL(c))}};L[0].addEventListener("dragenter",u,!1),L[0].addEventListener("dragover",v,!1),L[0].addEventListener("dragleave",w,!1),L[0].addEventListener("drop",ic,!1);var jc=a('<input type="file">').change(function(){var e=this;c.openPrep(function(c){if(c&&(d.clear(),1===e.files.length)){a.process_cancel(o.notification.loadingImage);var f=new FileReader;f.onloadend=function(a){b(a.target.result),la()},f.readAsText(e.files[0])}})});a("#tool_open").show().prepend(jc);var kc=a('<input type="file">').change(ic);a("#tool_import").show().prepend(kc)}la(!0),a(function(){window.svgCanvas=d,d.ready=c.ready}),c.setLang=function(b,e){if(c.langChanged=!0,a.pref("lang",b),a("#lang_select").val(b),e){var f=a("#layerlist tr.layersel td.layername").text(),g=f==o.common.layer+" 1";if(a.extend(o,e),d.setUiStrings(e),E.setTitles(),g&&(d.renameCurrentLayer(o.common.layer+" 1"),ca()),Ha.length)for(;Ha.length;){var h=Ha.shift();h.langReady({lang:b,uiStrings:o})}else d.runExtensions("langReady",{lang:b,uiStrings:o});d.runExtensions("langChanged",b),za();var i={"#stroke_color":"#tool_stroke .icon_label, #tool_stroke .color_block","#fill_color":"#tool_fill label, #tool_fill .color_block","#linejoin_miter":"#cur_linejoin","#linecap_butt":"#cur_linecap"};a.each(i,function(b,c){a(c).attr("title",a(b)[0].title)}),a("#multiselected_panel div[id^=tool_align]").each(function(){a("#tool_pos"+this.id.substr(10))[0].title=this.title})}}},c.ready=function(a){g?a():h.push(a)},c.runCallbacks=function(){a.each(h,function(){this()}),g=!0},c.loadFromString=function(a){c.ready(function(){b(a)})},c.disableUI=function(a){},c.loadFromURL=function(d,e){e||(e={});var f=e.cache,g=e.callback;c.ready(function(){a.ajax({url:d,dataType:"text",cache:!!f,beforeSend:function(){a.process_cancel(o.notification.loadingImage)},success:function(a){b(a,g)},error:function(c,d,e){404!=c.status&&c.responseText?b(c.responseText,g):a.alert(o.notification.URLloadFail+": \n"+e,g)},complete:function(){a("#dialog_box").hide()}})})},c.loadFromDataURI=function(a){c.ready(function(){var c="data:image/svg+xml;base64,",d=a.substring(c.length);b(f.decode64(d))})},c.addExtension=function(){var b=arguments;a(function(){d&&d.addExtension.apply(this,b)})},c}(jQuery),$(svgEditor.init))}();var svgEditor=function(a,b){"use strict";function c(b,c,d){var e,f,g,h,i,j,k=a("#svg_editor").parent();for(f in c)if(g=c[f],g||console.log(f),d&&(f="#"+f),h=k.find(f),h.length)switch(i=k.find(f)[0],b){case"content":for(e=0;e<i.childNodes.length;e++)if(j=i.childNodes[e],3===j.nodeType&&j.textContent.replace(/\s/g,"")){j.textContent=g;break}break;case"title":i.title=g}}var d;return b.readLang=function(e){var f=b.canvas.runExtensions("addlangData",d,!0);if(a.each(f,function(b,c){c.data&&(e=a.merge(e,c.data))}),e.tools){var g=e.tools,h=(e.misc,e.properties),i=e.config,j=e.layers,k=e.common,l=e.ui;c("content",{curve_segments:h.curve_segments,fitToContent:g.fitToContent,fit_to_all:g.fit_to_all,fit_to_canvas:g.fit_to_canvas,fit_to_layer_content:g.fit_to_layer_content,fit_to_sel:g.fit_to_sel,icon_large:i.icon_large,icon_medium:i.icon_medium,icon_small:i.icon_small,icon_xlarge:i.icon_xlarge,image_opt_embed:i.image_opt_embed,image_opt_ref:i.image_opt_ref,includedImages:i.included_images,largest_object:g.largest_object,layersLabel:j.layers,page:g.page,relativeToLabel:g.relativeTo,selLayerLabel:j.move_elems_to,selectedPredefined:i.select_predefined,selected_objects:g.selected_objects,smallest_object:g.smallest_object,straight_segments:h.straight_segments,svginfo_bg_url:i.editor_img_url+":",svginfo_bg_note:i.editor_bg_note,svginfo_change_background:i.background,svginfo_dim:i.doc_dims,svginfo_editor_prefs:i.editor_prefs,svginfo_height:k.height,svginfo_icons:i.icon_size,svginfo_image_props:i.image_props,svginfo_lang:i.language,svginfo_title:i.doc_title,svginfo_width:k.width,tool_docprops_cancel:k.cancel,tool_docprops_save:k.ok,tool_source_cancel:k.cancel,tool_source_save:k.ok,tool_prefs_cancel:k.cancel,tool_prefs_save:k.ok,sidepanel_handle:j.layers.split("").join(" "),tool_clear:g.new_doc,tool_docprops:g.docprops,tool_export:g.export_img,tool_import:g.import_doc,tool_imagelib:g.imagelib,tool_open:g.open_doc,tool_save:g.save_doc,svginfo_units_rulers:i.units_and_rulers,svginfo_rulers_onoff:i.show_rulers,svginfo_unit:i.base_unit,svginfo_grid_settings:i.grid,svginfo_snap_onoff:i.snapping_onoff,svginfo_snap_step:i.snapping_stepsize,svginfo_grid_color:i.grid_color},!0);var m,n={};for(m in e.shape_cats)n['#shape_cats [data-cat="'+m+'"]']=e.shape_cats[m];setTimeout(function(){c("content",n)},2e3);var o={};a.each(["cut","copy","paste","paste_in_place","delete","group","ungroup","move_front","move_up","move_down","move_back"],function(){o['#cmenu_canvas a[href="#'+this+'"]']=g[this]}),a.each(["dupe","merge_down","merge_all"],function(){o['#cmenu_layers a[href="#'+this+'"]']=j[this]}),o['#cmenu_layers a[href="#delete"]']=j.del,c("content",o),c("title",{align_relative_to:g.align_relative_to,circle_cx:h.circle_cx,circle_cy:h.circle_cy,circle_r:h.circle_r,cornerRadiusLabel:h.corner_radius,ellipse_cx:h.ellipse_cx,ellipse_cy:h.ellipse_cy,ellipse_rx:h.ellipse_rx,ellipse_ry:h.ellipse_ry,fill_color:h.fill_color,font_family:h.font_family,idLabel:h.id,image_height:h.image_height,image_url:h.image_url,image_width:h.image_width,layer_delete:j.del,layer_down:j.move_down,layer_new:j["new"],layer_rename:j.rename,layer_moreopts:k.more_opts,layer_up:j.move_up,line_x1:h.line_x1,line_x2:h.line_x2,line_y1:h.line_y1,line_y2:h.line_y2,linecap_butt:h.linecap_butt,linecap_round:h.linecap_round,linecap_square:h.linecap_square,linejoin_bevel:h.linejoin_bevel,linejoin_miter:h.linejoin_miter,linejoin_round:h.linejoin_round,main_icon:g.main_menu,mode_connect:g.mode_connect,tools_shapelib_show:g.mode_shapelib,palette:l.palette_info,zoom_panel:l.zoom_level,path_node_x:h.node_x,path_node_y:h.node_y,rect_height_tool:h.rect_height,rect_width_tool:h.rect_width,seg_type:h.seg_type,selLayerNames:j.move_selected,selected_x:h.pos_x,selected_y:h.pos_y,stroke_color:h.stroke_color,stroke_style:h.stroke_style,stroke_width:h.stroke_width,svginfo_title:i.doc_title,text:h.text_contents,toggle_stroke_tools:l.toggle_stroke_tools,tool_add_subpath:g.add_subpath,tool_alignbottom:g.align_bottom,tool_aligncenter:g.align_center,tool_alignleft:g.align_left,tool_alignmiddle:g.align_middle,tool_alignright:g.align_right,tool_aligntop:g.align_top,tool_angle:h.angle,tool_blur:h.blur,tool_bold:h.bold,tool_circle:g.mode_circle,tool_clone:g.clone,tool_clone_multi:g.clone,tool_delete:g.del,tool_delete_multi:g.del,tool_ellipse:g.mode_ellipse,tool_eyedropper:g.mode_eyedropper,tool_fhellipse:g.mode_fhellipse,tool_fhpath:g.mode_fhpath,tool_fhrect:g.mode_fhrect,tool_font_size:h.font_size,tool_group_elements:g.group_elements,tool_make_link:g.make_link,tool_link_url:g.set_link_url,tool_image:g.mode_image,tool_italic:h.italic,tool_line:g.mode_line,tool_move_bottom:g.move_bottom,tool_move_top:g.move_top,tool_node_clone:g.node_clone,tool_node_delete:g.node_delete,tool_node_link:g.node_link,tool_opacity:h.opacity,tool_openclose_path:g.openclose_path,tool_path:g.mode_path,tool_position:g.align_to_page,tool_rect:g.mode_rect,tool_redo:g.redo,tool_reorient:g.reorient_path,tool_select:g.mode_select,tool_source:g.source_save,tool_square:g.mode_square,tool_text:g.mode_text,tool_topath:g.to_path,tool_undo:g.undo,tool_ungroup:g.ungroup,tool_wireframe:g.wireframe_mode,view_grid:g.toggle_grid,tool_zoom:g.mode_zoom,url_notice:g.no_embed},!0),b.setLang(d,e)}},b.putLocale=function(c,e){if(c)d=c;else{if(d=a.pref("lang"),!d&&(navigator.userLanguage?d=navigator.userLanguage:navigator.language&&(d=navigator.language),null==d))return;console.log("Lang: "+d),-1===a.inArray(d,e)&&"test"!==d&&(d="en")}var f=b.curConfig,g=f.langPath+"lang."+d+".js";a.getScript(g,function(a){if(!a){var b=document.createElement("script");b.src=g,document.querySelector("head").appendChild(b)}})},b}(jQuery,svgEditor);!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){function b(b,d){var e,f,g,h=b.nodeName.toLowerCase();return"area"===h?(e=b.parentNode,f=e.name,b.href&&f&&"map"===e.nodeName.toLowerCase()?(g=a("img[usemap='#"+f+"']")[0],!!g&&c(g)):!1):(/input|select|textarea|button|object/.test(h)?!b.disabled:"a"===h?b.href||d:d)&&c(b)}function c(b){return a.expr.filters.visible(b)&&!a(b).parents().addBack().filter(function(){return"hidden"===a.css(this,"visibility")}).length}function d(a){for(var b,c;a.length&&a[0]!==document;){if(b=a.css("position"),("absolute"===b||"relative"===b||"fixed"===b)&&(c=parseInt(a.css("zIndex"),10),!isNaN(c)&&0!==c))return c;a=a.parent()}return 0}function e(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},a.extend(this._defaults,this.regional[""]),this.regional.en=a.extend(!0,{},this.regional[""]),this.regional["en-US"]=a.extend(!0,{},this.regional.en),this.dpDiv=f(a("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function f(b){var c="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return b.delegate(c,"mouseout",function(){a(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&a(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&a(this).removeClass("ui-datepicker-next-hover")}).delegate(c,"mouseover",g)}function g(){a.datepicker._isDisabledDatepicker(r.inline?r.dpDiv.parent()[0]:r.input[0])||(a(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),a(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&a(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&a(this).addClass("ui-datepicker-next-hover"))}function h(b,c){a.extend(b,c);for(var d in c)null==c[d]&&(b[d]=c[d]);return b}function i(a){return function(){var b=this.element.val();a.apply(this,arguments),this._refresh(),b!==this.element.val()&&this._trigger("change")}}a.ui=a.ui||{},a.extend(a.ui,{version:"1.11.1",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),a.fn.extend({scrollParent:function(b){var c=this.css("position"),d="absolute"===c,e=b?/(auto|scroll|hidden)/:/(auto|scroll)/,f=this.parents().filter(function(){var b=a(this);return d&&"static"===b.css("position")?!1:e.test(b.css("overflow")+b.css("overflow-y")+b.css("overflow-x"))}).eq(0);return"fixed"!==c&&f.length?f:a(this[0].ownerDocument||document)},uniqueId:function(){var a=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++a)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&a(this).removeAttr("id")})}}),a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(b){return function(c){return!!a.data(c,b)}}):function(b,c,d){return!!a.data(b,d[3])},focusable:function(c){return b(c,!isNaN(a.attr(c,"tabindex")))},tabbable:function(c){var d=a.attr(c,"tabindex"),e=isNaN(d);return(e||d>=0)&&b(c,!e)}}),a("<a>").outerWidth(1).jquery||a.each(["Width","Height"],function(b,c){
function d(b,c,d,f){return a.each(e,function(){c-=parseFloat(a.css(b,"padding"+this))||0,d&&(c-=parseFloat(a.css(b,"border"+this+"Width"))||0),f&&(c-=parseFloat(a.css(b,"margin"+this))||0)}),c}var e="Width"===c?["Left","Right"]:["Top","Bottom"],f=c.toLowerCase(),g={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+c]=function(b){return void 0===b?g["inner"+c].call(this):this.each(function(){a(this).css(f,d(this,b)+"px")})},a.fn["outer"+c]=function(b,e){return"number"!=typeof b?g["outer"+c].call(this,b):this.each(function(){a(this).css(f,d(this,b,!0,e)+"px")})}}),a.fn.addBack||(a.fn.addBack=function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}),a("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(a.fn.removeData=function(b){return function(c){return arguments.length?b.call(this,a.camelCase(c)):b.call(this)}}(a.fn.removeData)),a.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),a.fn.extend({focus:function(b){return function(c,d){return"number"==typeof c?this.each(function(){var b=this;setTimeout(function(){a(b).focus(),d&&d.call(b)},c)}):b.apply(this,arguments)}}(a.fn.focus),disableSelection:function(){var a="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(a+".ui-disableSelection",function(a){a.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(b){if(void 0!==b)return this.css("zIndex",b);if(this.length)for(var c,d,e=a(this[0]);e.length&&e[0]!==document;){if(c=e.css("position"),("absolute"===c||"relative"===c||"fixed"===c)&&(d=parseInt(e.css("zIndex"),10),!isNaN(d)&&0!==d))return d;e=e.parent()}return 0}}),a.ui.plugin={add:function(b,c,d){var e,f=a.ui[b].prototype;for(e in d)f.plugins[e]=f.plugins[e]||[],f.plugins[e].push([c,d[e]])},call:function(a,b,c,d){var e,f=a.plugins[b];if(f&&(d||a.element[0].parentNode&&11!==a.element[0].parentNode.nodeType))for(e=0;e<f.length;e++)a.options[f[e][0]]&&f[e][1].apply(a.element,c)}};var j=0,k=Array.prototype.slice;a.cleanData=function(b){return function(c){var d,e,f;for(f=0;null!=(e=c[f]);f++)try{d=a._data(e,"events"),d&&d.remove&&a(e).triggerHandler("remove")}catch(g){}b(c)}}(a.cleanData),a.widget=function(b,c,d){var e,f,g,h,i={},j=b.split(".")[0];return b=b.split(".")[1],e=j+"-"+b,d||(d=c,c=a.Widget),a.expr[":"][e.toLowerCase()]=function(b){return!!a.data(b,e)},a[j]=a[j]||{},f=a[j][b],g=a[j][b]=function(a,b){return this._createWidget?void(arguments.length&&this._createWidget(a,b)):new g(a,b)},a.extend(g,f,{version:d.version,_proto:a.extend({},d),_childConstructors:[]}),h=new c,h.options=a.widget.extend({},h.options),a.each(d,function(b,d){return a.isFunction(d)?void(i[b]=function(){var a=function(){return c.prototype[b].apply(this,arguments)},e=function(a){return c.prototype[b].apply(this,a)};return function(){var b,c=this._super,f=this._superApply;return this._super=a,this._superApply=e,b=d.apply(this,arguments),this._super=c,this._superApply=f,b}}()):void(i[b]=d)}),g.prototype=a.widget.extend(h,{widgetEventPrefix:f?h.widgetEventPrefix||b:b},i,{constructor:g,namespace:j,widgetName:b,widgetFullName:e}),f?(a.each(f._childConstructors,function(b,c){var d=c.prototype;a.widget(d.namespace+"."+d.widgetName,g,c._proto)}),delete f._childConstructors):c._childConstructors.push(g),a.widget.bridge(b,g),g},a.widget.extend=function(b){for(var c,d,e=k.call(arguments,1),f=0,g=e.length;g>f;f++)for(c in e[f])d=e[f][c],e[f].hasOwnProperty(c)&&void 0!==d&&(a.isPlainObject(d)?b[c]=a.isPlainObject(b[c])?a.widget.extend({},b[c],d):a.widget.extend({},d):b[c]=d);return b},a.widget.bridge=function(b,c){var d=c.prototype.widgetFullName||b;a.fn[b]=function(e){var f="string"==typeof e,g=k.call(arguments,1),h=this;return e=!f&&g.length?a.widget.extend.apply(null,[e].concat(g)):e,f?this.each(function(){var c,f=a.data(this,d);return"instance"===e?(h=f,!1):f?a.isFunction(f[e])&&"_"!==e.charAt(0)?(c=f[e].apply(f,g),c!==f&&void 0!==c?(h=c&&c.jquery?h.pushStack(c.get()):c,!1):void 0):a.error("no such method '"+e+"' for "+b+" widget instance"):a.error("cannot call methods on "+b+" prior to initialization; attempted to call method '"+e+"'")}):this.each(function(){var b=a.data(this,d);b?(b.option(e||{}),b._init&&b._init()):a.data(this,d,new c(e,this))}),h}},a.Widget=function(){},a.Widget._childConstructors=[],a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(b,c){c=a(c||this.defaultElement||this)[0],this.element=a(c),this.uuid=j++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=a.widget.extend({},this.options,this._getCreateOptions(),b),this.bindings=a(),this.hoverable=a(),this.focusable=a(),c!==this&&(a.data(c,this.widgetFullName,this),this._on(!0,this.element,{remove:function(a){a.target===c&&this.destroy()}}),this.document=a(c.style?c.ownerDocument:c.document||c),this.window=a(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:a.noop,_getCreateEventData:a.noop,_create:a.noop,_init:a.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(a.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:a.noop,widget:function(){return this.element},option:function(b,c){var d,e,f,g=b;if(0===arguments.length)return a.widget.extend({},this.options);if("string"==typeof b)if(g={},d=b.split("."),b=d.shift(),d.length){for(e=g[b]=a.widget.extend({},this.options[b]),f=0;f<d.length-1;f++)e[d[f]]=e[d[f]]||{},e=e[d[f]];if(b=d.pop(),1===arguments.length)return void 0===e[b]?null:e[b];e[b]=c}else{if(1===arguments.length)return void 0===this.options[b]?null:this.options[b];g[b]=c}return this._setOptions(g),this},_setOptions:function(a){var b;for(b in a)this._setOption(b,a[b]);return this},_setOption:function(a,b){return this.options[a]=b,"disabled"===a&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!b),b&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(b,c,d){var e,f=this;"boolean"!=typeof b&&(d=c,c=b,b=!1),d?(c=e=a(c),this.bindings=this.bindings.add(c)):(d=c,c=this.element,e=this.widget()),a.each(d,function(d,g){function h(){return b||f.options.disabled!==!0&&!a(this).hasClass("ui-state-disabled")?("string"==typeof g?f[g]:g).apply(f,arguments):void 0}"string"!=typeof g&&(h.guid=g.guid=g.guid||h.guid||a.guid++);var i=d.match(/^([\w:-]*)\s*(.*)$/),j=i[1]+f.eventNamespace,k=i[2];k?e.delegate(k,j,h):c.bind(j,h)})},_off:function(a,b){b=(b||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,a.unbind(b).undelegate(b)},_delay:function(a,b){function c(){return("string"==typeof a?d[a]:a).apply(d,arguments)}var d=this;return setTimeout(c,b||0)},_hoverable:function(b){this.hoverable=this.hoverable.add(b),this._on(b,{mouseenter:function(b){a(b.currentTarget).addClass("ui-state-hover")},mouseleave:function(b){a(b.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(b){this.focusable=this.focusable.add(b),this._on(b,{focusin:function(b){a(b.currentTarget).addClass("ui-state-focus")},focusout:function(b){a(b.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(b,c,d){var e,f,g=this.options[b];if(d=d||{},c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),c.target=this.element[0],f=c.originalEvent)for(e in f)e in c||(c[e]=f[e]);return this.element.trigger(c,d),!(a.isFunction(g)&&g.apply(this.element[0],[c].concat(d))===!1||c.isDefaultPrevented())}},a.each({show:"fadeIn",hide:"fadeOut"},function(b,c){a.Widget.prototype["_"+b]=function(d,e,f){"string"==typeof e&&(e={effect:e});var g,h=e?e===!0||"number"==typeof e?c:e.effect||c:b;e=e||{},"number"==typeof e&&(e={duration:e}),g=!a.isEmptyObject(e),e.complete=f,e.delay&&d.delay(e.delay),g&&a.effects&&a.effects.effect[h]?d[b](e):h!==b&&d[h]?d[h](e.duration,e.easing,f):d.queue(function(c){a(this)[b](),f&&f.call(d[0]),c()})}});var l=(a.widget,!1);a(document).mouseup(function(){l=!1});a.widget("ui.mouse",{version:"1.11.1",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(a){return b._mouseDown(a)}).bind("click."+this.widgetName,function(c){return!0===a.data(c.target,b.widgetName+".preventClickEvent")?(a.removeData(c.target,b.widgetName+".preventClickEvent"),c.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(b){if(!l){this._mouseStarted&&this._mouseUp(b),this._mouseDownEvent=b;var c=this,d=1===b.which,e="string"==typeof this.options.cancel&&b.target.nodeName?a(b.target).closest(this.options.cancel).length:!1;return d&&!e&&this._mouseCapture(b)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){c.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=this._mouseStart(b)!==!1,!this._mouseStarted)?(b.preventDefault(),!0):(!0===a.data(b.target,this.widgetName+".preventClickEvent")&&a.removeData(b.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(a){return c._mouseMove(a)},this._mouseUpDelegate=function(a){return c._mouseUp(a)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),b.preventDefault(),l=!0,!0)):!0}},_mouseMove:function(b){return a.ui.ie&&(!document.documentMode||document.documentMode<9)&&!b.button?this._mouseUp(b):b.which?this._mouseStarted?(this._mouseDrag(b),b.preventDefault()):(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,b)!==!1,this._mouseStarted?this._mouseDrag(b):this._mouseUp(b)),!this._mouseStarted):this._mouseUp(b)},_mouseUp:function(b){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,b.target===this._mouseDownEvent.target&&a.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b)),l=!1,!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}});!function(){function b(a,b,c){return[parseFloat(a[0])*(n.test(a[0])?b/100:1),parseFloat(a[1])*(n.test(a[1])?c/100:1)]}function c(b,c){return parseInt(a.css(b,c),10)||0}function d(b){var c=b[0];return 9===c.nodeType?{width:b.width(),height:b.height(),offset:{top:0,left:0}}:a.isWindow(c)?{width:b.width(),height:b.height(),offset:{top:b.scrollTop(),left:b.scrollLeft()}}:c.preventDefault?{width:0,height:0,offset:{top:c.pageY,left:c.pageX}}:{width:b.outerWidth(),height:b.outerHeight(),offset:b.offset()}}a.ui=a.ui||{};var e,f,g=Math.max,h=Math.abs,i=Math.round,j=/left|center|right/,k=/top|center|bottom/,l=/[\+\-]\d+(\.[\d]+)?%?/,m=/^\w+/,n=/%$/,o=a.fn.position;a.position={scrollbarWidth:function(){if(void 0!==e)return e;var b,c,d=a("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),f=d.children()[0];return a("body").append(d),b=f.offsetWidth,d.css("overflow","scroll"),c=f.offsetWidth,b===c&&(c=d[0].clientWidth),d.remove(),e=b-c},getScrollInfo:function(b){var c=b.isWindow||b.isDocument?"":b.element.css("overflow-x"),d=b.isWindow||b.isDocument?"":b.element.css("overflow-y"),e="scroll"===c||"auto"===c&&b.width<b.element[0].scrollWidth,f="scroll"===d||"auto"===d&&b.height<b.element[0].scrollHeight;return{width:f?a.position.scrollbarWidth():0,height:e?a.position.scrollbarWidth():0}},getWithinInfo:function(b){var c=a(b||window),d=a.isWindow(c[0]),e=!!c[0]&&9===c[0].nodeType;return{element:c,isWindow:d,isDocument:e,offset:c.offset()||{left:0,top:0},scrollLeft:c.scrollLeft(),scrollTop:c.scrollTop(),width:d||e?c.width():c.outerWidth(),height:d||e?c.height():c.outerHeight()}}},a.fn.position=function(e){if(!e||!e.of)return o.apply(this,arguments);e=a.extend({},e);var n,p,q,r,s,t,u=a(e.of),v=a.position.getWithinInfo(e.within),w=a.position.getScrollInfo(v),x=(e.collision||"flip").split(" "),y={};return t=d(u),u[0].preventDefault&&(e.at="left top"),p=t.width,q=t.height,r=t.offset,s=a.extend({},r),a.each(["my","at"],function(){var a,b,c=(e[this]||"").split(" ");1===c.length&&(c=j.test(c[0])?c.concat(["center"]):k.test(c[0])?["center"].concat(c):["center","center"]),c[0]=j.test(c[0])?c[0]:"center",c[1]=k.test(c[1])?c[1]:"center",a=l.exec(c[0]),b=l.exec(c[1]),y[this]=[a?a[0]:0,b?b[0]:0],e[this]=[m.exec(c[0])[0],m.exec(c[1])[0]]}),1===x.length&&(x[1]=x[0]),"right"===e.at[0]?s.left+=p:"center"===e.at[0]&&(s.left+=p/2),"bottom"===e.at[1]?s.top+=q:"center"===e.at[1]&&(s.top+=q/2),n=b(y.at,p,q),s.left+=n[0],s.top+=n[1],this.each(function(){var d,j,k=a(this),l=k.outerWidth(),m=k.outerHeight(),o=c(this,"marginLeft"),t=c(this,"marginTop"),z=l+o+c(this,"marginRight")+w.width,A=m+t+c(this,"marginBottom")+w.height,B=a.extend({},s),C=b(y.my,k.outerWidth(),k.outerHeight());"right"===e.my[0]?B.left-=l:"center"===e.my[0]&&(B.left-=l/2),"bottom"===e.my[1]?B.top-=m:"center"===e.my[1]&&(B.top-=m/2),B.left+=C[0],B.top+=C[1],f||(B.left=i(B.left),B.top=i(B.top)),d={marginLeft:o,marginTop:t},a.each(["left","top"],function(b,c){a.ui.position[x[b]]&&a.ui.position[x[b]][c](B,{targetWidth:p,targetHeight:q,elemWidth:l,elemHeight:m,collisionPosition:d,collisionWidth:z,collisionHeight:A,offset:[n[0]+C[0],n[1]+C[1]],my:e.my,at:e.at,within:v,elem:k})}),e.using&&(j=function(a){var b=r.left-B.left,c=b+p-l,d=r.top-B.top,f=d+q-m,i={target:{element:u,left:r.left,top:r.top,width:p,height:q},element:{element:k,left:B.left,top:B.top,width:l,height:m},horizontal:0>c?"left":b>0?"right":"center",vertical:0>f?"top":d>0?"bottom":"middle"};l>p&&h(b+c)<p&&(i.horizontal="center"),m>q&&h(d+f)<q&&(i.vertical="middle"),g(h(b),h(c))>g(h(d),h(f))?i.important="horizontal":i.important="vertical",e.using.call(this,a,i)}),k.offset(a.extend(B,{using:j}))})},a.ui.position={fit:{left:function(a,b){var c,d=b.within,e=d.isWindow?d.scrollLeft:d.offset.left,f=d.width,h=a.left-b.collisionPosition.marginLeft,i=e-h,j=h+b.collisionWidth-f-e;b.collisionWidth>f?i>0&&0>=j?(c=a.left+i+b.collisionWidth-f-e,a.left+=i-c):j>0&&0>=i?a.left=e:i>j?a.left=e+f-b.collisionWidth:a.left=e:i>0?a.left+=i:j>0?a.left-=j:a.left=g(a.left-h,a.left)},top:function(a,b){var c,d=b.within,e=d.isWindow?d.scrollTop:d.offset.top,f=b.within.height,h=a.top-b.collisionPosition.marginTop,i=e-h,j=h+b.collisionHeight-f-e;b.collisionHeight>f?i>0&&0>=j?(c=a.top+i+b.collisionHeight-f-e,a.top+=i-c):j>0&&0>=i?a.top=e:i>j?a.top=e+f-b.collisionHeight:a.top=e:i>0?a.top+=i:j>0?a.top-=j:a.top=g(a.top-h,a.top)}},flip:{left:function(a,b){var c,d,e=b.within,f=e.offset.left+e.scrollLeft,g=e.width,i=e.isWindow?e.scrollLeft:e.offset.left,j=a.left-b.collisionPosition.marginLeft,k=j-i,l=j+b.collisionWidth-g-i,m="left"===b.my[0]?-b.elemWidth:"right"===b.my[0]?b.elemWidth:0,n="left"===b.at[0]?b.targetWidth:"right"===b.at[0]?-b.targetWidth:0,o=-2*b.offset[0];0>k?(c=a.left+m+n+o+b.collisionWidth-g-f,(0>c||c<h(k))&&(a.left+=m+n+o)):l>0&&(d=a.left-b.collisionPosition.marginLeft+m+n+o-i,(d>0||h(d)<l)&&(a.left+=m+n+o))},top:function(a,b){var c,d,e=b.within,f=e.offset.top+e.scrollTop,g=e.height,i=e.isWindow?e.scrollTop:e.offset.top,j=a.top-b.collisionPosition.marginTop,k=j-i,l=j+b.collisionHeight-g-i,m="top"===b.my[1],n=m?-b.elemHeight:"bottom"===b.my[1]?b.elemHeight:0,o="top"===b.at[1]?b.targetHeight:"bottom"===b.at[1]?-b.targetHeight:0,p=-2*b.offset[1];0>k?(d=a.top+n+o+p+b.collisionHeight-g-f,a.top+n+o+p>k&&(0>d||d<h(k))&&(a.top+=n+o+p)):l>0&&(c=a.top-b.collisionPosition.marginTop+n+o+p-i,a.top+n+o+p>l&&(c>0||h(c)<l)&&(a.top+=n+o+p))}},flipfit:{left:function(){a.ui.position.flip.left.apply(this,arguments),a.ui.position.fit.left.apply(this,arguments)},top:function(){a.ui.position.flip.top.apply(this,arguments),a.ui.position.fit.top.apply(this,arguments)}}},function(){var b,c,d,e,g,h=document.getElementsByTagName("body")[0],i=document.createElement("div");b=document.createElement(h?"div":"body"),d={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},h&&a.extend(d,{position:"absolute",left:"-1000px",top:"-1000px"});for(g in d)b.style[g]=d[g];b.appendChild(i),c=h||document.documentElement,c.insertBefore(b,c.firstChild),i.style.cssText="position: absolute; left: 10.7432222px;",e=a(i).offset().left,f=e>10&&11>e,b.innerHTML="",c.removeChild(b)}()}();a.ui.position,a.widget("ui.accordion",{version:"1.11.1",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",paddingBottom:"show",height:"show"},_create:function(){var b=this.options;this.prevShow=this.prevHide=a(),this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist"),b.collapsible||b.active!==!1&&null!=b.active||(b.active=0),this._processPanels(),b.active<0&&(b.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():a()}},_createIcons:function(){var b=this.options.icons;b&&(a("<span>").addClass("ui-accordion-header-icon ui-icon "+b.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(b.header).addClass(b.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var a;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").removeUniqueId(),this._destroyIcons(),a=this.headers.next().removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").css("display","").removeAttr("role").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeUniqueId(),"content"!==this.options.heightStyle&&a.css("height","")},_setOption:function(a,b){return"active"===a?void this._activate(b):("event"===a&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(b)),this._super(a,b),"collapsible"!==a||b||this.options.active!==!1||this._activate(0),"icons"===a&&(this._destroyIcons(),b&&this._createIcons()),void("disabled"===a&&(this.element.toggleClass("ui-state-disabled",!!b).attr("aria-disabled",b),this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!b))))},_keydown:function(b){if(!b.altKey&&!b.ctrlKey){var c=a.ui.keyCode,d=this.headers.length,e=this.headers.index(b.target),f=!1;switch(b.keyCode){case c.RIGHT:case c.DOWN:f=this.headers[(e+1)%d];break;case c.LEFT:case c.UP:f=this.headers[(e-1+d)%d];break;case c.SPACE:case c.ENTER:this._eventHandler(b);break;case c.HOME:f=this.headers[0];break;case c.END:f=this.headers[d-1]}f&&(a(b.target).attr("tabIndex",-1),a(f).attr("tabIndex",0),f.focus(),b.preventDefault())}},_panelKeyDown:function(b){b.keyCode===a.ui.keyCode.UP&&b.ctrlKey&&a(b.currentTarget).prev().focus()},refresh:function(){var b=this.options;this._processPanels(),b.active===!1&&b.collapsible===!0||!this.headers.length?(b.active=!1,this.active=a()):b.active===!1?this._activate(0):this.active.length&&!a.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(b.active=!1,this.active=a()):this._activate(Math.max(0,b.active-1)):b.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-state-default ui-corner-all"),this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide()},_refresh:function(){var b,c=this.options,d=c.heightStyle,e=this.element.parent();this.active=this._findActive(c.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all"),this.active.next().addClass("ui-accordion-content-active").show(),this.headers.attr("role","tab").each(function(){var b=a(this),c=b.uniqueId().attr("id"),d=b.next(),e=d.uniqueId().attr("id");b.attr("aria-controls",e),d.attr("aria-labelledby",c)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(c.event),"fill"===d?(b=e.height(),this.element.siblings(":visible").each(function(){var c=a(this),d=c.css("position");"absolute"!==d&&"fixed"!==d&&(b-=c.outerHeight(!0))}),this.headers.each(function(){b-=a(this).outerHeight(!0)}),this.headers.next().each(function(){a(this).height(Math.max(0,b-a(this).innerHeight()+a(this).height()))}).css("overflow","auto")):"auto"===d&&(b=0,this.headers.next().each(function(){b=Math.max(b,a(this).css("height","").height())}).height(b))},_activate:function(b){var c=this._findActive(b)[0];c!==this.active[0]&&(c=c||this.active[0],this._eventHandler({target:c,currentTarget:c,preventDefault:a.noop}))},_findActive:function(b){return"number"==typeof b?this.headers.eq(b):a()},_setupEvents:function(b){var c={keydown:"_keydown"};b&&a.each(b.split(" "),function(a,b){c[b]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,c),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(b){var c=this.options,d=this.active,e=a(b.currentTarget),f=e[0]===d[0],g=f&&c.collapsible,h=g?a():e.next(),i=d.next(),j={oldHeader:d,oldPanel:i,newHeader:g?a():e,newPanel:h};b.preventDefault(),f&&!c.collapsible||this._trigger("beforeActivate",b,j)===!1||(c.active=g?!1:this.headers.index(e),this.active=f?a():e,this._toggle(j),d.removeClass("ui-accordion-header-active ui-state-active"),c.icons&&d.children(".ui-accordion-header-icon").removeClass(c.icons.activeHeader).addClass(c.icons.header),f||(e.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),c.icons&&e.children(".ui-accordion-header-icon").removeClass(c.icons.header).addClass(c.icons.activeHeader),e.next().addClass("ui-accordion-content-active")))},_toggle:function(b){var c=b.newPanel,d=this.prevShow.length?this.prevShow:b.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=c,this.prevHide=d,this.options.animate?this._animate(c,d,b):(d.hide(),c.show(),this._toggleComplete(b)),d.attr({"aria-hidden":"true"}),d.prev().attr("aria-selected","false"),c.length&&d.length?d.prev().attr({tabIndex:-1,"aria-expanded":"false"}):c.length&&this.headers.filter(function(){return 0===a(this).attr("tabIndex")}).attr("tabIndex",-1),c.attr("aria-hidden","false").prev().attr({"aria-selected":"true",tabIndex:0,"aria-expanded":"true"})},_animate:function(a,b,c){var d,e,f,g=this,h=0,i=a.length&&(!b.length||a.index()<b.index()),j=this.options.animate||{},k=i&&j.down||j,l=function(){g._toggleComplete(c)};return"number"==typeof k&&(f=k),"string"==typeof k&&(e=k),e=e||k.easing||j.easing,f=f||k.duration||j.duration,b.length?a.length?(d=a.show().outerHeight(),b.animate(this.hideProps,{duration:f,easing:e,step:function(a,b){b.now=Math.round(a)}}),void a.hide().animate(this.showProps,{duration:f,easing:e,complete:l,step:function(a,c){c.now=Math.round(a),"height"!==c.prop?h+=c.now:"content"!==g.options.heightStyle&&(c.now=Math.round(d-b.outerHeight()-h),h=0)}})):b.animate(this.hideProps,f,e,l):a.animate(this.showProps,f,e,l)},_toggleComplete:function(a){var b=a.oldPanel;b.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),b.length&&(b.parent()[0].className=b.parent()[0].className),this._trigger("activate",null,a)}}),a.widget("ui.menu",{version:"1.11.1",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},items:"> *",menus:"ul",position:{my:"left-1 top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item":function(a){a.preventDefault()},"click .ui-menu-item":function(b){var c=a(b.target);!this.mouseHandled&&c.not(".ui-state-disabled").length&&(this.select(b),b.isPropagationStopped()||(this.mouseHandled=!0),c.has(".ui-menu").length?this.expand(b):!this.element.is(":focus")&&a(this.document[0].activeElement).closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(b){var c=a(b.currentTarget);c.siblings(".ui-state-active").removeClass("ui-state-active"),this.focus(b,c)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(a,b){var c=this.active||this.element.find(this.options.items).eq(0);b||this.focus(a,c)},blur:function(b){this._delay(function(){a.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(b)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(a){this._closeOnDocumentClick(a)&&this.collapseAll(a),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-menu-icons ui-front").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").removeUniqueId().removeClass("ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var b=a(this);b.data("ui-menu-submenu-carat")&&b.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(b){function c(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var d,e,f,g,h,i=!0;switch(b.keyCode){case a.ui.keyCode.PAGE_UP:this.previousPage(b);break;case a.ui.keyCode.PAGE_DOWN:this.nextPage(b);break;case a.ui.keyCode.HOME:this._move("first","first",b);break;case a.ui.keyCode.END:this._move("last","last",b);break;case a.ui.keyCode.UP:this.previous(b);break;case a.ui.keyCode.DOWN:this.next(b);break;case a.ui.keyCode.LEFT:this.collapse(b);break;case a.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(b);break;case a.ui.keyCode.ENTER:case a.ui.keyCode.SPACE:this._activate(b);break;case a.ui.keyCode.ESCAPE:this.collapse(b);break;default:i=!1,e=this.previousFilter||"",f=String.fromCharCode(b.keyCode),g=!1,clearTimeout(this.filterTimer),f===e?g=!0:f=e+f,h=new RegExp("^"+c(f),"i"),d=this.activeMenu.find(this.options.items).filter(function(){return h.test(a(this).text())}),d=g&&-1!==d.index(this.active.next())?this.active.nextAll(".ui-menu-item"):d,d.length||(f=String.fromCharCode(b.keyCode),h=new RegExp("^"+c(f),"i"),d=this.activeMenu.find(this.options.items).filter(function(){return h.test(a(this).text())})),d.length?(this.focus(b,d),d.length>1?(this.previousFilter=f,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}i&&b.preventDefault()},_activate:function(a){this.active.is(".ui-state-disabled")||(this.active.is("[aria-haspopup='true']")?this.expand(a):this.select(a))},refresh:function(){var b,c,d=this,e=this.options.icons.submenu,f=this.element.find(this.options.menus);this.element.toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length),f.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-front").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var b=a(this),c=b.parent(),d=a("<span>").addClass("ui-menu-icon ui-icon "+e).data("ui-menu-submenu-carat",!0);c.attr("aria-haspopup","true").prepend(d),b.attr("aria-labelledby",c.attr("id"))}),b=f.add(this.element),c=b.find(this.options.items),c.not(".ui-menu-item").each(function(){var b=a(this);d._isDivider(b)&&b.addClass("ui-widget-content ui-menu-divider")}),c.not(".ui-menu-item, .ui-menu-divider").addClass("ui-menu-item").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),c.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!a.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(a,b){"icons"===a&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(b.submenu),"disabled"===a&&this.element.toggleClass("ui-state-disabled",!!b).attr("aria-disabled",b),this._super(a,b)},focus:function(a,b){var c,d;this.blur(a,a&&"focus"===a.type),this._scrollIntoView(b),this.active=b.first(),d=this.active.addClass("ui-state-focus").removeClass("ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",d.attr("id")),this.active.parent().closest(".ui-menu-item").addClass("ui-state-active"),a&&"keydown"===a.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),c=b.children(".ui-menu"),c.length&&a&&/^mouse/.test(a.type)&&this._startOpening(c),this.activeMenu=b.parent(),this._trigger("focus",a,{item:b})},_scrollIntoView:function(b){var c,d,e,f,g,h;this._hasScroll()&&(c=parseFloat(a.css(this.activeMenu[0],"borderTopWidth"))||0,d=parseFloat(a.css(this.activeMenu[0],"paddingTop"))||0,e=b.offset().top-this.activeMenu.offset().top-c-d,f=this.activeMenu.scrollTop(),g=this.activeMenu.height(),h=b.outerHeight(),0>e?this.activeMenu.scrollTop(f+e):e+h>g&&this.activeMenu.scrollTop(f+e-g+h))},blur:function(a,b){b||clearTimeout(this.timer),this.active&&(this.active.removeClass("ui-state-focus"),this.active=null,this._trigger("blur",a,{item:this.active}))},_startOpening:function(a){clearTimeout(this.timer),"true"===a.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),
this._open(a)},this.delay))},_open:function(b){var c=a.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(b.parents(".ui-menu")).hide().attr("aria-hidden","true"),b.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(c)},collapseAll:function(b,c){clearTimeout(this.timer),this.timer=this._delay(function(){var d=c?this.element:a(b&&b.target).closest(this.element.find(".ui-menu"));d.length||(d=this.element),this._close(d),this.blur(b),this.activeMenu=d},this.delay)},_close:function(a){a||(a=this.active?this.active.parent():this.element),a.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find(".ui-state-active").not(".ui-state-focus").removeClass("ui-state-active")},_closeOnDocumentClick:function(b){return!a(b.target).closest(".ui-menu").length},_isDivider:function(a){return!/[^\-\u2014\u2013\s]/.test(a.text())},collapse:function(a){var b=this.active&&this.active.parent().closest(".ui-menu-item",this.element);b&&b.length&&(this._close(),this.focus(a,b))},expand:function(a){var b=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();b&&b.length&&(this._open(b.parent()),this._delay(function(){this.focus(a,b)}))},next:function(a){this._move("next","first",a)},previous:function(a){this._move("prev","last",a)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(a,b,c){var d;this.active&&(d="first"===a||"last"===a?this.active["first"===a?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[a+"All"](".ui-menu-item").eq(0)),d&&d.length&&this.active||(d=this.activeMenu.find(this.options.items)[b]()),this.focus(c,d)},nextPage:function(b){var c,d,e;return this.active?void(this.isLastItem()||(this._hasScroll()?(d=this.active.offset().top,e=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return c=a(this),c.offset().top-d-e<0}),this.focus(b,c)):this.focus(b,this.activeMenu.find(this.options.items)[this.active?"last":"first"]()))):void this.next(b)},previousPage:function(b){var c,d,e;return this.active?void(this.isFirstItem()||(this._hasScroll()?(d=this.active.offset().top,e=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return c=a(this),c.offset().top-d+e>0}),this.focus(b,c)):this.focus(b,this.activeMenu.find(this.options.items).first()))):void this.next(b)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(b){this.active=this.active||a(b.target).closest(".ui-menu-item");var c={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(b,!0),this._trigger("select",b,c)}});a.widget("ui.autocomplete",{version:"1.11.1",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var b,c,d,e=this.element[0].nodeName.toLowerCase(),f="textarea"===e,g="input"===e;this.isMultiLine=f?!0:g?!1:this.element.prop("isContentEditable"),this.valueMethod=this.element[f||g?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(e){if(this.element.prop("readOnly"))return b=!0,d=!0,void(c=!0);b=!1,d=!1,c=!1;var f=a.ui.keyCode;switch(e.keyCode){case f.PAGE_UP:b=!0,this._move("previousPage",e);break;case f.PAGE_DOWN:b=!0,this._move("nextPage",e);break;case f.UP:b=!0,this._keyEvent("previous",e);break;case f.DOWN:b=!0,this._keyEvent("next",e);break;case f.ENTER:this.menu.active&&(b=!0,e.preventDefault(),this.menu.select(e));break;case f.TAB:this.menu.active&&this.menu.select(e);break;case f.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(e),e.preventDefault());break;default:c=!0,this._searchTimeout(e)}},keypress:function(d){if(b)return b=!1,void(this.isMultiLine&&!this.menu.element.is(":visible")||d.preventDefault());if(!c){var e=a.ui.keyCode;switch(d.keyCode){case e.PAGE_UP:this._move("previousPage",d);break;case e.PAGE_DOWN:this._move("nextPage",d);break;case e.UP:this._keyEvent("previous",d);break;case e.DOWN:this._keyEvent("next",d)}}},input:function(a){return d?(d=!1,void a.preventDefault()):void this._searchTimeout(a)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(a){return this.cancelBlur?void delete this.cancelBlur:(clearTimeout(this.searching),this.close(a),void this._change(a))}}),this._initSource(),this.menu=a("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance"),this._on(this.menu.element,{mousedown:function(b){b.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var c=this.menu.element[0];a(b.target).closest(".ui-menu-item").length||this._delay(function(){var b=this;this.document.one("mousedown",function(d){d.target===b.element[0]||d.target===c||a.contains(c,d.target)||b.close()})})},menufocus:function(b,c){var d,e;return this.isNewMenu&&(this.isNewMenu=!1,b.originalEvent&&/^mouse/.test(b.originalEvent.type))?(this.menu.blur(),void this.document.one("mousemove",function(){a(b.target).trigger(b.originalEvent)})):(e=c.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",b,{item:e})&&b.originalEvent&&/^key/.test(b.originalEvent.type)&&this._value(e.value),d=c.item.attr("aria-label")||e.value,void(d&&a.trim(d).length&&(this.liveRegion.children().hide(),a("<div>").text(d).appendTo(this.liveRegion))))},menuselect:function(a,b){var c=b.item.data("ui-autocomplete-item"),d=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=d,this._delay(function(){this.previous=d,this.selectedItem=c})),!1!==this._trigger("select",a,{item:c})&&this._value(c.value),this.term=this._value(),this.close(a),this.selectedItem=c}}),this.liveRegion=a("<span>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(a,b){this._super(a,b),"source"===a&&this._initSource(),"appendTo"===a&&this.menu.element.appendTo(this._appendTo()),"disabled"===a&&b&&this.xhr&&this.xhr.abort()},_appendTo:function(){var b=this.options.appendTo;return b&&(b=b.jquery||b.nodeType?a(b):this.document.find(b).eq(0)),b&&b[0]||(b=this.element.closest(".ui-front")),b.length||(b=this.document[0].body),b},_initSource:function(){var b,c,d=this;a.isArray(this.options.source)?(b=this.options.source,this.source=function(c,d){d(a.ui.autocomplete.filter(b,c.term))}):"string"==typeof this.options.source?(c=this.options.source,this.source=function(b,e){d.xhr&&d.xhr.abort(),d.xhr=a.ajax({url:c,data:b,dataType:"json",success:function(a){e(a)},error:function(){e([])}})}):this.source=this.options.source},_searchTimeout:function(a){clearTimeout(this.searching),this.searching=this._delay(function(){var b=this.term===this._value(),c=this.menu.element.is(":visible"),d=a.altKey||a.ctrlKey||a.metaKey||a.shiftKey;b&&(!b||c||d)||(this.selectedItem=null,this.search(null,a))},this.options.delay)},search:function(a,b){return a=null!=a?a:this._value(),this.term=this._value(),a.length<this.options.minLength?this.close(b):this._trigger("search",b)!==!1?this._search(a):void 0},_search:function(a){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:a},this._response())},_response:function(){var b=++this.requestIndex;return a.proxy(function(a){b===this.requestIndex&&this.__response(a),this.pending--,this.pending||this.element.removeClass("ui-autocomplete-loading")},this)},__response:function(a){a&&(a=this._normalize(a)),this._trigger("response",null,{content:a}),!this.options.disabled&&a&&a.length&&!this.cancelSearch?(this._suggest(a),this._trigger("open")):this._close()},close:function(a){this.cancelSearch=!0,this._close(a)},_close:function(a){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",a))},_change:function(a){this.previous!==this._value()&&this._trigger("change",a,{item:this.selectedItem})},_normalize:function(b){return b.length&&b[0].label&&b[0].value?b:a.map(b,function(b){return"string"==typeof b?{label:b,value:b}:a.extend({},b,{label:b.label||b.value,value:b.value||b.label})})},_suggest:function(b){var c=this.menu.element.empty();this._renderMenu(c,b),this.isNewMenu=!0,this.menu.refresh(),c.show(),this._resizeMenu(),c.position(a.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var a=this.menu.element;a.outerWidth(Math.max(a.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(b,c){var d=this;a.each(c,function(a,c){d._renderItemData(b,c)})},_renderItemData:function(a,b){return this._renderItem(a,b).data("ui-autocomplete-item",b)},_renderItem:function(b,c){return a("<li>").text(c.label).appendTo(b)},_move:function(a,b){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(a)||this.menu.isLastItem()&&/^next/.test(a)?(this.isMultiLine||this._value(this.term),void this.menu.blur()):void this.menu[a](b):void this.search(null,b)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(a,b){this.isMultiLine&&!this.menu.element.is(":visible")||(this._move(a,b),b.preventDefault())}}),a.extend(a.ui.autocomplete,{escapeRegex:function(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(b,c){var d=new RegExp(a.ui.autocomplete.escapeRegex(c),"i");return a.grep(b,function(a){return d.test(a.label||a.value||a)})}}),a.widget("ui.autocomplete",a.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(a){return a+(a>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(b){var c;this._superApply(arguments),this.options.disabled||this.cancelSearch||(c=b&&b.length?this.options.messages.results(b.length):this.options.messages.noResults,this.liveRegion.children().hide(),a("<div>").text(c).appendTo(this.liveRegion))}});var m,n=(a.ui.autocomplete,"ui-button ui-widget ui-state-default ui-corner-all"),o="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",p=function(){var b=a(this);setTimeout(function(){b.find(":ui-button").button("refresh")},1)},q=function(b){var c=b.name,d=b.form,e=a([]);return c&&(c=c.replace(/'/g,"\\'"),e=d?a(d).find("[name='"+c+"'][type=radio]"):a("[name='"+c+"'][type=radio]",b.ownerDocument).filter(function(){return!this.form})),e};a.widget("ui.button",{version:"1.11.1",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,p),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var b=this,c=this.options,d="checkbox"===this.type||"radio"===this.type,e=d?"":"ui-state-active";null===c.label&&(c.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(n).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){c.disabled||this===m&&a(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){c.disabled||a(this).removeClass(e)}).bind("click"+this.eventNamespace,function(a){c.disabled&&(a.preventDefault(),a.stopImmediatePropagation())}),this._on({focus:function(){this.buttonElement.addClass("ui-state-focus")},blur:function(){this.buttonElement.removeClass("ui-state-focus")}}),d&&this.element.bind("change"+this.eventNamespace,function(){b.refresh()}),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){return c.disabled?!1:void 0}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(c.disabled)return!1;a(this).addClass("ui-state-active"),b.buttonElement.attr("aria-pressed","true");var d=b.element[0];q(d).not(d).map(function(){return a(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){return c.disabled?!1:(a(this).addClass("ui-state-active"),m=this,void b.document.one("mouseup",function(){m=null}))}).bind("mouseup"+this.eventNamespace,function(){return c.disabled?!1:void a(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(b){return c.disabled?!1:void(b.keyCode!==a.ui.keyCode.SPACE&&b.keyCode!==a.ui.keyCode.ENTER||a(this).addClass("ui-state-active"))}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){a(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(b){b.keyCode===a.ui.keyCode.SPACE&&a(this).click()})),this._setOption("disabled",c.disabled),this._resetButton()},_determineButtonType:function(){var a,b,c;this.element.is("[type=checkbox]")?this.type="checkbox":this.element.is("[type=radio]")?this.type="radio":this.element.is("input")?this.type="input":this.type="button","checkbox"===this.type||"radio"===this.type?(a=this.element.parents().last(),b="label[for='"+this.element.attr("id")+"']",this.buttonElement=a.find(b),this.buttonElement.length||(a=a.length?a.siblings():this.element.siblings(),this.buttonElement=a.filter(b),this.buttonElement.length||(this.buttonElement=a.find(b))),this.element.addClass("ui-helper-hidden-accessible"),c=this.element.is(":checked"),c&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",c)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(n+" ui-state-active "+o).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(a,b){return this._super(a,b),"disabled"===a?(this.widget().toggleClass("ui-state-disabled",!!b),this.element.prop("disabled",!!b),void(b&&("checkbox"===this.type||"radio"===this.type?this.buttonElement.removeClass("ui-state-focus"):this.buttonElement.removeClass("ui-state-focus ui-state-active")))):void this._resetButton()},refresh:function(){var b=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");b!==this.options.disabled&&this._setOption("disabled",b),"radio"===this.type?q(this.element[0]).each(function(){a(this).is(":checked")?a(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):a(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return void(this.options.label&&this.element.val(this.options.label));var b=this.buttonElement.removeClass(o),c=a("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(b.empty()).text(),d=this.options.icons,e=d.primary&&d.secondary,f=[];d.primary||d.secondary?(this.options.text&&f.push("ui-button-text-icon"+(e?"s":d.primary?"-primary":"-secondary")),d.primary&&b.prepend("<span class='ui-button-icon-primary ui-icon "+d.primary+"'></span>"),d.secondary&&b.append("<span class='ui-button-icon-secondary ui-icon "+d.secondary+"'></span>"),this.options.text||(f.push(e?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||b.attr("title",a.trim(c)))):f.push("ui-button-text-only"),b.addClass(f.join(" "))}}),a.widget("ui.buttonset",{version:"1.11.1",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(a,b){"disabled"===a&&this.buttons.button("option",a,b),this._super(a,b)},refresh:function(){var b="rtl"===this.element.css("direction"),c=this.element.find(this.options.items),d=c.filter(":ui-button");c.not(":ui-button").button(),d.button("refresh"),this.buttons=c.map(function(){return a(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(b?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(b?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return a(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}});a.ui.button;a.extend(a.ui,{datepicker:{version:"1.11.1"}});var r;a.extend(e.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(a){return h(this._defaults,a||{}),this},_attachDatepicker:function(b,c){var d,e,f;d=b.nodeName.toLowerCase(),e="div"===d||"span"===d,b.id||(this.uuid+=1,b.id="dp"+this.uuid),f=this._newInst(a(b),e),f.settings=a.extend({},c||{}),"input"===d?this._connectDatepicker(b,f):e&&this._inlineDatepicker(b,f)},_newInst:function(b,c){var d=b[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:d,input:b,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:c,dpDiv:c?f(a("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(b,c){var d=a(b);c.append=a([]),c.trigger=a([]),d.hasClass(this.markerClassName)||(this._attachments(d,c),d.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(c),a.data(b,"datepicker",c),c.settings.disabled&&this._disableDatepicker(b))},_attachments:function(b,c){var d,e,f,g=this._get(c,"appendText"),h=this._get(c,"isRTL");c.append&&c.append.remove(),g&&(c.append=a("<span class='"+this._appendClass+"'>"+g+"</span>"),b[h?"before":"after"](c.append)),b.unbind("focus",this._showDatepicker),c.trigger&&c.trigger.remove(),d=this._get(c,"showOn"),"focus"!==d&&"both"!==d||b.focus(this._showDatepicker),"button"!==d&&"both"!==d||(e=this._get(c,"buttonText"),f=this._get(c,"buttonImage"),c.trigger=a(this._get(c,"buttonImageOnly")?a("<img/>").addClass(this._triggerClass).attr({src:f,alt:e,title:e}):a("<button type='button'></button>").addClass(this._triggerClass).html(f?a("<img/>").attr({src:f,alt:e,title:e}):e)),b[h?"before":"after"](c.trigger),c.trigger.click(function(){return a.datepicker._datepickerShowing&&a.datepicker._lastInput===b[0]?a.datepicker._hideDatepicker():a.datepicker._datepickerShowing&&a.datepicker._lastInput!==b[0]?(a.datepicker._hideDatepicker(),a.datepicker._showDatepicker(b[0])):a.datepicker._showDatepicker(b[0]),!1}))},_autoSize:function(a){if(this._get(a,"autoSize")&&!a.inline){var b,c,d,e,f=new Date(2009,11,20),g=this._get(a,"dateFormat");g.match(/[DM]/)&&(b=function(a){for(c=0,d=0,e=0;e<a.length;e++)a[e].length>c&&(c=a[e].length,d=e);return d},f.setMonth(b(this._get(a,g.match(/MM/)?"monthNames":"monthNamesShort"))),f.setDate(b(this._get(a,g.match(/DD/)?"dayNames":"dayNamesShort"))+20-f.getDay())),a.input.attr("size",this._formatDate(a,f).length)}},_inlineDatepicker:function(b,c){var d=a(b);d.hasClass(this.markerClassName)||(d.addClass(this.markerClassName).append(c.dpDiv),a.data(b,"datepicker",c),this._setDate(c,this._getDefaultDate(c),!0),this._updateDatepicker(c),this._updateAlternate(c),c.settings.disabled&&this._disableDatepicker(b),c.dpDiv.css("display","block"))},_dialogDatepicker:function(b,c,d,e,f){var g,i,j,k,l,m=this._dialogInst;return m||(this.uuid+=1,g="dp"+this.uuid,this._dialogInput=a("<input type='text' id='"+g+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),a("body").append(this._dialogInput),m=this._dialogInst=this._newInst(this._dialogInput,!1),m.settings={},a.data(this._dialogInput[0],"datepicker",m)),h(m.settings,e||{}),c=c&&c.constructor===Date?this._formatDate(m,c):c,this._dialogInput.val(c),this._pos=f?f.length?f:[f.pageX,f.pageY]:null,this._pos||(i=document.documentElement.clientWidth,j=document.documentElement.clientHeight,k=document.documentElement.scrollLeft||document.body.scrollLeft,l=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[i/2-100+k,j/2-150+l]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),m.settings.onSelect=d,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),a.blockUI&&a.blockUI(this.dpDiv),a.data(this._dialogInput[0],"datepicker",m),this},_destroyDatepicker:function(b){var c,d=a(b),e=a.data(b,"datepicker");d.hasClass(this.markerClassName)&&(c=b.nodeName.toLowerCase(),a.removeData(b,"datepicker"),"input"===c?(e.append.remove(),e.trigger.remove(),d.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):"div"!==c&&"span"!==c||d.removeClass(this.markerClassName).empty())},_enableDatepicker:function(b){var c,d,e=a(b),f=a.data(b,"datepicker");e.hasClass(this.markerClassName)&&(c=b.nodeName.toLowerCase(),"input"===c?(b.disabled=!1,f.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):"div"!==c&&"span"!==c||(d=e.children("."+this._inlineClass),d.children().removeClass("ui-state-disabled"),d.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=a.map(this._disabledInputs,function(a){return a===b?null:a}))},_disableDatepicker:function(b){var c,d,e=a(b),f=a.data(b,"datepicker");e.hasClass(this.markerClassName)&&(c=b.nodeName.toLowerCase(),"input"===c?(b.disabled=!0,f.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):"div"!==c&&"span"!==c||(d=e.children("."+this._inlineClass),d.children().addClass("ui-state-disabled"),d.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=a.map(this._disabledInputs,function(a){return a===b?null:a}),this._disabledInputs[this._disabledInputs.length]=b)},_isDisabledDatepicker:function(a){if(!a)return!1;for(var b=0;b<this._disabledInputs.length;b++)if(this._disabledInputs[b]===a)return!0;return!1},_getInst:function(b){try{return a.data(b,"datepicker")}catch(c){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(b,c,d){var e,f,g,i,j=this._getInst(b);return 2===arguments.length&&"string"==typeof c?"defaults"===c?a.extend({},a.datepicker._defaults):j?"all"===c?a.extend({},j.settings):this._get(j,c):null:(e=c||{},"string"==typeof c&&(e={},e[c]=d),void(j&&(this._curInst===j&&this._hideDatepicker(),f=this._getDateDatepicker(b,!0),g=this._getMinMaxDate(j,"min"),i=this._getMinMaxDate(j,"max"),h(j.settings,e),null!==g&&void 0!==e.dateFormat&&void 0===e.minDate&&(j.settings.minDate=this._formatDate(j,g)),null!==i&&void 0!==e.dateFormat&&void 0===e.maxDate&&(j.settings.maxDate=this._formatDate(j,i)),"disabled"in e&&(e.disabled?this._disableDatepicker(b):this._enableDatepicker(b)),this._attachments(a(b),j),this._autoSize(j),this._setDate(j,f),this._updateAlternate(j),this._updateDatepicker(j))))},_changeDatepicker:function(a,b,c){this._optionDatepicker(a,b,c)},_refreshDatepicker:function(a){var b=this._getInst(a);b&&this._updateDatepicker(b)},_setDateDatepicker:function(a,b){var c=this._getInst(a);c&&(this._setDate(c,b),this._updateDatepicker(c),this._updateAlternate(c))},_getDateDatepicker:function(a,b){var c=this._getInst(a);return c&&!c.inline&&this._setDateFromField(c,b),c?this._getDate(c):null},_doKeyDown:function(b){var c,d,e,f=a.datepicker._getInst(b.target),g=!0,h=f.dpDiv.is(".ui-datepicker-rtl");if(f._keyEvent=!0,a.datepicker._datepickerShowing)switch(b.keyCode){case 9:a.datepicker._hideDatepicker(),g=!1;break;case 13:return e=a("td."+a.datepicker._dayOverClass+":not(."+a.datepicker._currentClass+")",f.dpDiv),e[0]&&a.datepicker._selectDay(b.target,f.selectedMonth,f.selectedYear,e[0]),c=a.datepicker._get(f,"onSelect"),c?(d=a.datepicker._formatDate(f),c.apply(f.input?f.input[0]:null,[d,f])):a.datepicker._hideDatepicker(),!1;case 27:a.datepicker._hideDatepicker();break;case 33:a.datepicker._adjustDate(b.target,b.ctrlKey?-a.datepicker._get(f,"stepBigMonths"):-a.datepicker._get(f,"stepMonths"),"M");break;case 34:a.datepicker._adjustDate(b.target,b.ctrlKey?+a.datepicker._get(f,"stepBigMonths"):+a.datepicker._get(f,"stepMonths"),"M");break;case 35:(b.ctrlKey||b.metaKey)&&a.datepicker._clearDate(b.target),g=b.ctrlKey||b.metaKey;break;case 36:(b.ctrlKey||b.metaKey)&&a.datepicker._gotoToday(b.target),g=b.ctrlKey||b.metaKey;break;case 37:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,h?1:-1,"D"),g=b.ctrlKey||b.metaKey,b.originalEvent.altKey&&a.datepicker._adjustDate(b.target,b.ctrlKey?-a.datepicker._get(f,"stepBigMonths"):-a.datepicker._get(f,"stepMonths"),"M");break;case 38:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,-7,"D"),g=b.ctrlKey||b.metaKey;break;case 39:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,h?-1:1,"D"),g=b.ctrlKey||b.metaKey,b.originalEvent.altKey&&a.datepicker._adjustDate(b.target,b.ctrlKey?+a.datepicker._get(f,"stepBigMonths"):+a.datepicker._get(f,"stepMonths"),"M");break;case 40:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,7,"D"),g=b.ctrlKey||b.metaKey;break;default:g=!1}else 36===b.keyCode&&b.ctrlKey?a.datepicker._showDatepicker(this):g=!1;g&&(b.preventDefault(),b.stopPropagation())},_doKeyPress:function(b){var c,d,e=a.datepicker._getInst(b.target);return a.datepicker._get(e,"constrainInput")?(c=a.datepicker._possibleChars(a.datepicker._get(e,"dateFormat")),d=String.fromCharCode(null==b.charCode?b.keyCode:b.charCode),b.ctrlKey||b.metaKey||" ">d||!c||c.indexOf(d)>-1):void 0},_doKeyUp:function(b){var c,d=a.datepicker._getInst(b.target);if(d.input.val()!==d.lastVal)try{c=a.datepicker.parseDate(a.datepicker._get(d,"dateFormat"),d.input?d.input.val():null,a.datepicker._getFormatConfig(d)),c&&(a.datepicker._setDateFromField(d),a.datepicker._updateAlternate(d),a.datepicker._updateDatepicker(d))}catch(e){}return!0},_showDatepicker:function(b){if(b=b.target||b,"input"!==b.nodeName.toLowerCase()&&(b=a("input",b.parentNode)[0]),!a.datepicker._isDisabledDatepicker(b)&&a.datepicker._lastInput!==b){var c,e,f,g,i,j,k;c=a.datepicker._getInst(b),a.datepicker._curInst&&a.datepicker._curInst!==c&&(a.datepicker._curInst.dpDiv.stop(!0,!0),c&&a.datepicker._datepickerShowing&&a.datepicker._hideDatepicker(a.datepicker._curInst.input[0])),e=a.datepicker._get(c,"beforeShow"),f=e?e.apply(b,[b,c]):{},f!==!1&&(h(c.settings,f),c.lastVal=null,a.datepicker._lastInput=b,a.datepicker._setDateFromField(c),a.datepicker._inDialog&&(b.value=""),a.datepicker._pos||(a.datepicker._pos=a.datepicker._findPos(b),a.datepicker._pos[1]+=b.offsetHeight),g=!1,a(b).parents().each(function(){return g|="fixed"===a(this).css("position"),!g}),i={left:a.datepicker._pos[0],top:a.datepicker._pos[1]},a.datepicker._pos=null,c.dpDiv.empty(),c.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),a.datepicker._updateDatepicker(c),i=a.datepicker._checkOffset(c,i,g),c.dpDiv.css({position:a.datepicker._inDialog&&a.blockUI?"static":g?"fixed":"absolute",display:"none",left:i.left+"px",top:i.top+"px"}),c.inline||(j=a.datepicker._get(c,"showAnim"),k=a.datepicker._get(c,"duration"),c.dpDiv.css("z-index",d(a(b))+1),a.datepicker._datepickerShowing=!0,a.effects&&a.effects.effect[j]?c.dpDiv.show(j,a.datepicker._get(c,"showOptions"),k):c.dpDiv[j||"show"](j?k:null),a.datepicker._shouldFocusInput(c)&&c.input.focus(),a.datepicker._curInst=c))}},_updateDatepicker:function(b){this.maxRows=4,r=b,b.dpDiv.empty().append(this._generateHTML(b)),this._attachHandlers(b);var c,d=this._getNumberOfMonths(b),e=d[1],f=17,h=b.dpDiv.find("."+this._dayOverClass+" a");h.length>0&&g.apply(h.get(0)),b.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),e>1&&b.dpDiv.addClass("ui-datepicker-multi-"+e).css("width",f*e+"em"),b.dpDiv[(1!==d[0]||1!==d[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),b.dpDiv[(this._get(b,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),b===a.datepicker._curInst&&a.datepicker._datepickerShowing&&a.datepicker._shouldFocusInput(b)&&b.input.focus(),b.yearshtml&&(c=b.yearshtml,setTimeout(function(){c===b.yearshtml&&b.yearshtml&&b.dpDiv.find("select.ui-datepicker-year:first").replaceWith(b.yearshtml),c=b.yearshtml=null},0))},_shouldFocusInput:function(a){return a.input&&a.input.is(":visible")&&!a.input.is(":disabled")&&!a.input.is(":focus")},_checkOffset:function(b,c,d){var e=b.dpDiv.outerWidth(),f=b.dpDiv.outerHeight(),g=b.input?b.input.outerWidth():0,h=b.input?b.input.outerHeight():0,i=document.documentElement.clientWidth+(d?0:a(document).scrollLeft()),j=document.documentElement.clientHeight+(d?0:a(document).scrollTop());return c.left-=this._get(b,"isRTL")?e-g:0,c.left-=d&&c.left===b.input.offset().left?a(document).scrollLeft():0,c.top-=d&&c.top===b.input.offset().top+h?a(document).scrollTop():0,c.left-=Math.min(c.left,c.left+e>i&&i>e?Math.abs(c.left+e-i):0),c.top-=Math.min(c.top,c.top+f>j&&j>f?Math.abs(f+h):0),c},_findPos:function(b){for(var c,d=this._getInst(b),e=this._get(d,"isRTL");b&&("hidden"===b.type||1!==b.nodeType||a.expr.filters.hidden(b));)b=b[e?"previousSibling":"nextSibling"];return c=a(b).offset(),[c.left,c.top]},_hideDatepicker:function(b){var c,d,e,f,g=this._curInst;!g||b&&g!==a.data(b,"datepicker")||this._datepickerShowing&&(c=this._get(g,"showAnim"),d=this._get(g,"duration"),e=function(){a.datepicker._tidyDialog(g)},a.effects&&(a.effects.effect[c]||a.effects[c])?g.dpDiv.hide(c,a.datepicker._get(g,"showOptions"),d,e):g.dpDiv["slideDown"===c?"slideUp":"fadeIn"===c?"fadeOut":"hide"](c?d:null,e),c||e(),this._datepickerShowing=!1,f=this._get(g,"onClose"),f&&f.apply(g.input?g.input[0]:null,[g.input?g.input.val():"",g]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),a.blockUI&&(a.unblockUI(),a("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(a){a.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(b){if(a.datepicker._curInst){var c=a(b.target),d=a.datepicker._getInst(c[0]);(c[0].id===a.datepicker._mainDivId||0!==c.parents("#"+a.datepicker._mainDivId).length||c.hasClass(a.datepicker.markerClassName)||c.closest("."+a.datepicker._triggerClass).length||!a.datepicker._datepickerShowing||a.datepicker._inDialog&&a.blockUI)&&(!c.hasClass(a.datepicker.markerClassName)||a.datepicker._curInst===d)||a.datepicker._hideDatepicker()}},_adjustDate:function(b,c,d){var e=a(b),f=this._getInst(e[0]);this._isDisabledDatepicker(e[0])||(this._adjustInstDate(f,c+("M"===d?this._get(f,"showCurrentAtPos"):0),d),this._updateDatepicker(f))},_gotoToday:function(b){var c,d=a(b),e=this._getInst(d[0]);
this._get(e,"gotoCurrent")&&e.currentDay?(e.selectedDay=e.currentDay,e.drawMonth=e.selectedMonth=e.currentMonth,e.drawYear=e.selectedYear=e.currentYear):(c=new Date,e.selectedDay=c.getDate(),e.drawMonth=e.selectedMonth=c.getMonth(),e.drawYear=e.selectedYear=c.getFullYear()),this._notifyChange(e),this._adjustDate(d)},_selectMonthYear:function(b,c,d){var e=a(b),f=this._getInst(e[0]);f["selected"+("M"===d?"Month":"Year")]=f["draw"+("M"===d?"Month":"Year")]=parseInt(c.options[c.selectedIndex].value,10),this._notifyChange(f),this._adjustDate(e)},_selectDay:function(b,c,d,e){var f,g=a(b);a(e).hasClass(this._unselectableClass)||this._isDisabledDatepicker(g[0])||(f=this._getInst(g[0]),f.selectedDay=f.currentDay=a("a",e).html(),f.selectedMonth=f.currentMonth=c,f.selectedYear=f.currentYear=d,this._selectDate(b,this._formatDate(f,f.currentDay,f.currentMonth,f.currentYear)))},_clearDate:function(b){var c=a(b);this._selectDate(c,"")},_selectDate:function(b,c){var d,e=a(b),f=this._getInst(e[0]);c=null!=c?c:this._formatDate(f),f.input&&f.input.val(c),this._updateAlternate(f),d=this._get(f,"onSelect"),d?d.apply(f.input?f.input[0]:null,[c,f]):f.input&&f.input.trigger("change"),f.inline?this._updateDatepicker(f):(this._hideDatepicker(),this._lastInput=f.input[0],"object"!=typeof f.input[0]&&f.input.focus(),this._lastInput=null)},_updateAlternate:function(b){var c,d,e,f=this._get(b,"altField");f&&(c=this._get(b,"altFormat")||this._get(b,"dateFormat"),d=this._getDate(b),e=this.formatDate(c,d,this._getFormatConfig(b)),a(f).each(function(){a(this).val(e)}))},noWeekends:function(a){var b=a.getDay();return[b>0&&6>b,""]},iso8601Week:function(a){var b,c=new Date(a.getTime());return c.setDate(c.getDate()+4-(c.getDay()||7)),b=c.getTime(),c.setMonth(0),c.setDate(1),Math.floor(Math.round((b-c)/864e5)/7)+1},parseDate:function(b,c,d){if(null==b||null==c)throw"Invalid arguments";if(c="object"==typeof c?c.toString():c+"",""===c)return null;var e,f,g,h,i=0,j=(d?d.shortYearCutoff:null)||this._defaults.shortYearCutoff,k="string"!=typeof j?j:(new Date).getFullYear()%100+parseInt(j,10),l=(d?d.dayNamesShort:null)||this._defaults.dayNamesShort,m=(d?d.dayNames:null)||this._defaults.dayNames,n=(d?d.monthNamesShort:null)||this._defaults.monthNamesShort,o=(d?d.monthNames:null)||this._defaults.monthNames,p=-1,q=-1,r=-1,s=-1,t=!1,u=function(a){var c=e+1<b.length&&b.charAt(e+1)===a;return c&&e++,c},v=function(a){var b=u(a),d="@"===a?14:"!"===a?20:"y"===a&&b?4:"o"===a?3:2,e="y"===a?d:1,f=new RegExp("^\\d{"+e+","+d+"}"),g=c.substring(i).match(f);if(!g)throw"Missing number at position "+i;return i+=g[0].length,parseInt(g[0],10)},w=function(b,d,e){var f=-1,g=a.map(u(b)?e:d,function(a,b){return[[b,a]]}).sort(function(a,b){return-(a[1].length-b[1].length)});if(a.each(g,function(a,b){var d=b[1];return c.substr(i,d.length).toLowerCase()===d.toLowerCase()?(f=b[0],i+=d.length,!1):void 0}),-1!==f)return f+1;throw"Unknown name at position "+i},x=function(){if(c.charAt(i)!==b.charAt(e))throw"Unexpected literal at position "+i;i++};for(e=0;e<b.length;e++)if(t)"'"!==b.charAt(e)||u("'")?x():t=!1;else switch(b.charAt(e)){case"d":r=v("d");break;case"D":w("D",l,m);break;case"o":s=v("o");break;case"m":q=v("m");break;case"M":q=w("M",n,o);break;case"y":p=v("y");break;case"@":h=new Date(v("@")),p=h.getFullYear(),q=h.getMonth()+1,r=h.getDate();break;case"!":h=new Date((v("!")-this._ticksTo1970)/1e4),p=h.getFullYear(),q=h.getMonth()+1,r=h.getDate();break;case"'":u("'")?x():t=!0;break;default:x()}if(i<c.length&&(g=c.substr(i),!/^\s+/.test(g)))throw"Extra/unparsed characters found in date: "+g;if(-1===p?p=(new Date).getFullYear():100>p&&(p+=(new Date).getFullYear()-(new Date).getFullYear()%100+(k>=p?0:-100)),s>-1)for(q=1,r=s;;){if(f=this._getDaysInMonth(p,q-1),f>=r)break;q++,r-=f}if(h=this._daylightSavingAdjust(new Date(p,q-1,r)),h.getFullYear()!==p||h.getMonth()+1!==q||h.getDate()!==r)throw"Invalid date";return h},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(a,b,c){if(!b)return"";var d,e=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,f=(c?c.dayNames:null)||this._defaults.dayNames,g=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,h=(c?c.monthNames:null)||this._defaults.monthNames,i=function(b){var c=d+1<a.length&&a.charAt(d+1)===b;return c&&d++,c},j=function(a,b,c){var d=""+b;if(i(a))for(;d.length<c;)d="0"+d;return d},k=function(a,b,c,d){return i(a)?d[b]:c[b]},l="",m=!1;if(b)for(d=0;d<a.length;d++)if(m)"'"!==a.charAt(d)||i("'")?l+=a.charAt(d):m=!1;else switch(a.charAt(d)){case"d":l+=j("d",b.getDate(),2);break;case"D":l+=k("D",b.getDay(),e,f);break;case"o":l+=j("o",Math.round((new Date(b.getFullYear(),b.getMonth(),b.getDate()).getTime()-new Date(b.getFullYear(),0,0).getTime())/864e5),3);break;case"m":l+=j("m",b.getMonth()+1,2);break;case"M":l+=k("M",b.getMonth(),g,h);break;case"y":l+=i("y")?b.getFullYear():(b.getYear()%100<10?"0":"")+b.getYear()%100;break;case"@":l+=b.getTime();break;case"!":l+=1e4*b.getTime()+this._ticksTo1970;break;case"'":i("'")?l+="'":m=!0;break;default:l+=a.charAt(d)}return l},_possibleChars:function(a){var b,c="",d=!1,e=function(c){var d=b+1<a.length&&a.charAt(b+1)===c;return d&&b++,d};for(b=0;b<a.length;b++)if(d)"'"!==a.charAt(b)||e("'")?c+=a.charAt(b):d=!1;else switch(a.charAt(b)){case"d":case"m":case"y":case"@":c+="0123456789";break;case"D":case"M":return null;case"'":e("'")?c+="'":d=!0;break;default:c+=a.charAt(b)}return c},_get:function(a,b){return void 0!==a.settings[b]?a.settings[b]:this._defaults[b]},_setDateFromField:function(a,b){if(a.input.val()!==a.lastVal){var c=this._get(a,"dateFormat"),d=a.lastVal=a.input?a.input.val():null,e=this._getDefaultDate(a),f=e,g=this._getFormatConfig(a);try{f=this.parseDate(c,d,g)||e}catch(h){d=b?"":d}a.selectedDay=f.getDate(),a.drawMonth=a.selectedMonth=f.getMonth(),a.drawYear=a.selectedYear=f.getFullYear(),a.currentDay=d?f.getDate():0,a.currentMonth=d?f.getMonth():0,a.currentYear=d?f.getFullYear():0,this._adjustInstDate(a)}},_getDefaultDate:function(a){return this._restrictMinMax(a,this._determineDate(a,this._get(a,"defaultDate"),new Date))},_determineDate:function(b,c,d){var e=function(a){var b=new Date;return b.setDate(b.getDate()+a),b},f=function(c){try{return a.datepicker.parseDate(a.datepicker._get(b,"dateFormat"),c,a.datepicker._getFormatConfig(b))}catch(d){}for(var e=(c.toLowerCase().match(/^c/)?a.datepicker._getDate(b):null)||new Date,f=e.getFullYear(),g=e.getMonth(),h=e.getDate(),i=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,j=i.exec(c);j;){switch(j[2]||"d"){case"d":case"D":h+=parseInt(j[1],10);break;case"w":case"W":h+=7*parseInt(j[1],10);break;case"m":case"M":g+=parseInt(j[1],10),h=Math.min(h,a.datepicker._getDaysInMonth(f,g));break;case"y":case"Y":f+=parseInt(j[1],10),h=Math.min(h,a.datepicker._getDaysInMonth(f,g))}j=i.exec(c)}return new Date(f,g,h)},g=null==c||""===c?d:"string"==typeof c?f(c):"number"==typeof c?isNaN(c)?d:e(c):new Date(c.getTime());return g=g&&"Invalid Date"===g.toString()?d:g,g&&(g.setHours(0),g.setMinutes(0),g.setSeconds(0),g.setMilliseconds(0)),this._daylightSavingAdjust(g)},_daylightSavingAdjust:function(a){return a?(a.setHours(a.getHours()>12?a.getHours()+2:0),a):null},_setDate:function(a,b,c){var d=!b,e=a.selectedMonth,f=a.selectedYear,g=this._restrictMinMax(a,this._determineDate(a,b,new Date));a.selectedDay=a.currentDay=g.getDate(),a.drawMonth=a.selectedMonth=a.currentMonth=g.getMonth(),a.drawYear=a.selectedYear=a.currentYear=g.getFullYear(),e===a.selectedMonth&&f===a.selectedYear||c||this._notifyChange(a),this._adjustInstDate(a),a.input&&a.input.val(d?"":this._formatDate(a))},_getDate:function(a){var b=!a.currentYear||a.input&&""===a.input.val()?null:this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return b},_attachHandlers:function(b){var c=this._get(b,"stepMonths"),d="#"+b.id.replace(/\\\\/g,"\\");b.dpDiv.find("[data-handler]").map(function(){var b={prev:function(){a.datepicker._adjustDate(d,-c,"M")},next:function(){a.datepicker._adjustDate(d,+c,"M")},hide:function(){a.datepicker._hideDatepicker()},today:function(){a.datepicker._gotoToday(d)},selectDay:function(){return a.datepicker._selectDay(d,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return a.datepicker._selectMonthYear(d,this,"M"),!1},selectYear:function(){return a.datepicker._selectMonthYear(d,this,"Y"),!1}};a(this).bind(this.getAttribute("data-event"),b[this.getAttribute("data-handler")])})},_generateHTML:function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O=new Date,P=this._daylightSavingAdjust(new Date(O.getFullYear(),O.getMonth(),O.getDate())),Q=this._get(a,"isRTL"),R=this._get(a,"showButtonPanel"),S=this._get(a,"hideIfNoPrevNext"),T=this._get(a,"navigationAsDateFormat"),U=this._getNumberOfMonths(a),V=this._get(a,"showCurrentAtPos"),W=this._get(a,"stepMonths"),X=1!==U[0]||1!==U[1],Y=this._daylightSavingAdjust(a.currentDay?new Date(a.currentYear,a.currentMonth,a.currentDay):new Date(9999,9,9)),Z=this._getMinMaxDate(a,"min"),$=this._getMinMaxDate(a,"max"),_=a.drawMonth-V,aa=a.drawYear;if(0>_&&(_+=12,aa--),$)for(b=this._daylightSavingAdjust(new Date($.getFullYear(),$.getMonth()-U[0]*U[1]+1,$.getDate())),b=Z&&Z>b?Z:b;this._daylightSavingAdjust(new Date(aa,_,1))>b;)_--,0>_&&(_=11,aa--);for(a.drawMonth=_,a.drawYear=aa,c=this._get(a,"prevText"),c=T?this.formatDate(c,this._daylightSavingAdjust(new Date(aa,_-W,1)),this._getFormatConfig(a)):c,d=this._canAdjustMonth(a,-1,aa,_)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+c+"'><span class='ui-icon ui-icon-circle-triangle-"+(Q?"e":"w")+"'>"+c+"</span></a>":S?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+c+"'><span class='ui-icon ui-icon-circle-triangle-"+(Q?"e":"w")+"'>"+c+"</span></a>",e=this._get(a,"nextText"),e=T?this.formatDate(e,this._daylightSavingAdjust(new Date(aa,_+W,1)),this._getFormatConfig(a)):e,f=this._canAdjustMonth(a,1,aa,_)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+e+"'><span class='ui-icon ui-icon-circle-triangle-"+(Q?"w":"e")+"'>"+e+"</span></a>":S?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+e+"'><span class='ui-icon ui-icon-circle-triangle-"+(Q?"w":"e")+"'>"+e+"</span></a>",g=this._get(a,"currentText"),h=this._get(a,"gotoCurrent")&&a.currentDay?Y:P,g=T?this.formatDate(g,h,this._getFormatConfig(a)):g,i=a.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(a,"closeText")+"</button>",j=R?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(Q?i:"")+(this._isInRange(a,h)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+g+"</button>":"")+(Q?"":i)+"</div>":"",k=parseInt(this._get(a,"firstDay"),10),k=isNaN(k)?0:k,l=this._get(a,"showWeek"),m=this._get(a,"dayNames"),n=this._get(a,"dayNamesMin"),o=this._get(a,"monthNames"),p=this._get(a,"monthNamesShort"),q=this._get(a,"beforeShowDay"),r=this._get(a,"showOtherMonths"),s=this._get(a,"selectOtherMonths"),t=this._getDefaultDate(a),u="",w=0;w<U[0];w++){for(x="",this.maxRows=4,y=0;y<U[1];y++){if(z=this._daylightSavingAdjust(new Date(aa,_,a.selectedDay)),A=" ui-corner-all",B="",X){if(B+="<div class='ui-datepicker-group",U[1]>1)switch(y){case 0:B+=" ui-datepicker-group-first",A=" ui-corner-"+(Q?"right":"left");break;case U[1]-1:B+=" ui-datepicker-group-last",A=" ui-corner-"+(Q?"left":"right");break;default:B+=" ui-datepicker-group-middle",A=""}B+="'>"}for(B+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+A+"'>"+(/all|left/.test(A)&&0===w?Q?f:d:"")+(/all|right/.test(A)&&0===w?Q?d:f:"")+this._generateMonthYearHeader(a,_,aa,Z,$,w>0||y>0,o,p)+"</div><table class='ui-datepicker-calendar'><thead><tr>",C=l?"<th class='ui-datepicker-week-col'>"+this._get(a,"weekHeader")+"</th>":"",v=0;7>v;v++)D=(v+k)%7,C+="<th scope='col'"+((v+k+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+m[D]+"'>"+n[D]+"</span></th>";for(B+=C+"</tr></thead><tbody>",E=this._getDaysInMonth(aa,_),aa===a.selectedYear&&_===a.selectedMonth&&(a.selectedDay=Math.min(a.selectedDay,E)),F=(this._getFirstDayOfMonth(aa,_)-k+7)%7,G=Math.ceil((F+E)/7),H=X&&this.maxRows>G?this.maxRows:G,this.maxRows=H,I=this._daylightSavingAdjust(new Date(aa,_,1-F)),J=0;H>J;J++){for(B+="<tr>",K=l?"<td class='ui-datepicker-week-col'>"+this._get(a,"calculateWeek")(I)+"</td>":"",v=0;7>v;v++)L=q?q.apply(a.input?a.input[0]:null,[I]):[!0,""],M=I.getMonth()!==_,N=M&&!s||!L[0]||Z&&Z>I||$&&I>$,K+="<td class='"+((v+k+6)%7>=5?" ui-datepicker-week-end":"")+(M?" ui-datepicker-other-month":"")+(I.getTime()===z.getTime()&&_===a.selectedMonth&&a._keyEvent||t.getTime()===I.getTime()&&t.getTime()===z.getTime()?" "+this._dayOverClass:"")+(N?" "+this._unselectableClass+" ui-state-disabled":"")+(M&&!r?"":" "+L[1]+(I.getTime()===Y.getTime()?" "+this._currentClass:"")+(I.getTime()===P.getTime()?" ui-datepicker-today":""))+"'"+(M&&!r||!L[2]?"":" title='"+L[2].replace(/'/g,"&#39;")+"'")+(N?"":" data-handler='selectDay' data-event='click' data-month='"+I.getMonth()+"' data-year='"+I.getFullYear()+"'")+">"+(M&&!r?"&#xa0;":N?"<span class='ui-state-default'>"+I.getDate()+"</span>":"<a class='ui-state-default"+(I.getTime()===P.getTime()?" ui-state-highlight":"")+(I.getTime()===Y.getTime()?" ui-state-active":"")+(M?" ui-priority-secondary":"")+"' href='#'>"+I.getDate()+"</a>")+"</td>",I.setDate(I.getDate()+1),I=this._daylightSavingAdjust(I);B+=K+"</tr>"}_++,_>11&&(_=0,aa++),B+="</tbody></table>"+(X?"</div>"+(U[0]>0&&y===U[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),x+=B}u+=x}return u+=j,a._keyEvent=!1,u},_generateMonthYearHeader:function(a,b,c,d,e,f,g,h){var i,j,k,l,m,n,o,p,q=this._get(a,"changeMonth"),r=this._get(a,"changeYear"),s=this._get(a,"showMonthAfterYear"),t="<div class='ui-datepicker-title'>",u="";if(f||!q)u+="<span class='ui-datepicker-month'>"+g[b]+"</span>";else{for(i=d&&d.getFullYear()===c,j=e&&e.getFullYear()===c,u+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",k=0;12>k;k++)(!i||k>=d.getMonth())&&(!j||k<=e.getMonth())&&(u+="<option value='"+k+"'"+(k===b?" selected='selected'":"")+">"+h[k]+"</option>");u+="</select>"}if(s||(t+=u+(!f&&q&&r?"":"&#xa0;")),!a.yearshtml)if(a.yearshtml="",f||!r)t+="<span class='ui-datepicker-year'>"+c+"</span>";else{for(l=this._get(a,"yearRange").split(":"),m=(new Date).getFullYear(),n=function(a){var b=a.match(/c[+\-].*/)?c+parseInt(a.substring(1),10):a.match(/[+\-].*/)?m+parseInt(a,10):parseInt(a,10);return isNaN(b)?m:b},o=n(l[0]),p=Math.max(o,n(l[1]||"")),o=d?Math.max(o,d.getFullYear()):o,p=e?Math.min(p,e.getFullYear()):p,a.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";p>=o;o++)a.yearshtml+="<option value='"+o+"'"+(o===c?" selected='selected'":"")+">"+o+"</option>";a.yearshtml+="</select>",t+=a.yearshtml,a.yearshtml=null}return t+=this._get(a,"yearSuffix"),s&&(t+=(!f&&q&&r?"":"&#xa0;")+u),t+="</div>"},_adjustInstDate:function(a,b,c){var d=a.drawYear+("Y"===c?b:0),e=a.drawMonth+("M"===c?b:0),f=Math.min(a.selectedDay,this._getDaysInMonth(d,e))+("D"===c?b:0),g=this._restrictMinMax(a,this._daylightSavingAdjust(new Date(d,e,f)));a.selectedDay=g.getDate(),a.drawMonth=a.selectedMonth=g.getMonth(),a.drawYear=a.selectedYear=g.getFullYear(),"M"!==c&&"Y"!==c||this._notifyChange(a)},_restrictMinMax:function(a,b){var c=this._getMinMaxDate(a,"min"),d=this._getMinMaxDate(a,"max"),e=c&&c>b?c:b;return d&&e>d?d:e},_notifyChange:function(a){var b=this._get(a,"onChangeMonthYear");b&&b.apply(a.input?a.input[0]:null,[a.selectedYear,a.selectedMonth+1,a])},_getNumberOfMonths:function(a){var b=this._get(a,"numberOfMonths");return null==b?[1,1]:"number"==typeof b?[1,b]:b},_getMinMaxDate:function(a,b){return this._determineDate(a,this._get(a,b+"Date"),null)},_getDaysInMonth:function(a,b){return 32-this._daylightSavingAdjust(new Date(a,b,32)).getDate()},_getFirstDayOfMonth:function(a,b){return new Date(a,b,1).getDay()},_canAdjustMonth:function(a,b,c,d){var e=this._getNumberOfMonths(a),f=this._daylightSavingAdjust(new Date(c,d+(0>b?b:e[0]*e[1]),1));return 0>b&&f.setDate(this._getDaysInMonth(f.getFullYear(),f.getMonth())),this._isInRange(a,f)},_isInRange:function(a,b){var c,d,e=this._getMinMaxDate(a,"min"),f=this._getMinMaxDate(a,"max"),g=null,h=null,i=this._get(a,"yearRange");return i&&(c=i.split(":"),d=(new Date).getFullYear(),g=parseInt(c[0],10),h=parseInt(c[1],10),c[0].match(/[+\-].*/)&&(g+=d),c[1].match(/[+\-].*/)&&(h+=d)),(!e||b.getTime()>=e.getTime())&&(!f||b.getTime()<=f.getTime())&&(!g||b.getFullYear()>=g)&&(!h||b.getFullYear()<=h)},_getFormatConfig:function(a){var b=this._get(a,"shortYearCutoff");return b="string"!=typeof b?b:(new Date).getFullYear()%100+parseInt(b,10),{shortYearCutoff:b,dayNamesShort:this._get(a,"dayNamesShort"),dayNames:this._get(a,"dayNames"),monthNamesShort:this._get(a,"monthNamesShort"),monthNames:this._get(a,"monthNames")}},_formatDate:function(a,b,c,d){b||(a.currentDay=a.selectedDay,a.currentMonth=a.selectedMonth,a.currentYear=a.selectedYear);var e=b?"object"==typeof b?b:this._daylightSavingAdjust(new Date(d,c,b)):this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return this.formatDate(this._get(a,"dateFormat"),e,this._getFormatConfig(a))}}),a.fn.datepicker=function(b){if(!this.length)return this;a.datepicker.initialized||(a(document).mousedown(a.datepicker._checkExternalClick),a.datepicker.initialized=!0),0===a("#"+a.datepicker._mainDivId).length&&a("body").append(a.datepicker.dpDiv);var c=Array.prototype.slice.call(arguments,1);return"string"!=typeof b||"isDisabled"!==b&&"getDate"!==b&&"widget"!==b?"option"===b&&2===arguments.length&&"string"==typeof arguments[1]?a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this[0]].concat(c)):this.each(function(){"string"==typeof b?a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this].concat(c)):a.datepicker._attachDatepicker(this,b)}):a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this[0]].concat(c))},a.datepicker=new e,a.datepicker.initialized=!1,a.datepicker.uuid=(new Date).getTime(),a.datepicker.version="1.11.1";a.datepicker;a.widget("ui.draggable",a.ui.mouse,{version:"1.11.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._setHandleClassName(),this._mouseInit()},_setOption:function(a,b){this._super(a,b),"handle"===a&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?void(this.destroyOnClear=!0):(this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._removeHandleClassName(),void this._mouseDestroy())},_mouseCapture:function(b){var c=this.document[0],d=this.options;try{c.activeElement&&"body"!==c.activeElement.nodeName.toLowerCase()&&a(c.activeElement).blur()}catch(e){}return this.helper||d.disabled||a(b.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(b),this.handle?(a(d.iframeFix===!0?"iframe":d.iframeFix).each(function(){a("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(a(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(b){var c=this.options;return this.helper=this._createHelper(b),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),a.ui.ddmanager&&(a.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(b,!1),this.originalPageX=b.pageX,this.originalPageY=b.pageY,c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt),this._setContainment(),this._trigger("start",b)===!1?(this._clear(),!1):(this._cacheHelperProportions(),a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this._mouseDrag(b,!0),a.ui.ddmanager&&a.ui.ddmanager.dragStart(this,b),!0)},_mouseDrag:function(b,c){if("fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(b,!0),this.positionAbs=this._convertPositionTo("absolute"),!c){var d=this._uiHash();if(this._trigger("drag",b,d)===!1)return this._mouseUp({}),!1;this.position=d.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),!1},_mouseStop:function(b){var c=this,d=!1;return a.ui.ddmanager&&!this.options.dropBehaviour&&(d=a.ui.ddmanager.drop(this,b)),this.dropped&&(d=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!d||"valid"===this.options.revert&&d||this.options.revert===!0||a.isFunction(this.options.revert)&&this.options.revert.call(this.element,d)?a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){c._trigger("stop",b)!==!1&&c._clear()}):this._trigger("stop",b)!==!1&&this._clear(),!1},_mouseUp:function(b){return a("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),a.ui.ddmanager&&a.ui.ddmanager.dragStop(this,b),this.element.focus(),a.ui.mouse.prototype._mouseUp.call(this,b)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(b){return this.options.handle?!!a(b.target).closest(this.element.find(this.options.handle)).length:!0},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this.handleElement.addClass("ui-draggable-handle")},_removeHandleClassName:function(){this.handleElement.removeClass("ui-draggable-handle")},_createHelper:function(b){var c=this.options,d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b])):"clone"===c.helper?this.element.clone().removeAttr("id"):this.element;return d.parents("body").length||d.appendTo("parent"===c.appendTo?this.element[0].parentNode:c.appendTo),d[0]===this.element[0]||/(fixed|absolute)/.test(d.css("position"))||d.css("position","absolute"),d},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_isRootNode:function(a){return/(html|body)/i.test(a.tagName)||a===this.document[0]},_getParentOffset:function(){var b=this.offsetParent.offset(),c=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==c&&a.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(b={top:0,left:0}),{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var a=this.element.position(),b=this._isRootNode(this.scrollParent[0]);return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+(b?0:this.scrollParent.scrollTop()),left:a.left-(parseInt(this.helper.css("left"),10)||0)+(b?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b,c,d,e=this.options,f=this.document[0];return this.relativeContainer=null,e.containment?"window"===e.containment?void(this.containment=[a(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,a(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,a(window).scrollLeft()+a(window).width()-this.helperProportions.width-this.margins.left,a(window).scrollTop()+(a(window).height()||f.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===e.containment?void(this.containment=[0,0,a(f).width()-this.helperProportions.width-this.margins.left,(a(f).height()||f.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):e.containment.constructor===Array?void(this.containment=e.containment):("parent"===e.containment&&(e.containment=this.helper[0].parentNode),c=a(e.containment),d=c[0],void(d&&(b="hidden"!==c.css("overflow"),this.containment=[(parseInt(c.css("borderLeftWidth"),10)||0)+(parseInt(c.css("paddingLeft"),10)||0),(parseInt(c.css("borderTopWidth"),10)||0)+(parseInt(c.css("paddingTop"),10)||0),(b?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(c.css("borderRightWidth"),10)||0)-(parseInt(c.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(b?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(c.css("borderBottomWidth"),10)||0)-(parseInt(c.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=c))):void(this.containment=null)},_convertPositionTo:function(a,b){b||(b=this.position);var c="absolute"===a?1:-1,d=this._isRootNode(this.scrollParent[0]);return{top:b.top+this.offset.relative.top*c+this.offset.parent.top*c-("fixed"===this.cssPosition?-this.offset.scroll.top:d?0:this.offset.scroll.top)*c,left:b.left+this.offset.relative.left*c+this.offset.parent.left*c-("fixed"===this.cssPosition?-this.offset.scroll.left:d?0:this.offset.scroll.left)*c}},_generatePosition:function(a,b){var c,d,e,f,g=this.options,h=this._isRootNode(this.scrollParent[0]),i=a.pageX,j=a.pageY;return h&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),b&&(this.containment&&(this.relativeContainer?(d=this.relativeContainer.offset(),c=[this.containment[0]+d.left,this.containment[1]+d.top,this.containment[2]+d.left,this.containment[3]+d.top]):c=this.containment,a.pageX-this.offset.click.left<c[0]&&(i=c[0]+this.offset.click.left),a.pageY-this.offset.click.top<c[1]&&(j=c[1]+this.offset.click.top),a.pageX-this.offset.click.left>c[2]&&(i=c[2]+this.offset.click.left),a.pageY-this.offset.click.top>c[3]&&(j=c[3]+this.offset.click.top)),g.grid&&(e=g.grid[1]?this.originalPageY+Math.round((j-this.originalPageY)/g.grid[1])*g.grid[1]:this.originalPageY,j=c?e-this.offset.click.top>=c[1]||e-this.offset.click.top>c[3]?e:e-this.offset.click.top>=c[1]?e-g.grid[1]:e+g.grid[1]:e,f=g.grid[0]?this.originalPageX+Math.round((i-this.originalPageX)/g.grid[0])*g.grid[0]:this.originalPageX,i=c?f-this.offset.click.left>=c[0]||f-this.offset.click.left>c[2]?f:f-this.offset.click.left>=c[0]?f-g.grid[0]:f+g.grid[0]:f),"y"===g.axis&&(i=this.originalPageX),"x"===g.axis&&(j=this.originalPageY)),{top:j-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:h?0:this.offset.scroll.top),left:i-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:h?0:this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(b,c,d){return d=d||this._uiHash(),a.ui.plugin.call(this,b,[c,d,this],!0),"drag"===b&&(this.positionAbs=this._convertPositionTo("absolute")),a.Widget.prototype._trigger.call(this,b,c,d)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),a.ui.plugin.add("draggable","connectToSortable",{start:function(b,c,d){var e=d.options,f=a.extend({},c,{item:d.element});d.sortables=[],a(e.connectToSortable).each(function(){var c=a(this).sortable("instance");c&&!c.options.disabled&&(d.sortables.push({instance:c,shouldRevert:c.options.revert}),c.refreshPositions(),c._trigger("activate",b,f))})},stop:function(b,c,d){var e=a.extend({},c,{item:d.element});a.each(d.sortables,function(){this.instance.isOver?(this.instance.isOver=0,d.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(b),this.instance.options.helper=this.instance.options._helper,"original"===d.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",b,e))})},drag:function(b,c,d){var e=this;a.each(d.sortables,function(){var f=!1,g=this;this.instance.positionAbs=d.positionAbs,this.instance.helperProportions=d.helperProportions,this.instance.offset.click=d.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(f=!0,a.each(d.sortables,function(){return this.instance.positionAbs=d.positionAbs,this.instance.helperProportions=d.helperProportions,this.instance.offset.click=d.offset.click,this!==g&&this.instance._intersectsWith(this.instance.containerCache)&&a.contains(g.instance.element[0],this.instance.element[0])&&(f=!1),f})),f?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=a(e).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return c.helper[0]},b.target=this.instance.currentItem[0],this.instance._mouseCapture(b,!0),this.instance._mouseStart(b,!0,!0),this.instance.offset.click.top=d.offset.click.top,this.instance.offset.click.left=d.offset.click.left,this.instance.offset.parent.left-=d.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=d.offset.parent.top-this.instance.offset.parent.top,d._trigger("toSortable",b),d.dropped=this.instance.element,d.currentItem=d.element,this.instance.fromOutside=d),this.instance.currentItem&&this.instance._mouseDrag(b)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",b,this.instance._uiHash(this.instance)),
this.instance._mouseStop(b,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),d._trigger("fromSortable",b),d.dropped=!1)})}}),a.ui.plugin.add("draggable","cursor",{start:function(b,c,d){var e=a("body"),f=d.options;e.css("cursor")&&(f._cursor=e.css("cursor")),e.css("cursor",f.cursor)},stop:function(b,c,d){var e=d.options;e._cursor&&a("body").css("cursor",e._cursor)}}),a.ui.plugin.add("draggable","opacity",{start:function(b,c,d){var e=a(c.helper),f=d.options;e.css("opacity")&&(f._opacity=e.css("opacity")),e.css("opacity",f.opacity)},stop:function(b,c,d){var e=d.options;e._opacity&&a(c.helper).css("opacity",e._opacity)}}),a.ui.plugin.add("draggable","scroll",{start:function(a,b,c){c.scrollParentNotHidden||(c.scrollParentNotHidden=c.helper.scrollParent(!1)),c.scrollParentNotHidden[0]!==c.document[0]&&"HTML"!==c.scrollParentNotHidden[0].tagName&&(c.overflowOffset=c.scrollParentNotHidden.offset())},drag:function(b,c,d){var e=d.options,f=!1,g=d.scrollParentNotHidden[0],h=d.document[0];g!==h&&"HTML"!==g.tagName?(e.axis&&"x"===e.axis||(d.overflowOffset.top+g.offsetHeight-b.pageY<e.scrollSensitivity?g.scrollTop=f=g.scrollTop+e.scrollSpeed:b.pageY-d.overflowOffset.top<e.scrollSensitivity&&(g.scrollTop=f=g.scrollTop-e.scrollSpeed)),e.axis&&"y"===e.axis||(d.overflowOffset.left+g.offsetWidth-b.pageX<e.scrollSensitivity?g.scrollLeft=f=g.scrollLeft+e.scrollSpeed:b.pageX-d.overflowOffset.left<e.scrollSensitivity&&(g.scrollLeft=f=g.scrollLeft-e.scrollSpeed))):(e.axis&&"x"===e.axis||(b.pageY-a(h).scrollTop()<e.scrollSensitivity?f=a(h).scrollTop(a(h).scrollTop()-e.scrollSpeed):a(window).height()-(b.pageY-a(h).scrollTop())<e.scrollSensitivity&&(f=a(h).scrollTop(a(h).scrollTop()+e.scrollSpeed))),e.axis&&"y"===e.axis||(b.pageX-a(h).scrollLeft()<e.scrollSensitivity?f=a(h).scrollLeft(a(h).scrollLeft()-e.scrollSpeed):a(window).width()-(b.pageX-a(h).scrollLeft())<e.scrollSensitivity&&(f=a(h).scrollLeft(a(h).scrollLeft()+e.scrollSpeed)))),f!==!1&&a.ui.ddmanager&&!e.dropBehaviour&&a.ui.ddmanager.prepareOffsets(d,b)}}),a.ui.plugin.add("draggable","snap",{start:function(b,c,d){var e=d.options;d.snapElements=[],a(e.snap.constructor!==String?e.snap.items||":data(ui-draggable)":e.snap).each(function(){var b=a(this),c=b.offset();this!==d.element[0]&&d.snapElements.push({item:this,width:b.outerWidth(),height:b.outerHeight(),top:c.top,left:c.left})})},drag:function(b,c,d){var e,f,g,h,i,j,k,l,m,n,o=d.options,p=o.snapTolerance,q=c.offset.left,r=q+d.helperProportions.width,s=c.offset.top,t=s+d.helperProportions.height;for(m=d.snapElements.length-1;m>=0;m--)i=d.snapElements[m].left,j=i+d.snapElements[m].width,k=d.snapElements[m].top,l=k+d.snapElements[m].height,i-p>r||q>j+p||k-p>t||s>l+p||!a.contains(d.snapElements[m].item.ownerDocument,d.snapElements[m].item)?(d.snapElements[m].snapping&&d.options.snap.release&&d.options.snap.release.call(d.element,b,a.extend(d._uiHash(),{snapItem:d.snapElements[m].item})),d.snapElements[m].snapping=!1):("inner"!==o.snapMode&&(e=Math.abs(k-t)<=p,f=Math.abs(l-s)<=p,g=Math.abs(i-r)<=p,h=Math.abs(j-q)<=p,e&&(c.position.top=d._convertPositionTo("relative",{top:k-d.helperProportions.height,left:0}).top-d.margins.top),f&&(c.position.top=d._convertPositionTo("relative",{top:l,left:0}).top-d.margins.top),g&&(c.position.left=d._convertPositionTo("relative",{top:0,left:i-d.helperProportions.width}).left-d.margins.left),h&&(c.position.left=d._convertPositionTo("relative",{top:0,left:j}).left-d.margins.left)),n=e||f||g||h,"outer"!==o.snapMode&&(e=Math.abs(k-s)<=p,f=Math.abs(l-t)<=p,g=Math.abs(i-q)<=p,h=Math.abs(j-r)<=p,e&&(c.position.top=d._convertPositionTo("relative",{top:k,left:0}).top-d.margins.top),f&&(c.position.top=d._convertPositionTo("relative",{top:l-d.helperProportions.height,left:0}).top-d.margins.top),g&&(c.position.left=d._convertPositionTo("relative",{top:0,left:i}).left-d.margins.left),h&&(c.position.left=d._convertPositionTo("relative",{top:0,left:j-d.helperProportions.width}).left-d.margins.left)),!d.snapElements[m].snapping&&(e||f||g||h||n)&&d.options.snap.snap&&d.options.snap.snap.call(d.element,b,a.extend(d._uiHash(),{snapItem:d.snapElements[m].item})),d.snapElements[m].snapping=e||f||g||h||n)}}),a.ui.plugin.add("draggable","stack",{start:function(b,c,d){var e,f=d.options,g=a.makeArray(a(f.stack)).sort(function(b,c){return(parseInt(a(b).css("zIndex"),10)||0)-(parseInt(a(c).css("zIndex"),10)||0)});g.length&&(e=parseInt(a(g[0]).css("zIndex"),10)||0,a(g).each(function(b){a(this).css("zIndex",e+b)}),this.css("zIndex",e+g.length))}}),a.ui.plugin.add("draggable","zIndex",{start:function(b,c,d){var e=a(c.helper),f=d.options;e.css("zIndex")&&(f._zIndex=e.css("zIndex")),e.css("zIndex",f.zIndex)},stop:function(b,c,d){var e=d.options;e._zIndex&&a(c.helper).css("zIndex",e._zIndex)}});a.ui.draggable;a.widget("ui.resizable",a.ui.mouse,{version:"1.11.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(a){return parseInt(a,10)||0},_isNumber:function(a){return!isNaN(parseInt(a,10))},_hasScroll:function(b,c){if("hidden"===a(b).css("overflow"))return!1;var d=c&&"left"===c?"scrollLeft":"scrollTop",e=!1;return b[d]>0?!0:(b[d]=1,e=b[d]>0,b[d]=0,e)},_create:function(){var b,c,d,e,f,g=this,h=this.options;if(this.element.addClass("ui-resizable"),a.extend(this,{_aspectRatio:!!h.aspectRatio,aspectRatio:h.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:h.helper||h.ghost||h.animate?h.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(a("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=h.handles||(a(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),b=this.handles.split(","),this.handles={},c=0;c<b.length;c++)d=a.trim(b[c]),f="ui-resizable-"+d,e=a("<div class='ui-resizable-handle "+f+"'></div>"),e.css({zIndex:h.zIndex}),"se"===d&&e.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[d]=".ui-resizable-"+d,this.element.append(e);this._renderAxis=function(b){var c,d,e,f;b=b||this.element;for(c in this.handles)this.handles[c].constructor===String&&(this.handles[c]=this.element.children(this.handles[c]).first().show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(d=a(this.handles[c],this.element),f=/sw|ne|nw|se|n|s/.test(c)?d.outerHeight():d.outerWidth(),e=["padding",/ne|nw|n/.test(c)?"Top":/se|sw|s/.test(c)?"Bottom":/^e$/.test(c)?"Right":"Left"].join(""),b.css(e,f),this._proportionallyResize()),a(this.handles[c]).length},this._renderAxis(this.element),this._handles=a(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){g.resizing||(this.className&&(e=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),g.axis=e&&e[1]?e[1]:"se")}),h.autoHide&&(this._handles.hide(),a(this.element).addClass("ui-resizable-autohide").mouseenter(function(){h.disabled||(a(this).removeClass("ui-resizable-autohide"),g._handles.show())}).mouseleave(function(){h.disabled||g.resizing||(a(this).addClass("ui-resizable-autohide"),g._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var b,c=function(b){a(b).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(c(this.element),b=this.element,this.originalElement.css({position:b.css("position"),width:b.outerWidth(),height:b.outerHeight(),top:b.css("top"),left:b.css("left")}).insertAfter(b),b.remove()),this.originalElement.css("resize",this.originalResizeStyle),c(this.originalElement),this},_mouseCapture:function(b){var c,d,e=!1;for(c in this.handles)d=a(this.handles[c])[0],(d===b.target||a.contains(d,b.target))&&(e=!0);return!this.options.disabled&&e},_mouseStart:function(b){var c,d,e,f=this.options,g=this.element;return this.resizing=!0,this._renderProxy(),c=this._num(this.helper.css("left")),d=this._num(this.helper.css("top")),f.containment&&(c+=a(f.containment).scrollLeft()||0,d+=a(f.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:c,top:d},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:g.width(),height:g.height()},this.originalSize=this._helper?{width:g.outerWidth(),height:g.outerHeight()}:{width:g.width(),height:g.height()},this.sizeDiff={width:g.outerWidth()-g.width(),height:g.outerHeight()-g.height()},this.originalPosition={left:c,top:d},this.originalMousePosition={left:b.pageX,top:b.pageY},this.aspectRatio="number"==typeof f.aspectRatio?f.aspectRatio:this.originalSize.width/this.originalSize.height||1,e=a(".ui-resizable-"+this.axis).css("cursor"),a("body").css("cursor","auto"===e?this.axis+"-resize":e),g.addClass("ui-resizable-resizing"),this._propagate("start",b),!0},_mouseDrag:function(b){var c,d,e=this.originalMousePosition,f=this.axis,g=b.pageX-e.left||0,h=b.pageY-e.top||0,i=this._change[f];return this._updatePrevProperties(),i?(c=i.apply(this,[b,g,h]),this._updateVirtualBoundaries(b.shiftKey),(this._aspectRatio||b.shiftKey)&&(c=this._updateRatio(c,b)),c=this._respectSize(c,b),this._updateCache(c),this._propagate("resize",b),d=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),a.isEmptyObject(d)||(this._updatePrevProperties(),this._trigger("resize",b,this.ui()),this._applyChanges()),!1):!1},_mouseStop:function(b){this.resizing=!1;var c,d,e,f,g,h,i,j=this.options,k=this;return this._helper&&(c=this._proportionallyResizeElements,d=c.length&&/textarea/i.test(c[0].nodeName),e=d&&this._hasScroll(c[0],"left")?0:k.sizeDiff.height,f=d?0:k.sizeDiff.width,g={width:k.helper.width()-f,height:k.helper.height()-e},h=parseInt(k.element.css("left"),10)+(k.position.left-k.originalPosition.left)||null,i=parseInt(k.element.css("top"),10)+(k.position.top-k.originalPosition.top)||null,j.animate||this.element.css(a.extend(g,{top:i,left:h})),k.helper.height(k.size.height),k.helper.width(k.size.width),this._helper&&!j.animate&&this._proportionallyResize()),a("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",b),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var a={};return this.position.top!==this.prevPosition.top&&(a.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(a.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(a.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(a.height=this.size.height+"px"),this.helper.css(a),a},_updateVirtualBoundaries:function(a){var b,c,d,e,f,g=this.options;f={minWidth:this._isNumber(g.minWidth)?g.minWidth:0,maxWidth:this._isNumber(g.maxWidth)?g.maxWidth:1/0,minHeight:this._isNumber(g.minHeight)?g.minHeight:0,maxHeight:this._isNumber(g.maxHeight)?g.maxHeight:1/0},(this._aspectRatio||a)&&(b=f.minHeight*this.aspectRatio,d=f.minWidth/this.aspectRatio,c=f.maxHeight*this.aspectRatio,e=f.maxWidth/this.aspectRatio,b>f.minWidth&&(f.minWidth=b),d>f.minHeight&&(f.minHeight=d),c<f.maxWidth&&(f.maxWidth=c),e<f.maxHeight&&(f.maxHeight=e)),this._vBoundaries=f},_updateCache:function(a){this.offset=this.helper.offset(),this._isNumber(a.left)&&(this.position.left=a.left),this._isNumber(a.top)&&(this.position.top=a.top),this._isNumber(a.height)&&(this.size.height=a.height),this._isNumber(a.width)&&(this.size.width=a.width)},_updateRatio:function(a){var b=this.position,c=this.size,d=this.axis;return this._isNumber(a.height)?a.width=a.height*this.aspectRatio:this._isNumber(a.width)&&(a.height=a.width/this.aspectRatio),"sw"===d&&(a.left=b.left+(c.width-a.width),a.top=null),"nw"===d&&(a.top=b.top+(c.height-a.height),a.left=b.left+(c.width-a.width)),a},_respectSize:function(a){var b=this._vBoundaries,c=this.axis,d=this._isNumber(a.width)&&b.maxWidth&&b.maxWidth<a.width,e=this._isNumber(a.height)&&b.maxHeight&&b.maxHeight<a.height,f=this._isNumber(a.width)&&b.minWidth&&b.minWidth>a.width,g=this._isNumber(a.height)&&b.minHeight&&b.minHeight>a.height,h=this.originalPosition.left+this.originalSize.width,i=this.position.top+this.size.height,j=/sw|nw|w/.test(c),k=/nw|ne|n/.test(c);return f&&(a.width=b.minWidth),g&&(a.height=b.minHeight),d&&(a.width=b.maxWidth),e&&(a.height=b.maxHeight),f&&j&&(a.left=h-b.minWidth),d&&j&&(a.left=h-b.maxWidth),g&&k&&(a.top=i-b.minHeight),e&&k&&(a.top=i-b.maxHeight),a.width||a.height||a.left||!a.top?a.width||a.height||a.top||!a.left||(a.left=null):a.top=null,a},_getPaddingPlusBorderDimensions:function(a){for(var b=0,c=[],d=[a.css("borderTopWidth"),a.css("borderRightWidth"),a.css("borderBottomWidth"),a.css("borderLeftWidth")],e=[a.css("paddingTop"),a.css("paddingRight"),a.css("paddingBottom"),a.css("paddingLeft")];4>b;b++)c[b]=parseInt(d[b],10)||0,c[b]+=parseInt(e[b],10)||0;return{height:c[0]+c[2],width:c[1]+c[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var a,b=0,c=this.helper||this.element;b<this._proportionallyResizeElements.length;b++)a=this._proportionallyResizeElements[b],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(a)),a.css({height:c.height()-this.outerDimensions.height||0,width:c.width()-this.outerDimensions.width||0})},_renderProxy:function(){var b=this.element,c=this.options;this.elementOffset=b.offset(),this._helper?(this.helper=this.helper||a("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++c.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(a,b){return{width:this.originalSize.width+b}},w:function(a,b){var c=this.originalSize,d=this.originalPosition;return{left:d.left+b,width:c.width-b}},n:function(a,b,c){var d=this.originalSize,e=this.originalPosition;return{top:e.top+c,height:d.height-c}},s:function(a,b,c){return{height:this.originalSize.height+c}},se:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},sw:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[b,c,d]))},ne:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},nw:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[b,c,d]))}},_propagate:function(b,c){a.ui.plugin.call(this,b,[c,this.ui()]),"resize"!==b&&this._trigger(b,c,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),a.ui.plugin.add("resizable","animate",{stop:function(b){var c=a(this).resizable("instance"),d=c.options,e=c._proportionallyResizeElements,f=e.length&&/textarea/i.test(e[0].nodeName),g=f&&c._hasScroll(e[0],"left")?0:c.sizeDiff.height,h=f?0:c.sizeDiff.width,i={width:c.size.width-h,height:c.size.height-g},j=parseInt(c.element.css("left"),10)+(c.position.left-c.originalPosition.left)||null,k=parseInt(c.element.css("top"),10)+(c.position.top-c.originalPosition.top)||null;c.element.animate(a.extend(i,k&&j?{top:k,left:j}:{}),{duration:d.animateDuration,easing:d.animateEasing,step:function(){var d={width:parseInt(c.element.css("width"),10),height:parseInt(c.element.css("height"),10),top:parseInt(c.element.css("top"),10),left:parseInt(c.element.css("left"),10)};e&&e.length&&a(e[0]).css({width:d.width,height:d.height}),c._updateCache(d),c._propagate("resize",b)}})}}),a.ui.plugin.add("resizable","containment",{start:function(){var b,c,d,e,f,g,h,i=a(this).resizable("instance"),j=i.options,k=i.element,l=j.containment,m=l instanceof a?l.get(0):/parent/.test(l)?k.parent().get(0):l;m&&(i.containerElement=a(m),/document/.test(l)||l===document?(i.containerOffset={left:0,top:0},i.containerPosition={left:0,top:0},i.parentData={element:a(document),left:0,top:0,width:a(document).width(),height:a(document).height()||document.body.parentNode.scrollHeight}):(b=a(m),c=[],a(["Top","Right","Left","Bottom"]).each(function(a,d){c[a]=i._num(b.css("padding"+d))}),i.containerOffset=b.offset(),i.containerPosition=b.position(),i.containerSize={height:b.innerHeight()-c[3],width:b.innerWidth()-c[1]},d=i.containerOffset,e=i.containerSize.height,f=i.containerSize.width,g=i._hasScroll(m,"left")?m.scrollWidth:f,h=i._hasScroll(m)?m.scrollHeight:e,i.parentData={element:m,left:d.left,top:d.top,width:g,height:h}))},resize:function(b){var c,d,e,f,g=a(this).resizable("instance"),h=g.options,i=g.containerOffset,j=g.position,k=g._aspectRatio||b.shiftKey,l={top:0,left:0},m=g.containerElement,n=!0;m[0]!==document&&/static/.test(m.css("position"))&&(l=i),j.left<(g._helper?i.left:0)&&(g.size.width=g.size.width+(g._helper?g.position.left-i.left:g.position.left-l.left),k&&(g.size.height=g.size.width/g.aspectRatio,n=!1),g.position.left=h.helper?i.left:0),j.top<(g._helper?i.top:0)&&(g.size.height=g.size.height+(g._helper?g.position.top-i.top:g.position.top),k&&(g.size.width=g.size.height*g.aspectRatio,n=!1),g.position.top=g._helper?i.top:0),e=g.containerElement.get(0)===g.element.parent().get(0),f=/relative|absolute/.test(g.containerElement.css("position")),e&&f?(g.offset.left=g.parentData.left+g.position.left,g.offset.top=g.parentData.top+g.position.top):(g.offset.left=g.element.offset().left,g.offset.top=g.element.offset().top),c=Math.abs(g.sizeDiff.width+(g._helper?g.offset.left-l.left:g.offset.left-i.left)),d=Math.abs(g.sizeDiff.height+(g._helper?g.offset.top-l.top:g.offset.top-i.top)),c+g.size.width>=g.parentData.width&&(g.size.width=g.parentData.width-c,k&&(g.size.height=g.size.width/g.aspectRatio,n=!1)),d+g.size.height>=g.parentData.height&&(g.size.height=g.parentData.height-d,k&&(g.size.width=g.size.height*g.aspectRatio,n=!1)),n||(g.position.left=g.prevPosition.left,g.position.top=g.prevPosition.top,g.size.width=g.prevSize.width,g.size.height=g.prevSize.height)},stop:function(){var b=a(this).resizable("instance"),c=b.options,d=b.containerOffset,e=b.containerPosition,f=b.containerElement,g=a(b.helper),h=g.offset(),i=g.outerWidth()-b.sizeDiff.width,j=g.outerHeight()-b.sizeDiff.height;b._helper&&!c.animate&&/relative/.test(f.css("position"))&&a(this).css({left:h.left-e.left-d.left,width:i,height:j}),b._helper&&!c.animate&&/static/.test(f.css("position"))&&a(this).css({left:h.left-e.left-d.left,width:i,height:j})}}),a.ui.plugin.add("resizable","alsoResize",{start:function(){var b=a(this).resizable("instance"),c=b.options,d=function(b){a(b).each(function(){var b=a(this);b.data("ui-resizable-alsoresize",{width:parseInt(b.width(),10),height:parseInt(b.height(),10),left:parseInt(b.css("left"),10),top:parseInt(b.css("top"),10)})})};"object"!=typeof c.alsoResize||c.alsoResize.parentNode?d(c.alsoResize):c.alsoResize.length?(c.alsoResize=c.alsoResize[0],d(c.alsoResize)):a.each(c.alsoResize,function(a){d(a)})},resize:function(b,c){var d=a(this).resizable("instance"),e=d.options,f=d.originalSize,g=d.originalPosition,h={height:d.size.height-f.height||0,width:d.size.width-f.width||0,top:d.position.top-g.top||0,left:d.position.left-g.left||0},i=function(b,d){a(b).each(function(){var b=a(this),e=a(this).data("ui-resizable-alsoresize"),f={},g=d&&d.length?d:b.parents(c.originalElement[0]).length?["width","height"]:["width","height","top","left"];a.each(g,function(a,b){var c=(e[b]||0)+(h[b]||0);c&&c>=0&&(f[b]=c||null)}),b.css(f)})};"object"!=typeof e.alsoResize||e.alsoResize.nodeType?i(e.alsoResize):a.each(e.alsoResize,function(a,b){i(a,b)})},stop:function(){a(this).removeData("resizable-alsoresize")}}),a.ui.plugin.add("resizable","ghost",{start:function(){var b=a(this).resizable("instance"),c=b.options,d=b.size;b.ghost=b.originalElement.clone(),b.ghost.css({opacity:.25,display:"block",position:"relative",height:d.height,width:d.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof c.ghost?c.ghost:""),b.ghost.appendTo(b.helper)},resize:function(){var b=a(this).resizable("instance");b.ghost&&b.ghost.css({position:"relative",height:b.size.height,width:b.size.width})},stop:function(){var b=a(this).resizable("instance");b.ghost&&b.helper&&b.helper.get(0).removeChild(b.ghost.get(0))}}),a.ui.plugin.add("resizable","grid",{resize:function(){var b,c=a(this).resizable("instance"),d=c.options,e=c.size,f=c.originalSize,g=c.originalPosition,h=c.axis,i="number"==typeof d.grid?[d.grid,d.grid]:d.grid,j=i[0]||1,k=i[1]||1,l=Math.round((e.width-f.width)/j)*j,m=Math.round((e.height-f.height)/k)*k,n=f.width+l,o=f.height+m,p=d.maxWidth&&d.maxWidth<n,q=d.maxHeight&&d.maxHeight<o,r=d.minWidth&&d.minWidth>n,s=d.minHeight&&d.minHeight>o;d.grid=i,r&&(n+=j),s&&(o+=k),p&&(n-=j),q&&(o-=k),/^(se|s|e)$/.test(h)?(c.size.width=n,c.size.height=o):/^(ne)$/.test(h)?(c.size.width=n,c.size.height=o,c.position.top=g.top-m):/^(sw)$/.test(h)?(c.size.width=n,c.size.height=o,c.position.left=g.left-l):((0>=o-k||0>=n-j)&&(b=c._getPaddingPlusBorderDimensions(this)),o-k>0?(c.size.height=o,c.position.top=g.top-m):(o=k-b.height,c.size.height=o,c.position.top=g.top+f.height-o),n-j>0?(c.size.width=n,c.position.left=g.left-l):(n=k-b.height,c.size.width=n,c.position.left=g.left+f.width-n))}});a.ui.resizable,a.widget("ui.dialog",{version:"1.11.1",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"Close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(b){var c=a(this).css(b).offset().top;0>c&&a(this).css("top",b.top-c)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&a.fn.draggable&&this._makeDraggable(),this.options.resizable&&a.fn.resizable&&this._makeResizable(),this._isOpen=!1,this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var b=this.options.appendTo;return b&&(b.jquery||b.nodeType)?a(b):this.document.find(b||"body").eq(0)},_destroy:function(){var a,b=this.originalPosition;this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),a=b.parent.children().eq(b.index),a.length&&a[0]!==this.element[0]?a.before(this.element):b.parent.append(this.element)},widget:function(){return this.uiDialog},disable:a.noop,enable:a.noop,close:function(b){var c,d=this;if(this._isOpen&&this._trigger("beforeClose",b)!==!1){if(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),!this.opener.filter(":focusable").focus().length)try{c=this.document[0].activeElement,c&&"body"!==c.nodeName.toLowerCase()&&a(c).blur()}catch(e){}this._hide(this.uiDialog,this.options.hide,function(){d._trigger("close",b)})}},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(b,c){var d=!1,e=this.uiDialog.siblings(".ui-front:visible").map(function(){return+a(this).css("z-index")}).get(),f=Math.max.apply(null,e);return f>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",f+1),d=!0),d&&!c&&this._trigger("focus",b),d},open:function(){var b=this;return this._isOpen?void(this._moveToTop()&&this._focusTabbable()):(this._isOpen=!0,this.opener=a(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,function(){b._focusTabbable(),b._trigger("focus")}),this._makeFocusTarget(),void this._trigger("open"))},_focusTabbable:function(){var a=this._focusedElement;a||(a=this.element.find("[autofocus]")),a.length||(a=this.element.find(":tabbable")),a.length||(a=this.uiDialogButtonPane.find(":tabbable")),a.length||(a=this.uiDialogTitlebarClose.filter(":tabbable")),a.length||(a=this.uiDialog),a.eq(0).focus()},_keepFocus:function(b){function c(){var b=this.document[0].activeElement,c=this.uiDialog[0]===b||a.contains(this.uiDialog[0],b);c||this._focusTabbable()}b.preventDefault(),c.call(this),this._delay(c)},_createWrapper:function(){this.uiDialog=a("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(b){if(this.options.closeOnEscape&&!b.isDefaultPrevented()&&b.keyCode&&b.keyCode===a.ui.keyCode.ESCAPE)return b.preventDefault(),void this.close(b);if(b.keyCode===a.ui.keyCode.TAB&&!b.isDefaultPrevented()){var c=this.uiDialog.find(":tabbable"),d=c.filter(":first"),e=c.filter(":last");b.target!==e[0]&&b.target!==this.uiDialog[0]||b.shiftKey?b.target!==d[0]&&b.target!==this.uiDialog[0]||!b.shiftKey||(this._delay(function(){e.focus()}),b.preventDefault()):(this._delay(function(){d.focus()}),b.preventDefault())}},mousedown:function(a){this._moveToTop(a)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var b;this.uiDialogTitlebar=a("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(b){a(b.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=a("<button type='button'></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(a){a.preventDefault(),this.close(a)}}),b=a("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(b),this.uiDialog.attr({"aria-labelledby":b.attr("id")})},_title:function(a){this.options.title||a.html("&#160;"),a.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=a("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=a("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var b=this,c=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),a.isEmptyObject(c)||a.isArray(c)&&!c.length?void this.uiDialog.removeClass("ui-dialog-buttons"):(a.each(c,function(c,d){var e,f;d=a.isFunction(d)?{click:d,text:c}:d,d=a.extend({type:"button"},d),e=d.click,d.click=function(){e.apply(b.element[0],arguments)},f={icons:d.icons,text:d.showText},delete d.icons,delete d.showText,a("<button></button>",d).button(f).appendTo(b.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),void this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){function b(a){return{position:a.position,offset:a.offset}}var c=this,d=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(d,e){a(this).addClass("ui-dialog-dragging"),c._blockFrames(),c._trigger("dragStart",d,b(e))},drag:function(a,d){c._trigger("drag",a,b(d))},stop:function(e,f){var g=f.offset.left-c.document.scrollLeft(),h=f.offset.top-c.document.scrollTop();d.position={my:"left top",at:"left"+(g>=0?"+":"")+g+" top"+(h>=0?"+":"")+h,of:c.window},a(this).removeClass("ui-dialog-dragging"),c._unblockFrames(),c._trigger("dragStop",e,b(f))}})},_makeResizable:function(){function b(a){return{originalPosition:a.originalPosition,originalSize:a.originalSize,position:a.position,size:a.size}}var c=this,d=this.options,e=d.resizable,f=this.uiDialog.css("position"),g="string"==typeof e?e:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:d.maxWidth,maxHeight:d.maxHeight,minWidth:d.minWidth,minHeight:this._minHeight(),handles:g,start:function(d,e){a(this).addClass("ui-dialog-resizing"),c._blockFrames(),c._trigger("resizeStart",d,b(e))},resize:function(a,d){c._trigger("resize",a,b(d))},stop:function(e,f){var g=c.uiDialog.offset(),h=g.left-c.document.scrollLeft(),i=g.top-c.document.scrollTop();d.height=c.uiDialog.height(),d.width=c.uiDialog.width(),d.position={my:"left top",at:"left"+(h>=0?"+":"")+h+" top"+(i>=0?"+":"")+i,of:c.window},a(this).removeClass("ui-dialog-resizing"),c._unblockFrames(),c._trigger("resizeStop",e,b(f))}}).css("position",f)},_trackFocus:function(){this._on(this.widget(),{focusin:function(b){this._makeFocusTarget(),this._focusedElement=a(b.target)}})},_makeFocusTarget:function(){this._untrackInstance(),this._trackingInstances().unshift(this)},_untrackInstance:function(){var b=this._trackingInstances(),c=a.inArray(this,b);-1!==c&&b.splice(c,1)},_trackingInstances:function(){var a=this.document.data("ui-dialog-instances");return a||(a=[],this.document.data("ui-dialog-instances",a)),a},_minHeight:function(){var a=this.options;return"auto"===a.height?a.minHeight:Math.min(a.minHeight,a.height)},_position:function(){var a=this.uiDialog.is(":visible");a||this.uiDialog.show(),this.uiDialog.position(this.options.position),a||this.uiDialog.hide();
},_setOptions:function(b){var c=this,d=!1,e={};a.each(b,function(a,b){c._setOption(a,b),a in c.sizeRelatedOptions&&(d=!0),a in c.resizableRelatedOptions&&(e[a]=b)}),d&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",e)},_setOption:function(a,b){var c,d,e=this.uiDialog;"dialogClass"===a&&e.removeClass(this.options.dialogClass).addClass(b),"disabled"!==a&&(this._super(a,b),"appendTo"===a&&this.uiDialog.appendTo(this._appendTo()),"buttons"===a&&this._createButtons(),"closeText"===a&&this.uiDialogTitlebarClose.button({label:""+b}),"draggable"===a&&(c=e.is(":data(ui-draggable)"),c&&!b&&e.draggable("destroy"),!c&&b&&this._makeDraggable()),"position"===a&&this._position(),"resizable"===a&&(d=e.is(":data(ui-resizable)"),d&&!b&&e.resizable("destroy"),d&&"string"==typeof b&&e.resizable("option","handles",b),d||b===!1||this._makeResizable()),"title"===a&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var a,b,c,d=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),d.minWidth>d.width&&(d.width=d.minWidth),a=this.uiDialog.css({height:"auto",width:d.width}).outerHeight(),b=Math.max(0,d.minHeight-a),c="number"==typeof d.maxHeight?Math.max(0,d.maxHeight-a):"none","auto"===d.height?this.element.css({minHeight:b,maxHeight:c,height:"auto"}):this.element.height(Math.max(0,d.height-a)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var b=a(this);return a("<div>").css({position:"absolute",width:b.outerWidth(),height:b.outerHeight()}).appendTo(b.parent()).offset(b.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(b){return a(b.target).closest(".ui-dialog").length?!0:!!a(b.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var b=!0;this._delay(function(){b=!1}),this.document.data("ui-dialog-overlays")||this._on(this.document,{focusin:function(a){b||this._allowInteraction(a)||(a.preventDefault(),this._trackingInstances()[0]._focusTabbable())}}),this.overlay=a("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)}},_destroyOverlay:function(){if(this.options.modal&&this.overlay){var a=this.document.data("ui-dialog-overlays")-1;a?this.document.data("ui-dialog-overlays",a):this.document.unbind("focusin").removeData("ui-dialog-overlays"),this.overlay.remove(),this.overlay=null}}});a.widget("ui.droppable",{version:"1.11.1",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var b,c=this.options,d=c.accept;this.isover=!1,this.isout=!0,this.accept=a.isFunction(d)?d:function(a){return a.is(d)},this.proportions=function(){return arguments.length?void(b=arguments[0]):b?b:b={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}},this._addToManager(c.scope),c.addClasses&&this.element.addClass("ui-droppable")},_addToManager:function(b){a.ui.ddmanager.droppables[b]=a.ui.ddmanager.droppables[b]||[],a.ui.ddmanager.droppables[b].push(this)},_splice:function(a){for(var b=0;b<a.length;b++)a[b]===this&&a.splice(b,1)},_destroy:function(){var b=a.ui.ddmanager.droppables[this.options.scope];this._splice(b),this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(b,c){if("accept"===b)this.accept=a.isFunction(c)?c:function(a){return a.is(c)};else if("scope"===b){var d=a.ui.ddmanager.droppables[this.options.scope];this._splice(d),this._addToManager(c)}this._super(b,c)},_activate:function(b){var c=a.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),c&&this._trigger("activate",b,this.ui(c))},_deactivate:function(b){var c=a.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),c&&this._trigger("deactivate",b,this.ui(c))},_over:function(b){var c=a.ui.ddmanager.current;c&&(c.currentItem||c.element)[0]!==this.element[0]&&this.accept.call(this.element[0],c.currentItem||c.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",b,this.ui(c)))},_out:function(b){var c=a.ui.ddmanager.current;c&&(c.currentItem||c.element)[0]!==this.element[0]&&this.accept.call(this.element[0],c.currentItem||c.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",b,this.ui(c)))},_drop:function(b,c){var d=c||a.ui.ddmanager.current,e=!1;return d&&(d.currentItem||d.element)[0]!==this.element[0]?(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var c=a(this).droppable("instance");return c.options.greedy&&!c.options.disabled&&c.options.scope===d.options.scope&&c.accept.call(c.element[0],d.currentItem||d.element)&&a.ui.intersect(d,a.extend(c,{offset:c.element.offset()}),c.options.tolerance,b)?(e=!0,!1):void 0}),e?!1:this.accept.call(this.element[0],d.currentItem||d.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",b,this.ui(d)),this.element):!1):!1},ui:function(a){return{draggable:a.currentItem||a.element,helper:a.helper,position:a.position,offset:a.positionAbs}}}),a.ui.intersect=function(){function a(a,b,c){return a>=b&&b+c>a}return function(b,c,d,e){if(!c.offset)return!1;var f=(b.positionAbs||b.position.absolute).left,g=(b.positionAbs||b.position.absolute).top,h=f+b.helperProportions.width,i=g+b.helperProportions.height,j=c.offset.left,k=c.offset.top,l=j+c.proportions().width,m=k+c.proportions().height;switch(d){case"fit":return f>=j&&l>=h&&g>=k&&m>=i;case"intersect":return j<f+b.helperProportions.width/2&&h-b.helperProportions.width/2<l&&k<g+b.helperProportions.height/2&&i-b.helperProportions.height/2<m;case"pointer":return a(e.pageY,k,c.proportions().height)&&a(e.pageX,j,c.proportions().width);case"touch":return(g>=k&&m>=g||i>=k&&m>=i||k>g&&i>m)&&(f>=j&&l>=f||h>=j&&l>=h||j>f&&h>l);default:return!1}}}(),a.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(b,c){var d,e,f=a.ui.ddmanager.droppables[b.options.scope]||[],g=c?c.type:null,h=(b.currentItem||b.element).find(":data(ui-droppable)").addBack();a:for(d=0;d<f.length;d++)if(!(f[d].options.disabled||b&&!f[d].accept.call(f[d].element[0],b.currentItem||b.element))){for(e=0;e<h.length;e++)if(h[e]===f[d].element[0]){f[d].proportions().height=0;continue a}f[d].visible="none"!==f[d].element.css("display"),f[d].visible&&("mousedown"===g&&f[d]._activate.call(f[d],c),f[d].offset=f[d].element.offset(),f[d].proportions({width:f[d].element[0].offsetWidth,height:f[d].element[0].offsetHeight}))}},drop:function(b,c){var d=!1;return a.each((a.ui.ddmanager.droppables[b.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&a.ui.intersect(b,this,this.options.tolerance,c)&&(d=this._drop.call(this,c)||d),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],b.currentItem||b.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,c)))}),d},dragStart:function(b,c){b.element.parentsUntil("body").bind("scroll.droppable",function(){b.options.refreshPositions||a.ui.ddmanager.prepareOffsets(b,c)})},drag:function(b,c){b.options.refreshPositions&&a.ui.ddmanager.prepareOffsets(b,c),a.each(a.ui.ddmanager.droppables[b.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var d,e,f,g=a.ui.intersect(b,this,this.options.tolerance,c),h=!g&&this.isover?"isout":g&&!this.isover?"isover":null;h&&(this.options.greedy&&(e=this.options.scope,f=this.element.parents(":data(ui-droppable)").filter(function(){return a(this).droppable("instance").options.scope===e}),f.length&&(d=a(f[0]).droppable("instance"),d.greedyChild="isover"===h)),d&&"isover"===h&&(d.isover=!1,d.isout=!0,d._out.call(d,c)),this[h]=!0,this["isout"===h?"isover":"isout"]=!1,this["isover"===h?"_over":"_out"].call(this,c),d&&"isout"===h&&(d.isout=!1,d.isover=!0,d._over.call(d,c)))}})},dragStop:function(b,c){b.element.parentsUntil("body").unbind("scroll.droppable"),b.options.refreshPositions||a.ui.ddmanager.prepareOffsets(b,c)}};var s=(a.ui.droppable,"ui-effects-"),t=a;a.effects={effect:{}},function(a,b){function c(a,b,c){var d=l[b.type]||{};return null==a?c||!b.def?null:b.def:(a=d.floor?~~a:parseFloat(a),isNaN(a)?b.def:d.mod?(a+d.mod)%d.mod:0>a?0:d.max<a?d.max:a)}function d(b){var c=j(),d=c._rgba=[];return b=b.toLowerCase(),o(i,function(a,e){var f,g=e.re.exec(b),h=g&&e.parse(g),i=e.space||"rgba";return h?(f=c[i](h),c[k[i].cache]=f[k[i].cache],d=c._rgba=f._rgba,!1):void 0}),d.length?("0,0,0,0"===d.join()&&a.extend(d,f.transparent),c):f[b]}function e(a,b,c){return c=(c+1)%1,1>6*c?a+(b-a)*c*6:1>2*c?b:2>3*c?a+(b-a)*(2/3-c)*6:a}var f,g="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",h=/^([\-+])=\s*(\d+\.?\d*)/,i=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(a){return[a[1],a[2],a[3],a[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(a){return[2.55*a[1],2.55*a[2],2.55*a[3],a[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(a){return[a[1],a[2]/100,a[3]/100,a[4]]}}],j=a.Color=function(b,c,d,e){return new a.Color.fn.parse(b,c,d,e)},k={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},l={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},m=j.support={},n=a("<p>")[0],o=a.each;n.style.cssText="background-color:rgba(1,1,1,.5)",m.rgba=n.style.backgroundColor.indexOf("rgba")>-1,o(k,function(a,b){b.cache="_"+a,b.props.alpha={idx:3,type:"percent",def:1}}),j.fn=a.extend(j.prototype,{parse:function(e,g,h,i){if(e===b)return this._rgba=[null,null,null,null],this;(e.jquery||e.nodeType)&&(e=a(e).css(g),g=b);var l=this,m=a.type(e),n=this._rgba=[];return g!==b&&(e=[e,g,h,i],m="array"),"string"===m?this.parse(d(e)||f._default):"array"===m?(o(k.rgba.props,function(a,b){n[b.idx]=c(e[b.idx],b)}),this):"object"===m?(e instanceof j?o(k,function(a,b){e[b.cache]&&(l[b.cache]=e[b.cache].slice())}):o(k,function(b,d){var f=d.cache;o(d.props,function(a,b){if(!l[f]&&d.to){if("alpha"===a||null==e[a])return;l[f]=d.to(l._rgba)}l[f][b.idx]=c(e[a],b,!0)}),l[f]&&a.inArray(null,l[f].slice(0,3))<0&&(l[f][3]=1,d.from&&(l._rgba=d.from(l[f])))}),this):void 0},is:function(a){var b=j(a),c=!0,d=this;return o(k,function(a,e){var f,g=b[e.cache];return g&&(f=d[e.cache]||e.to&&e.to(d._rgba)||[],o(e.props,function(a,b){return null!=g[b.idx]?c=g[b.idx]===f[b.idx]:void 0})),c}),c},_space:function(){var a=[],b=this;return o(k,function(c,d){b[d.cache]&&a.push(c)}),a.pop()},transition:function(a,b){var d=j(a),e=d._space(),f=k[e],g=0===this.alpha()?j("transparent"):this,h=g[f.cache]||f.to(g._rgba),i=h.slice();return d=d[f.cache],o(f.props,function(a,e){var f=e.idx,g=h[f],j=d[f],k=l[e.type]||{};null!==j&&(null===g?i[f]=j:(k.mod&&(j-g>k.mod/2?g+=k.mod:g-j>k.mod/2&&(g-=k.mod)),i[f]=c((j-g)*b+g,e)))}),this[e](i)},blend:function(b){if(1===this._rgba[3])return this;var c=this._rgba.slice(),d=c.pop(),e=j(b)._rgba;return j(a.map(c,function(a,b){return(1-d)*e[b]+d*a}))},toRgbaString:function(){var b="rgba(",c=a.map(this._rgba,function(a,b){return null==a?b>2?1:0:a});return 1===c[3]&&(c.pop(),b="rgb("),b+c.join()+")"},toHslaString:function(){var b="hsla(",c=a.map(this.hsla(),function(a,b){return null==a&&(a=b>2?1:0),b&&3>b&&(a=Math.round(100*a)+"%"),a});return 1===c[3]&&(c.pop(),b="hsl("),b+c.join()+")"},toHexString:function(b){var c=this._rgba.slice(),d=c.pop();return b&&c.push(~~(255*d)),"#"+a.map(c,function(a){return a=(a||0).toString(16),1===a.length?"0"+a:a}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),j.fn.parse.prototype=j.fn,k.hsla.to=function(a){if(null==a[0]||null==a[1]||null==a[2])return[null,null,null,a[3]];var b,c,d=a[0]/255,e=a[1]/255,f=a[2]/255,g=a[3],h=Math.max(d,e,f),i=Math.min(d,e,f),j=h-i,k=h+i,l=.5*k;return b=i===h?0:d===h?60*(e-f)/j+360:e===h?60*(f-d)/j+120:60*(d-e)/j+240,c=0===j?0:.5>=l?j/k:j/(2-k),[Math.round(b)%360,c,l,null==g?1:g]},k.hsla.from=function(a){if(null==a[0]||null==a[1]||null==a[2])return[null,null,null,a[3]];var b=a[0]/360,c=a[1],d=a[2],f=a[3],g=.5>=d?d*(1+c):d+c-d*c,h=2*d-g;return[Math.round(255*e(h,g,b+1/3)),Math.round(255*e(h,g,b)),Math.round(255*e(h,g,b-1/3)),f]},o(k,function(d,e){var f=e.props,g=e.cache,i=e.to,k=e.from;j.fn[d]=function(d){if(i&&!this[g]&&(this[g]=i(this._rgba)),d===b)return this[g].slice();var e,h=a.type(d),l="array"===h||"object"===h?d:arguments,m=this[g].slice();return o(f,function(a,b){var d=l["object"===h?a:b.idx];null==d&&(d=m[b.idx]),m[b.idx]=c(d,b)}),k?(e=j(k(m)),e[g]=m,e):j(m)},o(f,function(b,c){j.fn[b]||(j.fn[b]=function(e){var f,g=a.type(e),i="alpha"===b?this._hsla?"hsla":"rgba":d,j=this[i](),k=j[c.idx];return"undefined"===g?k:("function"===g&&(e=e.call(this,k),g=a.type(e)),null==e&&c.empty?this:("string"===g&&(f=h.exec(e),f&&(e=k+parseFloat(f[2])*("+"===f[1]?1:-1))),j[c.idx]=e,this[i](j)))})})}),j.hook=function(b){var c=b.split(" ");o(c,function(b,c){a.cssHooks[c]={set:function(b,e){var f,g,h="";if("transparent"!==e&&("string"!==a.type(e)||(f=d(e)))){if(e=j(f||e),!m.rgba&&1!==e._rgba[3]){for(g="backgroundColor"===c?b.parentNode:b;(""===h||"transparent"===h)&&g&&g.style;)try{h=a.css(g,"backgroundColor"),g=g.parentNode}catch(i){}e=e.blend(h&&"transparent"!==h?h:"_default")}e=e.toRgbaString()}try{b.style[c]=e}catch(i){}}},a.fx.step[c]=function(b){b.colorInit||(b.start=j(b.elem,c),b.end=j(b.end),b.colorInit=!0),a.cssHooks[c].set(b.elem,b.start.transition(b.end,b.pos))}})},j.hook(g),a.cssHooks.borderColor={expand:function(a){var b={};return o(["Top","Right","Bottom","Left"],function(c,d){b["border"+d+"Color"]=a}),b}},f=a.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(t),function(){function b(b){var c,d,e=b.ownerDocument.defaultView?b.ownerDocument.defaultView.getComputedStyle(b,null):b.currentStyle,f={};if(e&&e.length&&e[0]&&e[e[0]])for(d=e.length;d--;)c=e[d],"string"==typeof e[c]&&(f[a.camelCase(c)]=e[c]);else for(c in e)"string"==typeof e[c]&&(f[c]=e[c]);return f}function c(b,c){var d,f,g={};for(d in c)f=c[d],b[d]!==f&&(e[d]||!a.fx.step[d]&&isNaN(parseFloat(f))||(g[d]=f));return g}var d=["add","remove","toggle"],e={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};a.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(b,c){a.fx.step[c]=function(a){("none"!==a.end&&!a.setAttr||1===a.pos&&!a.setAttr)&&(t.style(a.elem,c,a.end),a.setAttr=!0)}}),a.fn.addBack||(a.fn.addBack=function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}),a.effects.animateClass=function(e,f,g,h){var i=a.speed(f,g,h);return this.queue(function(){var f,g=a(this),h=g.attr("class")||"",j=i.children?g.find("*").addBack():g;j=j.map(function(){var c=a(this);return{el:c,start:b(this)}}),f=function(){a.each(d,function(a,b){e[b]&&g[b+"Class"](e[b])})},f(),j=j.map(function(){return this.end=b(this.el[0]),this.diff=c(this.start,this.end),this}),g.attr("class",h),j=j.map(function(){var b=this,c=a.Deferred(),d=a.extend({},i,{queue:!1,complete:function(){c.resolve(b)}});return this.el.animate(this.diff,d),c.promise()}),a.when.apply(a,j.get()).done(function(){f(),a.each(arguments,function(){var b=this.el;a.each(this.diff,function(a){b.css(a,"")})}),i.complete.call(g[0])})})},a.fn.extend({addClass:function(b){return function(c,d,e,f){return d?a.effects.animateClass.call(this,{add:c},d,e,f):b.apply(this,arguments)}}(a.fn.addClass),removeClass:function(b){return function(c,d,e,f){return arguments.length>1?a.effects.animateClass.call(this,{remove:c},d,e,f):b.apply(this,arguments)}}(a.fn.removeClass),toggleClass:function(b){return function(c,d,e,f,g){return"boolean"==typeof d||void 0===d?e?a.effects.animateClass.call(this,d?{add:c}:{remove:c},e,f,g):b.apply(this,arguments):a.effects.animateClass.call(this,{toggle:c},d,e,f)}}(a.fn.toggleClass),switchClass:function(b,c,d,e,f){return a.effects.animateClass.call(this,{add:c,remove:b},d,e,f)}})}(),function(){function b(b,c,d,e){return a.isPlainObject(b)&&(c=b,b=b.effect),b={effect:b},null==c&&(c={}),a.isFunction(c)&&(e=c,d=null,c={}),("number"==typeof c||a.fx.speeds[c])&&(e=d,d=c,c={}),a.isFunction(d)&&(e=d,d=null),c&&a.extend(b,c),d=d||c.duration,b.duration=a.fx.off?0:"number"==typeof d?d:d in a.fx.speeds?a.fx.speeds[d]:a.fx.speeds._default,b.complete=e||c.complete,b}function c(b){return!b||"number"==typeof b||a.fx.speeds[b]?!0:"string"!=typeof b||a.effects.effect[b]?a.isFunction(b)?!0:"object"==typeof b&&!b.effect:!0}a.extend(a.effects,{version:"1.11.1",save:function(a,b){for(var c=0;c<b.length;c++)null!==b[c]&&a.data(s+b[c],a[0].style[b[c]])},restore:function(a,b){var c,d;for(d=0;d<b.length;d++)null!==b[d]&&(c=a.data(s+b[d]),void 0===c&&(c=""),a.css(b[d],c))},setMode:function(a,b){return"toggle"===b&&(b=a.is(":hidden")?"show":"hide"),b},getBaseline:function(a,b){var c,d;switch(a[0]){case"top":c=0;break;case"middle":c=.5;break;case"bottom":c=1;break;default:c=a[0]/b.height}switch(a[1]){case"left":d=0;break;case"center":d=.5;break;case"right":d=1;break;default:d=a[1]/b.width}return{x:d,y:c}},createWrapper:function(b){if(b.parent().is(".ui-effects-wrapper"))return b.parent();var c={width:b.outerWidth(!0),height:b.outerHeight(!0),"float":b.css("float")},d=a("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),e={width:b.width(),height:b.height()},f=document.activeElement;try{f.id}catch(g){f=document.body}return b.wrap(d),(b[0]===f||a.contains(b[0],f))&&a(f).focus(),d=b.parent(),"static"===b.css("position")?(d.css({position:"relative"}),b.css({position:"relative"})):(a.extend(c,{position:b.css("position"),zIndex:b.css("z-index")}),a.each(["top","left","bottom","right"],function(a,d){c[d]=b.css(d),isNaN(parseInt(c[d],10))&&(c[d]="auto")}),b.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),b.css(e),d.css(c).show()},removeWrapper:function(b){var c=document.activeElement;return b.parent().is(".ui-effects-wrapper")&&(b.parent().replaceWith(b),(b[0]===c||a.contains(b[0],c))&&a(c).focus()),b},setTransition:function(b,c,d,e){return e=e||{},a.each(c,function(a,c){var f=b.cssUnit(c);f[0]>0&&(e[c]=f[0]*d+f[1])}),e}}),a.fn.extend({effect:function(){function c(b){function c(){a.isFunction(f)&&f.call(e[0]),a.isFunction(b)&&b()}var e=a(this),f=d.complete,h=d.mode;(e.is(":hidden")?"hide"===h:"show"===h)?(e[h](),c()):g.call(e[0],d,c)}var d=b.apply(this,arguments),e=d.mode,f=d.queue,g=a.effects.effect[d.effect];return a.fx.off||!g?e?this[e](d.duration,d.complete):this.each(function(){d.complete&&d.complete.call(this)}):f===!1?this.each(c):this.queue(f||"fx",c)},show:function(a){return function(d){if(c(d))return a.apply(this,arguments);var e=b.apply(this,arguments);return e.mode="show",this.effect.call(this,e)}}(a.fn.show),hide:function(a){return function(d){if(c(d))return a.apply(this,arguments);var e=b.apply(this,arguments);return e.mode="hide",this.effect.call(this,e)}}(a.fn.hide),toggle:function(a){return function(d){if(c(d)||"boolean"==typeof d)return a.apply(this,arguments);var e=b.apply(this,arguments);return e.mode="toggle",this.effect.call(this,e)}}(a.fn.toggle),cssUnit:function(b){var c=this.css(b),d=[];return a.each(["em","px","%","pt"],function(a,b){c.indexOf(b)>0&&(d=[parseFloat(c),b])}),d}})}(),function(){var b={};a.each(["Quad","Cubic","Quart","Quint","Expo"],function(a,c){b[c]=function(b){return Math.pow(b,a+2)}}),a.extend(b,{Sine:function(a){return 1-Math.cos(a*Math.PI/2)},Circ:function(a){return 1-Math.sqrt(1-a*a)},Elastic:function(a){return 0===a||1===a?a:-Math.pow(2,8*(a-1))*Math.sin((80*(a-1)-7.5)*Math.PI/15)},Back:function(a){return a*a*(3*a-2)},Bounce:function(a){for(var b,c=4;a<((b=Math.pow(2,--c))-1)/11;);return 1/Math.pow(4,3-c)-7.5625*Math.pow((3*b-2)/22-a,2)}}),a.each(b,function(b,c){a.easing["easeIn"+b]=c,a.easing["easeOut"+b]=function(a){return 1-c(1-a)},a.easing["easeInOut"+b]=function(a){return.5>a?c(2*a)/2:1-c(-2*a+2)/2}})}();a.effects,a.effects.effect.blind=function(b,c){var d,e,f,g=a(this),h=/up|down|vertical/,i=/up|left|vertical|horizontal/,j=["position","top","bottom","left","right","height","width"],k=a.effects.setMode(g,b.mode||"hide"),l=b.direction||"up",m=h.test(l),n=m?"height":"width",o=m?"top":"left",p=i.test(l),q={},r="show"===k;g.parent().is(".ui-effects-wrapper")?a.effects.save(g.parent(),j):a.effects.save(g,j),g.show(),d=a.effects.createWrapper(g).css({overflow:"hidden"}),e=d[n](),f=parseFloat(d.css(o))||0,q[n]=r?e:0,p||(g.css(m?"bottom":"right",0).css(m?"top":"left","auto").css({position:"absolute"}),q[o]=r?f:e+f),r&&(d.css(n,0),p||d.css(o,f+e)),d.animate(q,{duration:b.duration,easing:b.easing,queue:!1,complete:function(){"hide"===k&&g.hide(),a.effects.restore(g,j),a.effects.removeWrapper(g),c()}})},a.effects.effect.bounce=function(b,c){var d,e,f,g=a(this),h=["position","top","bottom","left","right","height","width"],i=a.effects.setMode(g,b.mode||"effect"),j="hide"===i,k="show"===i,l=b.direction||"up",m=b.distance,n=b.times||5,o=2*n+(k||j?1:0),p=b.duration/o,q=b.easing,r="up"===l||"down"===l?"top":"left",s="up"===l||"left"===l,t=g.queue(),u=t.length;for((k||j)&&h.push("opacity"),a.effects.save(g,h),g.show(),a.effects.createWrapper(g),m||(m=g["top"===r?"outerHeight":"outerWidth"]()/3),k&&(f={opacity:1},f[r]=0,g.css("opacity",0).css(r,s?2*-m:2*m).animate(f,p,q)),j&&(m/=Math.pow(2,n-1)),f={},f[r]=0,d=0;n>d;d++)e={},e[r]=(s?"-=":"+=")+m,g.animate(e,p,q).animate(f,p,q),m=j?2*m:m/2;j&&(e={opacity:0},e[r]=(s?"-=":"+=")+m,g.animate(e,p,q)),g.queue(function(){j&&g.hide(),a.effects.restore(g,h),a.effects.removeWrapper(g),c()}),u>1&&t.splice.apply(t,[1,0].concat(t.splice(u,o+1))),g.dequeue()},a.effects.effect.clip=function(b,c){var d,e,f,g=a(this),h=["position","top","bottom","left","right","height","width"],i=a.effects.setMode(g,b.mode||"hide"),j="show"===i,k=b.direction||"vertical",l="vertical"===k,m=l?"height":"width",n=l?"top":"left",o={};a.effects.save(g,h),g.show(),d=a.effects.createWrapper(g).css({overflow:"hidden"}),e="IMG"===g[0].tagName?d:g,f=e[m](),j&&(e.css(m,0),e.css(n,f/2)),o[m]=j?f:0,o[n]=j?0:f/2,e.animate(o,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){j||g.hide(),a.effects.restore(g,h),a.effects.removeWrapper(g),c()}})},a.effects.effect.drop=function(b,c){var d,e=a(this),f=["position","top","bottom","left","right","opacity","height","width"],g=a.effects.setMode(e,b.mode||"hide"),h="show"===g,i=b.direction||"left",j="up"===i||"down"===i?"top":"left",k="up"===i||"left"===i?"pos":"neg",l={opacity:h?1:0};a.effects.save(e,f),e.show(),a.effects.createWrapper(e),d=b.distance||e["top"===j?"outerHeight":"outerWidth"](!0)/2,h&&e.css("opacity",0).css(j,"pos"===k?-d:d),l[j]=(h?"pos"===k?"+=":"-=":"pos"===k?"-=":"+=")+d,e.animate(l,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){"hide"===g&&e.hide(),a.effects.restore(e,f),a.effects.removeWrapper(e),c()}})},a.effects.effect.explode=function(b,c){function d(){t.push(this),t.length===l*m&&e()}function e(){n.css({visibility:"visible"}),a(t).remove(),p||n.hide(),c()}var f,g,h,i,j,k,l=b.pieces?Math.round(Math.sqrt(b.pieces)):3,m=l,n=a(this),o=a.effects.setMode(n,b.mode||"hide"),p="show"===o,q=n.show().css("visibility","hidden").offset(),r=Math.ceil(n.outerWidth()/m),s=Math.ceil(n.outerHeight()/l),t=[];for(f=0;l>f;f++)for(i=q.top+f*s,k=f-(l-1)/2,g=0;m>g;g++)h=q.left+g*r,j=g-(m-1)/2,n.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-g*r,top:-f*s}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:r,height:s,left:h+(p?j*r:0),top:i+(p?k*s:0),opacity:p?0:1}).animate({left:h+(p?0:j*r),top:i+(p?0:k*s),opacity:p?1:0},b.duration||500,b.easing,d)},a.effects.effect.fade=function(b,c){var d=a(this),e=a.effects.setMode(d,b.mode||"toggle");d.animate({opacity:e},{queue:!1,duration:b.duration,easing:b.easing,complete:c})},a.effects.effect.fold=function(b,c){var d,e,f=a(this),g=["position","top","bottom","left","right","height","width"],h=a.effects.setMode(f,b.mode||"hide"),i="show"===h,j="hide"===h,k=b.size||15,l=/([0-9]+)%/.exec(k),m=!!b.horizFirst,n=i!==m,o=n?["width","height"]:["height","width"],p=b.duration/2,q={},r={};a.effects.save(f,g),f.show(),d=a.effects.createWrapper(f).css({overflow:"hidden"}),e=n?[d.width(),d.height()]:[d.height(),d.width()],l&&(k=parseInt(l[1],10)/100*e[j?0:1]),i&&d.css(m?{height:0,width:k}:{height:k,width:0}),q[o[0]]=i?e[0]:k,r[o[1]]=i?e[1]:0,d.animate(q,p,b.easing).animate(r,p,b.easing,function(){j&&f.hide(),a.effects.restore(f,g),a.effects.removeWrapper(f),c()})},a.effects.effect.highlight=function(b,c){var d=a(this),e=["backgroundImage","backgroundColor","opacity"],f=a.effects.setMode(d,b.mode||"show"),g={backgroundColor:d.css("backgroundColor")};"hide"===f&&(g.opacity=0),a.effects.save(d,e),d.show().css({backgroundImage:"none",backgroundColor:b.color||"#ffff99"}).animate(g,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){"hide"===f&&d.hide(),a.effects.restore(d,e),c()}})},a.effects.effect.size=function(b,c){var d,e,f,g=a(this),h=["position","top","bottom","left","right","width","height","overflow","opacity"],i=["position","top","bottom","left","right","overflow","opacity"],j=["width","height","overflow"],k=["fontSize"],l=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],m=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],n=a.effects.setMode(g,b.mode||"effect"),o=b.restore||"effect"!==n,p=b.scale||"both",q=b.origin||["middle","center"],r=g.css("position"),s=o?h:i,t={height:0,width:0,outerHeight:0,outerWidth:0};"show"===n&&g.show(),d={height:g.height(),width:g.width(),outerHeight:g.outerHeight(),outerWidth:g.outerWidth()},"toggle"===b.mode&&"show"===n?(g.from=b.to||t,g.to=b.from||d):(g.from=b.from||("show"===n?t:d),g.to=b.to||("hide"===n?t:d)),f={from:{y:g.from.height/d.height,x:g.from.width/d.width},to:{y:g.to.height/d.height,x:g.to.width/d.width}},"box"!==p&&"both"!==p||(f.from.y!==f.to.y&&(s=s.concat(l),g.from=a.effects.setTransition(g,l,f.from.y,g.from),g.to=a.effects.setTransition(g,l,f.to.y,g.to)),f.from.x!==f.to.x&&(s=s.concat(m),g.from=a.effects.setTransition(g,m,f.from.x,g.from),g.to=a.effects.setTransition(g,m,f.to.x,g.to))),"content"!==p&&"both"!==p||f.from.y!==f.to.y&&(s=s.concat(k).concat(j),g.from=a.effects.setTransition(g,k,f.from.y,g.from),g.to=a.effects.setTransition(g,k,f.to.y,g.to)),a.effects.save(g,s),g.show(),a.effects.createWrapper(g),g.css("overflow","hidden").css(g.from),q&&(e=a.effects.getBaseline(q,d),g.from.top=(d.outerHeight-g.outerHeight())*e.y,g.from.left=(d.outerWidth-g.outerWidth())*e.x,g.to.top=(d.outerHeight-g.to.outerHeight)*e.y,g.to.left=(d.outerWidth-g.to.outerWidth)*e.x),g.css(g.from),"content"!==p&&"both"!==p||(l=l.concat(["marginTop","marginBottom"]).concat(k),m=m.concat(["marginLeft","marginRight"]),j=h.concat(l).concat(m),g.find("*[width]").each(function(){var c=a(this),d={height:c.height(),width:c.width(),outerHeight:c.outerHeight(),outerWidth:c.outerWidth()};o&&a.effects.save(c,j),c.from={height:d.height*f.from.y,width:d.width*f.from.x,outerHeight:d.outerHeight*f.from.y,outerWidth:d.outerWidth*f.from.x},c.to={height:d.height*f.to.y,width:d.width*f.to.x,outerHeight:d.height*f.to.y,outerWidth:d.width*f.to.x},f.from.y!==f.to.y&&(c.from=a.effects.setTransition(c,l,f.from.y,c.from),c.to=a.effects.setTransition(c,l,f.to.y,c.to)),f.from.x!==f.to.x&&(c.from=a.effects.setTransition(c,m,f.from.x,c.from),c.to=a.effects.setTransition(c,m,f.to.x,c.to)),c.css(c.from),c.animate(c.to,b.duration,b.easing,function(){o&&a.effects.restore(c,j)})})),g.animate(g.to,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){0===g.to.opacity&&g.css("opacity",g.from.opacity),"hide"===n&&g.hide(),a.effects.restore(g,s),o||("static"===r?g.css({position:"relative",top:g.to.top,left:g.to.left}):a.each(["top","left"],function(a,b){g.css(b,function(b,c){var d=parseInt(c,10),e=a?g.to.left:g.to.top;return"auto"===c?e+"px":d+e+"px"})})),a.effects.removeWrapper(g),c()}})},a.effects.effect.scale=function(b,c){var d=a(this),e=a.extend(!0,{},b),f=a.effects.setMode(d,b.mode||"effect"),g=parseInt(b.percent,10)||(0===parseInt(b.percent,10)?0:"hide"===f?0:100),h=b.direction||"both",i=b.origin,j={height:d.height(),width:d.width(),outerHeight:d.outerHeight(),outerWidth:d.outerWidth()},k={y:"horizontal"!==h?g/100:1,x:"vertical"!==h?g/100:1};e.effect="size",e.queue=!1,e.complete=c,"effect"!==f&&(e.origin=i||["middle","center"],e.restore=!0),e.from=b.from||("show"===f?{height:0,width:0,outerHeight:0,outerWidth:0}:j),e.to={height:j.height*k.y,width:j.width*k.x,outerHeight:j.outerHeight*k.y,outerWidth:j.outerWidth*k.x},e.fade&&("show"===f&&(e.from.opacity=0,e.to.opacity=1),"hide"===f&&(e.from.opacity=1,e.to.opacity=0)),d.effect(e)},a.effects.effect.puff=function(b,c){var d=a(this),e=a.effects.setMode(d,b.mode||"hide"),f="hide"===e,g=parseInt(b.percent,10)||150,h=g/100,i={height:d.height(),width:d.width(),outerHeight:d.outerHeight(),outerWidth:d.outerWidth()};a.extend(b,{effect:"scale",queue:!1,fade:!0,mode:e,complete:c,percent:f?g:100,from:f?i:{height:i.height*h,width:i.width*h,outerHeight:i.outerHeight*h,outerWidth:i.outerWidth*h}}),d.effect(b)},a.effects.effect.pulsate=function(b,c){var d,e=a(this),f=a.effects.setMode(e,b.mode||"show"),g="show"===f,h="hide"===f,i=g||"hide"===f,j=2*(b.times||5)+(i?1:0),k=b.duration/j,l=0,m=e.queue(),n=m.length;for(!g&&e.is(":visible")||(e.css("opacity",0).show(),l=1),d=1;j>d;d++)e.animate({opacity:l},k,b.easing),l=1-l;e.animate({opacity:l},k,b.easing),e.queue(function(){h&&e.hide(),c()}),n>1&&m.splice.apply(m,[1,0].concat(m.splice(n,j+1))),e.dequeue()},a.effects.effect.shake=function(b,c){var d,e=a(this),f=["position","top","bottom","left","right","height","width"],g=a.effects.setMode(e,b.mode||"effect"),h=b.direction||"left",i=b.distance||20,j=b.times||3,k=2*j+1,l=Math.round(b.duration/k),m="up"===h||"down"===h?"top":"left",n="up"===h||"left"===h,o={},p={},q={},r=e.queue(),s=r.length;for(a.effects.save(e,f),e.show(),a.effects.createWrapper(e),o[m]=(n?"-=":"+=")+i,p[m]=(n?"+=":"-=")+2*i,q[m]=(n?"-=":"+=")+2*i,e.animate(o,l,b.easing),d=1;j>d;d++)e.animate(p,l,b.easing).animate(q,l,b.easing);e.animate(p,l,b.easing).animate(o,l/2,b.easing).queue(function(){"hide"===g&&e.hide(),a.effects.restore(e,f),a.effects.removeWrapper(e),c()}),s>1&&r.splice.apply(r,[1,0].concat(r.splice(s,k+1))),e.dequeue()},a.effects.effect.slide=function(b,c){var d,e=a(this),f=["position","top","bottom","left","right","width","height"],g=a.effects.setMode(e,b.mode||"show"),h="show"===g,i=b.direction||"left",j="up"===i||"down"===i?"top":"left",k="up"===i||"left"===i,l={};
a.effects.save(e,f),e.show(),d=b.distance||e["top"===j?"outerHeight":"outerWidth"](!0),a.effects.createWrapper(e).css({overflow:"hidden"}),h&&e.css(j,k?isNaN(d)?"-"+d:-d:d),l[j]=(h?k?"+=":"-=":k?"-=":"+=")+d,e.animate(l,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){"hide"===g&&e.hide(),a.effects.restore(e,f),a.effects.removeWrapper(e),c()}})},a.effects.effect.transfer=function(b,c){var d=a(this),e=a(b.to),f="fixed"===e.css("position"),g=a("body"),h=f?g.scrollTop():0,i=f?g.scrollLeft():0,j=e.offset(),k={top:j.top-h,left:j.left-i,height:e.innerHeight(),width:e.innerWidth()},l=d.offset(),m=a("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(b.className).css({top:l.top-h,left:l.left-i,height:d.innerHeight(),width:d.innerWidth(),position:f?"fixed":"absolute"}).animate(k,b.duration,b.easing,function(){m.remove(),c()})},a.widget("ui.progressbar",{version:"1.11.1",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min}),this.valueDiv=a("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(a){return void 0===a?this.options.value:(this.options.value=this._constrainedValue(a),void this._refreshValue())},_constrainedValue:function(a){return void 0===a&&(a=this.options.value),this.indeterminate=a===!1,"number"!=typeof a&&(a=0),this.indeterminate?!1:Math.min(this.options.max,Math.max(this.min,a))},_setOptions:function(a){var b=a.value;delete a.value,this._super(a),this.options.value=this._constrainedValue(b),this._refreshValue()},_setOption:function(a,b){"max"===a&&(b=Math.max(this.min,b)),"disabled"===a&&this.element.toggleClass("ui-state-disabled",!!b).attr("aria-disabled",b),this._super(a,b)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var b=this.options.value,c=this._percentage();this.valueDiv.toggle(this.indeterminate||b>this.min).toggleClass("ui-corner-right",b===this.options.max).width(c.toFixed(0)+"%"),this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=a("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":b}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==b&&(this.oldValue=b,this._trigger("change")),b===this.options.max&&this._trigger("complete")}}),a.widget("ui.selectable",a.ui.mouse,{version:"1.11.1",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var b,c=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){b=a(c.options.filter,c.element[0]),b.addClass("ui-selectee"),b.each(function(){var b=a(this),c=b.offset();a.data(this,"selectable-item",{element:this,$element:b,left:c.left,top:c.top,right:c.left+b.outerWidth(),bottom:c.top+b.outerHeight(),startselected:!1,selected:b.hasClass("ui-selected"),selecting:b.hasClass("ui-selecting"),unselecting:b.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=b.addClass("ui-selectee"),this._mouseInit(),this.helper=a("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(b){var c=this,d=this.options;this.opos=[b.pageX,b.pageY],this.options.disabled||(this.selectees=a(d.filter,this.element[0]),this._trigger("start",b),a(d.appendTo).append(this.helper),this.helper.css({left:b.pageX,top:b.pageY,width:0,height:0}),d.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var d=a.data(this,"selectable-item");d.startselected=!0,b.metaKey||b.ctrlKey||(d.$element.removeClass("ui-selected"),d.selected=!1,d.$element.addClass("ui-unselecting"),d.unselecting=!0,c._trigger("unselecting",b,{unselecting:d.element}))}),a(b.target).parents().addBack().each(function(){var d,e=a.data(this,"selectable-item");return e?(d=!b.metaKey&&!b.ctrlKey||!e.$element.hasClass("ui-selected"),e.$element.removeClass(d?"ui-unselecting":"ui-selected").addClass(d?"ui-selecting":"ui-unselecting"),e.unselecting=!d,e.selecting=d,e.selected=d,d?c._trigger("selecting",b,{selecting:e.element}):c._trigger("unselecting",b,{unselecting:e.element}),!1):void 0}))},_mouseDrag:function(b){if(this.dragged=!0,!this.options.disabled){var c,d=this,e=this.options,f=this.opos[0],g=this.opos[1],h=b.pageX,i=b.pageY;return f>h&&(c=h,h=f,f=c),g>i&&(c=i,i=g,g=c),this.helper.css({left:f,top:g,width:h-f,height:i-g}),this.selectees.each(function(){var c=a.data(this,"selectable-item"),j=!1;c&&c.element!==d.element[0]&&("touch"===e.tolerance?j=!(c.left>h||c.right<f||c.top>i||c.bottom<g):"fit"===e.tolerance&&(j=c.left>f&&c.right<h&&c.top>g&&c.bottom<i),j?(c.selected&&(c.$element.removeClass("ui-selected"),c.selected=!1),c.unselecting&&(c.$element.removeClass("ui-unselecting"),c.unselecting=!1),c.selecting||(c.$element.addClass("ui-selecting"),c.selecting=!0,d._trigger("selecting",b,{selecting:c.element}))):(c.selecting&&((b.metaKey||b.ctrlKey)&&c.startselected?(c.$element.removeClass("ui-selecting"),c.selecting=!1,c.$element.addClass("ui-selected"),c.selected=!0):(c.$element.removeClass("ui-selecting"),c.selecting=!1,c.startselected&&(c.$element.addClass("ui-unselecting"),c.unselecting=!0),d._trigger("unselecting",b,{unselecting:c.element}))),c.selected&&(b.metaKey||b.ctrlKey||c.startselected||(c.$element.removeClass("ui-selected"),c.selected=!1,c.$element.addClass("ui-unselecting"),c.unselecting=!0,d._trigger("unselecting",b,{unselecting:c.element})))))}),!1}},_mouseStop:function(b){var c=this;return this.dragged=!1,a(".ui-unselecting",this.element[0]).each(function(){var d=a.data(this,"selectable-item");d.$element.removeClass("ui-unselecting"),d.unselecting=!1,d.startselected=!1,c._trigger("unselected",b,{unselected:d.element})}),a(".ui-selecting",this.element[0]).each(function(){var d=a.data(this,"selectable-item");d.$element.removeClass("ui-selecting").addClass("ui-selected"),d.selecting=!1,d.selected=!0,d.startselected=!0,c._trigger("selected",b,{selected:d.element})}),this._trigger("stop",b),this.helper.remove(),!1}}),a.widget("ui.selectmenu",{version:"1.11.1",defaultElement:"<select>",options:{appendTo:null,disabled:null,icons:{button:"ui-icon-triangle-1-s"},position:{my:"left top",at:"left bottom",collision:"none"},width:null,change:null,close:null,focus:null,open:null,select:null},_create:function(){var a=this.element.uniqueId().attr("id");this.ids={element:a,button:a+"-button",menu:a+"-menu"},this._drawButton(),this._drawMenu(),this.options.disabled&&this.disable()},_drawButton:function(){var b=this,c=this.element.attr("tabindex");this.label=a("label[for='"+this.ids.element+"']").attr("for",this.ids.button),this._on(this.label,{click:function(a){this.button.focus(),a.preventDefault()}}),this.element.hide(),this.button=a("<span>",{"class":"ui-selectmenu-button ui-widget ui-state-default ui-corner-all",tabindex:c||this.options.disabled?-1:0,id:this.ids.button,role:"combobox","aria-expanded":"false","aria-autocomplete":"list","aria-owns":this.ids.menu,"aria-haspopup":"true"}).insertAfter(this.element),a("<span>",{"class":"ui-icon "+this.options.icons.button}).prependTo(this.button),this.buttonText=a("<span>",{"class":"ui-selectmenu-text"}).appendTo(this.button),this._setText(this.buttonText,this.element.find("option:selected").text()),this._resizeButton(),this._on(this.button,this._buttonEvents),this.button.one("focusin",function(){b.menuItems||b._refreshMenu()}),this._hoverable(this.button),this._focusable(this.button)},_drawMenu:function(){var b=this;this.menu=a("<ul>",{"aria-hidden":"true","aria-labelledby":this.ids.button,id:this.ids.menu}),this.menuWrap=a("<div>",{"class":"ui-selectmenu-menu ui-front"}).append(this.menu).appendTo(this._appendTo()),this.menuInstance=this.menu.menu({role:"listbox",select:function(a,c){a.preventDefault(),b._select(c.item.data("ui-selectmenu-item"),a)},focus:function(a,c){var d=c.item.data("ui-selectmenu-item");null!=b.focusIndex&&d.index!==b.focusIndex&&(b._trigger("focus",a,{item:d}),b.isOpen||b._select(d,a)),b.focusIndex=d.index,b.button.attr("aria-activedescendant",b.menuItems.eq(d.index).attr("id"))}}).menu("instance"),this.menu.addClass("ui-corner-bottom").removeClass("ui-corner-all"),this.menuInstance._off(this.menu,"mouseleave"),this.menuInstance._closeOnDocumentClick=function(){return!1},this.menuInstance._isDivider=function(){return!1}},refresh:function(){this._refreshMenu(),this._setText(this.buttonText,this._getSelectedItem().text()),this.options.width||this._resizeButton()},_refreshMenu:function(){this.menu.empty();var a,b=this.element.find("option");b.length&&(this._parseOptions(b),this._renderMenu(this.menu,this.items),this.menuInstance.refresh(),this.menuItems=this.menu.find("li").not(".ui-selectmenu-optgroup"),a=this._getSelectedItem(),this.menuInstance.focus(null,a),this._setAria(a.data("ui-selectmenu-item")),this._setOption("disabled",this.element.prop("disabled")))},open:function(a){this.options.disabled||(this.menuItems?(this.menu.find(".ui-state-focus").removeClass("ui-state-focus"),this.menuInstance.focus(null,this._getSelectedItem())):this._refreshMenu(),this.isOpen=!0,this._toggleAttr(),this._resizeMenu(),this._position(),this._on(this.document,this._documentClick),this._trigger("open",a))},_position:function(){this.menuWrap.position(a.extend({of:this.button},this.options.position))},close:function(a){this.isOpen&&(this.isOpen=!1,this._toggleAttr(),this._off(this.document),this._trigger("close",a))},widget:function(){return this.button},menuWidget:function(){return this.menu},_renderMenu:function(b,c){var d=this,e="";a.each(c,function(c,f){f.optgroup!==e&&(a("<li>",{"class":"ui-selectmenu-optgroup ui-menu-divider"+(f.element.parent("optgroup").prop("disabled")?" ui-state-disabled":""),text:f.optgroup}).appendTo(b),e=f.optgroup),d._renderItemData(b,f)})},_renderItemData:function(a,b){return this._renderItem(a,b).data("ui-selectmenu-item",b)},_renderItem:function(b,c){var d=a("<li>");return c.disabled&&d.addClass("ui-state-disabled"),this._setText(d,c.label),d.appendTo(b)},_setText:function(a,b){b?a.text(b):a.html("&#160;")},_move:function(a,b){var c,d,e=".ui-menu-item";this.isOpen?c=this.menuItems.eq(this.focusIndex):(c=this.menuItems.eq(this.element[0].selectedIndex),e+=":not(.ui-state-disabled)"),d="first"===a||"last"===a?c["first"===a?"prevAll":"nextAll"](e).eq(-1):c[a+"All"](e).eq(0),d.length&&this.menuInstance.focus(b,d)},_getSelectedItem:function(){return this.menuItems.eq(this.element[0].selectedIndex)},_toggle:function(a){this[this.isOpen?"close":"open"](a)},_documentClick:{mousedown:function(b){this.isOpen&&(a(b.target).closest(".ui-selectmenu-menu, #"+this.ids.button).length||this.close(b))}},_buttonEvents:{mousedown:function(a){a.preventDefault()},click:"_toggle",keydown:function(b){var c=!0;switch(b.keyCode){case a.ui.keyCode.TAB:case a.ui.keyCode.ESCAPE:this.close(b),c=!1;break;case a.ui.keyCode.ENTER:this.isOpen&&this._selectFocusedItem(b);break;case a.ui.keyCode.UP:b.altKey?this._toggle(b):this._move("prev",b);break;case a.ui.keyCode.DOWN:b.altKey?this._toggle(b):this._move("next",b);break;case a.ui.keyCode.SPACE:this.isOpen?this._selectFocusedItem(b):this._toggle(b);break;case a.ui.keyCode.LEFT:this._move("prev",b);break;case a.ui.keyCode.RIGHT:this._move("next",b);break;case a.ui.keyCode.HOME:case a.ui.keyCode.PAGE_UP:this._move("first",b);break;case a.ui.keyCode.END:case a.ui.keyCode.PAGE_DOWN:this._move("last",b);break;default:this.menu.trigger(b),c=!1}c&&b.preventDefault()}},_selectFocusedItem:function(a){var b=this.menuItems.eq(this.focusIndex);b.hasClass("ui-state-disabled")||this._select(b.data("ui-selectmenu-item"),a)},_select:function(a,b){var c=this.element[0].selectedIndex;this.element[0].selectedIndex=a.index,this._setText(this.buttonText,a.label),this._setAria(a),this._trigger("select",b,{item:a}),a.index!==c&&this._trigger("change",b,{item:a}),this.close(b)},_setAria:function(a){var b=this.menuItems.eq(a.index).attr("id");this.button.attr({"aria-labelledby":b,"aria-activedescendant":b}),this.menu.attr("aria-activedescendant",b)},_setOption:function(a,b){"icons"===a&&this.button.find("span.ui-icon").removeClass(this.options.icons.button).addClass(b.button),this._super(a,b),"appendTo"===a&&this.menuWrap.appendTo(this._appendTo()),"disabled"===a&&(this.menuInstance.option("disabled",b),this.button.toggleClass("ui-state-disabled",b).attr("aria-disabled",b),this.element.prop("disabled",b),b?(this.button.attr("tabindex",-1),this.close()):this.button.attr("tabindex",0)),"width"===a&&this._resizeButton()},_appendTo:function(){var b=this.options.appendTo;return b&&(b=b.jquery||b.nodeType?a(b):this.document.find(b).eq(0)),b&&b[0]||(b=this.element.closest(".ui-front")),b.length||(b=this.document[0].body),b},_toggleAttr:function(){this.button.toggleClass("ui-corner-top",this.isOpen).toggleClass("ui-corner-all",!this.isOpen).attr("aria-expanded",this.isOpen),this.menuWrap.toggleClass("ui-selectmenu-open",this.isOpen),this.menu.attr("aria-hidden",!this.isOpen)},_resizeButton:function(){var a=this.options.width;a||(a=this.element.show().outerWidth(),this.element.hide()),this.button.outerWidth(a)},_resizeMenu:function(){this.menu.outerWidth(Math.max(this.button.outerWidth(),this.menu.width("").outerWidth()+1))},_getCreateOptions:function(){return{disabled:this.element.prop("disabled")}},_parseOptions:function(b){var c=[];b.each(function(b,d){var e=a(d),f=e.parent("optgroup");c.push({element:e,index:b,value:e.attr("value"),label:e.text(),optgroup:f.attr("label")||"",disabled:f.prop("disabled")||e.prop("disabled")})}),this.items=c},_destroy:function(){this.menuWrap.remove(),this.button.remove(),this.element.show(),this.element.removeUniqueId(),this.label.attr("for",this.ids.element)}}),a.widget("ui.slider",a.ui.mouse,{version:"1.11.1",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var b,c,d=this.options,e=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),f="<span class='ui-slider-handle ui-state-default ui-corner-all' tabindex='0'></span>",g=[];for(c=d.values&&d.values.length||1,e.length>c&&(e.slice(c).remove(),e=e.slice(0,c)),b=e.length;c>b;b++)g.push(f);this.handles=e.add(a(g.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(b){a(this).data("ui-slider-handle-index",b)})},_createRange:function(){var b=this.options,c="";b.range?(b.range===!0&&(b.values?b.values.length&&2!==b.values.length?b.values=[b.values[0],b.values[0]]:a.isArray(b.values)&&(b.values=b.values.slice(0)):b.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=a("<div></div>").appendTo(this.element),c="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(c+("min"===b.range||"max"===b.range?" ui-slider-range-"+b.range:""))):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(b){var c,d,e,f,g,h,i,j,k=this,l=this.options;return l.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),c={x:b.pageX,y:b.pageY},d=this._normValueFromMouse(c),e=this._valueMax()-this._valueMin()+1,this.handles.each(function(b){var c=Math.abs(d-k.values(b));(e>c||e===c&&(b===k._lastChangedValue||k.values(b)===l.min))&&(e=c,f=a(this),g=b)}),h=this._start(b,g),h===!1?!1:(this._mouseSliding=!0,this._handleIndex=g,f.addClass("ui-state-active").focus(),i=f.offset(),j=!a(b.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=j?{left:0,top:0}:{left:b.pageX-i.left-f.width()/2,top:b.pageY-i.top-f.height()/2-(parseInt(f.css("borderTopWidth"),10)||0)-(parseInt(f.css("borderBottomWidth"),10)||0)+(parseInt(f.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(b,g,d),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(a){var b={x:a.pageX,y:a.pageY},c=this._normValueFromMouse(b);return this._slide(a,this._handleIndex,c),!1},_mouseStop:function(a){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(a,this._handleIndex),this._change(a,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(a){var b,c,d,e,f;return"horizontal"===this.orientation?(b=this.elementSize.width,c=a.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(b=this.elementSize.height,c=a.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),d=c/b,d>1&&(d=1),0>d&&(d=0),"vertical"===this.orientation&&(d=1-d),e=this._valueMax()-this._valueMin(),f=this._valueMin()+d*e,this._trimAlignValue(f)},_start:function(a,b){var c={handle:this.handles[b],value:this.value()};return this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values()),this._trigger("start",a,c)},_slide:function(a,b,c){var d,e,f;this.options.values&&this.options.values.length?(d=this.values(b?0:1),2===this.options.values.length&&this.options.range===!0&&(0===b&&c>d||1===b&&d>c)&&(c=d),c!==this.values(b)&&(e=this.values(),e[b]=c,f=this._trigger("slide",a,{handle:this.handles[b],value:c,values:e}),d=this.values(b?0:1),f!==!1&&this.values(b,c))):c!==this.value()&&(f=this._trigger("slide",a,{handle:this.handles[b],value:c}),f!==!1&&this.value(c))},_stop:function(a,b){var c={handle:this.handles[b],value:this.value()};this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values()),this._trigger("stop",a,c)},_change:function(a,b){if(!this._keySliding&&!this._mouseSliding){var c={handle:this.handles[b],value:this.value()};this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values()),this._lastChangedValue=b,this._trigger("change",a,c)}},value:function(a){return arguments.length?(this.options.value=this._trimAlignValue(a),this._refreshValue(),void this._change(null,0)):this._value()},values:function(b,c){var d,e,f;if(arguments.length>1)return this.options.values[b]=this._trimAlignValue(c),this._refreshValue(),void this._change(null,b);if(!arguments.length)return this._values();if(!a.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(b):this.value();for(d=this.options.values,e=arguments[0],f=0;f<d.length;f+=1)d[f]=this._trimAlignValue(e[f]),this._change(null,f);this._refreshValue()},_setOption:function(b,c){var d,e=0;switch("range"===b&&this.options.range===!0&&("min"===c?(this.options.value=this._values(0),this.options.values=null):"max"===c&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),a.isArray(this.options.values)&&(e=this.options.values.length),"disabled"===b&&this.element.toggleClass("ui-state-disabled",!!c),this._super(b,c),b){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue(),this.handles.css("horizontal"===c?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),d=0;e>d;d+=1)this._change(null,d);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var a=this.options.value;return a=this._trimAlignValue(a)},_values:function(a){var b,c,d;if(arguments.length)return b=this.options.values[a],b=this._trimAlignValue(b);if(this.options.values&&this.options.values.length){for(c=this.options.values.slice(),d=0;d<c.length;d+=1)c[d]=this._trimAlignValue(c[d]);return c}return[]},_trimAlignValue:function(a){if(a<=this._valueMin())return this._valueMin();if(a>=this._valueMax())return this._valueMax();var b=this.options.step>0?this.options.step:1,c=(a-this._valueMin())%b,d=a-c;return 2*Math.abs(c)>=b&&(d+=c>0?b:-b),parseFloat(d.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var b,c,d,e,f,g=this.options.range,h=this.options,i=this,j=this._animateOff?!1:h.animate,k={};this.options.values&&this.options.values.length?this.handles.each(function(d){c=(i.values(d)-i._valueMin())/(i._valueMax()-i._valueMin())*100,k["horizontal"===i.orientation?"left":"bottom"]=c+"%",a(this).stop(1,1)[j?"animate":"css"](k,h.animate),i.options.range===!0&&("horizontal"===i.orientation?(0===d&&i.range.stop(1,1)[j?"animate":"css"]({left:c+"%"},h.animate),1===d&&i.range[j?"animate":"css"]({width:c-b+"%"},{queue:!1,duration:h.animate})):(0===d&&i.range.stop(1,1)[j?"animate":"css"]({bottom:c+"%"},h.animate),1===d&&i.range[j?"animate":"css"]({height:c-b+"%"},{queue:!1,duration:h.animate}))),b=c}):(d=this.value(),e=this._valueMin(),f=this._valueMax(),c=f!==e?(d-e)/(f-e)*100:0,k["horizontal"===this.orientation?"left":"bottom"]=c+"%",this.handle.stop(1,1)[j?"animate":"css"](k,h.animate),"min"===g&&"horizontal"===this.orientation&&this.range.stop(1,1)[j?"animate":"css"]({width:c+"%"},h.animate),"max"===g&&"horizontal"===this.orientation&&this.range[j?"animate":"css"]({width:100-c+"%"},{queue:!1,duration:h.animate}),"min"===g&&"vertical"===this.orientation&&this.range.stop(1,1)[j?"animate":"css"]({height:c+"%"},h.animate),"max"===g&&"vertical"===this.orientation&&this.range[j?"animate":"css"]({height:100-c+"%"},{queue:!1,duration:h.animate}))},_handleEvents:{keydown:function(b){var c,d,e,f,g=a(b.target).data("ui-slider-handle-index");switch(b.keyCode){case a.ui.keyCode.HOME:case a.ui.keyCode.END:case a.ui.keyCode.PAGE_UP:case a.ui.keyCode.PAGE_DOWN:case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(b.preventDefault(),!this._keySliding&&(this._keySliding=!0,a(b.target).addClass("ui-state-active"),c=this._start(b,g),c===!1))return}switch(f=this.options.step,d=e=this.options.values&&this.options.values.length?this.values(g):this.value(),b.keyCode){case a.ui.keyCode.HOME:e=this._valueMin();break;case a.ui.keyCode.END:e=this._valueMax();break;case a.ui.keyCode.PAGE_UP:e=this._trimAlignValue(d+(this._valueMax()-this._valueMin())/this.numPages);break;case a.ui.keyCode.PAGE_DOWN:e=this._trimAlignValue(d-(this._valueMax()-this._valueMin())/this.numPages);break;case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:if(d===this._valueMax())return;e=this._trimAlignValue(d+f);break;case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(d===this._valueMin())return;e=this._trimAlignValue(d-f)}this._slide(b,g,e)},keyup:function(b){var c=a(b.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(b,c),this._change(b,c),a(b.target).removeClass("ui-state-active"))}}}),a.widget("ui.sortable",a.ui.mouse,{version:"1.11.1",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(a,b,c){return a>=b&&b+c>a},_isFloating:function(a){return/left|right/.test(a.css("float"))||/inline|table-cell/.test(a.css("display"))},_create:function(){var a=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===a.axis||this._isFloating(this.items[0].item):!1,this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(a,b){this._super(a,b),"handle"===a&&this._setHandleClassName()},_setHandleClassName:function(){this.element.find(".ui-sortable-handle").removeClass("ui-sortable-handle"),a.each(this.items,function(){(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item).addClass("ui-sortable-handle")})},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").find(".ui-sortable-handle").removeClass("ui-sortable-handle"),this._mouseDestroy();for(var a=this.items.length-1;a>=0;a--)this.items[a].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(b,c){var d=null,e=!1,f=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(b),a(b.target).parents().each(function(){return a.data(this,f.widgetName+"-item")===f?(d=a(this),!1):void 0}),a.data(b.target,f.widgetName+"-item")===f&&(d=a(b.target)),d&&(!this.options.handle||c||(a(this.options.handle,d).find("*").addBack().each(function(){this===b.target&&(e=!0)}),e))?(this.currentItem=d,this._removeCurrentsFromItems(),!0):!1)},_mouseStart:function(b,c,d){var e,f,g=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(b),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(b),this.originalPageX=b.pageX,this.originalPageY=b.pageY,g.cursorAt&&this._adjustOffsetFromHelper(g.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),g.containment&&this._setContainment(),g.cursor&&"auto"!==g.cursor&&(f=this.document.find("body"),this.storedCursor=f.css("cursor"),f.css("cursor",g.cursor),this.storedStylesheet=a("<style>*{ cursor: "+g.cursor+" !important; }</style>").appendTo(f)),g.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",g.opacity)),g.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",g.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",b,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!d)for(e=this.containers.length-1;e>=0;e--)this.containers[e]._trigger("activate",b,this._uiHash(this));return a.ui.ddmanager&&(a.ui.ddmanager.current=this),a.ui.ddmanager&&!g.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(b),!0},_mouseDrag:function(b){var c,d,e,f,g=this.options,h=!1;for(this.position=this._generatePosition(b),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-b.pageY<g.scrollSensitivity?this.scrollParent[0].scrollTop=h=this.scrollParent[0].scrollTop+g.scrollSpeed:b.pageY-this.overflowOffset.top<g.scrollSensitivity&&(this.scrollParent[0].scrollTop=h=this.scrollParent[0].scrollTop-g.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-b.pageX<g.scrollSensitivity?this.scrollParent[0].scrollLeft=h=this.scrollParent[0].scrollLeft+g.scrollSpeed:b.pageX-this.overflowOffset.left<g.scrollSensitivity&&(this.scrollParent[0].scrollLeft=h=this.scrollParent[0].scrollLeft-g.scrollSpeed)):(b.pageY-a(document).scrollTop()<g.scrollSensitivity?h=a(document).scrollTop(a(document).scrollTop()-g.scrollSpeed):a(window).height()-(b.pageY-a(document).scrollTop())<g.scrollSensitivity&&(h=a(document).scrollTop(a(document).scrollTop()+g.scrollSpeed)),b.pageX-a(document).scrollLeft()<g.scrollSensitivity?h=a(document).scrollLeft(a(document).scrollLeft()-g.scrollSpeed):a(window).width()-(b.pageX-a(document).scrollLeft())<g.scrollSensitivity&&(h=a(document).scrollLeft(a(document).scrollLeft()+g.scrollSpeed))),h!==!1&&a.ui.ddmanager&&!g.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),c=this.items.length-1;c>=0;c--)if(d=this.items[c],e=d.item[0],f=this._intersectsWithPointer(d),f&&d.instance===this.currentContainer&&e!==this.currentItem[0]&&this.placeholder[1===f?"next":"prev"]()[0]!==e&&!a.contains(this.placeholder[0],e)&&("semi-dynamic"===this.options.type?!a.contains(this.element[0],e):!0)){if(this.direction=1===f?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(d))break;this._rearrange(b,d),this._trigger("change",b,this._uiHash());break}return this._contactContainers(b),a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),this._trigger("sort",b,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(b,c){if(b){if(a.ui.ddmanager&&!this.options.dropBehaviour&&a.ui.ddmanager.drop(this,b),this.options.revert){var d=this,e=this.placeholder.offset(),f=this.options.axis,g={};f&&"x"!==f||(g.left=e.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),f&&"y"!==f||(g.top=e.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,a(this.helper).animate(g,parseInt(this.options.revert,10)||500,function(){d._clear(b)})}else this._clear(b,c);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();
for(var b=this.containers.length-1;b>=0;b--)this.containers[b]._trigger("deactivate",null,this._uiHash(this)),this.containers[b].containerCache.over&&(this.containers[b]._trigger("out",null,this._uiHash(this)),this.containers[b].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),a.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?a(this.domPosition.prev).after(this.currentItem):a(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(b){var c=this._getItemsAsjQuery(b&&b.connected),d=[];return b=b||{},a(c).each(function(){var c=(a(b.item||this).attr(b.attribute||"id")||"").match(b.expression||/(.+)[\-=_](.+)/);c&&d.push((b.key||c[1]+"[]")+"="+(b.key&&b.expression?c[1]:c[2]))}),!d.length&&b.key&&d.push(b.key+"="),d.join("&")},toArray:function(b){var c=this._getItemsAsjQuery(b&&b.connected),d=[];return b=b||{},c.each(function(){d.push(a(b.item||this).attr(b.attribute||"id")||"")}),d},_intersectsWith:function(a){var b=this.positionAbs.left,c=b+this.helperProportions.width,d=this.positionAbs.top,e=d+this.helperProportions.height,f=a.left,g=f+a.width,h=a.top,i=h+a.height,j=this.offset.click.top,k=this.offset.click.left,l="x"===this.options.axis||d+j>h&&i>d+j,m="y"===this.options.axis||b+k>f&&g>b+k,n=l&&m;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>a[this.floating?"width":"height"]?n:f<b+this.helperProportions.width/2&&c-this.helperProportions.width/2<g&&h<d+this.helperProportions.height/2&&e-this.helperProportions.height/2<i},_intersectsWithPointer:function(a){var b="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,a.top,a.height),c="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,a.left,a.width),d=b&&c,e=this._getDragVerticalDirection(),f=this._getDragHorizontalDirection();return d?this.floating?f&&"right"===f||"down"===e?2:1:e&&("down"===e?2:1):!1},_intersectsWithSides:function(a){var b=this._isOverAxis(this.positionAbs.top+this.offset.click.top,a.top+a.height/2,a.height),c=this._isOverAxis(this.positionAbs.left+this.offset.click.left,a.left+a.width/2,a.width),d=this._getDragVerticalDirection(),e=this._getDragHorizontalDirection();return this.floating&&e?"right"===e&&c||"left"===e&&!c:d&&("down"===d&&b||"up"===d&&!b)},_getDragVerticalDirection:function(){var a=this.positionAbs.top-this.lastPositionAbs.top;return 0!==a&&(a>0?"down":"up")},_getDragHorizontalDirection:function(){var a=this.positionAbs.left-this.lastPositionAbs.left;return 0!==a&&(a>0?"right":"left")},refresh:function(a){return this._refreshItems(a),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var a=this.options;return a.connectWith.constructor===String?[a.connectWith]:a.connectWith},_getItemsAsjQuery:function(b){function c(){h.push(this)}var d,e,f,g,h=[],i=[],j=this._connectWith();if(j&&b)for(d=j.length-1;d>=0;d--)for(f=a(j[d]),e=f.length-1;e>=0;e--)g=a.data(f[e],this.widgetFullName),g&&g!==this&&!g.options.disabled&&i.push([a.isFunction(g.options.items)?g.options.items.call(g.element):a(g.options.items,g.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),g]);for(i.push([a.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):a(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),d=i.length-1;d>=0;d--)i[d][0].each(c);return a(h)},_removeCurrentsFromItems:function(){var b=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=a.grep(this.items,function(a){for(var c=0;c<b.length;c++)if(b[c]===a.item[0])return!1;return!0})},_refreshItems:function(b){this.items=[],this.containers=[this];var c,d,e,f,g,h,i,j,k=this.items,l=[[a.isFunction(this.options.items)?this.options.items.call(this.element[0],b,{item:this.currentItem}):a(this.options.items,this.element),this]],m=this._connectWith();if(m&&this.ready)for(c=m.length-1;c>=0;c--)for(e=a(m[c]),d=e.length-1;d>=0;d--)f=a.data(e[d],this.widgetFullName),f&&f!==this&&!f.options.disabled&&(l.push([a.isFunction(f.options.items)?f.options.items.call(f.element[0],b,{item:this.currentItem}):a(f.options.items,f.element),f]),this.containers.push(f));for(c=l.length-1;c>=0;c--)for(g=l[c][1],h=l[c][0],d=0,j=h.length;j>d;d++)i=a(h[d]),i.data(this.widgetName+"-item",g),k.push({item:i,instance:g,width:0,height:0,left:0,top:0})},refreshPositions:function(b){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var c,d,e,f;for(c=this.items.length-1;c>=0;c--)d=this.items[c],d.instance!==this.currentContainer&&this.currentContainer&&d.item[0]!==this.currentItem[0]||(e=this.options.toleranceElement?a(this.options.toleranceElement,d.item):d.item,b||(d.width=e.outerWidth(),d.height=e.outerHeight()),f=e.offset(),d.left=f.left,d.top=f.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(c=this.containers.length-1;c>=0;c--)f=this.containers[c].element.offset(),this.containers[c].containerCache.left=f.left,this.containers[c].containerCache.top=f.top,this.containers[c].containerCache.width=this.containers[c].element.outerWidth(),this.containers[c].containerCache.height=this.containers[c].element.outerHeight();return this},_createPlaceholder:function(b){b=b||this;var c,d=b.options;d.placeholder&&d.placeholder.constructor!==String||(c=d.placeholder,d.placeholder={element:function(){var d=b.currentItem[0].nodeName.toLowerCase(),e=a("<"+d+">",b.document[0]).addClass(c||b.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===d?b.currentItem.children().each(function(){a("<td>&#160;</td>",b.document[0]).attr("colspan",a(this).attr("colspan")||1).appendTo(e)}):"img"===d&&e.attr("src",b.currentItem.attr("src")),c||e.css("visibility","hidden"),e},update:function(a,e){c&&!d.forcePlaceholderSize||(e.height()||e.height(b.currentItem.innerHeight()-parseInt(b.currentItem.css("paddingTop")||0,10)-parseInt(b.currentItem.css("paddingBottom")||0,10)),e.width()||e.width(b.currentItem.innerWidth()-parseInt(b.currentItem.css("paddingLeft")||0,10)-parseInt(b.currentItem.css("paddingRight")||0,10)))}}),b.placeholder=a(d.placeholder.element.call(b.element,b.currentItem)),b.currentItem.after(b.placeholder),d.placeholder.update(b,b.placeholder)},_contactContainers:function(b){var c,d,e,f,g,h,i,j,k,l,m=null,n=null;for(c=this.containers.length-1;c>=0;c--)if(!a.contains(this.currentItem[0],this.containers[c].element[0]))if(this._intersectsWith(this.containers[c].containerCache)){if(m&&a.contains(this.containers[c].element[0],m.element[0]))continue;m=this.containers[c],n=c}else this.containers[c].containerCache.over&&(this.containers[c]._trigger("out",b,this._uiHash(this)),this.containers[c].containerCache.over=0);if(m)if(1===this.containers.length)this.containers[n].containerCache.over||(this.containers[n]._trigger("over",b,this._uiHash(this)),this.containers[n].containerCache.over=1);else{for(e=1e4,f=null,k=m.floating||this._isFloating(this.currentItem),g=k?"left":"top",h=k?"width":"height",l=k?"clientX":"clientY",d=this.items.length-1;d>=0;d--)a.contains(this.containers[n].element[0],this.items[d].item[0])&&this.items[d].item[0]!==this.currentItem[0]&&(i=this.items[d].item.offset()[g],j=!1,b[l]-i>this.items[d][h]/2&&(j=!0),Math.abs(b[l]-i)<e&&(e=Math.abs(b[l]-i),f=this.items[d],this.direction=j?"up":"down"));if(!f&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[n])return;f?this._rearrange(b,f,null,!0):this._rearrange(b,null,this.containers[n].element,!0),this._trigger("change",b,this._uiHash()),this.containers[n]._trigger("change",b,this._uiHash(this)),this.currentContainer=this.containers[n],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[n]._trigger("over",b,this._uiHash(this)),this.containers[n].containerCache.over=1}},_createHelper:function(b){var c=this.options,d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b,this.currentItem])):"clone"===c.helper?this.currentItem.clone():this.currentItem;return d.parents("body").length||a("parent"!==c.appendTo?c.appendTo:this.currentItem[0].parentNode)[0].appendChild(d[0]),d[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),d[0].style.width&&!c.forceHelperSize||d.width(this.currentItem.width()),d[0].style.height&&!c.forceHelperSize||d.height(this.currentItem.height()),d},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&a.ui.ie)&&(b={top:0,left:0}),{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var a=this.currentItem.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b,c,d,e=this.options;"parent"===e.containment&&(e.containment=this.helper[0].parentNode),"document"!==e.containment&&"window"!==e.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,a("document"===e.containment?document:window).width()-this.helperProportions.width-this.margins.left,(a("document"===e.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(e.containment)||(b=a(e.containment)[0],c=a(e.containment).offset(),d="hidden"!==a(b).css("overflow"),this.containment=[c.left+(parseInt(a(b).css("borderLeftWidth"),10)||0)+(parseInt(a(b).css("paddingLeft"),10)||0)-this.margins.left,c.top+(parseInt(a(b).css("borderTopWidth"),10)||0)+(parseInt(a(b).css("paddingTop"),10)||0)-this.margins.top,c.left+(d?Math.max(b.scrollWidth,b.offsetWidth):b.offsetWidth)-(parseInt(a(b).css("borderLeftWidth"),10)||0)-(parseInt(a(b).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,c.top+(d?Math.max(b.scrollHeight,b.offsetHeight):b.offsetHeight)-(parseInt(a(b).css("borderTopWidth"),10)||0)-(parseInt(a(b).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(b,c){c||(c=this.position);var d="absolute"===b?1:-1,e="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,f=/(html|body)/i.test(e[0].tagName);return{top:c.top+this.offset.relative.top*d+this.offset.parent.top*d-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():f?0:e.scrollTop())*d,left:c.left+this.offset.relative.left*d+this.offset.parent.left*d-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():f?0:e.scrollLeft())*d}},_generatePosition:function(b){var c,d,e=this.options,f=b.pageX,g=b.pageY,h="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,i=/(html|body)/i.test(h[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(b.pageX-this.offset.click.left<this.containment[0]&&(f=this.containment[0]+this.offset.click.left),b.pageY-this.offset.click.top<this.containment[1]&&(g=this.containment[1]+this.offset.click.top),b.pageX-this.offset.click.left>this.containment[2]&&(f=this.containment[2]+this.offset.click.left),b.pageY-this.offset.click.top>this.containment[3]&&(g=this.containment[3]+this.offset.click.top)),e.grid&&(c=this.originalPageY+Math.round((g-this.originalPageY)/e.grid[1])*e.grid[1],g=this.containment?c-this.offset.click.top>=this.containment[1]&&c-this.offset.click.top<=this.containment[3]?c:c-this.offset.click.top>=this.containment[1]?c-e.grid[1]:c+e.grid[1]:c,d=this.originalPageX+Math.round((f-this.originalPageX)/e.grid[0])*e.grid[0],f=this.containment?d-this.offset.click.left>=this.containment[0]&&d-this.offset.click.left<=this.containment[2]?d:d-this.offset.click.left>=this.containment[0]?d-e.grid[0]:d+e.grid[0]:d)),{top:g-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():i?0:h.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():i?0:h.scrollLeft())}},_rearrange:function(a,b,c,d){c?c[0].appendChild(this.placeholder[0]):b.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?b.item[0]:b.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var e=this.counter;this._delay(function(){e===this.counter&&this.refreshPositions(!d)})},_clear:function(a,b){function c(a,b,c){return function(d){c._trigger(a,d,b._uiHash(b))}}this.reverting=!1;var d,e=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(d in this._storedCSS)"auto"!==this._storedCSS[d]&&"static"!==this._storedCSS[d]||(this._storedCSS[d]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!b&&e.push(function(a){this._trigger("receive",a,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||b||e.push(function(a){this._trigger("update",a,this._uiHash())}),this!==this.currentContainer&&(b||(e.push(function(a){this._trigger("remove",a,this._uiHash())}),e.push(function(a){return function(b){a._trigger("receive",b,this._uiHash(this))}}.call(this,this.currentContainer)),e.push(function(a){return function(b){a._trigger("update",b,this._uiHash(this))}}.call(this,this.currentContainer)))),d=this.containers.length-1;d>=0;d--)b||e.push(c("deactivate",this,this.containers[d])),this.containers[d].containerCache.over&&(e.push(c("out",this,this.containers[d])),this.containers[d].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!b){for(this._trigger("beforeStop",a,this._uiHash()),d=0;d<e.length;d++)e[d].call(this,a);this._trigger("stop",a,this._uiHash())}return this.fromOutside=!1,!1}if(b||this._trigger("beforeStop",a,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!b){for(d=0;d<e.length;d++)e[d].call(this,a);this._trigger("stop",a,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){a.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(b){var c=b||this;return{helper:c.helper,placeholder:c.placeholder||a([]),position:c.position,originalPosition:c.originalPosition,offset:c.positionAbs,item:c.currentItem,sender:b?b.element:null}}}),a.widget("ui.spinner",{version:"1.11.1",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),""!==this.value()&&this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var b={},c=this.element;return a.each(["min","max","step"],function(a,d){var e=c.attr(d);void 0!==e&&e.length&&(b[d]=e)}),b},_events:{keydown:function(a){this._start(a)&&this._keydown(a)&&a.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(a){return this.cancelBlur?void delete this.cancelBlur:(this._stop(),this._refresh(),void(this.previous!==this.element.val()&&this._trigger("change",a)))},mousewheel:function(a,b){if(b){if(!this.spinning&&!this._start(a))return!1;this._spin((b>0?1:-1)*this.options.step,a),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(a)},100),a.preventDefault()}},"mousedown .ui-spinner-button":function(b){function c(){var a=this.element[0]===this.document[0].activeElement;a||(this.element.focus(),this.previous=d,this._delay(function(){this.previous=d}))}var d;d=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),b.preventDefault(),c.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,c.call(this)}),this._start(b)!==!1&&this._repeat(null,a(b.currentTarget).hasClass("ui-spinner-up")?1:-1,b)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(b){return a(b.currentTarget).hasClass("ui-state-active")?this._start(b)===!1?!1:void this._repeat(null,a(b.currentTarget).hasClass("ui-spinner-up")?1:-1,b):void 0},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var a=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton"),this.buttons=a.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(.5*a.height())&&a.height()>0&&a.height(a.height()),this.options.disabled&&this.disable()},_keydown:function(b){var c=this.options,d=a.ui.keyCode;switch(b.keyCode){case d.UP:return this._repeat(null,1,b),!0;case d.DOWN:return this._repeat(null,-1,b),!0;case d.PAGE_UP:return this._repeat(null,c.page,b),!0;case d.PAGE_DOWN:return this._repeat(null,-c.page,b),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span></a><a class='ui-spinner-button ui-spinner-down ui-corner-br'><span class='ui-icon "+this.options.icons.down+"'>&#9660;</span></a>"},_start:function(a){return this.spinning||this._trigger("start",a)!==!1?(this.counter||(this.counter=1),this.spinning=!0,!0):!1},_repeat:function(a,b,c){a=a||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,b,c)},a),this._spin(b*this.options.step,c)},_spin:function(a,b){var c=this.value()||0;this.counter||(this.counter=1),c=this._adjustValue(c+a*this._increment(this.counter)),this.spinning&&this._trigger("spin",b,{value:c})===!1||(this._value(c),this.counter++)},_increment:function(b){var c=this.options.incremental;return c?a.isFunction(c)?c(b):Math.floor(b*b*b/5e4-b*b/500+17*b/200+1):1},_precision:function(){var a=this._precisionOf(this.options.step);return null!==this.options.min&&(a=Math.max(a,this._precisionOf(this.options.min))),a},_precisionOf:function(a){var b=a.toString(),c=b.indexOf(".");return-1===c?0:b.length-c-1},_adjustValue:function(a){var b,c,d=this.options;return b=null!==d.min?d.min:0,c=a-b,c=Math.round(c/d.step)*d.step,a=b+c,a=parseFloat(a.toFixed(this._precision())),null!==d.max&&a>d.max?d.max:null!==d.min&&a<d.min?d.min:a},_stop:function(a){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",a))},_setOption:function(a,b){if("culture"===a||"numberFormat"===a){var c=this._parse(this.element.val());return this.options[a]=b,void this.element.val(this._format(c))}"max"!==a&&"min"!==a&&"step"!==a||"string"==typeof b&&(b=this._parse(b)),"icons"===a&&(this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(b.up),this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(b.down)),this._super(a,b),"disabled"===a&&(this.widget().toggleClass("ui-state-disabled",!!b),this.element.prop("disabled",!!b),this.buttons.button(b?"disable":"enable"))},_setOptions:i(function(a){this._super(a)}),_parse:function(a){return"string"==typeof a&&""!==a&&(a=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(a,10,this.options.culture):+a),""===a||isNaN(a)?null:a},_format:function(a){return""===a?"":window.Globalize&&this.options.numberFormat?Globalize.format(a,this.options.numberFormat,this.options.culture):a},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},isValid:function(){var a=this.value();return null===a?!1:a===this._adjustValue(a)},_value:function(a,b){var c;""!==a&&(c=this._parse(a),null!==c&&(b||(c=this._adjustValue(c)),a=this._format(c))),this.element.val(a),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:i(function(a){this._stepUp(a)}),_stepUp:function(a){this._start()&&(this._spin((a||1)*this.options.step),this._stop())},stepDown:i(function(a){this._stepDown(a)}),_stepDown:function(a){this._start()&&(this._spin((a||1)*-this.options.step),this._stop())},pageUp:i(function(a){this._stepUp((a||1)*this.options.page)}),pageDown:i(function(a){this._stepDown((a||1)*this.options.page)}),value:function(a){return arguments.length?void i(this._value).call(this,a):this._parse(this.element.val())},widget:function(){return this.uiSpinner}}),a.widget("ui.tabs",{version:"1.11.1",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:function(){var a=/#.*$/;return function(b){var c,d;b=b.cloneNode(!1),c=b.href.replace(a,""),d=location.href.replace(a,"");try{c=decodeURIComponent(c)}catch(e){}try{d=decodeURIComponent(d)}catch(e){}return b.hash.length>1&&c===d}}(),_create:function(){var b=this,c=this.options;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",c.collapsible),this._processTabs(),c.active=this._initialActive(),a.isArray(c.disabled)&&(c.disabled=a.unique(c.disabled.concat(a.map(this.tabs.filter(".ui-state-disabled"),function(a){return b.tabs.index(a)}))).sort()),this.options.active!==!1&&this.anchors.length?this.active=this._findActive(c.active):this.active=a(),this._refresh(),this.active.length&&this.load(c.active)},_initialActive:function(){var b=this.options.active,c=this.options.collapsible,d=location.hash.substring(1);return null===b&&(d&&this.tabs.each(function(c,e){return a(e).attr("aria-controls")===d?(b=c,!1):void 0}),null===b&&(b=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),null!==b&&-1!==b||(b=this.tabs.length?0:!1)),b!==!1&&(b=this.tabs.index(this.tabs.eq(b)),-1===b&&(b=c?!1:0)),!c&&b===!1&&this.anchors.length&&(b=0),b},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):a()}},_tabKeydown:function(b){var c=a(this.document[0].activeElement).closest("li"),d=this.tabs.index(c),e=!0;if(!this._handlePageNav(b)){switch(b.keyCode){case a.ui.keyCode.RIGHT:case a.ui.keyCode.DOWN:d++;break;case a.ui.keyCode.UP:case a.ui.keyCode.LEFT:e=!1,d--;break;case a.ui.keyCode.END:d=this.anchors.length-1;break;case a.ui.keyCode.HOME:d=0;break;case a.ui.keyCode.SPACE:return b.preventDefault(),clearTimeout(this.activating),void this._activate(d);case a.ui.keyCode.ENTER:return b.preventDefault(),clearTimeout(this.activating),void this._activate(d===this.options.active?!1:d);default:return}b.preventDefault(),clearTimeout(this.activating),d=this._focusNextTab(d,e),b.ctrlKey||(c.attr("aria-selected","false"),this.tabs.eq(d).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",d)},this.delay))}},_panelKeydown:function(b){this._handlePageNav(b)||b.ctrlKey&&b.keyCode===a.ui.keyCode.UP&&(b.preventDefault(),this.active.focus())},_handlePageNav:function(b){return b.altKey&&b.keyCode===a.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):b.altKey&&b.keyCode===a.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(b,c){function d(){return b>e&&(b=0),0>b&&(b=e),b}for(var e=this.tabs.length-1;-1!==a.inArray(d(),this.options.disabled);)b=c?b+1:b-1;return b},_focusNextTab:function(a,b){return a=this._findNextTab(a,b),this.tabs.eq(a).focus(),a},_setOption:function(a,b){return"active"===a?void this._activate(b):"disabled"===a?void this._setupDisabled(b):(this._super(a,b),"collapsible"===a&&(this.element.toggleClass("ui-tabs-collapsible",b),b||this.options.active!==!1||this._activate(0)),"event"===a&&this._setupEvents(b),void("heightStyle"===a&&this._setupHeightStyle(b)))},_sanitizeSelector:function(a){return a?a.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var b=this.options,c=this.tablist.children(":has(a[href])");b.disabled=a.map(c.filter(".ui-state-disabled"),function(a){return c.index(a)}),this._processTabs(),b.active!==!1&&this.anchors.length?this.active.length&&!a.contains(this.tablist[0],this.active[0])?this.tabs.length===b.disabled.length?(b.active=!1,this.active=a()):this._activate(this._findNextTab(Math.max(0,b.active-1),!1)):b.active=this.tabs.index(this.active):(b.active=!1,this.active=a()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var b=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist").delegate("> li","mousedown"+this.eventNamespace,function(b){a(this).is(".ui-state-disabled")&&b.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){a(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return a("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=a(),this.anchors.each(function(c,d){var e,f,g,h=a(d).uniqueId().attr("id"),i=a(d).closest("li"),j=i.attr("aria-controls");b._isLocal(d)?(e=d.hash,g=e.substring(1),f=b.element.find(b._sanitizeSelector(e))):(g=i.attr("aria-controls")||a({}).uniqueId()[0].id,e="#"+g,f=b.element.find(e),f.length||(f=b._createPanel(g),f.insertAfter(b.panels[c-1]||b.tablist)),f.attr("aria-live","polite")),f.length&&(b.panels=b.panels.add(f)),j&&i.data("ui-tabs-aria-controls",j),i.attr({"aria-controls":g,"aria-labelledby":h}),f.attr("aria-labelledby",h)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.tablist||this.element.find("ol,ul").eq(0)},_createPanel:function(b){return a("<div>").attr("id",b).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(b){a.isArray(b)&&(b.length?b.length===this.anchors.length&&(b=!0):b=!1);for(var c,d=0;c=this.tabs[d];d++)b===!0||-1!==a.inArray(d,b)?a(c).addClass("ui-state-disabled").attr("aria-disabled","true"):a(c).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=b},_setupEvents:function(b){var c={};b&&a.each(b.split(" "),function(a,b){c[b]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(!0,this.anchors,{click:function(a){a.preventDefault()}}),this._on(this.anchors,c),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(b){var c,d=this.element.parent();"fill"===b?(c=d.height(),c-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var b=a(this),d=b.css("position");"absolute"!==d&&"fixed"!==d&&(c-=b.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){c-=a(this).outerHeight(!0)}),this.panels.each(function(){a(this).height(Math.max(0,c-a(this).innerHeight()+a(this).height()))}).css("overflow","auto")):"auto"===b&&(c=0,this.panels.each(function(){c=Math.max(c,a(this).height("").height())}).height(c))},_eventHandler:function(b){var c=this.options,d=this.active,e=a(b.currentTarget),f=e.closest("li"),g=f[0]===d[0],h=g&&c.collapsible,i=h?a():this._getPanelForTab(f),j=d.length?this._getPanelForTab(d):a(),k={oldTab:d,oldPanel:j,newTab:h?a():f,newPanel:i};b.preventDefault(),f.hasClass("ui-state-disabled")||f.hasClass("ui-tabs-loading")||this.running||g&&!c.collapsible||this._trigger("beforeActivate",b,k)===!1||(c.active=h?!1:this.tabs.index(f),this.active=g?a():f,this.xhr&&this.xhr.abort(),j.length||i.length||a.error("jQuery UI Tabs: Mismatching fragment identifier."),i.length&&this.load(this.tabs.index(f),b),this._toggle(b,k))},_toggle:function(b,c){function d(){f.running=!1,f._trigger("activate",b,c)}function e(){c.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),g.length&&f.options.show?f._show(g,f.options.show,d):(g.show(),d())}var f=this,g=c.newPanel,h=c.oldPanel;this.running=!0,h.length&&this.options.hide?this._hide(h,this.options.hide,function(){c.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),e()}):(c.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),h.hide(),
e()),h.attr("aria-hidden","true"),c.oldTab.attr({"aria-selected":"false","aria-expanded":"false"}),g.length&&h.length?c.oldTab.attr("tabIndex",-1):g.length&&this.tabs.filter(function(){return 0===a(this).attr("tabIndex")}).attr("tabIndex",-1),g.attr("aria-hidden","false"),c.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_activate:function(b){var c,d=this._findActive(b);d[0]!==this.active[0]&&(d.length||(d=this.active),c=d.find(".ui-tabs-anchor")[0],this._eventHandler({target:c,currentTarget:c,preventDefault:a.noop}))},_findActive:function(b){return b===!1?a():this.tabs.eq(b)},_getIndex:function(a){return"string"==typeof a&&(a=this.anchors.index(this.anchors.filter("[href$='"+a+"']"))),a},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(),this.tablist.unbind(this.eventNamespace),this.tabs.add(this.panels).each(function(){a.data(this,"ui-tabs-destroy")?a(this).remove():a(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var b=a(this),c=b.data("ui-tabs-aria-controls");c?b.attr("aria-controls",c).removeData("ui-tabs-aria-controls"):b.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(b){var c=this.options.disabled;c!==!1&&(void 0===b?c=!1:(b=this._getIndex(b),c=a.isArray(c)?a.map(c,function(a){return a!==b?a:null}):a.map(this.tabs,function(a,c){return c!==b?c:null})),this._setupDisabled(c))},disable:function(b){var c=this.options.disabled;if(c!==!0){if(void 0===b)c=!0;else{if(b=this._getIndex(b),-1!==a.inArray(b,c))return;c=a.isArray(c)?a.merge([b],c).sort():[b]}this._setupDisabled(c)}},load:function(b,c){b=this._getIndex(b);var d=this,e=this.tabs.eq(b),f=e.find(".ui-tabs-anchor"),g=this._getPanelForTab(e),h={tab:e,panel:g};this._isLocal(f[0])||(this.xhr=a.ajax(this._ajaxSettings(f,c,h)),this.xhr&&"canceled"!==this.xhr.statusText&&(e.addClass("ui-tabs-loading"),g.attr("aria-busy","true"),this.xhr.success(function(a){setTimeout(function(){g.html(a),d._trigger("load",c,h)},1)}).complete(function(a,b){setTimeout(function(){"abort"===b&&d.panels.stop(!1,!0),e.removeClass("ui-tabs-loading"),g.removeAttr("aria-busy"),a===d.xhr&&delete d.xhr},1)})))},_ajaxSettings:function(b,c,d){var e=this;return{url:b.attr("href"),beforeSend:function(b,f){return e._trigger("beforeLoad",c,a.extend({jqXHR:b,ajaxSettings:f},d))}}},_getPanelForTab:function(b){var c=a(b).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+c))}}),a.widget("ui.tooltip",{version:"1.11.1",options:{content:function(){var b=a(this).attr("title")||"";return a("<a>").text(b).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_addDescribedBy:function(b,c){var d=(b.attr("aria-describedby")||"").split(/\s+/);d.push(c),b.data("ui-tooltip-id",c).attr("aria-describedby",a.trim(d.join(" ")))},_removeDescribedBy:function(b){var c=b.data("ui-tooltip-id"),d=(b.attr("aria-describedby")||"").split(/\s+/),e=a.inArray(c,d);-1!==e&&d.splice(e,1),b.removeData("ui-tooltip-id"),d=a.trim(d.join(" ")),d?b.attr("aria-describedby",d):b.removeAttr("aria-describedby")},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable(),this.liveRegion=a("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body)},_setOption:function(b,c){var d=this;return"disabled"===b?(this[c?"_disable":"_enable"](),void(this.options[b]=c)):(this._super(b,c),void("content"===b&&a.each(this.tooltips,function(a,b){d._updateContent(b)})))},_disable:function(){var b=this;a.each(this.tooltips,function(c,d){var e=a.Event("blur");e.target=e.currentTarget=d[0],b.close(e,!0)}),this.element.find(this.options.items).addBack().each(function(){var b=a(this);b.is("[title]")&&b.data("ui-tooltip-title",b.attr("title")).removeAttr("title")})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var b=a(this);b.data("ui-tooltip-title")&&b.attr("title",b.data("ui-tooltip-title"))})},open:function(b){var c=this,d=a(b?b.target:this.element).closest(this.options.items);d.length&&!d.data("ui-tooltip-id")&&(d.attr("title")&&d.data("ui-tooltip-title",d.attr("title")),d.data("ui-tooltip-open",!0),b&&"mouseover"===b.type&&d.parents().each(function(){var b,d=a(this);d.data("ui-tooltip-open")&&(b=a.Event("blur"),b.target=b.currentTarget=this,c.close(b,!0)),d.attr("title")&&(d.uniqueId(),c.parents[this.id]={element:this,title:d.attr("title")},d.attr("title",""))}),this._updateContent(d,b))},_updateContent:function(a,b){var c,d=this.options.content,e=this,f=b?b.type:null;return"string"==typeof d?this._open(b,a,d):(c=d.call(a[0],function(c){a.data("ui-tooltip-open")&&e._delay(function(){b&&(b.type=f),this._open(b,a,c)})}),void(c&&this._open(b,a,c)))},_open:function(b,c,d){function e(a){j.of=a,f.is(":hidden")||f.position(j)}var f,g,h,i,j=a.extend({},this.options.position);if(d){if(f=this._find(c),f.length)return void f.find(".ui-tooltip-content").html(d);c.is("[title]")&&(b&&"mouseover"===b.type?c.attr("title",""):c.removeAttr("title")),f=this._tooltip(c),this._addDescribedBy(c,f.attr("id")),f.find(".ui-tooltip-content").html(d),this.liveRegion.children().hide(),d.clone?(i=d.clone(),i.removeAttr("id").find("[id]").removeAttr("id")):i=d,a("<div>").html(i).appendTo(this.liveRegion),this.options.track&&b&&/^mouse/.test(b.type)?(this._on(this.document,{mousemove:e}),e(b)):f.position(a.extend({of:c},this.options.position)),this.hiding=!1,this.closing=!1,f.hide(),this._show(f,this.options.show),this.options.show&&this.options.show.delay&&(h=this.delayedShow=setInterval(function(){f.is(":visible")&&(e(j.of),clearInterval(h))},a.fx.interval)),this._trigger("open",b,{tooltip:f}),g={keyup:function(b){if(b.keyCode===a.ui.keyCode.ESCAPE){var d=a.Event(b);d.currentTarget=c[0],this.close(d,!0)}}},c[0]!==this.element[0]&&(g.remove=function(){this._removeTooltip(f)}),b&&"mouseover"!==b.type||(g.mouseleave="close"),b&&"focusin"!==b.type||(g.focusout="close"),this._on(!0,c,g)}},close:function(b){var c=this,d=a(b?b.currentTarget:this.element),e=this._find(d);this.closing||(clearInterval(this.delayedShow),d.data("ui-tooltip-title")&&!d.attr("title")&&d.attr("title",d.data("ui-tooltip-title")),this._removeDescribedBy(d),this.hiding=!0,e.stop(!0),this._hide(e,this.options.hide,function(){c._removeTooltip(a(this)),this.hiding=!1,this.closing=!1}),d.removeData("ui-tooltip-open"),this._off(d,"mouseleave focusout keyup"),d[0]!==this.element[0]&&this._off(d,"remove"),this._off(this.document,"mousemove"),b&&"mouseleave"===b.type&&a.each(this.parents,function(b,d){a(d.element).attr("title",d.title),delete c.parents[b]}),this.closing=!0,this._trigger("close",b,{tooltip:e}),this.hiding||(this.closing=!1))},_tooltip:function(b){var c=a("<div>").attr("role","tooltip").addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||"")),d=c.uniqueId().attr("id");return a("<div>").addClass("ui-tooltip-content").appendTo(c),c.appendTo(this.document[0].body),this.tooltips[d]=b,c},_find:function(b){var c=b.data("ui-tooltip-id");return c?a("#"+c):a()},_removeTooltip:function(a){a.remove(),delete this.tooltips[a.attr("id")]},_destroy:function(){var b=this;a.each(this.tooltips,function(c,d){var e=a.Event("blur");e.target=e.currentTarget=d[0],b.close(e,!0),a("#"+c).remove(),d.data("ui-tooltip-title")&&(d.attr("title")||d.attr("title",d.data("ui-tooltip-title")),d.removeData("ui-tooltip-title"))}),this.liveRegion.remove()}})}),window.jscolor||(window.jscolor=function(){var a={register:function(){a.attachDOMReadyEvent(a.init),a.attachEvent(document,"mousedown",a.onDocumentMouseDown),a.attachEvent(document,"touchstart",a.onDocumentTouchStart),a.attachEvent(window,"resize",a.onWindowResize)},init:function(){a.jscolor.lookupClass&&a.jscolor.installByClassName(a.jscolor.lookupClass)},tryInstallOnElements:function(b,c){for(var d=new RegExp("(^|\\s)("+c+")(\\s*(\\{[^}]*\\})|\\s|$)","i"),e=0;e<b.length;e+=1)if(void 0===b[e].type||"color"!=b[e].type.toLowerCase()||!a.isColorAttrSupported){var f;if(!b[e].jscolor&&b[e].className&&(f=b[e].className.match(d))){var g=b[e],h=null,i=a.getDataAttr(g,"jscolor");null!==i?h=i:f[4]&&(h=f[4]);var j={};if(h)try{j=new Function("return ("+h+")")()}catch(k){a.warn("Error parsing jscolor options: "+k+":\n"+h)}g.jscolor=new a.jscolor(g,j)}}},isColorAttrSupported:function(){var a=document.createElement("input");return!(!a.setAttribute||(a.setAttribute("type","color"),"color"!=a.type.toLowerCase()))}(),isCanvasSupported:function(){var a=document.createElement("canvas");return!(!a.getContext||!a.getContext("2d"))}(),fetchElement:function(a){return"string"==typeof a?document.getElementById(a):a},isElementType:function(a,b){return a.nodeName.toLowerCase()===b.toLowerCase()},getDataAttr:function(a,b){var c="data-"+b,d=a.getAttribute(c);return null!==d?d:null},attachEvent:function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,c)},detachEvent:function(a,b,c){a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent&&a.detachEvent("on"+b,c)},_attachedGroupEvents:{},attachGroupEvent:function(b,c,d,e){a._attachedGroupEvents.hasOwnProperty(b)||(a._attachedGroupEvents[b]=[]),a._attachedGroupEvents[b].push([c,d,e]),a.attachEvent(c,d,e)},detachGroupEvents:function(b){if(a._attachedGroupEvents.hasOwnProperty(b)){for(var c=0;c<a._attachedGroupEvents[b].length;c+=1){var d=a._attachedGroupEvents[b][c];a.detachEvent(d[0],d[1],d[2])}delete a._attachedGroupEvents[b]}},attachDOMReadyEvent:function(a){var b=!1,c=function(){b||(b=!0,a())};if("complete"===document.readyState)return void setTimeout(c,1);if(document.addEventListener)document.addEventListener("DOMContentLoaded",c,!1),window.addEventListener("load",c,!1);else if(document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&(document.detachEvent("onreadystatechange",arguments.callee),c())}),window.attachEvent("onload",c),document.documentElement.doScroll&&window==window.top)){var d=function(){if(document.body)try{document.documentElement.doScroll("left"),c()}catch(a){setTimeout(d,1)}};d()}},warn:function(a){window.console&&window.console.warn&&window.console.warn(a)},preventDefault:function(a){a.preventDefault&&a.preventDefault(),a.returnValue=!1},captureTarget:function(b){b.setCapture&&(a._capturedTarget=b,a._capturedTarget.setCapture())},releaseTarget:function(){a._capturedTarget&&(a._capturedTarget.releaseCapture(),a._capturedTarget=null)},fireEvent:function(a,b){if(a)if(document.createEvent){var c=document.createEvent("HTMLEvents");c.initEvent(b,!0,!0),a.dispatchEvent(c)}else if(document.createEventObject){var c=document.createEventObject();a.fireEvent("on"+b,c)}else a["on"+b]&&a["on"+b]()},classNameToList:function(a){return a.replace(/^\s+|\s+$/g,"").split(/\s+/)},hasClass:function(a,b){return b?-1!=(" "+a.className.replace(/\s+/g," ")+" ").indexOf(" "+b+" "):!1},setClass:function(b,c){for(var d=a.classNameToList(c),e=0;e<d.length;e+=1)a.hasClass(b,d[e])||(b.className+=(b.className?" ":"")+d[e])},unsetClass:function(b,c){for(var d=a.classNameToList(c),e=0;e<d.length;e+=1){var f=new RegExp("^\\s*"+d[e]+"\\s*|\\s*"+d[e]+"\\s*$|\\s+"+d[e]+"(\\s+)","g");b.className=b.className.replace(f,"$1")}},getStyle:function(a){return window.getComputedStyle?window.getComputedStyle(a):a.currentStyle},setStyle:function(){var a=document.createElement("div"),b=function(b){for(var c=0;c<b.length;c+=1)if(b[c]in a.style)return b[c]},c={borderRadius:b(["borderRadius","MozBorderRadius","webkitBorderRadius"]),boxShadow:b(["boxShadow","MozBoxShadow","webkitBoxShadow"])};return function(a,b,d){switch(b.toLowerCase()){case"opacity":var e=Math.round(100*parseFloat(d));a.style.opacity=d,a.style.filter="alpha(opacity="+e+")";break;default:a.style[c[b]]=d}}}(),setBorderRadius:function(b,c){a.setStyle(b,"borderRadius",c||"0")},setBoxShadow:function(b,c){a.setStyle(b,"boxShadow",c||"none")},getElementPos:function(b,c){var d=0,e=0,f=b.getBoundingClientRect();if(d=f.left,e=f.top,!c){var g=a.getViewPos();d+=g[0],e+=g[1]}return[d,e]},getElementSize:function(a){return[a.offsetWidth,a.offsetHeight]},getAbsPointerPos:function(a){a||(a=window.event);var b=0,c=0;return"undefined"!=typeof a.changedTouches&&a.changedTouches.length?(b=a.changedTouches[0].clientX,c=a.changedTouches[0].clientY):"number"==typeof a.clientX&&(b=a.clientX,c=a.clientY),{x:b,y:c}},getRelPointerPos:function(a){a||(a=window.event);var b=a.target||a.srcElement,c=b.getBoundingClientRect(),d=0,e=0,f=0,g=0;return"undefined"!=typeof a.changedTouches&&a.changedTouches.length?(f=a.changedTouches[0].clientX,g=a.changedTouches[0].clientY):"number"==typeof a.clientX&&(f=a.clientX,g=a.clientY),d=f-c.left,e=g-c.top,{x:d,y:e}},getViewPos:function(){var a=document.documentElement;return[(window.pageXOffset||a.scrollLeft)-(a.clientLeft||0),(window.pageYOffset||a.scrollTop)-(a.clientTop||0)]},getViewSize:function(){var a=document.documentElement;return[window.innerWidth||a.clientWidth,window.innerHeight||a.clientHeight]},redrawPosition:function(){if(a.picker&&a.picker.owner){var b,c,d=a.picker.owner;d.fixed?(b=a.getElementPos(d.targetElement,!0),c=[0,0]):(b=a.getElementPos(d.targetElement),c=a.getViewPos());var e,f,g,h=a.getElementSize(d.targetElement),i=a.getViewSize(),j=a.getPickerOuterDims(d);switch(d.position.toLowerCase()){case"left":e=1,f=0,g=-1;break;case"right":e=1,f=0,g=1;break;case"top":e=0,f=1,g=-1;break;default:e=0,f=1,g=1}var k=(h[f]+j[f])/2;if(d.smartPosition)var l=[-c[e]+b[e]+j[e]>i[e]&&-c[e]+b[e]+h[e]/2>i[e]/2&&b[e]+h[e]-j[e]>=0?b[e]+h[e]-j[e]:b[e],-c[f]+b[f]+h[f]+j[f]-k+k*g>i[f]?-c[f]+b[f]+h[f]/2>i[f]/2&&b[f]+h[f]-k-k*g>=0?b[f]+h[f]-k-k*g:b[f]+h[f]-k+k*g:b[f]+h[f]-k+k*g>=0?b[f]+h[f]-k+k*g:b[f]+h[f]-k-k*g];else var l=[b[e],b[f]+h[f]-k+k*g];var m=l[e],n=l[f],o=d.fixed?"fixed":"absolute",p=(l[0]+j[0]>b[0]||l[0]<b[0]+h[0])&&l[1]+j[1]<b[1]+h[1];a._drawPosition(d,m,n,o,p)}},_drawPosition:function(b,c,d,e,f){var g=f?0:b.shadowBlur;a.picker.wrap.style.position=e,a.picker.wrap.style.left=c+"px",a.picker.wrap.style.top=d+"px",a.setBoxShadow(a.picker.boxS,b.shadow?new a.BoxShadow(0,g,b.shadowBlur,0,b.shadowColor):null)},getPickerDims:function(b){var c=!!a.getSliderComponent(b),d=[2*b.insetWidth+2*b.padding+b.width+(c?2*b.insetWidth+a.getPadToSliderPadding(b)+b.sliderSize:0),2*b.insetWidth+2*b.padding+b.height+(b.closable?2*b.insetWidth+b.padding+b.buttonHeight:0)];return d},getPickerOuterDims:function(b){var c=a.getPickerDims(b);return[c[0]+2*b.borderWidth,c[1]+2*b.borderWidth]},getPadToSliderPadding:function(a){return Math.max(a.padding,1.5*(2*a.pointerBorderWidth+a.pointerThickness))},getPadYComponent:function(a){switch(a.mode.charAt(1).toLowerCase()){case"v":return"v"}return"s"},getSliderComponent:function(a){if(a.mode.length>2)switch(a.mode.charAt(2).toLowerCase()){case"s":return"s";case"v":return"v"}return null},onDocumentMouseDown:function(b){b||(b=window.event);var c=b.target||b.srcElement;c._jscLinkedInstance?c._jscLinkedInstance.showOnClick&&c._jscLinkedInstance.show():c._jscControlName?a.onControlPointerStart(b,c,c._jscControlName,"mouse"):a.picker&&a.picker.owner&&a.picker.owner.hide()},onDocumentTouchStart:function(b){b||(b=window.event);var c=b.target||b.srcElement;c._jscLinkedInstance?c._jscLinkedInstance.showOnClick&&c._jscLinkedInstance.show():c._jscControlName?a.onControlPointerStart(b,c,c._jscControlName,"touch"):a.picker&&a.picker.owner&&a.picker.owner.hide()},onWindowResize:function(b){a.redrawPosition()},onParentScroll:function(b){a.picker&&a.picker.owner&&a.picker.owner.hide()},_pointerMoveEvent:{mouse:"mousemove",touch:"touchmove"},_pointerEndEvent:{mouse:"mouseup",touch:"touchend"},_pointerOrigin:null,_capturedTarget:null,onControlPointerStart:function(b,c,d,e){var f=c._jscInstance;a.preventDefault(b),a.captureTarget(c);var g=function(f,g){a.attachGroupEvent("drag",f,a._pointerMoveEvent[e],a.onDocumentPointerMove(b,c,d,e,g)),a.attachGroupEvent("drag",f,a._pointerEndEvent[e],a.onDocumentPointerEnd(b,c,d,e))};if(g(document,[0,0]),window.parent&&window.frameElement){var h=window.frameElement.getBoundingClientRect(),i=[-h.left,-h.top];g(window.parent.window.document,i)}var j=a.getAbsPointerPos(b),k=a.getRelPointerPos(b);switch(a._pointerOrigin={x:j.x-k.x,y:j.y-k.y},d){case"pad":switch(a.getSliderComponent(f)){case"s":0===f.hsv[1]&&f.fromHSV(null,100,null);break;case"v":0===f.hsv[2]&&f.fromHSV(null,null,100)}a.setPad(f,b,0,0);break;case"sld":a.setSld(f,b,0)}a.dispatchFineChange(f)},onDocumentPointerMove:function(b,c,d,e,f){return function(b){var e=c._jscInstance;switch(d){case"pad":b||(b=window.event),a.setPad(e,b,f[0],f[1]),a.dispatchFineChange(e);break;case"sld":b||(b=window.event),a.setSld(e,b,f[1]),a.dispatchFineChange(e)}}},onDocumentPointerEnd:function(b,c,d,e){return function(b){var d=c._jscInstance;a.detachGroupEvents("drag"),a.releaseTarget(),a.dispatchChange(d)}},dispatchChange:function(b){b.valueElement&&a.isElementType(b.valueElement,"input")&&a.fireEvent(b.valueElement,"change")},dispatchFineChange:function(a){if(a.onFineChange){var b;b="string"==typeof a.onFineChange?new Function(a.onFineChange):a.onFineChange,b.call(a)}},setPad:function(b,c,d,e){var f=a.getAbsPointerPos(c),g=d+f.x-a._pointerOrigin.x-b.padding-b.insetWidth,h=e+f.y-a._pointerOrigin.y-b.padding-b.insetWidth,i=g*(360/(b.width-1)),j=100-h*(100/(b.height-1));switch(a.getPadYComponent(b)){case"s":b.fromHSV(i,j,null,a.leaveSld);break;case"v":b.fromHSV(i,null,j,a.leaveSld)}},setSld:function(b,c,d){var e=a.getAbsPointerPos(c),f=d+e.y-a._pointerOrigin.y-b.padding-b.insetWidth,g=100-f*(100/(b.height-1));switch(a.getSliderComponent(b)){case"s":b.fromHSV(null,g,null,a.leavePad);break;case"v":b.fromHSV(null,null,g,a.leavePad)}},_vmlNS:"jsc_vml_",_vmlCSS:"jsc_vml_css_",_vmlReady:!1,initVML:function(){if(!a._vmlReady){var b=document;if(b.namespaces[a._vmlNS]||b.namespaces.add(a._vmlNS,"urn:schemas-microsoft-com:vml"),!b.styleSheets[a._vmlCSS]){var c=["shape","shapetype","group","background","path","formulas","handles","fill","stroke","shadow","textbox","textpath","imagedata","line","polyline","curve","rect","roundrect","oval","arc","image"],d=b.createStyleSheet();d.owningElement.id=a._vmlCSS;for(var e=0;e<c.length;e+=1)d.addRule(a._vmlNS+"\\:"+c[e],"behavior:url(#default#VML);")}a._vmlReady=!0}},createPalette:function(){var b={elm:null,draw:null};if(a.isCanvasSupported){var c=document.createElement("canvas"),d=c.getContext("2d"),e=function(a,b,e){c.width=a,c.height=b,d.clearRect(0,0,c.width,c.height);var f=d.createLinearGradient(0,0,c.width,0);f.addColorStop(0,"#F00"),f.addColorStop(1/6,"#FF0"),f.addColorStop(2/6,"#0F0"),f.addColorStop(.5,"#0FF"),f.addColorStop(4/6,"#00F"),f.addColorStop(5/6,"#F0F"),f.addColorStop(1,"#F00"),d.fillStyle=f,d.fillRect(0,0,c.width,c.height);var g=d.createLinearGradient(0,0,0,c.height);switch(e.toLowerCase()){case"s":g.addColorStop(0,"rgba(255,255,255,0)"),g.addColorStop(1,"rgba(255,255,255,1)");break;case"v":g.addColorStop(0,"rgba(0,0,0,0)"),g.addColorStop(1,"rgba(0,0,0,1)")}d.fillStyle=g,d.fillRect(0,0,c.width,c.height)};b.elm=c,b.draw=e}else{a.initVML();var f=document.createElement("div");f.style.position="relative",f.style.overflow="hidden";var g=document.createElement(a._vmlNS+":fill");g.type="gradient",g.method="linear",g.angle="90",g.colors="16.67% #F0F, 33.33% #00F, 50% #0FF, 66.67% #0F0, 83.33% #FF0";var h=document.createElement(a._vmlNS+":rect");h.style.position="absolute",h.style.left="-1px",h.style.top="-1px",h.stroked=!1,h.appendChild(g),f.appendChild(h);var i=document.createElement(a._vmlNS+":fill");i.type="gradient",i.method="linear",i.angle="180",i.opacity="0";var j=document.createElement(a._vmlNS+":rect");j.style.position="absolute",j.style.left="-1px",j.style.top="-1px",j.stroked=!1,j.appendChild(i),f.appendChild(j);var e=function(a,b,c){switch(f.style.width=a+"px",f.style.height=b+"px",h.style.width=j.style.width=a+1+"px",h.style.height=j.style.height=b+1+"px",g.color="#F00",g.color2="#F00",c.toLowerCase()){case"s":i.color=i.color2="#FFF";break;case"v":i.color=i.color2="#000"}};b.elm=f,b.draw=e}return b},createSliderGradient:function(){var b={elm:null,draw:null};if(a.isCanvasSupported){var c=document.createElement("canvas"),d=c.getContext("2d"),e=function(a,b,e,f){c.width=a,c.height=b,d.clearRect(0,0,c.width,c.height);var g=d.createLinearGradient(0,0,0,c.height);g.addColorStop(0,e),g.addColorStop(1,f),d.fillStyle=g,d.fillRect(0,0,c.width,c.height)};b.elm=c,b.draw=e}else{a.initVML();var f=document.createElement("div");f.style.position="relative",f.style.overflow="hidden";var g=document.createElement(a._vmlNS+":fill");g.type="gradient",g.method="linear",g.angle="180";var h=document.createElement(a._vmlNS+":rect");h.style.position="absolute",h.style.left="-1px",h.style.top="-1px",h.stroked=!1,h.appendChild(g),f.appendChild(h);var e=function(a,b,c,d){f.style.width=a+"px",f.style.height=b+"px",h.style.width=a+1+"px",h.style.height=b+1+"px",g.color=c,g.color2=d};b.elm=f,b.draw=e}return b},leaveValue:1,leaveStyle:2,leavePad:4,leaveSld:8,BoxShadow:function(){var a=function(a,b,c,d,e,f){this.hShadow=a,this.vShadow=b,this.blur=c,this.spread=d,this.color=e,this.inset=!!f};return a.prototype.toString=function(){var a=[Math.round(this.hShadow)+"px",Math.round(this.vShadow)+"px",Math.round(this.blur)+"px",Math.round(this.spread)+"px",this.color];return this.inset&&a.push("inset"),a.join(" ")},a}(),jscolor:function(b,c){function d(a,b,c){a/=255,b/=255,c/=255;var d=Math.min(Math.min(a,b),c),e=Math.max(Math.max(a,b),c),f=e-d;if(0===f)return[null,0,100*e];var g=a===d?3+(c-b)/f:b===d?5+(a-c)/f:1+(b-a)/f;return[60*(6===g?0:g),100*(f/e),100*e]}function e(a,b,c){var d=255*(c/100);if(null===a)return[d,d,d];a/=60,b/=100;var e=Math.floor(a),f=e%2?a-e:1-(a-e),g=d*(1-b),h=d*(1-b*f);switch(e){case 6:case 0:return[d,h,g];case 1:return[h,d,g];case 2:return[g,d,h];case 3:return[g,h,d];case 4:return[h,g,d];case 5:return[d,g,h]}}function f(){a.unsetClass(o.targetElement,o.activeClass),a.picker.wrap.parentNode.removeChild(a.picker.wrap),delete a.picker.owner}function g(){function b(){var a=o.insetColor.split(/\s+/),b=a.length<2?a[0]:a[1]+" "+a[0]+" "+a[0]+" "+a[1];c.btn.style.borderColor=b}o._processParentElementsInDOM(),a.picker||(a.picker={owner:null,wrap:document.createElement("div"),box:document.createElement("div"),boxS:document.createElement("div"),boxB:document.createElement("div"),pad:document.createElement("div"),padB:document.createElement("div"),padM:document.createElement("div"),padPal:a.createPalette(),cross:document.createElement("div"),crossBY:document.createElement("div"),crossBX:document.createElement("div"),crossLY:document.createElement("div"),crossLX:document.createElement("div"),sld:document.createElement("div"),sldB:document.createElement("div"),sldM:document.createElement("div"),sldGrad:a.createSliderGradient(),sldPtrS:document.createElement("div"),sldPtrIB:document.createElement("div"),sldPtrMB:document.createElement("div"),sldPtrOB:document.createElement("div"),btn:document.createElement("div"),btnT:document.createElement("span")},a.picker.pad.appendChild(a.picker.padPal.elm),a.picker.padB.appendChild(a.picker.pad),a.picker.cross.appendChild(a.picker.crossBY),a.picker.cross.appendChild(a.picker.crossBX),a.picker.cross.appendChild(a.picker.crossLY),a.picker.cross.appendChild(a.picker.crossLX),a.picker.padB.appendChild(a.picker.cross),a.picker.box.appendChild(a.picker.padB),a.picker.box.appendChild(a.picker.padM),a.picker.sld.appendChild(a.picker.sldGrad.elm),a.picker.sldB.appendChild(a.picker.sld),a.picker.sldB.appendChild(a.picker.sldPtrOB),a.picker.sldPtrOB.appendChild(a.picker.sldPtrMB),a.picker.sldPtrMB.appendChild(a.picker.sldPtrIB),a.picker.sldPtrIB.appendChild(a.picker.sldPtrS),a.picker.box.appendChild(a.picker.sldB),a.picker.box.appendChild(a.picker.sldM),a.picker.btn.appendChild(a.picker.btnT),a.picker.box.appendChild(a.picker.btn),a.picker.boxB.appendChild(a.picker.box),a.picker.wrap.appendChild(a.picker.boxS),a.picker.wrap.appendChild(a.picker.boxB));var c=a.picker,d=!!a.getSliderComponent(o),e=a.getPickerDims(o),f=2*o.pointerBorderWidth+o.pointerThickness+2*o.crossSize,g=a.getPadToSliderPadding(o),j=Math.min(o.borderRadius,Math.round(o.padding*Math.PI)),k="crosshair";c.wrap.style.clear="both",c.wrap.style.width=e[0]+2*o.borderWidth+"px",c.wrap.style.height=e[1]+2*o.borderWidth+"px",c.wrap.style.zIndex=o.zIndex,c.box.style.width=e[0]+"px",c.box.style.height=e[1]+"px",c.boxS.style.position="absolute",c.boxS.style.left="0",c.boxS.style.top="0",c.boxS.style.width="100%",c.boxS.style.height="100%",a.setBorderRadius(c.boxS,j+"px"),c.boxB.style.position="relative",c.boxB.style.border=o.borderWidth+"px solid",c.boxB.style.borderColor=o.borderColor,c.boxB.style.background=o.backgroundColor,a.setBorderRadius(c.boxB,j+"px"),c.padM.style.background=c.sldM.style.background="#FFF",a.setStyle(c.padM,"opacity","0"),a.setStyle(c.sldM,"opacity","0"),c.pad.style.position="relative",c.pad.style.width=o.width+"px",c.pad.style.height=o.height+"px",c.padPal.draw(o.width,o.height,a.getPadYComponent(o)),c.padB.style.position="absolute",c.padB.style.left=o.padding+"px",c.padB.style.top=o.padding+"px",c.padB.style.border=o.insetWidth+"px solid",c.padB.style.borderColor=o.insetColor,c.padM._jscInstance=o,c.padM._jscControlName="pad",c.padM.style.position="absolute",c.padM.style.left="0",c.padM.style.top="0",c.padM.style.width=o.padding+2*o.insetWidth+o.width+g/2+"px",c.padM.style.height=e[1]+"px",c.padM.style.cursor=k,c.cross.style.position="absolute",c.cross.style.left=c.cross.style.top="0",c.cross.style.width=c.cross.style.height=f+"px",c.crossBY.style.position=c.crossBX.style.position="absolute",c.crossBY.style.background=c.crossBX.style.background=o.pointerBorderColor,c.crossBY.style.width=c.crossBX.style.height=2*o.pointerBorderWidth+o.pointerThickness+"px",c.crossBY.style.height=c.crossBX.style.width=f+"px",c.crossBY.style.left=c.crossBX.style.top=Math.floor(f/2)-Math.floor(o.pointerThickness/2)-o.pointerBorderWidth+"px",c.crossBY.style.top=c.crossBX.style.left="0",c.crossLY.style.position=c.crossLX.style.position="absolute",c.crossLY.style.background=c.crossLX.style.background=o.pointerColor,c.crossLY.style.height=c.crossLX.style.width=f-2*o.pointerBorderWidth+"px",c.crossLY.style.width=c.crossLX.style.height=o.pointerThickness+"px",c.crossLY.style.left=c.crossLX.style.top=Math.floor(f/2)-Math.floor(o.pointerThickness/2)+"px",c.crossLY.style.top=c.crossLX.style.left=o.pointerBorderWidth+"px",c.sld.style.overflow="hidden",c.sld.style.width=o.sliderSize+"px",c.sld.style.height=o.height+"px",c.sldGrad.draw(o.sliderSize,o.height,"#000","#000"),c.sldB.style.display=d?"block":"none",c.sldB.style.position="absolute",c.sldB.style.right=o.padding+"px",c.sldB.style.top=o.padding+"px",c.sldB.style.border=o.insetWidth+"px solid",c.sldB.style.borderColor=o.insetColor,c.sldM._jscInstance=o,c.sldM._jscControlName="sld",c.sldM.style.display=d?"block":"none",c.sldM.style.position="absolute",c.sldM.style.right="0",c.sldM.style.top="0",c.sldM.style.width=o.sliderSize+g/2+o.padding+2*o.insetWidth+"px",c.sldM.style.height=e[1]+"px",c.sldM.style.cursor="default",c.sldPtrIB.style.border=c.sldPtrOB.style.border=o.pointerBorderWidth+"px solid "+o.pointerBorderColor,c.sldPtrOB.style.position="absolute",c.sldPtrOB.style.left=-(2*o.pointerBorderWidth+o.pointerThickness)+"px",c.sldPtrOB.style.top="0",c.sldPtrMB.style.border=o.pointerThickness+"px solid "+o.pointerColor,c.sldPtrS.style.width=o.sliderSize+"px",c.sldPtrS.style.height=q+"px",c.btn.style.display=o.closable?"block":"none",c.btn.style.position="absolute",c.btn.style.left=o.padding+"px",c.btn.style.bottom=o.padding+"px",c.btn.style.padding="0 15px",c.btn.style.height=o.buttonHeight+"px",c.btn.style.border=o.insetWidth+"px solid",b(),c.btn.style.color=o.buttonColor,c.btn.style.font="12px sans-serif",c.btn.style.textAlign="center";try{c.btn.style.cursor="pointer"}catch(l){c.btn.style.cursor="hand"}c.btn.onmousedown=function(){o.hide()},c.btnT.style.lineHeight=o.buttonHeight+"px",c.btnT.innerHTML="",c.btnT.appendChild(document.createTextNode(o.closeText)),h(),i(),a.picker.owner&&a.picker.owner!==o&&a.unsetClass(a.picker.owner.targetElement,o.activeClass),a.picker.owner=o,a.isElementType(p,"body")?a.redrawPosition():a._drawPosition(o,0,0,"relative",!1),c.wrap.parentNode!=p&&p.appendChild(c.wrap),a.setClass(o.targetElement,o.activeClass)}function h(){switch(a.getPadYComponent(o)){case"s":var b=1;break;case"v":var b=2}var c=Math.round(o.hsv[0]/360*(o.width-1)),d=Math.round((1-o.hsv[b]/100)*(o.height-1)),f=2*o.pointerBorderWidth+o.pointerThickness+2*o.crossSize,g=-Math.floor(f/2);switch(a.picker.cross.style.left=c+g+"px",a.picker.cross.style.top=d+g+"px",a.getSliderComponent(o)){case"s":var h=e(o.hsv[0],100,o.hsv[2]),i=e(o.hsv[0],0,o.hsv[2]),j="rgb("+Math.round(h[0])+","+Math.round(h[1])+","+Math.round(h[2])+")",k="rgb("+Math.round(i[0])+","+Math.round(i[1])+","+Math.round(i[2])+")";a.picker.sldGrad.draw(o.sliderSize,o.height,j,k);break;case"v":var l=e(o.hsv[0],o.hsv[1],100),j="rgb("+Math.round(l[0])+","+Math.round(l[1])+","+Math.round(l[2])+")",k="#000";a.picker.sldGrad.draw(o.sliderSize,o.height,j,k)}}function i(){var b=a.getSliderComponent(o);if(b){switch(b){case"s":var c=1;break;case"v":var c=2}var d=Math.round((1-o.hsv[c]/100)*(o.height-1));a.picker.sldPtrOB.style.top=d-(2*o.pointerBorderWidth+o.pointerThickness)-Math.floor(q/2)+"px"}}function j(){return a.picker&&a.picker.owner===o}function k(){o.importColor()}this.value=null,this.valueElement=b,this.styleElement=b,this.required=!0,this.refine=!0,this.hash=!1,this.uppercase=!0,this.onFineChange=null,this.activeClass="jscolor-active",this.minS=0,this.maxS=100,this.minV=0,this.maxV=100,this.hsv=[0,0,100],this.rgb=[255,255,255],this.width=181,this.height=101,this.showOnClick=!0,this.mode="HSV",this.position="bottom",this.smartPosition=!0,this.sliderSize=16,this.crossSize=8,this.closable=!1,this.closeText="Close",this.buttonColor="#000000",this.buttonHeight=18,this.padding=12,this.backgroundColor="#FFFFFF",this.borderWidth=1,this.borderColor="#BBBBBB",this.borderRadius=8,this.insetWidth=1,this.insetColor="#BBBBBB",this.shadow=!0,this.shadowBlur=15,this.shadowColor="rgba(0,0,0,0.2)",this.pointerColor="#4C4C4C",this.pointerBorderColor="#FFFFFF",this.pointerBorderWidth=1,this.pointerThickness=2,this.zIndex=1e3,this.container=null;for(var l in c)c.hasOwnProperty(l)&&(this[l]=c[l]);if(this.hide=function(){j()&&f()},this.show=function(){g()},this.redraw=function(){j()&&g()},this.importColor=function(){this.valueElement&&a.isElementType(this.valueElement,"input")?this.refine?!this.required&&/^\s*$/.test(this.valueElement.value)?(this.valueElement.value="",this.styleElement&&(this.styleElement.style.backgroundImage=this.styleElement._jscOrigStyle.backgroundImage,this.styleElement.style.backgroundColor=this.styleElement._jscOrigStyle.backgroundColor,this.styleElement.style.color=this.styleElement._jscOrigStyle.color),this.exportColor(a.leaveValue|a.leaveStyle)):this.fromString(this.valueElement.value)||this.exportColor():this.fromString(this.valueElement.value,a.leaveValue)||(this.styleElement&&(this.styleElement.style.backgroundImage=this.styleElement._jscOrigStyle.backgroundImage,
this.styleElement.style.backgroundColor=this.styleElement._jscOrigStyle.backgroundColor,this.styleElement.style.color=this.styleElement._jscOrigStyle.color),this.exportColor(a.leaveValue|a.leaveStyle)):this.exportColor()},this.exportColor=function(b){if(!(b&a.leaveValue)&&this.valueElement){var c=this.toString();this.uppercase&&(c=c.toUpperCase()),this.hash&&(c="#"+c),a.isElementType(this.valueElement,"input")?this.valueElement.value=c:this.valueElement.innerHTML=c}b&a.leaveStyle||this.styleElement&&(this.styleElement.style.backgroundImage="none",this.styleElement.style.backgroundColor="#"+this.toString(),this.styleElement.style.color=this.isLight()?"#000":"#FFF"),b&a.leavePad||!j()||h(),b&a.leaveSld||!j()||i()},this.fromHSV=function(a,b,c,d){if(null!==a){if(isNaN(a))return!1;a=Math.max(0,Math.min(360,a))}if(null!==b){if(isNaN(b))return!1;b=Math.max(0,Math.min(100,this.maxS,b),this.minS)}if(null!==c){if(isNaN(c))return!1;c=Math.max(0,Math.min(100,this.maxV,c),this.minV)}this.rgb=e(null===a?this.hsv[0]:this.hsv[0]=a,null===b?this.hsv[1]:this.hsv[1]=b,null===c?this.hsv[2]:this.hsv[2]=c),this.exportColor(d)},this.fromRGB=function(a,b,c,f){if(null!==a){if(isNaN(a))return!1;a=Math.max(0,Math.min(255,a))}if(null!==b){if(isNaN(b))return!1;b=Math.max(0,Math.min(255,b))}if(null!==c){if(isNaN(c))return!1;c=Math.max(0,Math.min(255,c))}var g=d(null===a?this.rgb[0]:a,null===b?this.rgb[1]:b,null===c?this.rgb[2]:c);null!==g[0]&&(this.hsv[0]=Math.max(0,Math.min(360,g[0]))),0!==g[2]&&(this.hsv[1]=null===g[1]?null:Math.max(0,this.minS,Math.min(100,this.maxS,g[1]))),this.hsv[2]=null===g[2]?null:Math.max(0,this.minV,Math.min(100,this.maxV,g[2]));var h=e(this.hsv[0],this.hsv[1],this.hsv[2]);this.rgb[0]=h[0],this.rgb[1]=h[1],this.rgb[2]=h[2],this.exportColor(f)},this.fromString=function(a,b){var c;if(c=a.match(/^\W*([0-9A-F]{3}([0-9A-F]{3})?)\W*$/i))return 6===c[1].length?this.fromRGB(parseInt(c[1].substr(0,2),16),parseInt(c[1].substr(2,2),16),parseInt(c[1].substr(4,2),16),b):this.fromRGB(parseInt(c[1].charAt(0)+c[1].charAt(0),16),parseInt(c[1].charAt(1)+c[1].charAt(1),16),parseInt(c[1].charAt(2)+c[1].charAt(2),16),b),!0;if(c=a.match(/^\W*rgba?\(([^)]*)\)\W*$/i)){var d,e,f,g=c[1].split(","),h=/^\s*(\d*)(\.\d+)?\s*$/;if(g.length>=3&&(d=g[0].match(h))&&(e=g[1].match(h))&&(f=g[2].match(h))){var i=parseFloat((d[1]||"0")+(d[2]||"")),j=parseFloat((e[1]||"0")+(e[2]||"")),k=parseFloat((f[1]||"0")+(f[2]||""));return this.fromRGB(i,j,k,b),!0}}return!1},this.toString=function(){return(256|Math.round(this.rgb[0])).toString(16).substr(1)+(256|Math.round(this.rgb[1])).toString(16).substr(1)+(256|Math.round(this.rgb[2])).toString(16).substr(1)},this.toHEXString=function(){return"#"+this.toString().toUpperCase()},this.toRGBString=function(){return"rgb("+Math.round(this.rgb[0])+","+Math.round(this.rgb[1])+","+Math.round(this.rgb[2])+")"},this.isLight=function(){return.213*this.rgb[0]+.715*this.rgb[1]+.072*this.rgb[2]>127.5},this._processParentElementsInDOM=function(){if(!this._linkedElementsProcessed){this._linkedElementsProcessed=!0;var b=this.targetElement;do{var c=a.getStyle(b);c&&"fixed"===c.position.toLowerCase()&&(this.fixed=!0),b!==this.targetElement&&(b._jscEventsAttached||(a.attachEvent(b,"scroll",a.onParentScroll),b._jscEventsAttached=!0))}while((b=b.parentNode)&&!a.isElementType(b,"body"))}},"string"==typeof b){var m=b,n=document.getElementById(m);n?this.targetElement=n:a.warn("Could not find target element with ID '"+m+"'")}else b?this.targetElement=b:a.warn("Invalid target element: '"+b+"'");if(this.targetElement._jscLinkedInstance)return void a.warn("Cannot link jscolor twice to the same element. Skipping.");this.targetElement._jscLinkedInstance=this,this.valueElement=a.fetchElement(this.valueElement),this.styleElement=a.fetchElement(this.styleElement);var o=this,p=this.container?a.fetchElement(this.container):document.getElementsByTagName("body")[0],q=3;if(a.isElementType(this.targetElement,"button"))if(this.targetElement.onclick){var r=this.targetElement.onclick;this.targetElement.onclick=function(a){return r.call(this,a),!1}}else this.targetElement.onclick=function(){return!1};if(this.valueElement&&a.isElementType(this.valueElement,"input")){var s=function(){o.fromString(o.valueElement.value,a.leaveValue),a.dispatchFineChange(o)};a.attachEvent(this.valueElement,"keyup",s),a.attachEvent(this.valueElement,"input",s),a.attachEvent(this.valueElement,"blur",k),this.valueElement.setAttribute("autocomplete","off")}this.styleElement&&(this.styleElement._jscOrigStyle={backgroundImage:this.styleElement.style.backgroundImage,backgroundColor:this.styleElement.style.backgroundColor,color:this.styleElement.style.color}),this.value?this.fromString(this.value)||this.exportColor():this.importColor()}};return a.jscolor.lookupClass="jscolor",a.jscolor.installByClassName=function(b){var c=document.getElementsByTagName("input"),d=document.getElementsByTagName("button");a.tryInstallOnElements(c,b),a.tryInstallOnElements(d,b)},a.register(),a.jscolor}()),svgEditor.setConfig({allowedOrigins:[window.location.origin]}),function(a,b){Math.precision=function(a,b){return void 0===b&&(b=0),Math.round(a*Math.pow(10,b))/Math.pow(10,b)};var c=function(b,c){var d,e,f=this,g=b.find("img:first"),h=0,i=100,j=100,k=0,l=100,m=100,n=0,o=0,p=new Array,q=function(a){for(var b=0;b<p.length;b++)p[b].call(f,f,a)},r=function(c){var g=b.offset();d={l:0|g.left,t:0|g.top},clearTimeout(e),e=setTimeout(function(){u.call(f,c)},0),a(document).bind("mousemove",s).bind("mouseup",t),c.preventDefault()},s=function(a){return clearTimeout(e),e=setTimeout(function(){u.call(f,a)},0),a.stopPropagation(),a.preventDefault(),!1},t=function(b){return a(document).unbind("mouseup",t).unbind("mousemove",s),b.stopPropagation(),b.preventDefault(),!1},u=function(a){var c=a.pageX-d.l,e=a.pageY-d.t,g=b.w,i=b.h;0>c?c=0:c>g&&(c=g),0>e?e=0:e>i&&(e=i),w.call(f,"xy",{x:c/g*j+h,y:e/i*m+k})},v=function(){var a=0,c=0,d=b.w,e=b.h,f=g.w,h=g.h;setTimeout(function(){j>0&&(a=n==i?d:n/j*d|0),m>0&&(c=o==l?e:o/m*e|0),f>=d?a=(d>>1)-(f>>1):a-=f>>1,h>=e?c=(e>>1)-(h>>1):c-=h>>1,g.css({left:a+"px",top:c+"px"})},0)},w=function(a,b,c){var d=void 0!==b;if(!d)switch(void 0!==a&&null!=a||(a="xy"),a.toLowerCase()){case"x":return n;case"y":return o;case"xy":default:return{x:n,y:o}}if(null==c||c!=f){var e,g,j=!1;switch(null==a&&(a="xy"),a.toLowerCase()){case"x":e=b&&(b.x&&0|b.x||0|b)||0;break;case"y":g=b&&(b.y&&0|b.y||0|b)||0;break;case"xy":default:e=b&&b.x&&0|b.x||0,g=b&&b.y&&0|b.y||0}null!=e&&(h>e?e=h:e>i&&(e=i),n!=e&&(n=e,j=!0)),null!=g&&(k>g?g=k:g>l&&(g=l),o!=g&&(o=g,j=!0)),j&&q.call(f,c||f)}},x=function(a,b){var c=void 0!==b;if(!c)switch(void 0!==a&&null!=a||(a="all"),a.toLowerCase()){case"minx":return h;case"maxx":return i;case"rangex":return{minX:h,maxX:i,rangeX:j};case"miny":return k;case"maxy":return l;case"rangey":return{minY:k,maxY:l,rangeY:m};case"all":default:return{minX:h,maxX:i,rangeX:j,minY:k,maxY:l,rangeY:m}}var d,e,f,g;switch(null==a&&(a="all"),a.toLowerCase()){case"minx":d=b&&(b.minX&&0|b.minX||0|b)||0;break;case"maxx":e=b&&(b.maxX&&0|b.maxX||0|b)||0;break;case"rangex":d=b&&b.minX&&0|b.minX||0,e=b&&b.maxX&&0|b.maxX||0;break;case"miny":f=b&&(b.minY&&0|b.minY||0|b)||0;break;case"maxy":g=b&&(b.maxY&&0|b.maxY||0|b)||0;break;case"rangey":f=b&&b.minY&&0|b.minY||0,g=b&&b.maxY&&0|b.maxY||0;break;case"all":default:d=b&&b.minX&&0|b.minX||0,e=b&&b.maxX&&0|b.maxX||0,f=b&&b.minY&&0|b.minY||0,g=b&&b.maxY&&0|b.maxY||0}null!=d&&h!=d&&(h=d,j=i-h),null!=e&&i!=e&&(i=e,j=i-h),null!=f&&k!=f&&(k=f,m=l-k),null!=g&&l!=g&&(l=g,m=l-k)},y=function(b){a.isFunction(b)&&p.push(b)},z=function(b){if(a.isFunction(b))for(var c;-1!=(c=a.inArray(b,p));)p.splice(c,1)},A=function(){a(document).unbind("mouseup",t).unbind("mousemove",s),b.unbind("mousedown",r),b=null,g=null,p=null};a.extend(!0,f,{val:w,range:x,bind:y,unbind:z,destroy:A}),g.src=c.arrow&&c.arrow.image,g.w=c.arrow&&c.arrow.width||g.width(),g.h=c.arrow&&c.arrow.height||g.height(),b.w=c.map&&c.map.width||b.width(),b.h=c.map&&c.map.height||b.height(),b.bind("mousedown",r),y.call(f,v)},d=function(b,c,d,e){var f=this,g=b.find("td.Text input"),h=g.eq(3),i=g.eq(4),j=g.eq(5),k=g.length>7?g.eq(6):null,l=g.eq(0),m=g.eq(1),n=g.eq(2),o=g.eq(g.length>7?7:6),p=g.length>7?g.eq(8):null,q=function(a){if(""!=a.target.value||a.target==o.get(0)||(null==d||a.target==d.get(0))&&null!=d){if(!t(a))return a;switch(a.target){case h.get(0):switch(a.keyCode){case 38:return h.val(u.call(f,(h.val()<<0)+1,0,255)),c.val("r",h.val(),a.target),!1;case 40:return h.val(u.call(f,(h.val()<<0)-1,0,255)),c.val("r",h.val(),a.target),!1}break;case i.get(0):switch(a.keyCode){case 38:return i.val(u.call(f,(i.val()<<0)+1,0,255)),c.val("g",i.val(),a.target),!1;case 40:return i.val(u.call(f,(i.val()<<0)-1,0,255)),c.val("g",i.val(),a.target),!1}break;case j.get(0):switch(a.keyCode){case 38:return j.val(u.call(f,(j.val()<<0)+1,0,255)),c.val("b",j.val(),a.target),!1;case 40:return j.val(u.call(f,(j.val()<<0)-1,0,255)),c.val("b",j.val(),a.target),!1}break;case k&&k.get(0):switch(a.keyCode){case 38:return k.val(u.call(f,parseFloat(k.val())+1,0,100)),c.val("a",Math.precision(255*k.val()/100,e),a.target),!1;case 40:return k.val(u.call(f,parseFloat(k.val())-1,0,100)),c.val("a",Math.precision(255*k.val()/100,e),a.target),!1}break;case l.get(0):switch(a.keyCode){case 38:return l.val(u.call(f,(l.val()<<0)+1,0,360)),c.val("h",l.val(),a.target),!1;case 40:return l.val(u.call(f,(l.val()<<0)-1,0,360)),c.val("h",l.val(),a.target),!1}break;case m.get(0):switch(a.keyCode){case 38:return m.val(u.call(f,(m.val()<<0)+1,0,100)),c.val("s",m.val(),a.target),!1;case 40:return m.val(u.call(f,(m.val()<<0)-1,0,100)),c.val("s",m.val(),a.target),!1}break;case n.get(0):switch(a.keyCode){case 38:return n.val(u.call(f,(n.val()<<0)+1,0,100)),c.val("v",n.val(),a.target),!1;case 40:return n.val(u.call(f,(n.val()<<0)-1,0,100)),c.val("v",n.val(),a.target),!1}}}},r=function(a){if(""!=a.target.value||a.target==o.get(0)||(null==d||a.target==d.get(0))&&null!=d){if(!t(a))return a;switch(a.target){case h.get(0):h.val(u.call(f,h.val(),0,255)),c.val("r",h.val(),a.target);break;case i.get(0):i.val(u.call(f,i.val(),0,255)),c.val("g",i.val(),a.target);break;case j.get(0):j.val(u.call(f,j.val(),0,255)),c.val("b",j.val(),a.target);break;case k&&k.get(0):k.val(u.call(f,k.val(),0,100)),c.val("a",Math.precision(255*k.val()/100,e),a.target);break;case l.get(0):l.val(u.call(f,l.val(),0,360)),c.val("h",l.val(),a.target);break;case m.get(0):m.val(u.call(f,m.val(),0,100)),c.val("s",m.val(),a.target);break;case n.get(0):n.val(u.call(f,n.val(),0,100)),c.val("v",n.val(),a.target);break;case o.get(0):o.val(o.val().replace(/[^a-fA-F0-9]/g,"").toLowerCase().substring(0,6)),d&&d.val(o.val()),c.val("hex",""!=o.val()?o.val():null,a.target);break;case d&&d.get(0):d.val(d.val().replace(/[^a-fA-F0-9]/g,"").toLowerCase().substring(0,6)),o.val(d.val()),c.val("hex",""!=d.val()?d.val():null,a.target);break;case p&&p.get(0):p.val(p.val().replace(/[^a-fA-F0-9]/g,"").toLowerCase().substring(0,2)),c.val("a",null!=p.val()?parseInt(p.val(),16):null,a.target)}}},s=function(a){if(null!=c.val())switch(a.target){case h.get(0):h.val(c.val("r"));break;case i.get(0):i.val(c.val("g"));break;case j.get(0):j.val(c.val("b"));break;case k&&k.get(0):k.val(Math.precision(100*c.val("a")/255,e));break;case l.get(0):l.val(c.val("h"));break;case m.get(0):m.val(c.val("s"));break;case n.get(0):n.val(c.val("v"));break;case o.get(0):case d&&d.get(0):o.val(c.val("hex")),d&&d.val(c.val("hex"));break;case p&&p.get(0):p.val(c.val("ahex").substring(6))}},t=function(a){switch(a.keyCode){case 9:case 16:case 29:case 37:case 39:return!1;case"c".charCodeAt():case"v".charCodeAt():if(a.ctrlKey)return!1}return!0},u=function(a,b,c){return""==a||isNaN(a)?b:a>c?c:b>a?b:a},v=function(a,b){var c=a.val("all");b!=h.get(0)&&h.val(null!=c?c.r:""),b!=i.get(0)&&i.val(null!=c?c.g:""),b!=j.get(0)&&j.val(null!=c?c.b:""),k&&b!=k.get(0)&&k.val(null!=c?Math.precision(100*c.a/255,e):""),b!=l.get(0)&&l.val(null!=c?c.h:""),b!=m.get(0)&&m.val(null!=c?c.s:""),b!=n.get(0)&&n.val(null!=c?c.v:""),b!=o.get(0)&&(d&&b!=d.get(0)||!d)&&o.val(null!=c?c.hex:""),d&&b!=d.get(0)&&b!=o.get(0)&&d.val(null!=c?c.hex:""),p&&b!=p.get(0)&&p.val(null!=c?c.ahex.substring(6):"")},w=function(){h.add(i).add(j).add(k).add(l).add(m).add(n).add(o).add(d).add(p).unbind("keyup",r).unbind("blur",s),h.add(i).add(j).add(k).add(l).add(m).add(n).unbind("keydown",q),c.unbind(v),h=null,i=null,j=null,k=null,l=null,m=null,n=null,o=null,p=null};a.extend(!0,f,{destroy:w}),h.add(i).add(j).add(k).add(l).add(m).add(n).add(o).add(d).add(p).bind("keyup",r).bind("blur",s),h.add(i).add(j).add(k).add(l).add(m).add(n).bind("keydown",q),c.bind(v)};a.jPicker={List:[],Color:function(b){var c,d,e,f,h,i,j,k=this,l=new Array,m=function(a){for(var b=0;b<l.length;b++)l[b].call(k,k,a)},n=function(a,b,l){var o=Boolean(b);if(o&&""===b.ahex&&(b.ahex="00000000"),!o){if(void 0!==a&&null!=a&&""!=a||(a="all"),null==c)return null;switch(a.toLowerCase()){case"ahex":return g.rgbaToHex({r:c,g:d,b:e,a:f});case"hex":return n("ahex").substring(0,6);case"all":return{r:c,g:d,b:e,a:f,h:h,s:i,v:j,hex:n.call(k,"hex"),ahex:n.call(k,"ahex")};default:for(var p={},q=0;q<a.length;q++)switch(a.charAt(q)){case"r":1==a.length?p=c:p.r=c;break;case"g":1==a.length?p=d:p.g=d;break;case"b":1==a.length?p=e:p.b=e;break;case"a":1==a.length?p=f:p.a=f;break;case"h":1==a.length?p=h:p.h=h;break;case"s":1==a.length?p=i:p.s=i;break;case"v":1==a.length?p=j:p.v=j}return p=={}?n.call(k,"all"):p}}if(null==l||l!=k){var r=!1;if(null==a&&(a=""),null==b)return null!=c&&(c=null,r=!0),null!=d&&(d=null,r=!0),null!=e&&(e=null,r=!0),null!=f&&(f=null,r=!0),null!=h&&(h=null,r=!0),null!=i&&(i=null,r=!0),null!=j&&(j=null,r=!0),void(r&&m.call(k,l||k));switch(a.toLowerCase()){case"ahex":case"hex":var p=g.hexToRgba(b&&(b.ahex||b.hex)||b||"none");n.call(k,"rgba",{r:p.r,g:p.g,b:p.b,a:"ahex"==a?p.a:null!=f?f:255},l);break;default:if(b&&(null!=b.ahex||null!=b.hex))return void n.call(k,"ahex",b.ahex||b.hex||"00000000",l);var s={},t=!1,u=!1;void 0!==b.r&&-1==!a.indexOf("r")&&(a+="r"),void 0!==b.g&&-1==!a.indexOf("g")&&(a+="g"),void 0!==b.b&&-1==!a.indexOf("b")&&(a+="b"),void 0!==b.a&&-1==!a.indexOf("a")&&(a+="a"),void 0!==b.h&&-1==!a.indexOf("h")&&(a+="h"),void 0!==b.s&&-1==!a.indexOf("s")&&(a+="s"),void 0!==b.v&&-1==!a.indexOf("v")&&(a+="v");for(var q=0;q<a.length;q++)switch(a.charAt(q)){case"r":if(u)continue;t=!0,s.r=b&&b.r&&0|b.r||b&&0|b||0,s.r<0?s.r=0:s.r>255&&(s.r=255),c!=s.r&&(c=s.r,r=!0);break;case"g":if(u)continue;t=!0,s.g=b&&b.g&&0|b.g||b&&0|b||0,s.g<0?s.g=0:s.g>255&&(s.g=255),d!=s.g&&(d=s.g,r=!0);break;case"b":if(u)continue;t=!0,s.b=b&&b.b&&0|b.b||b&&0|b||0,s.b<0?s.b=0:s.b>255&&(s.b=255),e!=s.b&&(e=s.b,r=!0);break;case"a":s.a=b&&null!=b.a?0|b.a:null!=b?0|b:255,s.a<0?s.a=0:s.a>255&&(s.a=255),f!=s.a&&(f=s.a,r=!0);break;case"h":if(t)continue;u=!0,s.h=b&&b.h&&0|b.h||b&&0|b||0,s.h<0?s.h=0:s.h>360&&(s.h=360),h!=s.h&&(h=s.h,r=!0);break;case"s":if(t)continue;u=!0,s.s=b&&null!=b.s?0|b.s:null!=b?0|b:100,s.s<0?s.s=0:s.s>100&&(s.s=100),i!=s.s&&(i=s.s,r=!0);break;case"v":if(t)continue;u=!0,s.v=b&&null!=b.v?0|b.v:null!=b?0|b:100,s.v<0?s.v=0:s.v>100&&(s.v=100),j!=s.v&&(j=s.v,r=!0)}if(r){if(t){c=c||0,d=d||0,e=e||0;var p=g.rgbToHsv({r:c,g:d,b:e});h=p.h,i=p.s,j=p.v}else if(u){h=h||0,i=null!=i?i:100,j=null!=j?j:100;var p=g.hsvToRgb({h:h,s:i,v:j});c=p.r,d=p.g,e=p.b}f=null!=f?f:255,m.call(k,l||k)}}}},o=function(b){a.isFunction(b)&&l.push(b)},p=function(b){if(a.isFunction(b))for(var c;-1!=(c=a.inArray(b,l));)l.splice(c,1)},q=function(){l=null};a.extend(!0,k,{val:n,bind:o,unbind:p,destroy:q}),b&&(null!=b.ahex?n("ahex",b):null!=b.hex?n((null!=b.a?"a":"")+"hex",null!=b.a?{ahex:b.hex+g.intToHex(b.a)}:b):null!=b.r&&null!=b.g&&null!=b.b?n("rgb"+(null!=b.a?"a":""),b):null!=b.h&&null!=b.s&&null!=b.v&&n("hsv"+(null!=b.a?"a":""),b))},ColorMethods:{hexToRgba:function(a){if(""===a||"none"===a)return{r:null,g:null,b:null,a:null};a=this.validateHex(a);var b="00",c="00",d="00",e="255";return 6==a.length&&(a+="ff"),a.length>6?(b=a.substring(0,2),c=a.substring(2,4),d=a.substring(4,6),e=a.substring(6,a.length)):(a.length>4&&(b=a.substring(4,a.length),a=a.substring(0,4)),a.length>2&&(c=a.substring(2,a.length),a=a.substring(0,2)),a.length>0&&(d=a.substring(0,a.length))),{r:this.hexToInt(b),g:this.hexToInt(c),b:this.hexToInt(d),a:this.hexToInt(e)}},validateHex:function(a){return a=a.toLowerCase().replace(/[^a-f0-9]/g,""),a.length>8&&(a=a.substring(0,8)),a},rgbaToHex:function(a){return this.intToHex(a.r)+this.intToHex(a.g)+this.intToHex(a.b)+this.intToHex(a.a)},intToHex:function(a){var b=(0|a).toString(16);return 1==b.length&&(b="0"+b),b.toLowerCase()},hexToInt:function(a){return parseInt(a,16)},rgbToHsv:function(a){var b,c=a.r/255,d=a.g/255,e=a.b/255,f={h:0,s:0,v:0},g=0,h=0;return c>=d&&c>=e?(h=c,g=d>e?e:d):d>=e&&d>=c?(h=d,g=c>e?e:c):(h=e,g=d>c?c:d),f.v=h,f.s=h?(h-g)/h:0,f.s?(b=h-g,c==h?f.h=(d-e)/b:d==h?f.h=2+(e-c)/b:f.h=4+(c-d)/b,f.h=parseInt(60*f.h),f.h<0&&(f.h+=360)):f.h=0,f.s=100*f.s|0,f.v=100*f.v|0,f},hsvToRgb:function(a){var b={r:0,g:0,b:0,a:100},c=a.h,d=a.s,e=a.v;if(0==d)0==e?b.r=b.g=b.b=0:b.r=b.g=b.b=255*e/100|0;else{360==c&&(c=0),c/=60,d/=100,e/=100;var f=0|c,g=c-f,h=e*(1-d),i=e*(1-d*g),j=e*(1-d*(1-g));switch(f){case 0:b.r=e,b.g=j,b.b=h;break;case 1:b.r=i,b.g=e,b.b=h;break;case 2:b.r=h,b.g=e,b.b=j;break;case 3:b.r=h,b.g=i,b.b=e;break;case 4:b.r=j,b.g=h,b.b=e;break;case 5:b.r=e,b.g=h,b.b=i}b.r=255*b.r|0,b.g=255*b.g|0,b.b=255*b.b|0}return b}}};var e=a.jPicker.Color,f=a.jPicker.List,g=a.jPicker.ColorMethods;a.fn.jPicker=function(b){var h=arguments;return this.each(function(){var j=this,k=a.extend(!0,{},a.fn.jPicker.defaults,b);"input"==a(j).get(0).nodeName.toLowerCase()&&(a.extend(!0,k,{window:{bindToInput:!0,expandable:!0,input:a(j)}}),""==a(j).val()?(k.color.active=new e({hex:null}),k.color.current=new e({hex:null})):g.validateHex(a(j).val())&&(k.color.active=new e({hex:a(j).val(),a:k.color.active.val("a")}),k.color.current=new e({hex:a(j).val(),a:k.color.active.val("a")}))),k.window.expandable?a(j).after('<span class="jPicker"><span class="Icon"><span class="Color">&nbsp;</span><span class="Alpha">&nbsp;</span><span class="Image" title="Click To Open Color Picker">&nbsp;</span><span class="Container">&nbsp;</span></span></span>'):k.window.liveUpdate=!1;var l=parseFloat(navigator.appVersion.split("MSIE")[1])<7&&document.body.filters,m=null,n=null,o=null,p=null,q=null,r=null,s=null,t=null,u=null,v=null,w=null,x=null,y=null,z=null,A=null,B=null,C=null,D=null,E=null,F=null,G=null,H=null,I=null,J=null,K=null,L=null,M=null,N=null,O=function(a){var b,c,d=ua.active,e=(sa.clientPath,d.val("hex"));switch(k.color.mode=a,a){case"h":if(setTimeout(function(){W.call(j,n,"transparent"),Y.call(j,p,0),Z.call(j,p,100),Y.call(j,q,260),Z.call(j,q,100),W.call(j,o,"transparent"),Y.call(j,s,0),Z.call(j,s,100),Y.call(j,t,260),Z.call(j,t,100),Y.call(j,u,260),Z.call(j,u,100),Y.call(j,v,260),Z.call(j,v,100),Y.call(j,x,260),Z.call(j,x,100)},0),y.range("all",{minX:0,maxX:100,minY:0,maxY:100}),z.range("rangeY",{minY:0,maxY:360}),null==d.val("ahex"))break;y.val("xy",{x:d.val("s"),y:100-d.val("v")},y),z.val("y",360-d.val("h"),z);break;case"s":if(setTimeout(function(){W.call(j,n,"transparent"),Y.call(j,p,-260),Y.call(j,q,-520),Y.call(j,s,-260),Y.call(j,t,-520),Y.call(j,x,260),Z.call(j,x,100)},0),y.range("all",{minX:0,maxX:360,minY:0,maxY:100}),z.range("rangeY",{minY:0,maxY:100}),null==d.val("ahex"))break;y.val("xy",{x:d.val("h"),y:100-d.val("v")},y),z.val("y",100-d.val("s"),z);break;case"v":if(setTimeout(function(){W.call(j,n,"000000"),Y.call(j,p,-780),Y.call(j,q,260),W.call(j,o,e),Y.call(j,s,-520),Y.call(j,t,260),Z.call(j,t,100),Y.call(j,x,260),Z.call(j,x,100)},0),y.range("all",{minX:0,maxX:360,minY:0,maxY:100}),z.range("rangeY",{minY:0,maxY:100}),null==d.val("ahex"))break;y.val("xy",{x:d.val("h"),y:100-d.val("s")},y),z.val("y",100-d.val("v"),z);break;case"r":if(b=-1040,c=-780,y.range("all",{minX:0,maxX:255,minY:0,maxY:255}),z.range("rangeY",{minY:0,maxY:255}),null==d.val("ahex"))break;y.val("xy",{x:d.val("b"),y:255-d.val("g")},y),z.val("y",255-d.val("r"),z);break;case"g":if(b=-1560,c=-1820,y.range("all",{minX:0,maxX:255,minY:0,maxY:255}),z.range("rangeY",{minY:0,maxY:255}),null==d.val("ahex"))break;y.val("xy",{x:d.val("b"),y:255-d.val("r")},y),z.val("y",255-d.val("g"),z);break;case"b":if(b=-2080,c=-2860,y.range("all",{minX:0,maxX:255,minY:0,maxY:255}),z.range("rangeY",{minY:0,maxY:255}),null==d.val("ahex"))break;y.val("xy",{x:d.val("r"),y:255-d.val("g")},y),z.val("y",255-d.val("b"),z);break;case"a":if(setTimeout(function(){W.call(j,n,"transparent"),Y.call(j,p,-260),Y.call(j,q,-520),Y.call(j,s,260),Y.call(j,t,260),Z.call(j,t,100),Y.call(j,x,0),Z.call(j,x,100)},0),y.range("all",{minX:0,maxX:360,minY:0,maxY:100}),z.range("rangeY",{minY:0,maxY:255}),null==d.val("ahex"))break;y.val("xy",{x:d.val("h"),y:100-d.val("v")},y),z.val("y",255-d.val("a"),z);break;default:throw"Invalid Mode"}switch(a){case"h":break;case"s":case"v":case"a":setTimeout(function(){Z.call(j,p,100),Z.call(j,s,100),Y.call(j,u,260),Z.call(j,u,100),Y.call(j,v,260),Z.call(j,v,100)},0);break;case"r":case"g":case"b":setTimeout(function(){W.call(j,n,"transparent"),W.call(j,o,"transparent"),Z.call(j,s,100),Z.call(j,p,100),Y.call(j,p,b),Y.call(j,q,b-260),Y.call(j,s,c-780),Y.call(j,t,c-520),Y.call(j,u,c),Y.call(j,v,c-260),Y.call(j,x,260),Z.call(j,x,100)},0)}null!=d.val("ahex")&&P.call(j,d)},P=function(a,b){(null==b||b!=z&&b!=y)&&S.call(j,a,b),setTimeout(function(){T.call(j,a),U.call(j,a),V.call(j,a)},0)},Q=function(a,b){var c=ua.active;if(b==y||null!=c.val()){var d=a.val("all");switch(k.color.mode){case"h":c.val("sv",{s:d.x,v:100-d.y},b);break;case"s":case"a":c.val("hv",{h:d.x,v:100-d.y},b);break;case"v":c.val("hs",{h:d.x,s:100-d.y},b);break;case"r":c.val("gb",{g:255-d.y,b:d.x},b);break;case"g":c.val("rb",{r:255-d.y,b:d.x},b);break;case"b":c.val("rg",{r:d.x,g:255-d.y},b)}}},R=function(a,b){var c=ua.active;if(b==z||null!=c.val())switch(k.color.mode){case"h":c.val("h",{h:360-a.val("y")},b);break;case"s":c.val("s",{s:100-a.val("y")},b);break;case"v":c.val("v",{v:100-a.val("y")},b);break;case"r":c.val("r",{r:255-a.val("y")},b);break;case"g":c.val("g",{g:255-a.val("y")},b);break;case"b":c.val("b",{b:255-a.val("y")},b);break;case"a":c.val("a",255-a.val("y"),b)}},S=function(a,b){if(b!=y)switch(k.color.mode){case"h":var c=a.val("sv");y.val("xy",{x:null!=c?c.s:100,y:100-(null!=c?c.v:100)},b);break;case"s":case"a":var d=a.val("hv");y.val("xy",{x:d&&d.h||0,y:100-(null!=d?d.v:100)},b);break;case"v":var e=a.val("hs");y.val("xy",{x:e&&e.h||0,y:100-(null!=e?e.s:100)},b);break;case"r":var f=a.val("bg");y.val("xy",{x:f&&f.b||0,y:255-(f&&f.g||0)},b);break;case"g":var g=a.val("br");y.val("xy",{x:g&&g.b||0,y:255-(g&&g.r||0)},b);break;case"b":var h=a.val("rg");y.val("xy",{x:h&&h.r||0,y:255-(h&&h.g||0)},b)}if(b!=z)switch(k.color.mode){case"h":z.val("y",360-(a.val("h")||0),b);break;case"s":var i=a.val("s");z.val("y",100-(null!=i?i:100),b);break;case"v":var j=a.val("v");z.val("y",100-(null!=j?j:100),b);break;case"r":z.val("y",255-(a.val("r")||0),b);break;case"g":z.val("y",255-(a.val("g")||0),b);break;case"b":z.val("y",255-(a.val("b")||0),b);break;case"a":var l=a.val("a");z.val("y",255-(null!=l?l:255),b)}},T=function(a){try{var b=a.val("all");F.css({backgroundColor:b&&"#"+b.hex||"transparent"}),Z.call(j,F,b&&Math.precision(100*b.a/255,4)||0)}catch(c){}},U=function(a){switch(k.color.mode){case"h":W.call(j,n,new e({h:a.val("h")||0,s:100,v:100}).val("hex"));break;case"s":case"a":var b=a.val("s");Z.call(j,q,100-(null!=b?b:100));break;case"v":var c=a.val("v");Z.call(j,p,null!=c?c:100);break;case"r":Z.call(j,q,Math.precision((a.val("r")||0)/255*100,4));break;case"g":Z.call(j,q,Math.precision((a.val("g")||0)/255*100,4));break;case"b":Z.call(j,q,Math.precision((a.val("b")||0)/255*100))}var d=a.val("a");Z.call(j,r,Math.precision(100*(255-(d||0))/255,4))},V=function(a){switch(k.color.mode){case"h":var b=a.val("a");Z.call(j,w,Math.precision(100*(255-(b||0))/255,4));break;case"s":var c=a.val("hva"),d=new e({h:c&&c.h||0,s:100,v:null!=c?c.v:100});W.call(j,o,d.val("hex")),Z.call(j,t,100-(null!=c?c.v:100)),Z.call(j,w,Math.precision(100*(255-(c&&c.a||0))/255,4));break;case"v":var f=a.val("hsa"),g=new e({h:f&&f.h||0,s:null!=f?f.s:100,v:100});W.call(j,o,g.val("hex")),Z.call(j,w,Math.precision(100*(255-(f&&f.a||0))/255,4));break;case"r":case"g":case"b":var h=0,i=0,l=a.val("rgba");"r"==k.color.mode?(h=l&&l.b||0,i=l&&l.g||0):"g"==k.color.mode?(h=l&&l.b||0,i=l&&l.r||0):"b"==k.color.mode&&(h=l&&l.r||0,i=l&&l.g||0);var m=i>h?h:i;Z.call(j,t,h>i?Math.precision((h-i)/(255-i)*100,4):0),Z.call(j,u,i>h?Math.precision((i-h)/(255-h)*100,4):0),Z.call(j,v,Math.precision(m/255*100,4)),Z.call(j,w,Math.precision(100*(255-(l&&l.a||0))/255,4));break;case"a":var b=a.val("a");W.call(j,o,a.val("hex")||"000000"),Z.call(j,w,null!=b?0:100),Z.call(j,x,null!=b?100:0)}},W=function(a,b){a.css({backgroundColor:b&&6==b.length&&"#"+b||"transparent"})},X=function(a,b){!l||-1==b.indexOf("AlphaBar.png")&&-1==b.indexOf("Bars.png")&&-1==b.indexOf("Maps.png")?a.css({backgroundImage:"url('"+b+"')"}):(a.attr("pngSrc",b),a.css({backgroundImage:"none",filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+b+"', sizingMethod='scale')"}))},Y=function(a,b){a.css({top:b+"px"})},Z=function(a,b){if(a.css({visibility:b>0?"visible":"hidden"}),b>0&&100>b)if(l){var c=a.attr("pngSrc");null==c||-1==c.indexOf("AlphaBar.png")&&-1==c.indexOf("Bars.png")&&-1==c.indexOf("Maps.png")?a.css({opacity:Math.precision(b/100,4)}):a.css({filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+c+"', sizingMethod='scale') progid:DXImageTransform.Microsoft.Alpha(opacity="+b+")"})}else a.css({opacity:Math.precision(b/100,4)});else if(0==b||100==b)if(l){var c=a.attr("pngSrc");null==c||-1==c.indexOf("AlphaBar.png")&&-1==c.indexOf("Bars.png")&&-1==c.indexOf("Maps.png")?a.css({opacity:""}):a.css({filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+c+"', sizingMethod='scale')"})}else a.css({opacity:""})},$=function(){ua.active.val("ahex",ua.current.val("ahex"))},_=function(){ua.current.val("ahex",ua.active.val("ahex"))},aa=function(b){a(this).parents("tbody:first").find('input:radio[value!="'+b.target.value+'"]').removeAttr("checked"),O.call(j,b.target.value)},ba=function(){$.call(j)},ca=function(){$.call(j),k.window.expandable&&pa.call(j),a.isFunction(na)&&na.call(j,ua.active,I)},da=function(){_.call(j),k.window.expandable&&pa.call(j),a.isFunction(la)&&la.call(j,ua.active,H)},ea=function(){oa.call(j)},fa=function(a,b){var c=a.val("hex");G.css({backgroundColor:c&&"#"+c||"transparent"}),Z.call(j,G,Math.precision(100*(a.val("a")||0)/255,4))},ga=function(a,b){var c=a.val("hex"),d=a.val("va");K.css({backgroundColor:c&&"#"+c||"transparent"}),Z.call(j,L,Math.precision(100*(255-(d&&d.a||0))/255,4)),k.window.bindToInput&&k.window.updateInputColor&&k.window.input.css({backgroundColor:c&&"#"+c||"transparent",color:null==d||d.v>75?"#000000":"#ffffff"})},ha=function(b){k.window.element,k.window.page;B=parseInt(m.css("left")),C=parseInt(m.css("top")),D=b.pageX,E=b.pageY,a(document).bind("mousemove",ia).bind("mouseup",ja),b.preventDefault()},ia=function(b){return m.css({left:B-(D-b.pageX)+"px",top:C-(E-b.pageY)+"px"}),k.window.expandable&&!a.support.boxModel&&m.prev().css({left:m.css("left"),top:m.css("top")}),b.stopPropagation(),b.preventDefault(),!1},ja=function(b){return a(document).unbind("mousemove",ia).unbind("mouseup",ja),b.stopPropagation(),b.preventDefault(),!1},ka=function(b){return b.preventDefault(),b.stopPropagation(),ua.active.val("ahex",a(this).attr("title")||null,b.target),!1},la=a.isFunction(h[1])&&h[1]||null,ma=a.isFunction(h[2])&&h[2]||null,na=a.isFunction(h[3])&&h[3]||null,oa=function(){ua.current.val("ahex",ua.active.val("ahex"));var b=function(){if(k.window.expandable&&!a.support.boxModel){var b=m.find("table:first");m.before("<iframe/>"),m.prev().css({width:b.width(),height:m.height(),opacity:0,position:"absolute",left:m.css("left"),top:m.css("top")})}};switch(k.window.expandable&&(a(document.body).children("div.jPicker.Container").css({zIndex:10}),m.css({zIndex:20})),k.window.effects.type){case"fade":m.fadeIn(k.window.effects.speed.show,b);break;case"slide":m.slideDown(k.window.effects.speed.show,b);break;case"show":default:m.show(k.window.effects.speed.show,b)}},pa=function(){var b=function(){k.window.expandable&&m.css({zIndex:10}),k.window.expandable&&!a.support.boxModel&&m.prev().remove()};switch(k.window.effects.type){case"fade":m.fadeOut(k.window.effects.speed.hide,b);break;case"slide":m.slideUp(k.window.effects.speed.hide,b);break;case"show":default:m.hide(k.window.effects.speed.hide,b)}},qa=function(){var b=k.window,f=b.expandable?a(j).next().find(".Container:first"):null;m=a(b.expandable?"<div/>":j),m.addClass("jPicker Container"),b.expandable&&m.hide(),m.get(0).onselectstart=function(a){return"input"!==a.target.nodeName.toLowerCase()?!1:void 0};var g=ua.active.val("all");b.alphaPrecision<0?b.alphaPrecision=0:b.alphaPrecision>2&&(b.alphaPrecision=2);var h='<table class="jPicker" cellpadding="0" cellspacing="0"><tbody>'+(b.expandable?'<tr><td class="Move" colspan="5">&nbsp;</td></tr>':"")+'<tr><td rowspan="9"><h2 class="Title">'+(b.title||ta.text.title)+'</h2><div class="Map"><span class="Map1">&nbsp;</span><span class="Map2">&nbsp;</span><span class="Map3">&nbsp;</span><img src="'+sa.clientPath+sa.colorMap.arrow.file+'" class="Arrow"/></div></td><td rowspan="9"><div class="Bar"><span class="Map1">&nbsp;</span><span class="Map2">&nbsp;</span><span class="Map3">&nbsp;</span><span class="Map4">&nbsp;</span><span class="Map5">&nbsp;</span><span class="Map6">&nbsp;</span><img src="'+sa.clientPath+sa.colorBar.arrow.file+'" class="Arrow"/></div></td><td colspan="2" class="Preview">'+ta.text.newColor+'<div><span class="Active" title="'+ta.tooltips.colors.newColor+'">&nbsp;</span><span class="Current" title="'+ta.tooltips.colors.currentColor+'">&nbsp;</span></div>'+ta.text.currentColor+'</td><td rowspan="9" class="Button"><input type="button" class="Ok" value="'+ta.text.ok+'" title="'+ta.tooltips.buttons.ok+'"/><input type="button" class="Cancel" value="'+ta.text.cancel+'" title="'+ta.tooltips.buttons.cancel+'"/><hr/><div class="Grid">&nbsp;</div></td></tr><tr class="Hue"><td class="Radio"><label title="'+ta.tooltips.hue.radio+'"><input type="radio" value="h"'+("h"==k.color.mode?' checked="checked"':"")+'/>H:</label></td><td class="Text"><input type="text" maxlength="3" value="'+(null!=g?g.h:"")+'" title="'+ta.tooltips.hue.textbox+'"/>&nbsp;&deg;</td></tr><tr class="Saturation"><td class="Radio"><label title="'+ta.tooltips.saturation.radio+'"><input type="radio" value="s"'+("s"==k.color.mode?' checked="checked"':"")+'/>S:</label></td><td class="Text"><input type="text" maxlength="3" value="'+(null!=g?g.s:"")+'" title="'+ta.tooltips.saturation.textbox+'"/>&nbsp;%</td></tr><tr class="Value"><td class="Radio"><label title="'+ta.tooltips.value.radio+'"><input type="radio" value="v"'+("v"==k.color.mode?' checked="checked"':"")+'/>V:</label><br/><br/></td><td class="Text"><input type="text" maxlength="3" value="'+(null!=g?g.v:"")+'" title="'+ta.tooltips.value.textbox+'"/>&nbsp;%<br/><br/></td></tr><tr class="Red"><td class="Radio"><label title="'+ta.tooltips.red.radio+'"><input type="radio" value="r"'+("r"==k.color.mode?' checked="checked"':"")+'/>R:</label></td><td class="Text"><input type="text" maxlength="3" value="'+(null!=g?g.r:"")+'" title="'+ta.tooltips.red.textbox+'"/></td></tr><tr class="Green"><td class="Radio"><label title="'+ta.tooltips.green.radio+'"><input type="radio" value="g"'+("g"==k.color.mode?' checked="checked"':"")+'/>G:</label></td><td class="Text"><input type="text" maxlength="3" value="'+(null!=g?g.g:"")+'" title="'+ta.tooltips.green.textbox+'"/></td></tr><tr class="Blue"><td class="Radio"><label title="'+ta.tooltips.blue.radio+'"><input type="radio" value="b"'+("b"==k.color.mode?' checked="checked"':"")+'/>B:</label></td><td class="Text"><input type="text" maxlength="3" value="'+(null!=g?g.b:"")+'" title="'+ta.tooltips.blue.textbox+'"/></td></tr><tr class="Alpha"><td class="Radio">'+(b.alphaSupport?'<label title="'+ta.tooltips.alpha.radio+'"><input type="radio" value="a"'+("a"==k.color.mode?' checked="checked"':"")+"/>A:</label>":"&nbsp;")+'</td><td class="Text">'+(b.alphaSupport?'<input type="text" maxlength="'+(3+b.alphaPrecision)+'" value="'+(null!=g?Math.precision(100*g.a/255,b.alphaPrecision):"")+'" title="'+ta.tooltips.alpha.textbox+'"/>&nbsp;%':"&nbsp;")+'</td></tr><tr class="Hex"><td colspan="2" class="Text"><label title="'+ta.tooltips.hex.textbox+'">#:<input type="text" maxlength="6" class="Hex" value="'+(null!=g?g.hex:"")+'"/></label>'+(b.alphaSupport?'<input type="text" maxlength="2" class="AHex" value="'+(null!=g?g.ahex.substring(6):"")+'" title="'+ta.tooltips.hex.alpha+'"/></td>':"&nbsp;")+"</tr></tbody></table>";
b.expandable?(m.html(h),0==a(document.body).children("div.jPicker.Container").length?a(document.body).prepend(m):a(document.body).children("div.jPicker.Container:last").after(m),m.mousedown(function(){a(document.body).children("div.jPicker.Container").css({zIndex:10}),m.css({zIndex:20})}),m.css({left:"left"==b.position.x?f.offset().left-530-("center"==b.position.y?25:0)+"px":"center"==b.position.x?f.offset().left-260+"px":"right"==b.position.x?f.offset().left-10+("center"==b.position.y?25:0)+"px":"screenCenter"==b.position.x?(a(document).width()>>1)-260+"px":f.offset().left+parseInt(b.position.x)+"px",position:"absolute",top:"top"==b.position.y?f.offset().top-312+"px":"center"==b.position.y?f.offset().top-156+"px":"bottom"==b.position.y?f.offset().top+25+"px":f.offset().top+parseInt(b.position.y)+"px"})):(m=a(j),m.html(h));var l=m.find("tbody:first");n=l.find("div.Map:first"),o=l.find("div.Bar:first");var B=n.find("span"),C=o.find("span");p=B.filter(".Map1:first"),q=B.filter(".Map2:first"),r=B.filter(".Map3:first"),s=C.filter(".Map1:first"),t=C.filter(".Map2:first"),u=C.filter(".Map3:first"),v=C.filter(".Map4:first"),w=C.filter(".Map5:first"),x=C.filter(".Map6:first"),y=new c(n,{map:{width:sa.colorMap.width,height:sa.colorMap.height},arrow:{image:sa.clientPath+sa.colorMap.arrow.file,width:sa.colorMap.arrow.width,height:sa.colorMap.arrow.height}}),y.bind(Q),z=new c(o,{map:{width:sa.colorBar.width,height:sa.colorBar.height},arrow:{image:sa.clientPath+sa.colorBar.arrow.file,width:sa.colorBar.arrow.width,height:sa.colorBar.arrow.height}}),z.bind(R),A=new d(l,ua.active,b.expandable&&b.bindToInput?b.input:null,b.alphaPrecision);var D=null!=g?g.hex:null,E=l.find(".Preview"),S=l.find(".Button");if(F=E.find(".Active:first").css({backgroundColor:D&&"#"+D||"transparent"}),G=E.find(".Current:first").css({backgroundColor:D&&"#"+D||"transparent"}).bind("click",ba),Z.call(j,G,Math.precision(100*ua.current.val("a"))/255,4),H=S.find(".Ok:first").bind("click",da),I=S.find(".Cancel:first").bind("click",ca),J=S.find(".Grid:first"),setTimeout(function(){X.call(j,p,sa.clientPath+"Maps.png"),X.call(j,q,sa.clientPath+"Maps.png"),X.call(j,r,sa.clientPath+"map-opacity.png"),X.call(j,s,sa.clientPath+"Bars.png"),X.call(j,t,sa.clientPath+"Bars.png"),X.call(j,u,sa.clientPath+"Bars.png"),X.call(j,v,sa.clientPath+"Bars.png"),X.call(j,w,sa.clientPath+"bar-opacity.png"),X.call(j,x,sa.clientPath+"AlphaBar.png"),X.call(j,E.find("div:first"),sa.clientPath+"preview-opacity.png")},0),l.find("td.Radio input").bind("click",aa),ua.quickList&&ua.quickList.length>0){var T="";for(i=0;i<ua.quickList.length;i++){"string"==(typeof ua.quickList[i]).toString().toLowerCase()&&(ua.quickList[i]=new e({hex:ua.quickList[i]}));var U=ua.quickList[i].val("a"),V=ua.quickList[i].val("ahex");!b.alphaSupport&&V&&(V=V.substring(0,6)+"ff");var W=ua.quickList[i].val("hex");V||(V="00000000"),T+='<span class="QuickColor"'+(V&&' title="#'+V+'"'||"none")+' style="background-color:'+(W&&"#"+W||"")+";"+(W?"":"background-image:url("+sa.clientPath+"NoColor.png)")+(b.alphaSupport&&U&&255>U?";opacity:"+Math.precision(U/255,4)+";filter:Alpha(opacity="+Math.precision(U/2.55,4)+")":"")+'">&nbsp;</span>'}X.call(j,J,sa.clientPath+"bar-opacity.png"),J.html(T),J.find(".QuickColor").click(ka)}O.call(j,k.color.mode),ua.active.bind(P),a.isFunction(ma)&&ua.active.bind(ma),ua.current.bind(fa),b.expandable?(j.icon=f.parents(".Icon:first"),K=j.icon.find(".Color:first").css({backgroundColor:D&&"#"+D||"transparent"}),L=j.icon.find(".Alpha:first"),X.call(j,L,sa.clientPath+"bar-opacity.png"),Z.call(j,L,Math.precision(100*(255-(null!=g?g.a:0))/255,4)),M=j.icon.find(".Image:first").css({backgroundImage:"url('"+sa.clientPath+sa.picker.file+"')"}).bind("click",ea),b.bindToInput&&b.updateInputColor&&b.input.css({backgroundColor:D&&"#"+D||"transparent",color:null==g||g.v>75?"#000000":"#ffffff"}),N=l.find(".Move:first").bind("mousedown",ha),ua.active.bind(ga)):oa.call(j)},ra=function(){for(m.find("td.Radio input").unbind("click",aa),G.unbind("click",ba),I.unbind("click",ca),H.unbind("click",da),k.window.expandable&&(M.unbind("click",ea),N.unbind("mousedown",ha),j.icon=null),m.find(".QuickColor").unbind("click",ka),n=null,o=null,p=null,q=null,r=null,s=null,t=null,u=null,v=null,w=null,x=null,y.destroy(),y=null,z.destroy(),z=null,A.destroy(),A=null,F=null,G=null,H=null,I=null,J=null,la=null,na=null,ma=null,m.html(""),i=0;i<f.length;i++)f[i]==j&&f.splice(i,1)},sa=k.images,ta=k.localization,ua={active:new e("string"==(typeof k.color.active).toString().toLowerCase()?{ahex:!k.window.alphaSupport&&k.color.active?k.color.active.substring(0,6)+"ff":k.color.active}:{ahex:!k.window.alphaSupport&&k.color.active.val("ahex")?k.color.active.val("ahex").substring(0,6)+"ff":k.color.active.val("ahex")}),current:new e("string"==(typeof k.color.active).toString().toLowerCase()?{ahex:!k.window.alphaSupport&&k.color.active?k.color.active.substring(0,6)+"ff":k.color.active}:{ahex:!k.window.alphaSupport&&k.color.active.val("ahex")?k.color.active.val("ahex").substring(0,6)+"ff":k.color.active.val("ahex")}),quickList:k.color.quickList};a.extend(!0,j,{commitCallback:la,liveCallback:ma,cancelCallback:na,color:ua,show:oa,hide:pa,destroy:ra}),f.push(j),setTimeout(function(){qa.call(j)},0)})},a.fn.jPicker.defaults={window:{title:null,effects:{type:"slide",speed:{show:"slow",hide:"fast"}},position:{x:"screenCenter",y:"top"},expandable:!1,liveUpdate:!0,alphaSupport:!1,alphaPrecision:0,updateInputColor:!0},color:{mode:"h",active:new e({ahex:"#ffcc00ff"}),quickList:[new e({h:360,s:33,v:100}),new e({h:360,s:66,v:100}),new e({h:360,s:100,v:100}),new e({h:360,s:100,v:75}),new e({h:360,s:100,v:50}),new e({h:180,s:0,v:100}),new e({h:30,s:33,v:100}),new e({h:30,s:66,v:100}),new e({h:30,s:100,v:100}),new e({h:30,s:100,v:75}),new e({h:30,s:100,v:50}),new e({h:180,s:0,v:90}),new e({h:60,s:33,v:100}),new e({h:60,s:66,v:100}),new e({h:60,s:100,v:100}),new e({h:60,s:100,v:75}),new e({h:60,s:100,v:50}),new e({h:180,s:0,v:80}),new e({h:90,s:33,v:100}),new e({h:90,s:66,v:100}),new e({h:90,s:100,v:100}),new e({h:90,s:100,v:75}),new e({h:90,s:100,v:50}),new e({h:180,s:0,v:70}),new e({h:120,s:33,v:100}),new e({h:120,s:66,v:100}),new e({h:120,s:100,v:100}),new e({h:120,s:100,v:75}),new e({h:120,s:100,v:50}),new e({h:180,s:0,v:60}),new e({h:150,s:33,v:100}),new e({h:150,s:66,v:100}),new e({h:150,s:100,v:100}),new e({h:150,s:100,v:75}),new e({h:150,s:100,v:50}),new e({h:180,s:0,v:50}),new e({h:180,s:33,v:100}),new e({h:180,s:66,v:100}),new e({h:180,s:100,v:100}),new e({h:180,s:100,v:75}),new e({h:180,s:100,v:50}),new e({h:180,s:0,v:40}),new e({h:210,s:33,v:100}),new e({h:210,s:66,v:100}),new e({h:210,s:100,v:100}),new e({h:210,s:100,v:75}),new e({h:210,s:100,v:50}),new e({h:180,s:0,v:30}),new e({h:240,s:33,v:100}),new e({h:240,s:66,v:100}),new e({h:240,s:100,v:100}),new e({h:240,s:100,v:75}),new e({h:240,s:100,v:50}),new e({h:180,s:0,v:20}),new e({h:270,s:33,v:100}),new e({h:270,s:66,v:100}),new e({h:270,s:100,v:100}),new e({h:270,s:100,v:75}),new e({h:270,s:100,v:50}),new e({h:180,s:0,v:10}),new e({h:300,s:33,v:100}),new e({h:300,s:66,v:100}),new e({h:300,s:100,v:100}),new e({h:300,s:100,v:75}),new e({h:300,s:100,v:50}),new e({h:180,s:0,v:0}),new e({h:330,s:33,v:100}),new e({h:330,s:66,v:100}),new e({h:330,s:100,v:100}),new e({h:330,s:100,v:75}),new e({h:330,s:100,v:50}),new e]},images:{clientPath:"/jPicker/images/",colorMap:{width:256,height:256,arrow:{file:"mappoint.gif",width:15,height:15}},colorBar:{width:20,height:256,arrow:{file:"rangearrows.gif",width:20,height:7}},picker:{file:"picker.gif",width:25,height:24}},localization:{text:{title:"Drag Markers To Pick A Color",newColor:"new",currentColor:"current",ok:"OK",cancel:"Cancel"},tooltips:{colors:{newColor:"New Color - Press &ldquo;OK&rdquo; To Commit",currentColor:"Click To Revert To Original Color"},buttons:{ok:"Commit To This Color Selection",cancel:"Cancel And Revert To Original Color"},hue:{radio:"Set To &ldquo;Hue&rdquo; Color Mode",textbox:"Enter A &ldquo;Hue&rdquo; Value (0-360&deg;)"},saturation:{radio:"Set To &ldquo;Saturation&rdquo; Color Mode",textbox:"Enter A &ldquo;Saturation&rdquo; Value (0-100%)"},value:{radio:"Set To &ldquo;Value&rdquo; Color Mode",textbox:"Enter A &ldquo;Value&rdquo; Value (0-100%)"},red:{radio:"Set To &ldquo;Red&rdquo; Color Mode",textbox:"Enter A &ldquo;Red&rdquo; Value (0-255)"},green:{radio:"Set To &ldquo;Green&rdquo; Color Mode",textbox:"Enter A &ldquo;Green&rdquo; Value (0-255)"},blue:{radio:"Set To &ldquo;Blue&rdquo; Color Mode",textbox:"Enter A &ldquo;Blue&rdquo; Value (0-255)"},alpha:{radio:"Set To &ldquo;Alpha&rdquo; Color Mode",textbox:"Enter A &ldquo;Alpha&rdquo; Value (0-100)"},hex:{textbox:"Enter A &ldquo;Hex&rdquo; Color Value (#000000-#ffffff)",alpha:"Enter A &ldquo;Alpha&rdquo; Value (#00-#ff)"}}}}}(jQuery,"1.1.6"),function(a,b){function c(b){return!a(b).parents().andSelf().filter(function(){return"hidden"===a.curCSS(this,"visibility")||a.expr.filters.hidden(this)}).length}function d(b,d){var e=b.nodeName.toLowerCase();if("area"===e){var f,g=b.parentNode,h=g.name;return b.href&&h&&"map"===g.nodeName.toLowerCase()?(f=a("img[usemap=#"+h+"]")[0],!!f&&c(f)):!1}return(/input|select|textarea|button|object/.test(e)?!b.disabled:"a"==e?b.href||d:d)&&c(b)}a.ui=a.ui||{},a.ui.version||(a.extend(a.ui,{version:"1.8.17",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),a.fn.extend({propAttr:a.fn.prop||a.fn.attr,_focus:a.fn.focus,focus:function(b,c){return"number"==typeof b?this.each(function(){var d=this;setTimeout(function(){a(d).focus(),c&&c.call(d)},b)}):this._focus.apply(this,arguments)},scrollParent:function(){var b;return b=a.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.curCSS(this,"position",1))&&/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0),/fixed/.test(this.css("position"))||!b.length?a(document):b},zIndex:function(c){if(c!==b)return this.css("zIndex",c);if(this.length)for(var d,e,f=a(this[0]);f.length&&f[0]!==document;){if(d=f.css("position"),("absolute"===d||"relative"===d||"fixed"===d)&&(e=parseInt(f.css("zIndex"),10),!isNaN(e)&&0!==e))return e;f=f.parent()}return 0},disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),a.each(["Width","Height"],function(c,d){function e(b,c,d,e){return a.each(f,function(){c-=parseFloat(a.curCSS(b,"padding"+this,!0))||0,d&&(c-=parseFloat(a.curCSS(b,"border"+this+"Width",!0))||0),e&&(c-=parseFloat(a.curCSS(b,"margin"+this,!0))||0)}),c}var f="Width"===d?["Left","Right"]:["Top","Bottom"],g=d.toLowerCase(),h={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+d]=function(c){return c===b?h["inner"+d].call(this):this.each(function(){a(this).css(g,e(this,c)+"px")})},a.fn["outer"+d]=function(b,c){return"number"!=typeof b?h["outer"+d].call(this,b):this.each(function(){a(this).css(g,e(this,b,!0,c)+"px")})}}),a.extend(a.expr[":"],{data:function(b,c,d){return!!a.data(b,d[3])},focusable:function(b){return d(b,!isNaN(a.attr(b,"tabindex")))},tabbable:function(b){var c=a.attr(b,"tabindex"),e=isNaN(c);return(e||c>=0)&&d(b,!e)}}),a(function(){var b=document.body,c=b.appendChild(c=document.createElement("div"));a.extend(c.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),a.support.minHeight=100===c.offsetHeight,a.support.selectstart="onselectstart"in c,b.removeChild(c).style.display="none"}),a.extend(a.ui,{plugin:{add:function(b,c,d){var e=a.ui[b].prototype;for(var f in d)e.plugins[f]=e.plugins[f]||[],e.plugins[f].push([c,d[f]])},call:function(a,b,c){var d=a.plugins[b];if(d&&a.element[0].parentNode)for(var e=0;e<d.length;e++)a.options[d[e][0]]&&d[e][1].apply(a.element,c)}},contains:function(a,b){return document.compareDocumentPosition?16&a.compareDocumentPosition(b):a!==b&&a.contains(b)},hasScroll:function(b,c){if("hidden"===a(b).css("overflow"))return!1;var d=c&&"left"===c?"scrollLeft":"scrollTop",e=!1;return b[d]>0?!0:(b[d]=1,e=b[d]>0,b[d]=0,e)},isOverAxis:function(a,b,c){return a>b&&b+c>a},isOver:function(b,c,d,e,f,g){return a.ui.isOverAxis(b,d,f)&&a.ui.isOverAxis(c,e,g)}}))}(jQuery),function(a,b){if(a.cleanData){var c=a.cleanData;a.cleanData=function(b){for(var d,e=0;null!=(d=b[e]);e++)try{a(d).triggerHandler("remove")}catch(f){}c(b)}}else{var d=a.fn.remove;a.fn.remove=function(b,c){return this.each(function(){return c||(!b||a.filter(b,[this]).length)&&a("*",this).add([this]).each(function(){try{a(this).triggerHandler("remove")}catch(b){}}),d.call(a(this),b,c)})}}a.widget=function(b,c,d){var e,f=b.split(".")[0];b=b.split(".")[1],e=f+"-"+b,d||(d=c,c=a.Widget),a.expr[":"][e]=function(c){return!!a.data(c,b)},a[f]=a[f]||{},a[f][b]=function(a,b){arguments.length&&this._createWidget(a,b)};var g=new c;g.options=a.extend(!0,{},g.options),a[f][b].prototype=a.extend(!0,g,{namespace:f,widgetName:b,widgetEventPrefix:a[f][b].prototype.widgetEventPrefix||b,widgetBaseClass:e},d),a.widget.bridge(b,a[f][b])},a.widget.bridge=function(c,d){a.fn[c]=function(e){var f="string"==typeof e,g=Array.prototype.slice.call(arguments,1),h=this;return e=!f&&g.length?a.extend.apply(null,[!0,e].concat(g)):e,f&&"_"===e.charAt(0)?h:(f?this.each(function(){var d=a.data(this,c),f=d&&a.isFunction(d[e])?d[e].apply(d,g):d;return f!==d&&f!==b?(h=f,!1):void 0}):this.each(function(){var b=a.data(this,c);b?b.option(e||{})._init():a.data(this,c,new d(e,this))}),h)}},a.Widget=function(a,b){arguments.length&&this._createWidget(a,b)},a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(b,c){a.data(c,this.widgetName,this),this.element=a(c),this.options=a.extend(!0,{},this.options,this._getCreateOptions(),b);var d=this;this.element.bind("remove."+this.widgetName,function(){d.destroy()}),this._create(),this._trigger("create"),this._init()},_getCreateOptions:function(){return a.metadata&&a.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(c,d){var e=c;if(0===arguments.length)return a.extend({},this.options);if("string"==typeof c){if(d===b)return this.options[c];e={},e[c]=d}return this._setOptions(e),this},_setOptions:function(b){var c=this;return a.each(b,function(a,b){c._setOption(a,b)}),this},_setOption:function(a,b){return this.options[a]=b,"disabled"===a&&this.widget()[b?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",b),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(b,c,d){var e,f,g=this.options[b];if(d=d||{},c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),c.target=this.element[0],f=c.originalEvent,f)for(e in f)e in c||(c[e]=f[e]);return this.element.trigger(c,d),!(a.isFunction(g)&&g.call(this.element[0],c,d)===!1||c.isDefaultPrevented())}}}(jQuery),function(a,b){var c=!1;a(document).mouseup(function(a){c=!1}),a.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(a){return b._mouseDown(a)}).bind("click."+this.widgetName,function(c){return!0===a.data(c.target,b.widgetName+".preventClickEvent")?(a.removeData(c.target,b.widgetName+".preventClickEvent"),c.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName)},_mouseDown:function(b){if(!c){this._mouseStarted&&this._mouseUp(b),this._mouseDownEvent=b;var d=this,e=1==b.which,f="string"==typeof this.options.cancel&&b.target.nodeName?a(b.target).closest(this.options.cancel).length:!1;return e&&!f&&this._mouseCapture(b)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){d.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=this._mouseStart(b)!==!1,!this._mouseStarted)?(b.preventDefault(),!0):(!0===a.data(b.target,this.widgetName+".preventClickEvent")&&a.removeData(b.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(a){return d._mouseMove(a)},this._mouseUpDelegate=function(a){return d._mouseUp(a)},a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),b.preventDefault(),c=!0,!0)):!0}},_mouseMove:function(b){return!a.browser.msie||document.documentMode>=9||b.button?this._mouseStarted?(this._mouseDrag(b),b.preventDefault()):(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,b)!==!1,this._mouseStarted?this._mouseDrag(b):this._mouseUp(b)),!this._mouseStarted):this._mouseUp(b)},_mouseUp:function(b){return a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,b.target==this._mouseDownEvent.target&&a.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b)),!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(a){return this.mouseDelayMet},_mouseStart:function(a){},_mouseDrag:function(a){},_mouseStop:function(a){},_mouseCapture:function(a){return!0}})}(jQuery),function(a,b){a.widget("ui.draggable",a.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){"original"==this.options.helper&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},destroy:function(){return this.element.data("draggable")?(this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy(),this):void 0},_mouseCapture:function(b){var c=this.options;return this.helper||c.disabled||a(b.target).is(".ui-resizable-handle")?!1:(this.handle=this._getHandle(b),this.handle?(c.iframeFix&&a(c.iframeFix===!0?"iframe":c.iframeFix).each(function(){a('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(a(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(b){var c=this.options;return this.helper=this._createHelper(b),this._cacheHelperProportions(),a.ui.ddmanager&&(a.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(b),this.originalPageX=b.pageX,this.originalPageY=b.pageY,c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt),c.containment&&this._setContainment(),this._trigger("start",b)===!1?(this._clear(),!1):(this._cacheHelperProportions(),a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this.helper.addClass("ui-draggable-dragging"),this._mouseDrag(b,!0),a.ui.ddmanager&&a.ui.ddmanager.dragStart(this,b),!0)},_mouseDrag:function(b,c){if(this.position=this._generatePosition(b),this.positionAbs=this._convertPositionTo("absolute"),!c){var d=this._uiHash();if(this._trigger("drag",b,d)===!1)return this._mouseUp({}),!1;this.position=d.position}return this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px"),a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),!1},_mouseStop:function(b){var c=!1;if(a.ui.ddmanager&&!this.options.dropBehaviour&&(c=a.ui.ddmanager.drop(this,b)),this.dropped&&(c=this.dropped,this.dropped=!1),!(this.element[0]&&this.element[0].parentNode||"original"!=this.options.helper))return!1;if("invalid"==this.options.revert&&!c||"valid"==this.options.revert&&c||this.options.revert===!0||a.isFunction(this.options.revert)&&this.options.revert.call(this.element,c)){var d=this;a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){d._trigger("stop",b)!==!1&&d._clear()})}else this._trigger("stop",b)!==!1&&this._clear();return!1},_mouseUp:function(b){return this.options.iframeFix===!0&&a("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),a.ui.ddmanager&&a.ui.ddmanager.dragStop(this,b),a.ui.mouse.prototype._mouseUp.call(this,b)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(b){var c=!this.options.handle||!a(this.options.handle,this.element).length;return a(this.options.handle,this.element).find("*").andSelf().each(function(){this==b.target&&(c=!0)}),c},_createHelper:function(b){var c=this.options,d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b])):"clone"==c.helper?this.element.clone().removeAttr("id"):this.element;return d.parents("body").length||d.appendTo("parent"==c.appendTo?this.element[0].parentNode:c.appendTo),d[0]!=this.element[0]&&!/(fixed|absolute)/.test(d.css("position"))&&d.css("position","absolute"),d},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&a.browser.msie)&&(b={top:0,left:0}),{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var a=this.element.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b=this.options;if("parent"==b.containment&&(b.containment=this.helper[0].parentNode),"document"!=b.containment&&"window"!=b.containment||(this.containment=["document"==b.containment?0:a(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,"document"==b.containment?0:a(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,("document"==b.containment?0:a(window).scrollLeft())+a("document"==b.containment?document:window).width()-this.helperProportions.width-this.margins.left,("document"==b.containment?0:a(window).scrollTop())+(a("document"==b.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(b.containment)||b.containment.constructor==Array)b.containment.constructor==Array&&(this.containment=b.containment);else{var c=a(b.containment),d=c[0];if(!d)return;var e=(c.offset(),"hidden"!=a(d).css("overflow"));this.containment=[(parseInt(a(d).css("borderLeftWidth"),10)||0)+(parseInt(a(d).css("paddingLeft"),10)||0),(parseInt(a(d).css("borderTopWidth"),10)||0)+(parseInt(a(d).css("paddingTop"),10)||0),(e?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(a(d).css("borderLeftWidth"),10)||0)-(parseInt(a(d).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(a(d).css("borderTopWidth"),10)||0)-(parseInt(a(d).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=c}},_convertPositionTo:function(b,c){c||(c=this.position);var d="absolute"==b?1:-1,e=(this.options,"absolute"!=this.cssPosition||this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent),f=/(html|body)/i.test(e[0].tagName);return{top:c.top+this.offset.relative.top*d+this.offset.parent.top*d-(a.browser.safari&&a.browser.version<526&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollTop():f?0:e.scrollTop())*d),left:c.left+this.offset.relative.left*d+this.offset.parent.left*d-(a.browser.safari&&a.browser.version<526&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():f?0:e.scrollLeft())*d)}},_generatePosition:function(b){var c=this.options,d="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,e=/(html|body)/i.test(d[0].tagName),f=b.pageX,g=b.pageY;if(this.originalPosition){var h;if(this.containment){if(this.relative_container){var i=this.relative_container.offset();h=[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top]}else h=this.containment;b.pageX-this.offset.click.left<h[0]&&(f=h[0]+this.offset.click.left),b.pageY-this.offset.click.top<h[1]&&(g=h[1]+this.offset.click.top),b.pageX-this.offset.click.left>h[2]&&(f=h[2]+this.offset.click.left),b.pageY-this.offset.click.top>h[3]&&(g=h[3]+this.offset.click.top)}if(c.grid){var j=c.grid[1]?this.originalPageY+Math.round((g-this.originalPageY)/c.grid[1])*c.grid[1]:this.originalPageY;g=h&&(j-this.offset.click.top<h[1]||j-this.offset.click.top>h[3])?j-this.offset.click.top<h[1]?j+c.grid[1]:j-c.grid[1]:j;var k=c.grid[0]?this.originalPageX+Math.round((f-this.originalPageX)/c.grid[0])*c.grid[0]:this.originalPageX;f=h&&(k-this.offset.click.left<h[0]||k-this.offset.click.left>h[2])?k-this.offset.click.left<h[0]?k+c.grid[0]:k-c.grid[0]:k}}return{top:g-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(a.browser.safari&&a.browser.version<526&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollTop():e?0:d.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(a.browser.safari&&a.browser.version<526&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollLeft():e?0:d.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(b,c,d){return d=d||this._uiHash(),a.ui.plugin.call(this,b,[c,d]),"drag"==b&&(this.positionAbs=this._convertPositionTo("absolute")),a.Widget.prototype._trigger.call(this,b,c,d)},plugins:{},_uiHash:function(a){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),a.extend(a.ui.draggable,{version:"1.8.17"}),a.ui.plugin.add("draggable","connectToSortable",{start:function(b,c){var d=a(this).data("draggable"),e=d.options,f=a.extend({},c,{item:d.element});d.sortables=[],a(e.connectToSortable).each(function(){var c=a.data(this,"sortable");c&&!c.options.disabled&&(d.sortables.push({instance:c,shouldRevert:c.options.revert}),c.refreshPositions(),c._trigger("activate",b,f))})},stop:function(b,c){var d=a(this).data("draggable"),e=a.extend({},c,{item:d.element});a.each(d.sortables,function(){this.instance.isOver?(this.instance.isOver=0,d.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(b),this.instance.options.helper=this.instance.options._helper,"original"==d.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",b,e))})},drag:function(b,c){var d=a(this).data("draggable"),e=this;a.each(d.sortables,function(f){this.instance.positionAbs=d.positionAbs,this.instance.helperProportions=d.helperProportions,this.instance.offset.click=d.offset.click,this.instance._intersectsWith(this.instance.containerCache)?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=a(e).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return c.helper[0]},b.target=this.instance.currentItem[0],this.instance._mouseCapture(b,!0),this.instance._mouseStart(b,!0,!0),this.instance.offset.click.top=d.offset.click.top,this.instance.offset.click.left=d.offset.click.left,this.instance.offset.parent.left-=d.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=d.offset.parent.top-this.instance.offset.parent.top,d._trigger("toSortable",b),d.dropped=this.instance.element,d.currentItem=d.element,this.instance.fromOutside=d),this.instance.currentItem&&this.instance._mouseDrag(b)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",b,this.instance._uiHash(this.instance)),this.instance._mouseStop(b,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),d._trigger("fromSortable",b),d.dropped=!1)})}}),a.ui.plugin.add("draggable","cursor",{start:function(b,c){var d=a("body"),e=a(this).data("draggable").options;d.css("cursor")&&(e._cursor=d.css("cursor")),d.css("cursor",e.cursor)},stop:function(b,c){var d=a(this).data("draggable").options;d._cursor&&a("body").css("cursor",d._cursor);
}}),a.ui.plugin.add("draggable","opacity",{start:function(b,c){var d=a(c.helper),e=a(this).data("draggable").options;d.css("opacity")&&(e._opacity=d.css("opacity")),d.css("opacity",e.opacity)},stop:function(b,c){var d=a(this).data("draggable").options;d._opacity&&a(c.helper).css("opacity",d._opacity)}}),a.ui.plugin.add("draggable","scroll",{start:function(b,c){var d=a(this).data("draggable");d.scrollParent[0]!=document&&"HTML"!=d.scrollParent[0].tagName&&(d.overflowOffset=d.scrollParent.offset())},drag:function(b,c){var d=a(this).data("draggable"),e=d.options,f=!1;d.scrollParent[0]!=document&&"HTML"!=d.scrollParent[0].tagName?(e.axis&&"x"==e.axis||(d.overflowOffset.top+d.scrollParent[0].offsetHeight-b.pageY<e.scrollSensitivity?d.scrollParent[0].scrollTop=f=d.scrollParent[0].scrollTop+e.scrollSpeed:b.pageY-d.overflowOffset.top<e.scrollSensitivity&&(d.scrollParent[0].scrollTop=f=d.scrollParent[0].scrollTop-e.scrollSpeed)),e.axis&&"y"==e.axis||(d.overflowOffset.left+d.scrollParent[0].offsetWidth-b.pageX<e.scrollSensitivity?d.scrollParent[0].scrollLeft=f=d.scrollParent[0].scrollLeft+e.scrollSpeed:b.pageX-d.overflowOffset.left<e.scrollSensitivity&&(d.scrollParent[0].scrollLeft=f=d.scrollParent[0].scrollLeft-e.scrollSpeed))):(e.axis&&"x"==e.axis||(b.pageY-a(document).scrollTop()<e.scrollSensitivity?f=a(document).scrollTop(a(document).scrollTop()-e.scrollSpeed):a(window).height()-(b.pageY-a(document).scrollTop())<e.scrollSensitivity&&(f=a(document).scrollTop(a(document).scrollTop()+e.scrollSpeed))),e.axis&&"y"==e.axis||(b.pageX-a(document).scrollLeft()<e.scrollSensitivity?f=a(document).scrollLeft(a(document).scrollLeft()-e.scrollSpeed):a(window).width()-(b.pageX-a(document).scrollLeft())<e.scrollSensitivity&&(f=a(document).scrollLeft(a(document).scrollLeft()+e.scrollSpeed)))),f!==!1&&a.ui.ddmanager&&!e.dropBehaviour&&a.ui.ddmanager.prepareOffsets(d,b)}}),a.ui.plugin.add("draggable","snap",{start:function(b,c){var d=a(this).data("draggable"),e=d.options;d.snapElements=[],a(e.snap.constructor!=String?e.snap.items||":data(draggable)":e.snap).each(function(){var b=a(this),c=b.offset();this!=d.element[0]&&d.snapElements.push({item:this,width:b.outerWidth(),height:b.outerHeight(),top:c.top,left:c.left})})},drag:function(b,c){for(var d=a(this).data("draggable"),e=d.options,f=e.snapTolerance,g=c.offset.left,h=g+d.helperProportions.width,i=c.offset.top,j=i+d.helperProportions.height,k=d.snapElements.length-1;k>=0;k--){var l=d.snapElements[k].left,m=l+d.snapElements[k].width,n=d.snapElements[k].top,o=n+d.snapElements[k].height;if(g>l-f&&m+f>g&&i>n-f&&o+f>i||g>l-f&&m+f>g&&j>n-f&&o+f>j||h>l-f&&m+f>h&&i>n-f&&o+f>i||h>l-f&&m+f>h&&j>n-f&&o+f>j){if("inner"!=e.snapMode){var p=Math.abs(n-j)<=f,q=Math.abs(o-i)<=f,r=Math.abs(l-h)<=f,s=Math.abs(m-g)<=f;p&&(c.position.top=d._convertPositionTo("relative",{top:n-d.helperProportions.height,left:0}).top-d.margins.top),q&&(c.position.top=d._convertPositionTo("relative",{top:o,left:0}).top-d.margins.top),r&&(c.position.left=d._convertPositionTo("relative",{top:0,left:l-d.helperProportions.width}).left-d.margins.left),s&&(c.position.left=d._convertPositionTo("relative",{top:0,left:m}).left-d.margins.left)}var t=p||q||r||s;if("outer"!=e.snapMode){var p=Math.abs(n-i)<=f,q=Math.abs(o-j)<=f,r=Math.abs(l-g)<=f,s=Math.abs(m-h)<=f;p&&(c.position.top=d._convertPositionTo("relative",{top:n,left:0}).top-d.margins.top),q&&(c.position.top=d._convertPositionTo("relative",{top:o-d.helperProportions.height,left:0}).top-d.margins.top),r&&(c.position.left=d._convertPositionTo("relative",{top:0,left:l}).left-d.margins.left),s&&(c.position.left=d._convertPositionTo("relative",{top:0,left:m-d.helperProportions.width}).left-d.margins.left)}!d.snapElements[k].snapping&&(p||q||r||s||t)&&d.options.snap.snap&&d.options.snap.snap.call(d.element,b,a.extend(d._uiHash(),{snapItem:d.snapElements[k].item})),d.snapElements[k].snapping=p||q||r||s||t}else d.snapElements[k].snapping&&d.options.snap.release&&d.options.snap.release.call(d.element,b,a.extend(d._uiHash(),{snapItem:d.snapElements[k].item})),d.snapElements[k].snapping=!1}}}),a.ui.plugin.add("draggable","stack",{start:function(b,c){var d=a(this).data("draggable").options,e=a.makeArray(a(d.stack)).sort(function(b,c){return(parseInt(a(b).css("zIndex"),10)||0)-(parseInt(a(c).css("zIndex"),10)||0)});if(e.length){var f=parseInt(e[0].style.zIndex)||0;a(e).each(function(a){this.style.zIndex=f+a}),this[0].style.zIndex=f+e.length}}}),a.ui.plugin.add("draggable","zIndex",{start:function(b,c){var d=a(c.helper),e=a(this).data("draggable").options;d.css("zIndex")&&(e._zIndex=d.css("zIndex")),d.css("zIndex",e.zIndex)},stop:function(b,c){var d=a(this).data("draggable").options;d._zIndex&&a(c.helper).css("zIndex",d._zIndex)}})}(jQuery),function(a,b){var c=5;a.widget("ui.slider",a.ui.mouse,{widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var b=this,d=this.options,e=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),f="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",g=d.values&&d.values.length||1,h=[];this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"+(d.disabled?" ui-slider-disabled ui-disabled":"")),this.range=a([]),d.range&&(d.range===!0&&(d.values||(d.values=[this._valueMin(),this._valueMin()]),d.values.length&&2!==d.values.length&&(d.values=[d.values[0],d.values[0]])),this.range=a("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+("min"===d.range||"max"===d.range?" ui-slider-range-"+d.range:"")));for(var i=e.length;g>i;i+=1)h.push(f);this.handles=e.add(a(h.join("")).appendTo(b.element)),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click(function(a){a.preventDefault()}).hover(function(){d.disabled||a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")}).focus(function(){d.disabled?a(this).blur():(a(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),a(this).addClass("ui-state-focus"))}).blur(function(){a(this).removeClass("ui-state-focus")}),this.handles.each(function(b){a(this).data("index.ui-slider-handle",b)}),this.handles.keydown(function(d){var e,f,g,h,i=!0,j=a(this).data("index.ui-slider-handle");if(!b.options.disabled){switch(d.keyCode){case a.ui.keyCode.HOME:case a.ui.keyCode.END:case a.ui.keyCode.PAGE_UP:case a.ui.keyCode.PAGE_DOWN:case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(i=!1,!b._keySliding&&(b._keySliding=!0,a(this).addClass("ui-state-active"),e=b._start(d,j),e===!1))return}switch(h=b.options.step,f=g=b.options.values&&b.options.values.length?b.values(j):b.value(),d.keyCode){case a.ui.keyCode.HOME:g=b._valueMin();break;case a.ui.keyCode.END:g=b._valueMax();break;case a.ui.keyCode.PAGE_UP:g=b._trimAlignValue(f+(b._valueMax()-b._valueMin())/c);break;case a.ui.keyCode.PAGE_DOWN:g=b._trimAlignValue(f-(b._valueMax()-b._valueMin())/c);break;case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:if(f===b._valueMax())return;g=b._trimAlignValue(f+h);break;case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(f===b._valueMin())return;g=b._trimAlignValue(f-h)}return b._slide(d,j,g),i}}).keyup(function(c){var d=a(this).data("index.ui-slider-handle");b._keySliding&&(b._keySliding=!1,b._stop(c,d),b._change(c,d),a(this).removeClass("ui-state-active"))}),this._refreshValue(),this._animateOff=!1},destroy:function(){return this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider"),this._mouseDestroy(),this},_mouseCapture:function(b){var c,d,e,f,g,h,i,j,k,l=this.options;return l.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),c={x:b.pageX,y:b.pageY},d=this._normValueFromMouse(c),e=this._valueMax()-this._valueMin()+1,g=this,this.handles.each(function(b){var c=Math.abs(d-g.values(b));e>c&&(e=c,f=a(this),h=b)}),l.range===!0&&this.values(1)===l.min&&(h+=1,f=a(this.handles[h])),i=this._start(b,h),i===!1?!1:(this._mouseSliding=!0,g._handleIndex=h,f.addClass("ui-state-active").focus(),j=f.offset(),k=!a(b.target).parents().andSelf().is(".ui-slider-handle"),this._clickOffset=k?{left:0,top:0}:{left:b.pageX-j.left-f.width()/2,top:b.pageY-j.top-f.height()/2-(parseInt(f.css("borderTopWidth"),10)||0)-(parseInt(f.css("borderBottomWidth"),10)||0)+(parseInt(f.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(b,h,d),this._animateOff=!0,!0))},_mouseStart:function(a){return!0},_mouseDrag:function(a){var b={x:a.pageX,y:a.pageY},c=this._normValueFromMouse(b);return this._slide(a,this._handleIndex,c),!1},_mouseStop:function(a){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(a,this._handleIndex),this._change(a,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(a){var b,c,d,e,f;return"horizontal"===this.orientation?(b=this.elementSize.width,c=a.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(b=this.elementSize.height,c=a.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),d=c/b,d>1&&(d=1),0>d&&(d=0),"vertical"===this.orientation&&(d=1-d),e=this._valueMax()-this._valueMin(),f=this._valueMin()+d*e,this._trimAlignValue(f)},_start:function(a,b){var c={handle:this.handles[b],value:this.value()};return this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values()),this._trigger("start",a,c)},_slide:function(a,b,c){var d,e,f;this.options.values&&this.options.values.length?(d=this.values(b?0:1),2===this.options.values.length&&this.options.range===!0&&(0===b&&c>d||1===b&&d>c)&&(c=d),c!==this.values(b)&&(e=this.values(),e[b]=c,f=this._trigger("slide",a,{handle:this.handles[b],value:c,values:e}),d=this.values(b?0:1),f!==!1&&this.values(b,c,!0))):c!==this.value()&&(f=this._trigger("slide",a,{handle:this.handles[b],value:c}),f!==!1&&this.value(c))},_stop:function(a,b){var c={handle:this.handles[b],value:this.value()};this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values()),this._trigger("stop",a,c)},_change:function(a,b){if(!this._keySliding&&!this._mouseSliding){var c={handle:this.handles[b],value:this.value()};this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values()),this._trigger("change",a,c)}},value:function(a){return arguments.length?(this.options.value=this._trimAlignValue(a),this._refreshValue(),this._change(null,0),void 0):this._value()},values:function(b,c){var d,e,f;if(arguments.length>1)this.options.values[b]=this._trimAlignValue(c),this._refreshValue(),this._change(null,b);else{if(!arguments.length)return this._values();if(!a.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(b):this.value();for(d=this.options.values,e=arguments[0],f=0;f<d.length;f+=1)d[f]=this._trimAlignValue(e[f]),this._change(null,f);this._refreshValue()}},_setOption:function(b,c){var d,e=0;switch(a.isArray(this.options.values)&&(e=this.options.values.length),a.Widget.prototype._setOption.apply(this,arguments),b){case"disabled":c?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.propAttr("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.propAttr("disabled",!1),this.element.removeClass("ui-disabled"));break;case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),d=0;e>d;d+=1)this._change(null,d);this._animateOff=!1}},_value:function(){var a=this.options.value;return a=this._trimAlignValue(a)},_values:function(a){var b,c,d;if(arguments.length)return b=this.options.values[a],b=this._trimAlignValue(b);for(c=this.options.values.slice(),d=0;d<c.length;d+=1)c[d]=this._trimAlignValue(c[d]);return c},_trimAlignValue:function(a){if(a<=this._valueMin())return this._valueMin();if(a>=this._valueMax())return this._valueMax();var b=this.options.step>0?this.options.step:1,c=(a-this._valueMin())%b,d=a-c;return 2*Math.abs(c)>=b&&(d+=c>0?b:-b),parseFloat(d.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var b,c,d,e,f,g=this.options.range,h=this.options,i=this,j=this._animateOff?!1:h.animate,k={};this.options.values&&this.options.values.length?this.handles.each(function(d,e){b=(i.values(d)-i._valueMin())/(i._valueMax()-i._valueMin())*100,k["horizontal"===i.orientation?"left":"bottom"]=b+"%",a(this).stop(1,1)[j?"animate":"css"](k,h.animate),i.options.range===!0&&("horizontal"===i.orientation?(0===d&&i.range.stop(1,1)[j?"animate":"css"]({left:b+"%"},h.animate),1===d&&i.range[j?"animate":"css"]({width:b-c+"%"},{queue:!1,duration:h.animate})):(0===d&&i.range.stop(1,1)[j?"animate":"css"]({bottom:b+"%"},h.animate),1===d&&i.range[j?"animate":"css"]({height:b-c+"%"},{queue:!1,duration:h.animate}))),c=b}):(d=this.value(),e=this._valueMin(),f=this._valueMax(),b=f!==e?(d-e)/(f-e)*100:0,k["horizontal"===i.orientation?"left":"bottom"]=b+"%",this.handle.stop(1,1)[j?"animate":"css"](k,h.animate),"min"===g&&"horizontal"===this.orientation&&this.range.stop(1,1)[j?"animate":"css"]({width:b+"%"},h.animate),"max"===g&&"horizontal"===this.orientation&&this.range[j?"animate":"css"]({width:100-b+"%"},{queue:!1,duration:h.animate}),"min"===g&&"vertical"===this.orientation&&this.range.stop(1,1)[j?"animate":"css"]({height:b+"%"},h.animate),"max"===g&&"vertical"===this.orientation&&this.range[j?"animate":"css"]({height:100-b+"%"},{queue:!1,duration:h.animate}))}}),a.extend(a.ui.slider,{version:"1.8.17"})}(jQuery);var parentObj,baseUrl,gridVisible=!1,baseLogoImage=null,base_color1,base_color2,base_color3,isSvg=!1,actualLogoUrl,actualBgUrl;